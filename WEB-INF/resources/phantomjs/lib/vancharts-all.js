/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */

//Copyright (c) 2013, Baidu Inc.
//    All rights reserved.
//
//    Redistribution and use of this software in source and binary forms, with or
//    without modification, are permitted provided that the following conditions
//are met:
//
//    Redistributions of source code must retain the above copyright notice, this
//list of conditions and the following disclaimer.
//
//    Redistributions in binary form must reproduce the above copyright notice,
//    this list of conditions and the following disclaimer in the documentation
//and/or other materials provided with the distribution.
//
//    Neither the name of Baidu Inc. nor the names of its contributors may be used
//to endorse or promote products derived from this software without specific
//prior written permission of Baidu Inc.
//
//    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
//AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
//IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
//DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
//ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
//(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
//LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
//ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
//(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
//SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

// document.body.appendChild(c);

//
//Copyright (c) 2014 Ga?tan Renaudeau
//
//Permission is hereby granted, free of charge, to any person
//obtaining a copy of this software and associated documentation
//files (the "Software"), to deal in the Software without
//restriction, including without limitation the rights to use,
//    copy, modify, merge, publish, distribute, sublicense, and/or sell
//copies of the Software, and to permit persons to whom the
//Software is furnished to do so, subject to the following
//conditions:
//
//    The above copyright notice and this permission notice shall be
//included in all copies or substantial portions of the Software.
//
//    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
//    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
//OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
//NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
//HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
//    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
//FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
//OTHER DEALINGS IN THE SOFTWARE.

!function(t,e){"function"==typeof define&&define.amd?define([],e):t.VanCharts=e()}(this,function(){var t,e,i;!function(n){function r(t,e){return x.call(t,e)}function a(t,e){var i,n,r,a,o,s,l,h,u,c,d,f=e&&e.split("/"),p=y.map,g=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),o=t.length-1,y.nodeIdCompat&&T.test(t[o])&&(t[o]=t[o].replace(T,"")),t=f.slice(0,f.length-1).concat(t),u=0;u<t.length;u+=1)if(d=t[u],"."===d)t.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||g)&&p){for(i=t.split("/"),u=i.length;u>0;u-=1){if(n=i.slice(0,u).join("/"),f)for(c=f.length;c>0;c-=1)if(r=p[f.slice(0,c).join("/")],r&&(r=r[n])){a=r,s=u;break}if(a)break;!l&&g&&g[n]&&(l=g[n],h=u)}!a&&l&&(a=l,s=h),a&&(i.splice(0,s,a),t=i.join("/"))}return t}function o(t,e){return function(){var i=b.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),f.apply(n,i.concat([t,e]))}}function s(t){return function(e){return a(e,t)}}function l(t){return function(e){m[t]=e}}function h(t){if(r(v,t)){var e=v[t];delete v[t],_[t]=!0,d.apply(n,e)}if(!r(m,t)&&!r(_,t))throw new Error("No "+t);return m[t]}function u(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function c(t){return function(){return y&&y.config&&y.config[t]||{}}}var d,f,p,g,m={},v={},y={},_={},x=Object.prototype.hasOwnProperty,b=[].slice,T=/\.js$/;p=function(t,e){var i,n=u(t),r=n[0];return t=n[1],r&&(r=a(r,e),i=h(r)),r?t=i&&i.normalize?i.normalize(t,s(e)):a(t,e):(t=a(t,e),n=u(t),r=n[0],t=n[1],r&&(i=h(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:i}},g={require:function(t){return o(t)},exports:function(t){var e=m[t];return"undefined"!=typeof e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:c(t)}}},d=function(t,e,i,a){var s,u,c,d,f,y,x=[],b=typeof i;if(a=a||t,"undefined"===b||"function"===b){for(e=!e.length&&i.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(d=p(e[f],a),u=d.f,"require"===u)x[f]=g.require(t);else if("exports"===u)x[f]=g.exports(t),y=!0;else if("module"===u)s=x[f]=g.module(t);else if(r(m,u)||r(v,u)||r(_,u))x[f]=h(u);else{if(!d.p)throw new Error(t+" missing "+u);d.p.load(d.n,o(a,!0),l(u),{}),x[f]=m[u]}c=i?i.apply(m[t],x):void 0,t&&(s&&s.exports!==n&&s.exports!==m[t]?m[t]=s.exports:c===n&&y||(m[t]=c))}else t&&(m[t]=i)},t=e=f=function(t,e,i,r,a){if("string"==typeof t)return g[t]?g[t](e):h(p(t,e).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!e)return;e.splice?(t=e,e=i,i=null):t=n}return e=e||function(){},"function"==typeof i&&(i=r,r=a),r?d(n,t,e,i):setTimeout(function(){d(n,t,e,i)},4),f},f.config=function(t){return f(t)},t._defined=m,i=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),r(m,t)||r(v,t)||(v[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),function(t,e,n,r){"use strict";function a(t,e,i){return setTimeout(u(t,i),e)}function o(t,e,i){return Array.isArray(t)?(s(t,i[e],i),!0):!1}function s(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function l(e,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=t.console&&(t.console.warn||t.console.log);return a&&a.call(t.console,r,n),e.apply(this,arguments)}}function h(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&dt(n,i)}function u(t,e){return function(){return t.apply(e,arguments)}}function c(t,e){return typeof t==gt?t.apply(e?e[0]||r:r,e):t}function d(t,e){return t===r?e:t}function f(t,e,i){s(v(e),function(e){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)})}function p(t,e,i){s(v(e),function(e){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)})}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function y(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function _(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],a=0;a<t.length;){var o=e?t[a][e]:t[a];y(r,o)<0&&n.push(t[a]),r[a]=o,a++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function b(t,e){for(var i,n,a=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<ft.length;){if(i=ft[o],n=i?i+a:e,n in t)return n;o++}return r}function T(){return At++}function A(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}function L(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&i.handler(e)},this.init()}function C(t){var e,i=t.options.inputClass;return new(e=i?i:Pt?H:Mt?z:Ct?W:N)(t,P)}function P(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,a=e&Rt&&n-r===0,o=e&(Bt|Gt)&&n-r===0;i.isFirst=!!a,i.isFinal=!!o,a&&(t.session={}),i.eventType=e,M(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function M(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=S(e)),r>1&&!i.firstMultiple?i.firstMultiple=S(e):1===r&&(i.firstMultiple=!1);var a=i.firstInput,o=i.firstMultiple,s=o?o.center:a.center,l=e.center=O(n);e.timeStamp=xt(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=B(s,l),e.distance=D(s,l),E(i,e),e.offsetDirection=R(e.deltaX,e.deltaY);var h=k(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=_t(h.x)>_t(h.y)?h.x:h.y,e.scale=o?I(o.pointers,n):1,e.rotation=o?G(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,w(i,e);var u=t.element;g(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function E(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},a=t.prevInput||{};(e.eventType===Rt||a.eventType===Bt)&&(r=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function w(t,e){var i,n,a,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=Gt&&(l>kt||s.velocity===r)){var h=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,c=k(l,h,u);n=c.x,a=c.y,i=_t(c.x)>_t(c.y)?c.x:c.y,o=R(h,u),t.lastInterval=e}else i=s.velocity,n=s.velocityX,a=s.velocityY,o=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=a,e.direction=o}function S(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:yt(t.pointers[i].clientX),clientY:yt(t.pointers[i].clientY)},i++;return{timeStamp:xt(),pointers:e,center:O(e),deltaX:t.deltaX,deltaY:t.deltaY}}function O(t){var e=t.length;if(1===e)return{x:yt(t[0].clientX),y:yt(t[0].clientY)};for(var i=0,n=0,r=0;e>r;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:yt(i/e),y:yt(n/e)}}function k(t,e,i){return{x:e/t||0,y:i/t||0}}function R(t,e){return t===e?It:_t(t)>=_t(e)?0>t?Nt:Ht:0>e?Ft:Ut}function D(t,e,i){i||(i=Xt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function B(t,e,i){i||(i=Xt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function G(t,e){return B(e[1],e[0],Yt)+B(t[1],t[0],Yt)}function I(t,e){return D(e[0],e[1],Yt)/D(t[0],t[1],Yt)}function N(){this.evEl=Qt,this.evWin=Zt,this.pressed=!1,L.apply(this,arguments)}function H(){this.evEl=$t,this.evWin=te,L.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function F(){this.evTarget=ie,this.evWin=ne,this.started=!1,L.apply(this,arguments)}function U(t,e){var i=_(t.touches),n=_(t.changedTouches);return e&(Bt|Gt)&&(i=x(i.concat(n),"identifier",!0)),[i,n]}function z(){this.evTarget=ae,this.targetIds={},L.apply(this,arguments)}function V(t,e){var i=_(t.touches),n=this.targetIds;if(e&(Rt|Dt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,a,o=_(t.changedTouches),s=[],l=this.target;if(a=i.filter(function(t){return g(t.target,l)}),e===Rt)for(r=0;r<a.length;)n[a[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&s.push(o[r]),e&(Bt|Gt)&&delete n[o[r].identifier],r++;return s.length?[x(a.concat(s),"identifier",!0),s]:void 0}function W(){L.apply(this,arguments);var t=u(this.handler,this);this.touch=new z(this.manager,t),this.mouse=new N(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function X(t,e){t&Rt?(this.primaryTouch=e.changedPointers[0].identifier,Y.call(this,e)):t&(Bt|Gt)&&Y.call(this,e)}function Y(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,r=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(r,oe)}}function q(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],a=Math.abs(e-r.x),o=Math.abs(i-r.y);if(se>=a&&se>=o)return!0}return!1}function Q(t,e){this.manager=t,this.set(e)}function Z(t){if(m(t,fe))return fe;var e=m(t,pe),i=m(t,ge);return e&&i?de:e||i?e?pe:ge:m(t,de)?de:ce}function K(){if(!he)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=i?t.CSS.supports("touch-action",n):!0}),e}function j(t){this.options=dt({},this.defaults,t||{}),this.id=T(),this.manager=null,this.options.enable=d(this.options.enable,!0),this.state=ve,this.simultaneous={},this.requireFail=[]}function J(t){return t&Te?"cancel":t&xe?"end":t&_e?"move":t&ye?"start":""}function $(t){return t==Ut?"down":t==Ft?"up":t==Nt?"left":t==Ht?"right":""}function tt(t,e){var i=e.manager;return i?i.get(t):t}function et(){j.apply(this,arguments)}function it(){et.apply(this,arguments),this.pX=null,this.pY=null}function nt(){et.apply(this,arguments)}function rt(){j.apply(this,arguments),this._timer=null,this._input=null}function at(){et.apply(this,arguments)}function ot(){et.apply(this,arguments)}function st(){j.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function lt(t,e){return e=e||{},e.recognizers=d(e.recognizers,lt.defaults.preset),new ht(t,e)}function ht(t,e){this.options=dt({},lt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=C(this),this.touchAction=new Q(this,this.options.touchAction),ut(this,!0),s(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ut(t,e){var i=t.element;if(i.style){var n;s(t.options.cssProps,function(r,a){n=b(i.style,a),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function ct(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var dt,ft=["","webkit","Moz","MS","ms","o"],pt=e.createElement("div"),gt="function",mt=function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},vt=!t.SVGSVGElement,yt=Math.round,_t=Math.abs,xt=Date.now;dt="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==r&&null!==n)for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])}return e}:Object.assign;var bt=l(function(t,e,i){for(var n=Object.keys(e),a=0;a<n.length;)(!i||i&&t[n[a]]===r)&&(t[n[a]]=e[n[a]]),a++;return t},"extend","Use `assign`."),Tt=l(function(t,e){return bt(t,e,!0)},"merge","Use `assign`."),At=1,Lt=/mobile|tablet|ip(ad|hone|od)|android/i,Ct="ontouchstart"in t,Pt=b(t,"PointerEvent")!==r,Mt=Ct&&Lt.test(navigator.userAgent),Et="touch",wt="pen",St="mouse",Ot="kinect",kt=25,Rt=1,Dt=2,Bt=4,Gt=8,It=1,Nt=2,Ht=4,Ft=8,Ut=16,zt=Nt|Ht,Vt=Ft|Ut,Wt=zt|Vt,Xt=["x","y"],Yt=["clientX","clientY"];L.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(A(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(A(this.element),this.evWin,this.domHandler)}};var qt={mousedown:Rt,mousemove:Dt,mouseup:Bt},Qt="mousedown mousemove mouseout mouseover",Zt="mousemove mouseup";vt&&(Qt="mousedown mousemove mouseout mouseover mouseup",Zt="mousemove"),h(N,L,{handler:function(t){var e={pointers:[t],changedPointers:[t],pointerType:St,srcEvent:t},i=qt[t.type],n=vt?1===t.button:0===t.button;if(i&Rt&&n&&(this.pressed=!0),i&Dt&&(vt?!this.pressed:1!==t.which)&&(i=Bt),this.pressed)i&Bt&&(this.pressed=!1),this.callback(this.manager,i,e);else{var r=this.manager.handlers[t.type]&&this.manager.handlers[t.type].slice();if(r&&r.length)for(var a=0;a<r.length;)r[a](e),a++}}});var Kt={pointerdown:Rt,pointermove:Dt,pointerup:Bt,pointercancel:Gt,pointerout:Gt},jt={2:Et,3:wt,4:St,5:Ot},Jt="mousemove mouseout mouseover",$t="pointerdown",te="pointermove pointerup pointercancel "+Jt;t.MSPointerEvent&&!t.PointerEvent&&($t="MSPointerDown "+Jt,te="MSPointerMove MSPointerUp MSPointerCancel"),h(H,L,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=Kt[n],a=jt[t.pointerType]||t.pointerType,o=a==Et,s=y(e,t.pointerId,"pointerId");r&Rt&&(0===t.button||o)?0>s&&(e.push(t),s=e.length-1):r&(Bt|Gt)&&(i=!0);var l={pointers:e,changedPointers:[t],pointerType:a,srcEvent:t};if(0>s){if(-1!=Jt.indexOf(t.type)){var h=this.manager.handlers[t.type]&&this.manager.handlers[t.type].slice();if(h&&h.length)for(var u=0;u<h.length;)h[u](l),u++}}else e[s]=t,this.callback(this.manager,r,l),i&&e.splice(s,1)}});var ee={touchstart:Rt,touchmove:Dt,touchend:Bt,touchcancel:Gt},ie="touchstart",ne="touchstart touchmove touchend touchcancel";h(F,L,{handler:function(t){var e=ee[t.type];if(e===Rt&&(this.started=!0),this.started){var i=U.call(this,t,e);e&(Bt|Gt)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Et,srcEvent:t})}}});var re={touchstart:Rt,touchmove:Dt,touchend:Bt,touchcancel:Gt},ae="touchstart touchmove touchend touchcancel";h(z,L,{handler:function(t){var e=re[t.type],i=V.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Et,srcEvent:t})}});var oe=2500,se=25;h(W,L,{handler:function(t,e,i){var n=i.pointerType==Et,r=i.pointerType==St;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)X.call(this,e,i);else if(r&&q.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var le=b(pt.style,"touchAction"),he=le!==r,ue="compute",ce="auto",de="manipulation",fe="none",pe="pan-x",ge="pan-y",me=K();Q.prototype={set:function(t){t==ue&&(t=this.compute()),he&&this.manager.element.style&&me[t]&&(this.manager.element.style[le]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Z(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection,n=this.manager.options._handler,r=n&&n.preventDefault(t)&&!n.vanchart.isForceBubble();if(r||this.manager.session.prevented)return void mt(e);var a=this.actions,o=m(a,fe)&&!me[fe],s=m(a,ge)&&!me[ge],l=m(a,pe)&&!me[pe];if(o){var h=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(h&&u&&c)return}return l&&s?void 0:o||s&&i&zt||l&&i&Vt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,mt(t)}};var ve=1,ye=2,_e=4,xe=8,be=xe,Te=16,Ae=32;j.prototype={defaults:{},set:function(t){return dt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=tt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=tt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=tt(t,this),-1===y(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=tt(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;xe>n&&e(i.options.event+J(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=xe&&e(i.options.event+J(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=Ae)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ae|ve)))return!1;t++}return!0},recognize:function(t){var e=dt({},t);return c(this.options.enable,[this,e])?(this.state&(be|Te|Ae)&&(this.state=ve),this.state=this.process(e),void(this.state&(ye|_e|xe|Te)&&this.tryEmit(e))):(this.reset(),void(this.state=Ae))},process:function(t){},getTouchAction:function(){},reset:function(){}},h(et,j,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(ye|_e),r=this.attrTest(t);return n&&(i&Gt||!r)?e|Te:n||r?i&Bt?e|xe:e&ye?e|_e:ye:Ae}}),h(it,et,{defaults:{event:"pan",threshold:10,pointers:1,direction:Wt},getTouchAction:function(){var t=this.options.direction,e=[];return t&zt&&e.push(ge),t&Vt&&e.push(pe),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,a=t.deltaX,o=t.deltaY,s=this.manager.options._handler,l=s&&s.preventDefault(t);return r&e.direction||(e.direction&zt?(r=0===a?It:0>a?Nt:Ht,i=a!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?It:0>o?Ft:Ut,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,l&&i&&n>e.threshold&&r&e.direction},attrTest:function(t){return et.prototype.attrTest.call(this,t)&&(this.state&ye||!(this.state&ye)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=$(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),h(nt,et,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[fe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ye)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),h(rt,j,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ce]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Bt|Gt)&&!r)this.reset();else if(t.eventType&Rt)this.reset(),this._timer=a(function(){this.state=be,this.tryEmit()},e.time,this);else if(t.eventType&Bt)return be;return Ae},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===be&&(t&&t.eventType&Bt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=xt(),this.manager.emit(this.options.event,this._input)))}}),h(at,et,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[fe]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ye)}}),h(ot,et,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:zt|Vt,pointers:1},getTouchAction:function(){return it.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(zt|Vt)?e=t.overallVelocity:i&zt?e=t.overallVelocityX:i&Vt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&Bt},emit:function(t){var e=$(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(st,j,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[de]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Rt&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=Bt)return this.failTimeout();var o=this.pTime?t.timeStamp-this.pTime<e.interval:!0,s=!this.pCenter||D(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t;var l=this.count%e.taps;if(0===l)return this.hasRequireFailures()?(this._timer=a(function(){this.state=be,this.tryEmit()},e.interval,this),ye):be}return Ae},failTimeout:function(){return this._timer=a(function(){this.state=Ae},this.options.interval,this),Ae},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==be&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),lt.VERSION="2.0.7",lt.defaults={domEvents:!1,touchAction:ue,enable:!0,inputTarget:null,inputClass:null,preset:[[at,{enable:!1}],[nt,{enable:!1},["rotate"]],[ot,{direction:zt}],[it,{direction:zt},["swipe"]],[st],[st,{event:"doubletap",taps:2},["tap"]],[rt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Le=1,Ce=2;ht.prototype={set:function(t){return dt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?Ce:Le},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&be)&&(r=e.curRecognizer=null);for(var a=0;a<n.length;)i=n[a],e.stopped===Ce||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(ye|_e|xe)&&(r=e.curRecognizer=i),a++}},get:function(t){if(t instanceof j)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=y(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var i=this.handlers;return s(v(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==r){var i=this.handlers;return s(v(t),function(t){e?i[t]&&i[t].splice(y(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&ct(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){mt(e.srcEvent)};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ut(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dt(lt,{INPUT_START:Rt,INPUT_MOVE:Dt,INPUT_END:Bt,INPUT_CANCEL:Gt,STATE_POSSIBLE:ve,STATE_BEGAN:ye,STATE_CHANGED:_e,STATE_ENDED:xe,STATE_RECOGNIZED:be,STATE_CANCELLED:Te,STATE_FAILED:Ae,DIRECTION_NONE:It,DIRECTION_LEFT:Nt,DIRECTION_RIGHT:Ht,DIRECTION_UP:Ft,DIRECTION_DOWN:Ut,DIRECTION_HORIZONTAL:zt,DIRECTION_VERTICAL:Vt,DIRECTION_ALL:Wt,Manager:ht,Input:L,TouchAction:Q,TouchInput:z,MouseInput:N,PointerEventInput:H,TouchMouseInput:W,SingleTouchInput:F,Recognizer:j,AttrRecognizer:et,Tap:st,Pan:it,Swipe:ot,Pinch:nt,Rotate:at,Press:rt,on:f,off:p,each:s,merge:Tt,extend:bt,assign:dt,inherit:h,bindFn:u,prefixed:b});var Pe="undefined"!=typeof t?t:"undefined"!=typeof self?self:{};Pe.Hammer=lt,"function"==typeof i&&i.amd?i("hammer",[],function(){return lt}):"undefined"!=typeof module&&module.exports?module.exports=lt:t[n]=lt}(window,document,"Hammer"),i("utils/ColorUtils",[],function(){function t(t){return String(t).replace(/\s+/g,"")}function e(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}function i(t,e){if("function"!=typeof e)throw new TypeError;for(var i=t?t.length:0,n=0;i>n;n++)t[n]=e(t[n]);return t}function n(n){if(y[n]&&(n=y[n]),_[n])return _[n].slice();if(n=t(n),/^#[\da-f]{3}$/i.test(n)){n=parseInt(n.slice(1),16);var r=(3840&n)<<8,a=(240&n)<<4,o=15&n;n="#"+((1<<24)+(r<<4)+r+(a<<4)+a+(o<<4)+o).toString(16).slice(1)}var s,l,h,r=n.match(x),u=[];if(r[2])s=r[2].replace("#","").split(""),h=[s[0]+s[1],s[2]+s[3],s[4]+s[5]],u=i(h,function(t){return e(parseInt(t,16),[0,255])});else if(r[4]){var c=r[4].split(",");l=c[3],h=c.slice(0,3),u=i(h,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e(t,[0,255])}),"undefined"!=typeof l&&u.push(e(parseFloat(l),[0,1]))}return 3===u.length&&u.push(1),_[n]=u.slice(),u}function r(t,n){if(n=n||"rgb",t&&(3===t.length||4===t.length)){if(t=i(t,function(t){return t>1?Math.ceil(t):t}),n.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(n.indexOf("hs")>-1){var r=i(t.slice(1,3),function(t){return t+"%"});t[1]=r[0],t[2]=r[1]}return n.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=e(t[3],[0,1]),n+"("+t.slice(0,4).join(", ")+")"):n+"("+t.slice(0,3).join(", ")+")"}}function a(t){for(var i=n(t),a=[],o=0;3>o;o++){var s=i[o];128>=s?a.push(e(s-(255-s)*(255-2*s)/(2*s),[0,255])):a.push(e(s+s*(2*s-255)/(2*(255-s)),[0,255]))}var l=[];for(o=0;3>o;o++)l.push(Math.round(.65*i[o]+.35*a[o]));return r(l,"rgb")}function o(t,e){var i=n(t);i.length=3;for(var a=0;3>a;a++)i[a]=parseInt(i[a]/e,10);return r(i,"rgb")}function s(t){var e=n(t);e.length=3;for(var i=0;2>i;i++)e[i]=parseInt(.95*e[i],10);return r(e,"rgb")}function l(t,e){var i=n(t);return i[3]=e,r(i,"rgba")}function h(t,e,i,a){var o=n(t),s=d(o[0],o[1],o[2]);s[0]+=e,s[1]+=i,s[2]+=a;var l=u(s[0],s[1],s[2]);return r(l,"rgb")}function u(t,e,i){e=Math.min(1,Math.max(0,e)),i=Math.min(1,Math.max(0,i));var n=0,r=0,a=0;if(0===e)n=r=a=255*i+.5;else{var o=6*(t-Math.floor(t)),s=o-Math.floor(o),l=i*(1-e),h=i*(1-e*s),u=i*(1-e*(1-s));switch(Math.floor(o)){case 0:n=255*i+.5,r=255*u+.5,a=255*l+.5;break;case 1:n=255*h+.5,r=255*i+.5,a=255*l+.5;break;case 2:n=255*l+.5,r=255*i+.5,a=255*u+.5;break;case 3:n=255*l+.5,r=255*h+.5,a=255*i+.5;break;case 4:n=255*u+.5,r=255*l+.5,a=255*i+.5;break;case 5:n=255*i+.5,r=255*l+.5,a=255*h+.5}}var c=[];return c.push(Math.floor(n)),c.push(Math.floor(r)),c.push(Math.floor(a)),c}function c(t,e){t=t||"blue",e=e||1;for(var i=n(t),a=d(i[0],i[1],i[2]),o=[],s=a[0],l=a[1],h=a[2],c=0;e>c;c++){var f=l*(1-c/e),p=h+c*(1-h)/e;o.push(r(u(s,f,p)))}return o}function d(t,e,i){var n,r,a,o=[3],s=t>e?t:e;i>s&&(s=i);var l=e>t?t:e;if(l>i&&(l=i),a=s/255,r=0!==s?(s-l)/s:0,0===r)n=0;else{var h=(s-t)/(s-l),u=(s-e)/(s-l),c=(s-i)/(s-l);n=t==s?c-u:e==s?2+h-c:4+u-h,n/=6,0>n&&(n+=1)}return o[0]=n,o[1]=r,o[2]=a,o}function f(t){return t&&"string"==typeof t&&-1!=t.indexOf("rgba")?n(t)[3]:1}function p(t){return t&&"string"==typeof t&&-1!=t.indexOf("rgba")?f(t):void 0}function g(t){return m(t).hex}function m(t){var e,i,a,o,s=r(n(t),"rgba"),l=/rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([.\d]+))?\)/,h=s.replace(/\s+/g,"").match(l);return e=(+h[1]).toString(16),e=1===e.length?"0"+e:e,i=(+h[2]).toString(16),i=1===i.length?"0"+i:i,a=(+h[3]).toString(16),a=1===a.length?"0"+a:a,o=+(h[5]?h[5]:1),{hex:"#"+e+i+a,alpha:o}}function v(t,i){if(null==t)return{hex:t,alpha:i};null==i&&(i=1),i=e(parseFloat(i),[0,1]);var n=m(t);return null!=n.alpha&&(i*=n.alpha),{hex:n.hex,alpha:i}}var y={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},_={},x=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,b={toColor:r,hsb2rgb:u,rgb2hsb:d,createColorsWithHsb:c,getRGBAColorArray:n,mixColorWithHSB:h,getHighLightColor:a,getColorWithDivider:o,mixColorWithAlpha:l,getColorOpacity:f,getColorOpacityWithoutDefault:p,colorToHex:g,colorToHexAlpha:m,getClickColor:s,getStandardColorAndOpacity:v};return window.ColorUtils=b,b}),i("Constants",[],function(){return{BLANK_VALUE_PERCENTAGE:"\xa0\xa0",INSTANCES_KEY:"vancharts_index_",SELECT_ANIMATION:"select",CHART_HIDE:"vancharts-chart-hide",EXPORT_HIDE:"vancharts-export-hide",GEO:"geographic_co_sys",PLANE:"plane_co_sys",BUTTON:"button",CAROUSEL:"carousel",BAR_CHART:"bar",COLUMN_CHART:"column",LINE_CHART:"line",AREA_CHART:"area",PIE_CHART:"pie",MULTIPIE_CHART:"multiPie",TREEMAP_CHART:"treeMap",SCATTER_CHART:"scatter",BUBBLE_CHART:"bubble",FORCE_BUBBLE_CHART:"forceBubble",GAUGE_CHART:"gauge",POINTER_GAUGE:"pointer",
    SLOT_GAUGE:"slot",THERMOMETER_GAUGE:"thermometer",RING_GAUGE:"ring",RADAR_CHART:"radar",POINT_MAP:"pointMap",AREA_MAP:"areaMap",HEAT_MAP:"heatMap",LINE_MAP:"lineMap",FUNNEL_CHART:"funnel",WORD_CLOUD_CHART:"wordCloud",VANCHART:"vanchart",FULL_SCREEN_ICON:"fullScreen",EXPORT_ICON:"toImage",SORT:"sort",MENU_ICON:"vancharts-icon-menu",REFRESH_ICON:"vancharts-icon-refresh",AXIS_GROUP:"vanchart-axis-group",BOTTOM:"bottom",TOP:"top",LEFT:"left",RIGHT:"right",RIGHT_TOP:"right-top",LEFT_TO_RIGHT:"left-to-right",RIGHT_TO_LEFT:"right-to-right",BOTTOM_TO_TOP:"bottom-to-top",TOP_TO_BOTTOM:"top-to-botttom",DISORDER:"disorder",DESCENDING:"descending",ASCENDING:"ascending",CIRCLE:"circle",SQUARE:"square",DIAMOND:"diamond",TRIANGLE:"triangle",CIRCLE_HOLLOW:"circle_hollow",SQUARE_HOLLOW:"square_hollow",DIAMOND_HOLLOW:"diamond_hollow",TRIANGLE_HOLLOW:"triangle_hollow",NORMAL_ICON:"normal-legend-icon",PIE_ICON:"pie-legend-icon",DONUT_ICON:"donut-legend-icon",BUBBLE_ICON:"bubble-legend-icon",SCATTER_ICON:"scatter-legend-icon",TREEMAP_ICON:"treeMap-legend-icon",DASH_TYPE:{Solid:"0,0",Dash:"8,6"},SAME_ARC:"sameArc",DIFFERENT_ARC:"differentArc",OUTSIDE:"outside",INSIDE:"inside",CENTER:"center",STYLE_GRADUAL:"gradual",HORIZONTAL_LAYOUT:"horizontal",VERTICAL_LAYOUT:"vertical",POLYGON_RADAR:"polygon",CIRCLE_RADAR:"circle",SIZE_BY_AREA:"area",SIZE_BY_WIDTH:"width",GRADUAL_LIGHTER:"lighter",GRADUAL_DARKER:"darker",STATE_TO_DROP:"to-drop",STATE_DROPPED:"dropped",STATE_TO_SHOW:"to-show",STATE_SHOW:"show",EXPONENTIAL:"exponential",LINEAR:"linear",LOGARITHMIC:"logarithmic",POLYNOMIAL:"polynomial"}}),i("utils/BaseUtils",["require","./ColorUtils","../Constants","VanCharts"],function(t){function e(){if(null==Yt.isMS&&(Yt.isMS="Microsoft Internet Explorer"===navigator.appName||navigator.appVersion.indexOf("Trident")>-1||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1,Yt.transPrefix="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"",Gt=document.createElement("div"),document.body.appendChild(Gt),D())){var t=document.createElement("canvas");Nt=t.getContext("2d"),It=document.createElementNS("http://www.w3.org/2000/svg","svg"),document.body.appendChild(It);var e=document.createElementNS("http://www.w3.org/2000/svg","text");It.appendChild(e),It._textNode=e,It.style.visibility="hidden"}}function i(t){Yt.scale=Yt.scale||t||1}function n(){for(var t,e=arguments.length,i=0;e>i;i++)if(t=arguments[i],"undefined"!=typeof t&&null!==t)return t;return null}function r(t){return"[object Array]"===Object.prototype.toString.apply(t)}function a(t,e){e=b(e);for(var i in e)t.style(i,e[i])}function o(t,e,i){if(null==t)return{width:0,height:0};if(i)return l(t,e);if(!D())return l(t,e,!1);var n=Pt(e.fontSize);return!e["writing-mode"]&&n>=12?{width:u(t,n+"px",e),height:d(e)}:h(t,e)}function s(t,e,i){var n=g({"white-space":"normal",whiteSpace:"normal","word-wrap":"break-word",wordWrap:"break-word"},e);return l(t,n,i)}function l(t,e,i){Gt.style.cssText="",Gt.style.visibility="hidden",Gt.style.whiteSpace="nowrap",Gt.style.position="absolute",Gt.style.display="";for(var n in e)"function"!=typeof e[n]&&"color"!=n&&(Gt.style[n]=e[n]);i===!1?Gt.textContent?Gt.textContent=t:Gt.innerText=t:Gt.innerHTML=t;var r=Gt.offsetWidth||0,a=Gt.offsetHeight||0,o={width:r,height:a};return Gt.style.display="none",o}function h(t,e){It.style.display="";var i=It._textNode;i.textContent=t,i.style.cssText="";for(var n in e)"function"!=typeof e[n]&&"color"!=n&&(i.style[n]=e[n]);var r=i.getBBox(),a={width:r.width,height:r.height};return It.style.display="none",a}function u(t,e,i){var n=i.fontStyle||"",r=i.fontWeight||"",a=i.fontFamily||"",o="italic"===n?5:0;return Nt.font=n+" "+r+" "+e+" "+a,Nt.measureText(t).width+o||0}function c(t,e){var i=[];if(e.backgroundColor)if("string"==typeof e.backgroundColor)if(D())i.push("background-Color:"+e.backgroundColor);else{var n=Ht.colorToHexAlpha(e.backgroundColor);i.push("background-Color:"+n.hex),i.push("filter:alpha(opacity="+100*n.alpha+")")}else if("object"==typeof e.backgroundColor){var r=e.backgroundColor,a=Ht.colorToHex(r.startColor),o=Ht.colorToHex(r.endColor),s="left",l="left top",h="right top",u=1;r.x1==r.x2&&(s="top",l="left top",h="left bottom",u=0),i.push("background: -ms-linear-gradient("+s+", "+a+", "+o+")"),i.push("background-image: -moz-linear-gradient("+s+", "+a+", "+o+")"),i.push("background-image: -webkit-gradient(linear, "+l+", "+h+", color-stop(0, "+a+"), color-stop(1, "+o+"))"),i.push("filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="+a+", endColorstr="+o+", GradientType="+u+")")}e.backgroundImage&&(i.push("background-image:url("+e.backgroundImage+")"),i.push("background-size:100% 100%")),null!=e.borderWidth&&(i.push("border-style:solid"),i.push("border-width:"+e.borderWidth+"px")),null!=e.borderColor&&i.push("border-color:"+e.borderColor),null!=e.borderRadius&&(i.push("border-radius:"+e.borderRadius+"px"),i.push("-moz-border-radius:"+e.borderRadius+"px"),i.push("-webkit-border-radius:"+e.borderRadius+"px"),i.push("-o-border-radius:"+e.borderRadius+"px")),e.shadow&&i.push("box-shadow:1px 1px 2px rgba(0,0,0,0.2)"),t.style.cssText+=i.join(";")+";"}function d(t){var e=t.fontSize||"0.75rem";return Pt(e)}function f(t){return t._vanchart_id=t._vanchart_id||"vancharts"+ ++Ut,t._vanchart_id}function p(){return!1}function g(t){var e,i,n,r;for(i=1,n=arguments.length;n>i;i++){r=arguments[i];for(e in r)t[e]=r[e]}return t}function m(t,e){var i=[];i.push("transform:rotate("+e+"deg)"),i.push("-ms-transform:rotate("+e+"deg)"),i.push("-webkit-transform:rotate("+e+"deg)"),i.push("-moz-transform:rotate("+e+"deg)"),i.push("-o-transform:rotate("+e+"deg)");var n=Math.cos(I(e)),r=Math.sin(I(e));if(!D()){var a=e?["progid:DXImageTransform.Microsoft.Matrix(M11=",n,", M12=",-r,", M21=",r,", M22=",n,", sizingMethod='auto expand')"].join(""):"none";i.push("filter:"+a)}t.style.cssText+=i.join(";")+";"}function v(t,e,i,n){if(!t)return[];t+="",n=n||0,i-=2*n;for(var r=[],a=0,s=t.length;s>a;){for(var l=a;o(t.substring(l,a+1),e,!1).width<i&&(a++,!(a>=s)););if(l==a)return["..."];r.push(t.substring(l,a))}return r}function y(t,e,i,n){var r=o(t,e,i);return _(r,n)}function _(t,e){var i=Math.abs(I(e||0)),n=t.width*Math.cos(i)+t.height*Math.sin(i),r=t.width*Math.sin(i)+t.height*Math.cos(i);return{width:n,height:r}}function x(t){if("object"==typeof t&&null!==t){var e=t;if(r(t)){e=[];for(var i=0,n=t.length;n>i;i++)e[i]=x(t[i])}else{e={};for(var a in t)t.hasOwnProperty(a)&&(e[a]=x(t[a]))}return e}return t}function b(t){var e={};for(var i in t)if(Xt[i]&&(e[Xt[i]]=t[i]),"color"==i&&(e.color=t[i]),"fontSize"==i){var n=t[i];-1!=n.indexOf("pt")&&(n=4*parseFloat(n)/3,e["font-size"]=n+"px")}return e}function T(t){if(!(t instanceof Array))return[t,t,t,t];switch(t.length+""){case"4":return t;case"3":return[t[0],t[1],t[2],t[1]];case"2":return[t[0],t[1],t[0],t[1]];case"1":return[t[0],t[0],t[0],t[0]];case"0":return[0,0,0,0]}}function A(t,e){return e%2===0?Math.round(t):Math.round(t-.5)+.5}function L(){var t,e,i,n,r;return 2===arguments.length?(t=arguments[0].x,e=arguments[0].y,i=arguments[0].width,n=arguments[0].height,r=arguments[1]):(t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],r=arguments[4]),r=r||0,t=A(t,r),e=A(e,r),i=Math.round(i),n=Math.round(n),{x:t,y:e,width:i,height:n}}function C(t,e){var i=[];if(t&&t.length)for(var n=0,r=t.length;r>n;n++)i.push(t[n]);if(e&&e.length)for(var n=0,r=e.length;r>n;n++)i.push(e[n]);return i}function P(t){t&&t.parentNode&&t.parentNode.appendChild(t)}function M(t){t&&t.parentNode&&t.parentNode.insertBefore(t,t.parentNode.firstChild)}function E(t){t.ownerSVGElement.appendChild(t)}function w(t){t.ownerSVGElement.appendChild(t,t.ownerSVGElement.firstChild)}function S(t,e){return t.x<=e.x&&t.y<=e.y&&t.x+t.width>=e.x+e.width&&t.y+t.height>=e.y+e.height}function O(t,e){if(!t||!e)return!1;var i=Math.max(t.x,e.x),n=Math.max(t.y,e.y),r=Math.min(t.x+t.width,e.x+e.width),a=Math.min(t.y+t.height,e.y+e.height);return r>=i&&a>=n}function k(t,e){return!S(t,e)&&!O(t,e)}function R(t,e){var i=n(e.x||e[0]),r=n(e.y||e[1]);return t.x<i&&t.x+t.width>i&&t.y<r&&t.y+t.height>r}function D(){return!!window.SVGSVGElement}function B(t,e,i){var n=Math.min(t,e),r=Math.max(t,e),a=r-n;return((i-n)%a+a)%a+n}function G(t,e){return Math.min(Math.max(t,e[0]),e[1])}function I(t){return Math.PI*(t/180)}function N(t){return 180*t/Math.PI}function H(t){return null==t||void 0==t?null:"string"==typeof t?new Function("return "+t)():t}function x(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){for(var e=[],i=0,n=t.length;n>i;++i)e[i]=x(t[i]);return e}if(t instanceof String)return t+"";if(t instanceof Object){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=x(t[r]));return e}}function F(t){var e=""===t||null===t||void 0===t;return e}function U(t){return void 0==t||null==t}function z(e,i){var n,r,a=e.options,o=t("VanCharts");try{r=window.top.document,n=window.top}catch(s){n=window,r=n.document}var l=r.body,h=7998;if(null==i)for(var u,c=-1,d=document.body.children.length;++c<d;)u=document.body.children[c],"none"!==(u.style.display||"").toLowerCase()&&(h=Math.max(h,u.style.zIndex));else h=i-1;var f=r.createElement("div");f.style.cssText="position: fixed;top:0;left:0;width:100%;height:100%;z-index:"+(h+1)+";",D()?f.style.background="rgba(0,0,0,0.3)":(f.style.background="#000000",f.style.filter="alpha(opacity=30)"),l.appendChild(f);var p=r.createElement("div");p.style.cssText="position: fixed;top:5%;left:10%;width:80%;height:90%;z-index:"+(h+2)+";background:#ffffff;box-shadow:0px 4px 50px rgba(0,0,0,0.5);";try{p.style.setExpression("top","( ignoreMe = document.body.scrollTop + this.previousSibling.clientHeight * 0.05) + 'px' "),f.style.setExpression("top","( ignoreMe = document.body.scrollTop ) + 'px' "),p.style.position="absolute",f.style.position="absolute"}catch(s){}l.appendChild(p);var g=o.init(p);g.fullScreenFather=e,g.setOptions(a),e.set({enable:!1}),e.fullScreenChart=g,p.boxDiv=f,f.onclick=function(){V(p,e)},p.onclick=function(t){t=t||n.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}}function V(t,e){var i=t.parentNode;i&&(i.removeChild(t),t.boxDiv&&i.removeChild(t.boxDiv)),e.set({enable:!0}),e.fullScreenChart=null}function W(){return window.ActiveXObject||"ActiveXObject"in window?!0:!1}function X(t){return null==t}function Y(t){return!X(t)}function q(t,e){if(!t.length)return-1;for(var i=0,n=t.length;n>i;i++)if(t[i]==e)return i;return-1}function Q(){var t=0,e=0,i=0,r=0;if(2===arguments.length){var a=arguments[0],o=arguments[1];t=n(a.x,a[0]),e=n(a.y,a[1]),i=n(o.width,o[0]),r=n(o.height,o[1])}else 4===arguments.length&&(t=arguments[0],e=arguments[1],i=arguments[2],r=arguments[3]);return{x:t,y:e,width:i,height:r}}function Z(t,e){var i=n(t.x,t[0]),r=n(t.y,t[1]),a=n(e.x,e[0]),o=n(e.y,e[1]),s=i-a,l=r-o;return Math.sqrt(s*s+l*l)}function K(t){return t.width<=0||t.height<=0}function j(t,e){return Math.log(e)/Math.log(t)}function J(t){var e=0;if(t>0&&1>t)for(;1>t;)t=nt(t,10),e--;else if(t>=10)for(;t>=10;)t=it(t,10),e++;return e}function $(t,e){return t?(t+="",-1!=t.indexOf("%")&&(t=parseFloat(t)*e/100),parseFloat(t)):0}function tt(t){var e=(t+"").match(Vt);return e?(e[1]?e[1].length:0)+(+e[2]||0):0}function et(t,e){if(t%1===0&&e%1===0)return t+e;var i=tt(t),n=tt(e),r=Math.pow(10,Math.max(i,n));return(Math.round(t*r)+Math.round(e*r))/r}function it(t,e){if(t%1===0&&e%1===0)return t/e;var i=t+"",n=e+"",r=-tt(t);r+=tt(e);var a=i.replace(Wt,""),o=n.replace(Wt,"");return r>0?a/o*Math.pow(10,r):a/o/Math.pow(10,-r)}function nt(t,e){if(t%1===0&&e%1===0)return t*e;var i=t+"",n=e+"",r=tt(t);return r+=tt(e),i.replace(Wt,"")*n.replace(Wt,"")/Math.pow(10,r)}function rt(t){if(t.length)return[].slice.call(t);var e=[];for(var i in t)e.push(t[i]);return e}function at(t){"string"==typeof t&&(t=new Date(Date.parse(t.replace(/-|\./g,"/"))));var e=new Date("1970/01/01");return"number"==typeof t?t:t.getTime()-e.getTime()}function ot(t){var e=new Date("1970/01/01");return t=t||0,new Date(t+e.getTime())}function st(t){var e=t;return"string"==typeof e?e=new Date(Date.parse(e.replace(/-|\./g,"/"))):"number"==typeof e&&(e=new Date(e)),e}function lt(t){var e=n(t.x,t[0]),i=n(t.y,t[1]);return"translate("+e+","+i+")"}function ht(t){var e=n(t.x,t[0]),i=n(t.y,t[1]),r=n(t.z,t[2],0);return"translate3d("+e+"px,"+i+"px,"+r+"px)"}function ut(t){var e=Ft.CIRCLE+Ft.SQUARE+Ft.DIAMOND+Ft.TRIANGLE+Ft.CIRCLE_HOLLOW+Ft.SQUARE_HOLLOW+Ft.DIAMOND_HOLLOW+Ft.TRIANGLE_HOLLOW;return-1==e.indexOf(t)&&Y(t)}function ct(t){return X(t.symbol)}function dt(t){var e=[Ft.CIRCLE,Ft.CIRCLE_HOLLOW,Ft.SQUARE,Ft.SQUARE_HOLLOW,Ft.DIAMOND,Ft.DIAMOND_HOLLOW,Ft.TRIANGLE,Ft.TRIANGLE_HOLLOW];return e[t%e.length]}function ft(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener&&t.addEventListener(e,i,!1)}function pt(t){return t=t.trim?t.trim():t.replace(/^\s+|\s+$/g,""),t.split(/\s+/)}function gt(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.attachEvent&&t.detachEvent("on"+e,i)}function mt(t){return Math.abs(t)<1e-6?0:t}function vt(t){var e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}function yt(t){var e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}function _t(t,e){var i=t.originalEvent||t;i=i.touches?i.touches.length?i.touches[0]:i.changedTouches[0]:i;var n,r,a=document.documentElement,o=e.getBoundingClientRect(),s=o.top+(window.pageYOffset||a.scrollTop)-(a.clientTop||0),l=o.left+(window.pageXOffset||a.scrollLeft)-(a.clientLeft||0);return void 0==i.pageX?(n=Math.max(i.x,i.clientX-l),r=i.y):(n=i.pageX-l,r=i.pageY-s),[n,r]}function xt(){var t=window.document;return t&&void 0!==t.documentElement.ontouchstart}function bt(t,e){return[t*Math.sin(e),-t*Math.cos(e)]}function Tt(t,e){return(2*Math.PI-(Math.atan2(e,t)-Math.PI/2))%(2*Math.PI)}function At(t,e,i){t>e&&(t=0,e=100);var n=e-t,r=J(n),a=Math.pow(10,r);0>=r?(t=nt(t,Math.pow(10,1-r)),t=it(Math.floor(t),Math.pow(10,1-r))):t=Math.floor(t/a)*a;for(var o=it(i,10)*a,s=0;n>s;)s=et(o,s);for(var l=it(s,i);e>t+l*i;)s=et(o,s),l=it(s,i);return s=it(s,i),e=et(t,nt(s,i)),[t,e,s]}function Lt(t,e){if(window.FR){for(var i=0,n=t.length;n>i;i++)if(t[i]==e)return i;return-1}return t.indexOf(e)}function Ct(t){return/[\u4E00-\u9FA5]/.test(t)}function Pt(t){return-1!=t.indexOf("rem")?(t=parseFloat(t),t*=Et()):-1!=t.indexOf("pt")?t=4*parseFloat(t)/3:t.indexOf("px")&&(t=parseFloat(t)),t}function Mt(t){var e=isNaN(Yt.scale)?1:Yt.scale;return Math.round(Pt(t)*e)}function Et(){if(X(Yt.defaultFontSize)){var t=document.documentElement.currentStyle||document.defaultView.getComputedStyle(document.documentElement);Yt.defaultFontSize=wt(t.fontSize)}return Yt.defaultFontSize}function wt(t){return-1!=t.indexOf("px")?parseFloat(t):-1!=t.indexOf("pt")?4*parseFloat(t)/3:void 0}function St(t){if(t){var e=t.fontSize;D()?(e=isNaN(parseFloat(e))?"0.75rem":e,-1!=e.indexOf("rem")?e=16*parseFloat(e):-1!=e.indexOf("pt")&&(e=4*parseFloat(e)/3),t.fontSize=parseFloat(e)/16+"rem"):e&&-1!=e.indexOf("rem")&&(t.fontSize=16*parseFloat(e)+"px")}return t}function Ot(t){var e=document.createElement("a"),i=document.createElement("img");e.style.display="none",e.appendChild(i),i.setAttribute("src",t),document.body.appendChild(e),e.setAttribute("target","_blank"),e.setAttribute("href",t),e.setAttribute("download","export.png"),e.click()}function kt(t){return Gt.style.cssText="visibility: hidden;",Gt.innerHTML=t,Gt.textContent?Gt.textContent:Gt.innerText}function Rt(t,e,i,n,r){var a=Math.asin(r),o=Math.abs(t-i),s=Math.abs(e-n),l=Math.sqrt(o*o+s*s)/2,h=t>i?-1:1,u=h*l/Math.tan(a),c=Math.atan((e-n)/(i-t)),d=u*Math.sin(c),f=u*Math.cos(c),p=(t+i)/2,g=(e+n)/2,m=p+d,v=g+f,y=t-m,_=e-v,x=i-m,b=n-v,T=Dt(Math.atan2(_,y)),A=Dt(Math.atan2(b,x));return T>A&&(A+=zt),[m,v,l/r,T,A]}function Dt(t){return t%=zt,0>t&&(t+=zt),t}function Bt(t,e){switch(t){case Ft.CIRCLE:case Ft.CIRCLE_HOLLOW:return d3.svg.arc().outerRadius(e)({startAngle:0,endAngle:2*Math.PI});case Ft.SQUARE:case Ft.SQUARE_HOLLOW:var i=-e+","+-e,n=e+","+-e,r=e+","+e,a=-e+","+e;return"M"+i+"L"+n+"L"+r+"L"+a+"Z";case Ft.DIAMOND:case Ft.DIAMOND_HOLLOW:e=2*e/Math.sqrt(2);var o=-e+",0",s="0,"+-e,l=e+",0",h="0,"+e;return"M"+o+"L"+s+"L"+l+"L"+h+"Z";case Ft.TRIANGLE:case Ft.TRIANGLE_HOLLOW:var o=-e+","+e/Math.sqrt(3),s="0,"+-(2*Math.sqrt(3)/3)*e,l=e+","+e/Math.sqrt(3);return"M"+o+"L"+s+"L"+l+"Z"}}var Gt,It,Nt,Ht=t("./ColorUtils"),Ft=t("../Constants"),Ut=0,zt=2*Math.PI,Vt=/(?:\d+)(?:\.(\d+))?(?:[eE]-(\d+))?/,Wt=/\.|[eE]-\d+/g,Xt={color:"fill",font:"font",fontFamily:"font-family",fontSize:"font-size",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",letterSpacing:"letter-spacing",lineHeight:"line-height",quotes:"quotes",textAlign:"text-align",textDecoration:"text-decoration",textIndent:"text-indent",textShadow:"text-shadow",textTransform:"text-transform",whiteSpace:"white-space",wordSpacing:"word-spacing",padding:"padding"},Yt={initConst:e,initPaddingScale:i,toPng:Ot,getMousePos:_t,getDomWidth:vt,getDomHeight:yt,makeTranslate:lt,makeTranslate3d:ht,clone:x,date2int:at,int2date:ot,object2date:st,log:j,getOrder:J,getPercentValue:$,accAdd:et,accDiv:it,accMul:nt,dealFloatPrecision:mt,isEmpty:F,isEmptyBounds:K,objectToArray:rt,pick:n,isNull:U,getTextDimension:o,getTextHeight:d,splitText:v,getTextDimensionWithRotation:y,getTextDimRotated:_,isArray:r,indexInArray:q,cssNormalization:b,reformCssArray:T,rectSubPixelOpt:L,lineSubPixelOpt:A,addArray:C,toFront:P,toBack:M,toFrontOfAll:E,toBackOfAll:w,containsRect:S,rectangleOverlapped:O,outsideRect:k,containsPoint:R,isSupportSVG:D,setTextStyle:a,domRotate:m,makeValueInRange:B,getValueInDomain:G,toRadian:I,toDegree:N,getFormatterFunction:H,showLightBox:z,hideLightBox:V,isIE:W,hasTouch:xt,hasNotDefined:X,hasDefined:Y,distance:Z,makeBounds:Q,isImageMarker:ut,isNullMarker:ct,getDefaultMarkerSymbol:dt,addEvent:ft,removeEvent:gt,getArcPoint:bt,getTextWrapDimension:s,stamp:f,splitWords:pt,falseFn:p,extend:g,setDomBackground:c,getArcByPoint:Tt,calculateAutoMinMaxAndGap:At,arrayIndexOf:Lt,hasChn:Ct,convertREMtoPX:Pt,paddingConvertWithScale:Mt,getDefaultFontSize:Et,convertToREMUseDefault16PX:St,getPlainText:kt,computeArc:Rt,normalRadian:Dt,getMarkerPath:Bt,TOOLTIP_CATEGORY_STYLE:'<span style="font-size:'+(D()?"1rem":"16px")+';font-family:Verdana;color:white;">',TOOLTIP_SERIES_STYLE:'<span style="font-size:'+(D()?"0.875rem":"14px")+';font-family:Verdana;color:white">',TOOLTIP_VALUE_STYLE:'<span style="font-size:'+(D()?"0.875rem":"14px")+';font-family:Verdana;font-weight:bold;color:white">'};return window.VanUtils=Yt,Yt}),i("utils/QueryUtils",["require","./BaseUtils"],function(t){function e(t,e){if(t&&e){e=e.split(".");for(var i=0,n=e.length;n>i;i++)if(t=t[e[i]],void 0==t)return;return t}}function i(t,e){if(t&&t.length&&e)for(var i=0;i<t.length;i++){var n=t[i]&&t[i][e];if(void 0!=n)return n}}function n(t,e,i){for(var r in e)if(e.hasOwnProperty(r)){var a=t[r];"object"==typeof a?n(t[r],e[r],i):!i&&r in t||(t[r]=e[r])}return t}t("./BaseUtils");return{queryList:i,query:e,merge:n}}),i("utils/Class",["require","./QueryUtils"],function(t){function e(){}var i=t("./QueryUtils");return e.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,r=Object.create(n);r.constructor=e,e.prototype=r;for(var a in this)this.hasOwnProperty(a)&&"prototype"!==a&&(e[a]=this[a]);return i.merge(r,t,!0),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;e>t;t++)r._initHooks[t].call(this)}},e},e.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this},e}),i("ComponentLibrary",[],function(){function t(t){return n[t]}function e(t,e){n[t]=e}function i(){return n}var n=Object.create(null),r=["tooltip","tools","geo","title","dTools","rangeLegend","legend","zoom","dataSheet","xAxis","yAxis","polar","angleAxis","radiusAxis","gaugeAxis","value","category","datetime"];return{TOOLTIP_COMPONENT:"tooltip",TOOLBAR_COMPONENT:"tools",GEO_COMPONENT:"geo",DRILL_TOOLS:"dTools",TITLE_COMPONENT:"title",RANGE_LEGEND_COMPONENT:"rangeLegend",INTERVAL_RANGE_LEGEND:"intervalRangeLegend",GradientRangeLegend:"gradientRangeLegend",LEGEND_COMPONENT:"legend",DATA_SHEET_COMPONENT:"dataSheet",ZOOM_COMPONENT:"zoom",X_AXIS_COMPONENT:"xAxis",Y_AXIS_COMPONENT:"yAxis",POLAR_COMPONENT:"polar",RADIUS_AXIS_COMPONENT:"radiusAxis",ANGLE_AXIS_COMPONENT:"angleAxis",GAUGE_AXIS_COMPONENT:"gaugeAxis",VALUE_AXIS_COMPONENT:"value",CATEGORY_AXIS_COMPONENT:"category",DATE_AXIS_COMPONENT:"datetime",ComponentsOrder:r,getRegisteredComponents:i,get:t,register:e}}),i("utils/BoundsManager",["require","./BaseUtils"],function(t){function e(){this.addedBounds=[]}var i=t("./BaseUtils");return e.prototype={constructor:e,addBounds:function(t){this.addedBounds.push(t)},isOverlapped:function(t){for(var e=0,n=this.addedBounds.length;n>e;e++)if(i.rectangleOverlapped(t,this.addedBounds[e]))return!0;return!1},isEmpty:function(){return 0==this.addedBounds.length}},e}),i("VanChartLayout",["require","./Constants","./utils/BaseUtils","./ComponentLibrary","./utils/BoundsManager"],function(t){function e(t){r(t),a(t.seriesOfType(f.WORD_CLOUD_CHART)),o(t,t.seriesOfType(f.BUBBLE_CHART),f.BUBBLE_CHART),o(t,t.seriesOfType(f.SCATTER_CHART),f.SCATTER_CHART),s(t.seriesOfType(f.BUBBLE_CHART)),s(t.seriesOfType(f.FORCE_BUBBLE_CHART))}function i(t){for(var e=new m,i=0,n=t.series.length;n>i;i++){var r=t.series[i];r.visible&&(r.doLayout(),r._calculateLabelPos(e))}}function n(t){e(t),u(t)}function r(t){for(var e={},i=t.series,n=0,r=i.length;r>n;n++){var a=i[n],o=a.type;if(!a.isTreeSeries()&&o!=f.WORD_CLOUD_CHART)if(a.isSeriesAccumulated())if(a._calculatePercentage)a._calculatePercentage();else{var s=a.getTargetKey();h(a.points,s),l(a.points,s)}else a.visible&&a.points.map(function(t){var i=[o,a.stack,t.category].join("-");e[i]||(e[i]=[]),e[i].push(t)})}for(var u in e){var c=e[u],s=c[0].series.getTargetKey();h(c,s),l(c,s)}for(var n=0,r=i.length;r>n;n++){var d=i[n];d.points.forEach(function(t){d.calculateLabelInfo(t)})}}function a(t){if(t&&t.length){var e=[];t.forEach(function(t){e=e.concat(t.points)}),h(e,t[0].getTargetKey())}}function o(t,e,i){if(t.isSupportAnimation()){var n,r;if(i==f.BUBBLE_CHART)r="swing",n=function(t,e){return e.radius-t.radius};else if(i==f.SCATTER_CHART){var a=t.isInverted();r="exp-in-out",n=function(t,e){return a?t.posY-e.posY:t.posX-e.posX}}var o=[];e.forEach(function(t){o=o.concat(t.points)}),o.sort(n);var s=o.length;s>0&&o.forEach(function(t,e){t.delayTime=800*d3.ease(r)(e/s)})}}function s(t){t.forEach(function(t){if(t.points.length>0){for(var e=Number.MAX_VALUE,i=-e,n=t.type==f.BUBBLE_CHART,r=0,a=t.points.length;a>r;r++){var o=t.points[r];if(!o.isNull){var s=t.getPointValue4MinMax(o);if(n&&!o.displayNegative&&o.getTargetValue()<0)continue;i=Math.max(i,s),e=Math.min(e,s)}}t.seriesMinValue=e,t.seriesMaxValue=i}}),t.forEach(function(t){t._calculateBubbleRadius()})}function l(t,e){if(t&&t.length)for(var i=t[0].series,n=i.stackByPercent,r=i.stack||n,a=i.getStackAxis(),o=a&&a.isLog()?1:0,s=0,l=0,h=0,u=t.length;u>h;h++){var c=t[h];if(r){var d=n?c.percentage:c.getTargetValue();d>=o?(c[e+"0"]=s,s+=d):(c[e+"0"]=l,l+=d)}else c[e+"0"]=0}}function h(t,e){var i=0;t.filter(function(t){return!t.isNull&&t.visible}).forEach(function(t){i+=Math.abs(t[e])}),i=i>0?i:1,t.forEach(function(t){var e=t.series,n=e.getTargetKey(),r=e[e.getBaseAxisType()],a=!e.stack&&r&&r.type!=g.CATEGORY_AXIS_COMPONENT;t.percentage=a?1:Math.abs(t[n])/i})}function u(t){t.bounds=t._getDefaultBounds(),g.ComponentsOrder.map(function(e){e in t.components&&t.components[e].doLayout()},this),t.plotBounds=t.bounds,[g.Y_AXIS_COMPONENT,g.X_AXIS_COMPONENT].forEach(function(e){t.components[e]&&t.components[e].updateAxisClip()}),d(t),[g.Y_AXIS_COMPONENT,g.DATA_SHEET_COMPONENT,g.X_AXIS_COMPONENT].forEach(function(e){t.components[e]&&t.components[e].updateAxisSizeAndBounds()});var e=!1;[g.Y_AXIS_COMPONENT,g.X_AXIS_COMPONENT].forEach(function(i){e=t.components[i]&&t.components[i].adjustDomain4Radius()||e}),[g.Y_AXIS_COMPONENT,g.X_AXIS_COMPONENT,g.DATA_SHEET_COMPONENT,g.ZOOM_COMPONENT].forEach(function(e){t.components[e]&&t.components[e].fixBoundsByPlot()}),[g.X_AXIS_COMPONENT,g.Y_AXIS_COMPONENT].forEach(function(e){t.components[e]&&t.components[e].dealOnZero()}),e&&c(t),i(t)}function c(t){t.bounds=p.makeBounds(t.plotBounds,t.plotBounds),t.clipPool={},t.axisSize={left:0,right:0,bottom:0,top:0},[g.Y_AXIS_COMPONENT,g.X_AXIS_COMPONENT,g.DATA_SHEET_COMPONENT].forEach(function(e){t.components[e]&&t.components[e].reCalculateSize()}),[g.Y_AXIS_COMPONENT,g.X_AXIS_COMPONENT].forEach(function(e){t.components[e]&&t.components[e].updateAxisClip()}),d(t),[g.Y_AXIS_COMPONENT,g.DATA_SHEET_COMPONENT,g.X_AXIS_COMPONENT].forEach(function(e){t.components[e]&&t.components[e].updateAxisSizeAndBounds()}),[g.Y_AXIS_COMPONENT,g.X_AXIS_COMPONENT,g.ZOOM_COMPONENT,g.DATA_SHEET_COMPONENT].forEach(function(e){t.components[e]&&t.components[e].fixBoundsByPlot()}),[g.X_AXIS_COMPONENT,g.Y_AXIS_COMPONENT].forEach(function(e){t.components[e]&&t.components[e].dealOnZero()})}function d(t){var e=t.getChartBounds(),i=t.getPlotBounds(),n=i.x,r=i.y,a=i.width,o=i.height,s=Math.max(t.clipPool[f.LEFT]||0,n),l=Math.max(t.clipPool[f.RIGHT]||0,e.width-(n+a)),h=Math.max(t.clipPool[f.TOP]||0,r),u=Math.max(t.clipPool[f.BOTTOM]||0,e.height-(r+o));i={x:s,y:h,width:e.width-s-l,height:e.height-h-u},t.setPlotBounds(i)}var f=t("./Constants"),p=t("./utils/BaseUtils"),g=t("./ComponentLibrary"),m=t("./utils/BoundsManager");[g.Y_AXIS_COMPONENT,g.X_AXIS_COMPONENT,g.DATA_SHEET_COMPONENT,g.ZOOM_COMPONENT];return{PLANE_SYSTEM_LAYOUT:n,reLayoutPlotBounds:c,calculateSeriesMinMaxValue:s,calculateSeries:e,calculateSeriesShapes:i,fixCoordinateSystem:u}}),i("ChartLibrary",["require","./Constants"],function(t){function e(t){return r[t]}function i(t,e){r[t]=e}function n(){return r}var r={};t("./Constants");return{getRegisteredCharts:n,get:e,register:i}}),i("dom/Evented",["require","../utils/QueryUtils","../utils/BaseUtils","../utils/Class"],function(t){var e=(t("../utils/QueryUtils"),t("../utils/BaseUtils")),i=t("../utils/Class"),n=i.extend({on:function(t,i,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],i);else{t=e.splitWords(t);for(var a=0,o=t.length;o>a;a++)this._on(t[a],i,n)}return this},off:function(t,i,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],i);else{t=e.splitWords(t);for(var a=0,o=t.length;o>a;a++)this._off(t[a],i,n)}else delete this._events;return this},_on:function(t,i,n){if(i){var r=this._events=this._events||{},a=n&&n!==this&&e.stamp(n);if(a){var o=t+"_idx",s=t+"_len",l=r[o]=r[o]||{},h=e.stamp(i)+"_"+a;l[h]||(l[h]={fn:i,ctx:n},r[s]=(r[s]||0)+1)}else r[t]=r[t]||[],r[t].push({fn:i})}},_off:function(t,i,n){if(i){var r=this._events,a=t+"_idx",o=t+"_len";if(r){if(!i)return delete r[t],delete r[a],void delete r[o];var s,l,h,u,c,d=n&&n!==this&&e.stamp(n);if(d)c=e.stamp(i)+"_"+d,s=r[a],s&&s[c]&&(u=s[c],delete s[c],r[o]--);else if(s=r[t])for(l=0,h=s.length;h>l;l++)if(s[l].fn===i){u=s[l],s.splice(l,1);break}u&&(u.fn=e.falseFn)}}},fire:function(t,i,n){if(!this.listens(t,n))return this;var r=e.extend({},i,{type:t,target:this}),a=this._events;if(a){var o,s,l,h,u=a[t+"_idx"];if(a[t])for(l=a[t].slice(),o=0,s=l.length;s>o;o++)l[o].fn.call(this,r);for(h in u)u[h].fn.call(u[h].ctx,r)}return n&&this._propagateEvent(r),this},listens:function(t,e){var i=this._events;if(i&&(i[t]||i[t+"_len"]))return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,e.extend({layer:t.target},t),!0)}});return n}),i("HammerHandler",["require","./utils/BaseUtils","./Constants","./dom/Evented","./ComponentLibrary"],function(t){var e,i=t("./utils/BaseUtils"),n=t("./Constants"),r=t("./dom/Evented"),a=t("./ComponentLibrary"),o=4e3,s=r.extend({initialize:function(t,n){function r(r){var s=r.srcEvent,h=r.type||s.type,u=s.target||s.srcElement;r.containerPoint=i.getMousePos(s,n);var c="panstart"==h||"panmove"==h||"panend"==h;a?"press"==h?l.pressed=!0:"panstart"!=h&&"panmove"!=h&&(l.pressed=!1):l.pressed=!0;var d;if(c&&l.panTarget)d=l.panTarget;else{for(;u&&((d=l._findTargetByBounds(r.containerPoint,h))||(d=t.renderer.findInteractiveTarget(u)),!(d&&d.listens(h,!0)||u===l._container));)u=u.parentNode;d=d&&d.listens(h,!0)?d:l}d&&d.listens(h,!0)&&(d.fire(h,r,!0),"panstart"==h?(l.removeAllChosen(r),l.panTarget=d):"panend"==h&&(l.panTarget=null),a&&"tap"===h&&(clearTimeout(e),e=setTimeout(function(){l.removeAllChosen(r)},o)))}this.vanchart=t,this._container=n;var a=i.hasTouch(),s=this.hammer=new Hammer.Manager(n,{_handler:this});s.add(new Hammer.Pan({threshold:0})),s.add(new Hammer.Tap),i.isSupportSVG()&&s.add(new Hammer.Press),s.on("panstart panmove panend tap press pressup",r),a||s.on("mouseover mousemove mouseout",r);var l=this;this.panTarget=null,l.on(l.getEvents())},_findTargetByBounds:function(t,e){var r=this.vanchart,o=(r.series,r.getPlotBounds()),s=r.getComponent(a.LEGEND_COMPONENT),l=r.getComponent(a.RANGE_LEGEND_COMPONENT);if(s=s||l,"panstart"==e&&s&&s.bounds&&i.containsPoint(s.bounds,t))return s;if(!i.containsPoint(o,t)){var h=r.seriesOfType(n.GAUGE_CHART);if(h&&h.length)for(var u=0,c=h.length;c>u;u++){var d=h[u];if(d.bounds&&i.containsPoint(d.bounds,t))return d}}},onContainerMouseOver:function(t){},onContainerMouseMove:function(t){var e=this.vanchart.getPlotBounds(),n=this.vanchart,r=n.renderer;if(i.containsPoint(e,t.containerPoint)){var a=t.srcEvent;a.target||a.srcElement;if(this._container.style.cursor="",!this._highlightShared(t)){this._removeHightlight(t);var o;if(n.isLargeMode()&&!n.hoverSeries)o=this._getCanvasClosestPoint(t.containerPoint),o&&(o._events||o.getEvents&&o.on(o.getEvents(),o),n.showTooltip(o,t),n.hoverPoint=o,o.hyperlink&&(this._container.style.cursor="pointer"));else{var s=n.hoverSeries;if(!s&&i.hasTouch()&&(s=n.hoverSeries=n.series[0]),s&&(o=n.hoverSeries.getClosestPoint(t.containerPoint),o&&(o._events||o.getEvents&&o.on(o.getEvents(),o),o.fire("mouseover",t),o.hyperlink&&(this._container.style.cursor="pointer"),o.series.defaultMarker))){var l=o.series.defaultMarker;r._targets[i.stamp(l.node())]=l,r._targets[i.stamp(l)]=o}}}}else i.containsPoint(this.vanchart._getDefaultBounds(),t.containerPoint)||this.vanchart.hideTooltip(),this.removeAllChosen(t)},removeAllChosen:function(t){var e=this.vanchart;this._removeHightlight(t),e.hoverPoint&&(e.hoverPoint.fire("mouseout",t),e.hoverPoint=null),e.hoverSeries&&e.hoverSeries.fire("seriesUnChosen",t);var n=e.getComponent(a.TOOLTIP_COMPONENT);n&&!e.isMap()&&n.immediateHide();var r=e.getComponent(a.LEGEND_COMPONENT);if(r=r||e.getComponent(a.RANGE_LEGEND_COMPONENT),r&&r.highlighted){var o=t&&i.containsPoint(r.bounds,t.containerPoint);o||(r.highlighted=!1,e.cancelLegendHighlight())}},_getCanvasClosestPoint:function(t){var e=this.vanchart,r=e.seriesOfType(n.BUBBLE_CHART).concat(e.seriesOfType(n.SCATTER_CHART)),o=this.vanchart._leaflet,s=e.seriesOfType(n.HEAT_MAP);this.vanchart.getComponent(a.GEO_COMPONENT);r=r.concat(s);for(var l,h=this.vanchart.getPlotBounds(),t=i.isArray(t)?{x:t[0],y:t[1]}:t,u=Number.MAX_VALUE,c=r.length-1;c>=0;c--)for(var d=r[c],f=d.points.length-1;f>=0;f--){var p=d.points[f],g=o&&p.lnglat?o.latLngToContainerPoint(p.getLatLng()):{x:p.posX+h.x,y:p.posY+h.y},m=g.x-t.x,v=g.y-t.y,y=Math.sqrt(m*m+v*v),_=p.radius||p.marker&&p.marker.radius||4.5;
    if(_>=y&&p.visible)return p;u>y&&!p.isNull&&(l=p,u=y)}return l},onContainerMouseOut:function(t){},onContainerTap:function(t){this.onContainerMouseMove(t);var e=this.vanchart.hoverPoint;e&&e.fire("tap",t)},onContainerPanStart:function(t){var e=this.vanchart,n=e.renderer,r=t.containerPoint,o=e.bounds;!this.selectRect&&this._supportCoordinateZoom()&&i.containsPoint(o,r)&&(this.selectRect=n.rect().style({fill:"rgb(69,114,167)","fill-opacity":.25}).add(),this.downPos=r,e.hoverPoint&&e.hoverPoint.fire("mouseout"));var s=e.getComponent(a.ZOOM_COMPONENT);this._zoomAsTarget(s,r)&&s._panStart(t,s.centerRect)},_zoomAsTarget:function(t,e){var n=this.vanchart,r=n.bounds,o=!1,s=n.getComponent(a.DATA_SHEET_COMPONENT);return s&&(o=i.containsPoint(s.bounds,e)),o=o||i.containsPoint(r,e),t&&t.zoomToolEnabled()&&o},onContainerPanMove:function(t){var e=this.vanchart,i=(e.renderer,e.hoverPoint,e.bounds),n=e.getOptions(),r=t.containerPoint,o=this.downPos,s=e.isInverted();if(this.selectRect){var l=n.zoom.zoomType,h=Math.min(r[0],o[0]),u=Math.min(r[1],o[1]),c=Math.abs(r[0]-o[0]),d=Math.abs(r[1]-o[1]),f=-1!=l.indexOf("x"),p=-1!=l.indexOf("y");s&&(f=-1!=l.indexOf("y"),p=-1!=l.indexOf("x")),f&&!p?(u=i.y,d=i.height):p&&!f&&(h=i.x,c=i.width),this.selectRect.attr({x:h,y:u,width:c,height:d})}var g=e.getComponent(a.ZOOM_COMPONENT);g&&g.zoomToolEnabled()&&g._panContainerMove(t)},onContainerPanEnd:function(t){var e=this.vanchart,n=(e.renderer,e.hoverPoint,e.bounds,e.getOptions(),t.containerPoint),r=this.downPos,o=e.components[a.TOOLBAR_COMPONENT];this.selectRect&&(i.distance(r,n)>14&&(e.dealAxisZoom(r,n),o&&o.showRefreshIconWhenZoom()),this.selectRect.remove(),this.selectRect=null),this.panTarget=null;var s=e.getComponent(a.ZOOM_COMPONENT);s&&s.zoomToolEnabled()&&s._panEnd()},_highlightShared:function(t){var e=this.vanchart.getSharedAxis();if(e&&e.getPointsInCategory){var i=t.containerPoint,n=e.getPointsInCategory(i);if(n&&n.length)return n[0]._onPointMouseOver.call(n[0],t),e.drawHighlightBackground(n),!0}return!1},_removeHightlight:function(t){var e=this.vanchart,i=e.getSharedAxis(),n=e.hoverPoints;i&&i.removeHighlightBackground&&i.removeHighlightBackground(),n&&n.length&&n[0]._onPointMouseOut.call(n[0],t),e.hoverPoints=null},getEvents:function(){return{mouseover:this.onContainerMouseOver,mousemove:this.onContainerMouseMove,mouseout:this.onContainerMouseOut,tap:this.onContainerTap,panstart:this.onContainerPanStart,panmove:this.onContainerPanMove,panend:this.onContainerPanEnd}},_supportCoordinateZoom:function(){var t=this.vanchart.hoverPoint&&"vanChartForceBubble"==this.vanchart.vanChartType,e=this.vanchart.getOptions();return i.isSupportSVG()&&e.zoom&&e.zoom.zoomType&&!t},destroy:function(){this.hammer.destroy()},_inZoomBar:function(t){var e=this.vanchart.getComponent(a.ZOOM_COMPONENT);return e&&e.bounds&&i.containsPoint(e.bounds,t)},preventDefault:function(t){var e=t.srcEvent,n=i.getMousePos(e,this._container),r=this.pressed||this._inZoomBar(n),o=this.vanchart.getComponent(a.ZOOM_COMPONENT);return!r&&o&&(r=o.target||this._zoomAsTarget(o,n),r=r&&(Math.abs(t.angle)<45||Math.abs(t.angle)>135)),r}});return s}),i("vector/ElementWrapper",["require","../utils/Class"],function(t){var e=t("../utils/Class"),i=e.extend({initialize:function(t,e){return this.rawElement=t,this.renderer=e,this},node:function(){return this.rawElement},addTo:function(t){return this.renderer.addChildElement(this,t),this},add:function(){return"div"===this.type?this.addTo(this.renderer._divContainer):this.addTo(this.renderer._container)},append:function(t){return this.renderer.addChildElement(t,this),t},datum:function(){return arguments.length?(this._datum=arguments[0],this):this._datum},remove:function(){return this.renderer&&this.renderer.removeChildElement(this),this},attr:function(){return"div"===this.type?this.style.apply(this,arguments):this.renderer.attr(this,arguments),this},style:function(){var t;return 2===arguments.length?(t={},t[arguments[0]]=arguments[1]):t=arguments[0],this.renderer.style(this,t),this},setType:function(t){return this.type=t,this},textContent:function(t){return this.renderer.textContent(this,t),this},imageContent:function(t){return this.renderer.imageContent(this,t),this},animate:function(t,e,i,n){e.call(t,this.rawElement,i,n)},vRotate:function(t,e){return this.renderer.vRotate(this,t,e),this},vMiddle:function(){this.renderer.vMiddle(this)}});return i}),i("vector/Renderer",["require","../utils/Class","../utils/BaseUtils","./ElementWrapper"],function(t){var e=t("../utils/Class"),i=t("../utils/BaseUtils"),n=t("./ElementWrapper"),r=e.extend({initialize:function(t,e,n){this._container=this._initContainerDom(t,e,n),this.vanchart=e,this._targets={},this.isSupportSVG=i.isSupportSVG()},remove:function(){this._container.remove(),this._divContainer.remove()},div:function(t){var e=new n(document.createElement("div"),this).setType("div").style({position:"absolute",left:0,top:0});return e.isHtml=t,e},vgroup:function(){var t=this.div(),e=this.group();return{divG:t,renderG:e,type:"vgroup",attr:function(){return this.divG.attr.apply(this.divG,arguments),this.renderG.attr.apply(this.renderG,arguments),this},style:function(){return this.divG.style.apply(this.divG,arguments),this.renderG.style.apply(this.renderG,arguments),this},append:function(i){return"div"===i.type&&i.isHtml?t.append(i):"vgroup"===i.type?(t.append(i.divG),e.append(i.renderG)):e.append(i),i},add:function(){return this.renderG.add(),this.divG.add(),this},remove:function(){this.divG.node()&&this.divG.remove(),this.renderG.node()&&this.renderG.remove()},node:function(){return e.node()},vRotate:function(t){isNaN(t)||(this.divG.vRotate(t),this.renderG.vRotate(t))}}},vtext:function(t){return t||!this.isSupportSVG?this.div(t):this.text()},vtspan:function(t){return t||!this.isSupportSVG?this.div(t):this.tspan()},addChildElement:function(t,e){var i=(e||this._container).rawElement;i.appendChild(t.rawElement)},removeChildElement:function(t){var e=t.rawElement;e.parentNode&&e.parentNode.removeChild(e)},registerInteractiveTarget:function(t,e){this._targets[i.stamp(e.rawElement)]=e,this._targets[i.stamp(e)]=t,t&&(t._events=null,t.getEvents&&t.on(t.getEvents(),t))},findInteractiveTarget:function(t){var e=this._targets[i.stamp(t)];return e&&this._targets[i.stamp(e)]},removeInteractiveTarget:function(t){this._targets[i.stamp(t.rawElement)]=null;var e=this._targets[i.stamp(t)];e&&(e._events=null)},resize:function(){}});return r}),i("utils/DomUtils",["require","./BaseUtils"],function(t){var e=t("./BaseUtils"),i={get:function(t){return"string"==typeof t?document.getElementById(t):t},getStyle:function(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i},create:function(t,e,i){var n=document.createElement(t);return n.className=e,i&&i.appendChild(n),n},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=L.DomUtil.getClass(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)},addClass:function(t,e){if(void 0!==t.classList)for(var i=L.Util.splitWords(e),n=0,r=i.length;r>n;n++)t.classList.add(i[n]);else if(!L.DomUtil.hasClass(t,e)){var a=L.DomUtil.getClass(t);L.DomUtil.setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){void 0!==t.classList?t.classList.remove(e):L.DomUtil.setClass(t,L.Util.trim((" "+L.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e},getClass:function(t){return void 0===t.className.baseVal?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&L.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(r){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"},testProp:function(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1},attr:function(){if(!(arguments.length<2)){var t,i,n=arguments[0],r=arguments[1],a=arguments[2];if("string"==typeof r)e.hasDefined(a)?n.setAttribute(r,a):n&&n.getAttribute&&(i=n.getAttribute(r));else if(e.hasDefined(r)&&"object"==typeof r)for(t in r)n.setAttribute(t,r[t]);return i}}};return i}),i("vector/SvgRenderer",["require","./Renderer","../utils/DomUtils","./ElementWrapper","../utils/BaseUtils"],function(t){function e(t){var e,i;return e=t.match(/translate\(\s*([\d|.|e|-]+)(?:[,\s]*)([\d|.|e|-]*)\s*\)/i),e&&e.shift(),i=t.match(/rotate\(\s*([\d|.|e|-]+[degratun]*)(?:[,\s]*)([\d|.|e|-]*)(?:[,\s]*)([\d|.|e|-]*)\s*\)/i),i=i&&i[1]||0,{translate:e,rotate:i}}var i=t("./Renderer"),n=t("../utils/DomUtils"),r=t("./ElementWrapper"),a=t("../utils/BaseUtils"),o=i.extend({_initContainerDom:function(t,e){var i=new r(this.create("svg"),this);return i.style({width:e.width+"px",height:e.height+"px"}),t.appendChild(i.rawElement),this.defs=new r(this.create("defs"),this).addTo(i),e._leaflet&&i.style("pointer-events","none"),this._divContainer=this.div().style({"white-space":"nowrap","pointer-events":"none"}),t.appendChild(this._divContainer.node()),i},resize:function(){var t=this.vanchart.width,e=this.vanchart.height;this._container.style({width:t+"px",height:e+"px"})},line:function(t){return new r(this.create("line"),this).attr(t)},rect:function(t){return new r(this.create("rect"),this).attr(t)},circle:function(t){return new r(this.create("circle"),this).attr(t)},path:function(t){return new r(this.create("path"),this).attr(t)},text:function(t){return new r(this.create("text"),this).attr(t)},tspan:function(t){return new r(this.create("tspan"),this).attr(t)},image:function(t){return new r(this.create("image"),this).attr(t)},group:function(t){return new r(this.create("g"),this).attr(t)},textContent:function(t,e){"div"===t.type?t.node().innerHTML=e:t.node().textContent=e},imageContent:function(t,e){t.node().setAttributeNS("http://www.w3.org/1999/xlink","href",e)},colorGradient:function(t,e,i){i=i||"linearGradient";var n=new r(this.create(i),this);t.id=a.stamp(n),n.attr(t),n.stops=[];for(var o=0,s=e.length;s>o;o++)n.stops[o]=new r(this.create("stop"),this).attr("offset",e[o].offset).style({"stop-color":e[o]["stop-color"]}).addTo(n);return n.addTo(this.defs)},updateColorGradient:function(t,e,i){t.attr(e);for(var n=0,r=i.length;r>n;n++)t.stops[n].attr("offset",i[n].offset).style({"stop-color":i[n]["stop-color"]})},createClip:function(t,e){e=e||"rect";var i=new r(this.create("clipPath"),this);return i.attr("id",a.stamp(i)),i.setType(e),i[e]=new r(this.create(e),this).attr(t).addTo(i),i.addTo(this.defs),i},clip:function(t,e){t.attr("clip-path","url(#"+a.stamp(e)+")")},updateClip:function(t,e){t&&t[t.type].attr(e)},imagePattern:function(t,e,i){var n=new r(this.create("pattern"),this);return t.id=a.stamp(n),n.attr(t),n.image=new r(this.create("image"),this).addTo(n),n.image.attr(e),n.image.imageContent(i),n.image._imageUrl=i,n.addTo(this.defs),n},updateImagePattern:function(t,e,i,n){t.attr(e),t.image.attr(i),t.image._imageUrl!=n&&(t.image.imageContent(n),t.image._imageUrl=n)},createDropShadowFilter:function(t,e,i,n,o,s,l){o=o||0,s=s||0,l=l||0;var h=new r(this.create("filter"),this),u=a.stamp(h);return h.attr({id:u,x:"-50%",y:"-50%",width:"200%",height:"200%"}),this.updateDropShadowFilter(h,t,e,i,n,o,s,l),h.feBlend=h.feBlend||new r(this.create("feBlend"),this).addTo(h),h.feBlend.attr({"in":"SourceGraphic",in2:"blurOut",mode:"normal"}),h.addTo(this.defs),h},updateDropShadowFilter:function(t,e,i,n,a,o,s,l){o=o||0,s=s||0,l=l||0,t.feOffset=t.feOffset||new r(this.create("feOffset"),this).addTo(t),t.feOffset.attr({"in":"SourceGraphic",dx:e,dy:i,result:"offOut"}),t.feColorMatrix=t.feColorMatrix||new r(this.create("feColorMatrix"),this).addTo(t),t.feColorMatrix.attr({"in":"offOut",type:"matrix",values:o+" 0 0 0 0 0 "+s+" 0 0 0 0 0 "+l+" 0 0 0 0 0 "+n+" 0",result:"matrixOut"}),t.feGaussianBlur=t.feGaussianBlur||new r(this.create("feGaussianBlur"),this).addTo(t),t.feGaussianBlur.attr({"in":"matrixOut",stdDeviation:a,result:"blurOut"})},createInnerShadowFilter:function(t,e,i,n){var o=new r(this.create("filter"),this),s=a.stamp(o);return o.attr({id:s,x:"-50%",y:"-50%",width:"200%",height:"200%"}),o.feComponentTransfer=o.feComponentTransfer||new r(this.create("feComponentTransfer"),this).attr({"in":"SourceAlpha"}).addTo(o),o.feComponentTransfer.feFuncA=o.feComponentTransfer.feFuncA||new r(this.create("feFuncA"),this).attr({type:"table",tableValues:"1 0"}).addTo(o.feComponentTransfer),o.feGaussianBlur=o.feGaussianBlur||new r(this.create("feGaussianBlur"),this).addTo(o),o.feGaussianBlur.attr("stdDeviation",n),o.feOffset=o.feOffset||new r(this.create("feOffset"),this).addTo(o),o.feOffset.attr({dx:t,dy:e,result:"offsetblur"}),o.feFlood=o.feFlood||new r(this.create("feFlood"),this).addTo(o),o.feFlood.attr({"flood-color":"black","flood-opacity":i,result:"color"}),o.feComposite1=o.feComposite1||new r(this.create("feComposite"),this).attr({in2:"offsetblur",operator:"in"}).addTo(o),o.feComposite2=o.feComposite2||new r(this.create("feComposite"),this).attr({in2:"SourceAlpha",operator:"in"}).addTo(o),o.merge=o.merge||new r(this.create("feMerge"),this).addTo(o),o.merge.feMergeNode1=o.merge.feMergeNode1||new r(this.create("feMergeNode"),this).attr("in","SourceGraphic").addTo(o.merge),o.merge.feMergeNode2=o.merge.feMergeNode2||new r(this.create("feMergeNode"),this).addTo(o.merge),o.addTo(this.defs),o},create:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},attr:function(t,e){n.attr.apply(null,[].concat.apply(t.rawElement,e))},style:function(t,i){var n,r=t.styles,o={},s=t.rawElement,l="",h=!r;if(i&&i.color&&(i.fill=i.color),i&&i.fill&&"div"===t.type&&(i.color=i.fill),r)for(n in i)i[n]!==r[n]&&(o[n]=i[n],h=!0);if(h){if("div"===t.type){var u={x:"left",y:"top",dx:"margin-left"};for(var c in u){var d;null!=(d=o[c])&&(o[u[c]]=/em/gi.test(d)?d:d+"px",delete o[c])}if(o.transform){var f=e(o.transform.replace(/px/gi,""));f.translate&&(o[a.transPrefix+"transform"]="translate("+f.translate[0]+"px,"+f.translate[1]+"px)")}}r&&(i=a.extend(r,o)),t.styles=i;var p=function(t,e){return"-"+e.toLowerCase()};for(n in i)l+=n.replace(/([A-Z])/g,p)+":"+i[n]+";";s.style.cssText=l,i.fill&&(s.style.fill=i.fill)}},vRotate:function(t,i,n){var r,o,s,l=t.node();if("div"===t.type){o=t.styles[a.transPrefix+"transform"]||"",o&&(r=e(o.replace(/px/gi,"")),o="",r.translate&&(o="translate("+r.translate[0]+"px,"+r.translate[1]+"px) ")),s="rotate("+i+"deg)",o+=s;var h=a.transPrefix+"transform";t.styles[h]=o,l.style[h]=o}else{var u=(l.scrollWidth||l.getBBox().width)/2,c=(l.scrollHeight||l.getBBox().height)/2-1;u+=+l.getAttribute("x")||0,c+=+l.getAttribute("y")||0,o=l.getAttribute("transform")||"",o&&(r=e(o),o="",r.translate&&(o="translate("+r.translate[0]+" "+r.translate[1]+") ")),s="rotate("+i+" "+u+" "+c+")",o+=s,n||t.attr("transform",o)}t.rotateStr=s},vMiddle:function(t){if("div"===t.type){var e=t.node(),i=e.offsetWidth;e.style.marginLeft=-i/2+"px"}else t.attr("text-anchor","middle")}});return o}),i("utils/PathUtils",["require"],function(t){function e(t){var e=/([clmz]),?([^clmz]*)/gi,i={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},n=/[ahqstv]/gi,a=l;if(String(t).match(n)&&(a=r),n=/[clmz]/g,a==l&&!String(t).match(n)){var o=String(t).replace(e,function(t,e,n){var r=[],a="m"==e.toLowerCase(),o=i[e];return n.replace(C,function(t){a&&2===r.length&&(o+=r+i["m"==e?"l":"L"],r=[]),r.push(x(t*E))}),o+r});return o}var s,h,u=a(t);o=[];for(var c=0,d=u.length;d>c;c++){s=u[c],h=u[c][0].toLowerCase(),"z"==h&&(h="x");for(var f=1,p=s.length;p>f;f++)h+=x(s[f]*E)+(f!=p-1?",":M);o.push(h)}return o.join(P)}function i(t){if(!t&&"string"!=typeof t)return null;var e={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return String(t).replace(f,function(t,n,r){var a=[],o=n.toLowerCase();if(r.replace(p,function(t,e){e&&a.push(+e)}),"m"==o&&a.length>2&&(i.push([n][g](a.splice(0,2))),o="l",n="m"==n?"l":"L"),"r"==o)i.push([n][g](a));else for(;a.length>=e[o]&&(i.push([n][g](a.splice(0,e[o]))),e[o]););}),i.toString=n,i}function n(){return this.join(",").replace(L,"$1")}function r(t,e){for(var i=l(t),n=e&&l(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=(function(t,e,i){var n,r,l={T:1,Q:1};if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in l)&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][g](s[m](0,[e.x,e.y][g](t.slice(1))));break;case"S":"C"==i||"S"==i?(n=2*e.x-e.bx,r=2*e.y-e.by):(n=e.x,r=e.y),t=["C",n,r][g](t.slice(1));break;case"T":"Q"==i||"T"==i?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][g](a(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][g](a(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][g](o(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][g](o(e.x,e.y,t[1],e.y));break;case"V":t=["C"][g](o(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][g](o(e.x,e.y,e.X,e.Y))}return t}),c=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)f[e]="A",n&&(p[e]="A"),t.splice(e++,0,["C"][g](r.splice(0,6)));t.splice(e,1),b=y(i.length,n&&n.length||0)}},d=function(t,e,r,a,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",a.x,a.y]),r.bx=0,r.by=0,r.x=t[o][1],r.y=t[o][2],b=y(i.length,n&&n.length||0))},f=[],p=[],v="",_="",x=0,b=Math.max(i.length,n&&n.length||0);b>x;x++){i[x]&&(v=i[x][0]),"C"!=v&&(f[x]=v,x&&(_=f[x-1])),i[x]=u(i[x],r,_),"A"!=f[x]&&"C"==v&&(f[x]="C"),c(i,x),n&&(n[x]&&(v=n[x][0]),"C"!=v&&(p[x]=v,x&&(_=p[x-1])),n[x]=u(n[x],h,_),"A"!=p[x]&&"C"==v&&(p[x]="C"),c(n,x)),d(i,n,r,h,x),d(n,i,h,r,x);var T=i[x],A=n&&n[x],L=T.length,C=n&&A.length;r.x=T[L-2],r.y=T[L-1],r.bx=parseFloat(T[L-4])||r.x,r.by=parseFloat(T[L-3])||r.y,h.bx=n&&(parseFloat(A[C-4])||h.x),h.by=n&&(parseFloat(A[C-3])||h.y),h.x=n&&A[C-2],h.y=n&&A[C-1]}return n?[i,n]:i}function a(t,e,i,n,r,a){var o=1/3,s=2/3;return[o*t+s*i,o*e+s*n,o*r+s*i,o*a+s*n,r,a]}function o(t,e,i,n){return[t,e,i,n,i,n]}function s(t,e,i,n,r,a,o,l,h,u){var c,d=120*b/180,f=b/180*(+r||0),p=[],m=function(t,e,i){var n=t*_.cos(i)-e*_.sin(i),r=t*_.sin(i)+e*_.cos(i);return{x:n,y:r}};if(u)w=u[0],S=u[1],M=u[2],E=u[3];else{c=m(t,e,-f),t=c.x,e=c.y,c=m(l,h,-f),l=c.x,h=c.y;var v=(_.cos(b/180*r),_.sin(b/180*r),(t-l)/2),y=(e-h)/2,x=v*v/(i*i)+y*y/(n*n);x>1&&(x=_.sqrt(x),i=x*i,n=x*n);var L=i*i,C=n*n,P=(a==o?-1:1)*_.sqrt(T((L*C-L*y*y-C*v*v)/(L*y*y+C*v*v))),M=P*i*y/n+(t+l)/2,E=P*-n*v/i+(e+h)/2,w=_.asin(((e-E)/n).toFixed(9)),S=_.asin(((h-E)/n).toFixed(9));w=M>t?b-w:w,S=M>l?b-S:S,0>w&&(w=2*b+w),0>S&&(S=2*b+S),o&&w>S&&(w-=2*b),!o&&S>w&&(S-=2*b)}var O=S-w;if(T(O)>d){var k=S,R=l,D=h;S=w+d*(o&&S>w?1:-1),l=M+i*_.cos(S),h=E+n*_.sin(S),p=s(l,h,i,n,r,0,o,R,D,[S,k,M,E])}O=S-w;var B=_.cos(w),G=_.sin(w),I=_.cos(S),N=_.sin(S),H=_.tan(O/4),F=4/3*i*H,U=4/3*n*H,z=[t,e],V=[t+F*G,e-U*B],W=[l+F*N,h-U*I],X=[l,h];if(V[0]=2*z[0]-V[0],V[1]=2*z[1]-V[1],u)return[V,W,X][g](p);p=[V,W,X][g](p).join()[A](",");for(var Y=[],q=0,Q=p.length;Q>q;q++)Y[q]=q%2?m(p[q-1],p[q],f).y:m(p[q],p[q+1],f).x;return Y}function l(t){if("string"==typeof t&&(t=i(t)),!t||!t.length)return[["M",0,0]];var e=[],r=0,a=0,o=0,s=0,l=0;"M"==t[0][0]&&(r=+t[0][1],a=+t[0][2],o=r,s=a,l++,e[0]=["M",r,a]);for(var u,c,d=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),f=l,p=t.length;p>f;f++){if(e.push(u=[]),c=t[f],c[0]!=v.call(c[0]))switch(u[0]=v.call(c[0]),u[0]){case"A":u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=+(c[6]+r),u[7]=+(c[7]+a);break;case"V":u[1]=+c[1]+a;break;case"H":u[1]=+c[1]+r;break;case"R":for(var m=[r,a][g](c.slice(1)),y=2,_=m.length;_>y;y++)m[y]=+m[y]+r,m[++y]=+m[y]+a;e.pop(),e=e[g](h(m,d));break;case"M":o=+c[1]+r,s=+c[2]+a;default:for(y=1,_=c.length;_>y;y++)u[y]=+c[y]+(y%2?r:a)}else if("R"==c[0])m=[r,a][g](c.slice(1)),e.pop(),e=e[g](h(m,d)),u=["R"][g](c.slice(-2));else for(var x=0,b=c.length;b>x;x++)u[x]=c[x];switch(u[0]){case"Z":r=o,a=s;break;case"H":r=u[1];break;case"V":a=u[1];break;case"M":o=u[u.length-2],s=u[u.length-1];default:r=u[u.length-2],a=u[u.length-1]}}return e.toString=n,e}function h(t,e){for(var i=[],n=0,r=t.length;r-2*!e>n;n+=2){var a=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?r-4==n?a[3]={x:+t[0],y:+t[1]}:r-2==n&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4==n?a[3]=a[2]:n||(a[0]={x:+t[n],y:+t[n+1]}),i.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return i}function u(t,i,n,r,a){return a?[["M",t+a,i],["l",n-2*a,0],["a",a,a,0,0,1,a,a],["l",0,r-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-n,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-r],["a",a,a,0,0,1,a,-a],["z"]]:e([["M",t,i],["l",n,0],["l",0,r],["l",-n,0],["z"]])}function c(t,i,n){return e([["M",t,i],["m",0,-n],["a",n,n,0,1,1,0,2*n],["a",n,n,0,1,1,0,-2*n],["z"]])}function d(t,i,n,r){return e([["M",t,i],["L",n,r]])}var f=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,p=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,g="concat",m="apply",v=String.prototype.toUpperCase,y=Math.max,_=Math,x=_.round,b=_.PI,T=Math.abs,A="split",L=/,?([achlmqrstvxz]),?/gi,C=/-?\d*\.?\d+(?:[eE][\-+]?\d+)?/g,P=" ",M="",E=1;return window.tmp={path2vml:e,rectPath:u,linePath:d,circlePath:c},window.tmp}),i("vector/VmlRenderer",["require","./Renderer","../utils/PathUtils","../utils/BaseUtils","../utils/ColorUtils","./ElementWrapper","../utils/PathUtils"],function(t){function e(t){var e,i;return e=t.match(/translate\(\s*([\d|.|e|-]+)(?:[,\s]*)([\d|.|e|-]*)\s*\)/i),e&&e.shift(),i=t.match(/rotate\(\s*([\d|.|e|-]+[degratun]*)(?:[,\s]*)([\d|.|e|-]*)(?:[,\s]*)([\d|.|e|-]*)\s*\)/i),i=i&&i[1]||0,{translate:e,rotate:i}}var i=t("./Renderer"),n=t("../utils/PathUtils"),r=t("../utils/BaseUtils"),a=t("../utils/ColorUtils"),o=t("./ElementWrapper"),n=t("../utils/PathUtils"),s="position:absolute;left:0px;top:0px;width:1px;height:1px;behavior:url(#default#VML);display:inline-block;",l="position:absolute;behavior:url(#default#VML);display:inline-block;",h=i.extend({_initContainerDom:function(t){var e=this.div().style({"white-space":"nowrap",display:"inline-block"});return t.appendChild(e.node()),this._divContainer=e,e},line:function(t){return this._shapeWithPath(t,"line")},rect:function(t){return this._shapeWithPath(t,"rect")},circle:function(t){return this._shapeWithPath(t,"circle")},path:function(t){return this._shapeWithPath(t,"path")},image:function(t){var e=new o(this.create("image"),this).setType("image");return e.attr(t),e},group:function(t){var e=this.div().style({"white-space":"nowrap","pointer-events":"none"});return e.attr(t)},colorGradient:function(t,e,i){return i=i||"linearGradient",{type:i,attrs:t,stops:e,elements:[]}},updateColorGradient:function(t,e,i){t.attrs=e,t.stops=i},_updateGradientFill:function(t,e){var i=t.node(),n=t._fill,r=e.stops,a=e.attrs;if(n){i.removeChild(n),n.on=!0,n.method="none",n.color=r[0]["stop-color"],n.color2=r[r.length-1]["stop-color"];for(var o=[],s=0,l=r.length;l>s;s++){var h=100*r[s].offset+"%";o.push(h+" "+r[s]["stop-color"])}n.type="gradient",n.angle=a.x1==a.x2?0:270,i.appendChild(n)}},textContent:function(t,e){t.isHtml?t.node().innerHTML=e:t.node().innerText=e},imageContent:function(t,e){this.style(t,{src:e})},text:function(){return this.vtext(!1)},tspan:function(){return this.vtspan(!1)},_shapeWithPath:function(t,e){var i=new o(this.create("shape"),this).setType(e),n=i.rawElement;return n.style.cssText=s,n.coordsize="1 1",i.attr(t)},create:function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),createClip:function(t,e){return e&&"rect"!=e?void 0:{x:t.x,y:t.y,width:t.width,height:t.height,clipped:[]}},_getClipStr:function(t,e){var i=e.y||0,n=e.x||0,r=n+e.width,a=i+e.height;if("div"!=t.type){var o=t.isLineChart?t.node().parentNode.firstChild:t.node();i-=o.offsetTop,a-=o.offsetTop}return"rect("+i+"px "+r+"px "+a+"px "+n+"px)"},clip:function(t,e){if(e){var i;t.node&&(i=t.node())&&(i.style.clip=this._getClipStr(t,e),e.clipped.push(t))}},updateClip:function(t,e){var i=this;t&&(r.extend(t,e),t.clipped.forEach(function(e){var n=e.node();n&&(n.style.clip=i._getClipStr(e,t))}))},imagePattern:function(t,e){},createDropShadowFilter:function(){return{}},createInnerShadowFilter:function(){return{}},attr:function(t,i){if(i&&!(i.length<=0)&&i[0]){var a={},o=t.rawElement;2===i.length?a[i[0]]=i[1]:a=i[0];var s=t.attrs,l=t.type;if(s&&(a=r.extend(s,a)),t.attrs=a,a.transform){var h=e(a.transform);try{h.translate&&(o.style.left=h.translate[0]+"px",o.style.top=h.translate[1]+"px")}catch(u){}h.rotate}if("image"==l)o.style.position="absolute",o.style.left=a.x+"px",o.style.top=a.y+"px",o.style.width=a.width+"px",o.style.height=a.height+"px";else if("group"!=l){var c="";"rect"==l?c=n.rectPath(a.x||0,a.y||0,a.width,a.height):"line"==l?c=n.linePath(a.x1,a.y1,a.x2,a.y2):"path"==l?c=n.path2vml(a.d):"circle"==l&&(c=n.circlePath(a.cx||0,a.cy||0,a.r)),o.path=c}}},style:function(t,i){var n,o=t.styles,s={},h=t.rawElement;if(i&&i.color&&(i.fill=i.color),i&&i.fill&&"div"===t.type&&(i.color=i.fill),o)for(n in i)i[n]!==o[n]&&(s[n]=i[n]);if("div"===t.type){if(s.transform){var u=e(s.transform.replace(/px/gi,""));s.transform="",s.x=u.translate[0],s.y=u.translate[1]}var c={x:"left",y:"top",dx:"margin-left"};for(var d in c){var f;null!=(f=s[d])&&(s[c[d]]=/em/gi.test(f)?f:f+"px",delete s[d])}}if(o&&(i=r.extend(o,s)),t.styles=i,"div"===t.type){var p=function(t,e){return"-"+e.toLowerCase()},g=1;if(/rgba/i.test(i.color)){var m=a.colorToHexAlpha(i.color);i.color=m.hex,g=m.alpha}r.hasDefined(i["fill-opacity"])&&(g*=i["fill-opacity"]),1>g&&(i.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*g+")");var v="";for(n in i)v+=n.replace(/([A-Z])/g,p)+":"+i[n]+";";h.style.cssText=v}else if("group"!=t.type)if("image"==t.type)t.node().src=i.src;else{var y=t._stroke,_=t._fill,x=t.node();x.stroked=!0,x.filled=!!(i.fill&&"none"!=i.fill||"image"==t.type),y||(y=t._stroke=this.create("stroke"),y.style.cssText=l),x.appendChild(y),y.weight=(i["stroke-width"]||0)+"px";var b=i.stroke,T=r.hasDefined(i["stroke-opacity"])?i["stroke-opacity"]:1;if(b&&-1!=b.indexOf("rgba")&&(b=a.colorToHexAlpha(b),T*=b.alpha,b=b.hex),y.color=b,y.opacity=i["stroke-width"]?T:0,i["stroke-dasharray"]?y.dashStyle=i["stroke-dasharray"].replace(/( *, *)/g," "):y.dashStyle="","round"==i["stroke-linecap"]&&(y.endcap="round"),x.filled){_||(_=t._fill=this.create("fill"),_.style.cssText=l),x.appendChild(_);var A=i.fill,L=r.hasDefined(i["fill-opacity"])?i["fill-opacity"]:1;-1!=A.indexOf("rgba")&&(A=a.colorToHexAlpha(A),L*=A.alpha,A=A.hex),_.color=A,_.opacity=L}else _&&(x.removeChild(_),t._fill=null)}"display"in i&&(t.node().style.display=i.display),"cursor"in i&&(t.node().style.cursor=i.cursor)},vRotate:function(t,e){e%=360;var i=t.node();r.domRotate(i,0);var n=i.offsetWidth,a=i.offsetHeight;r.domRotate(i,e);var o=i.offsetWidth,s=i.offsetHeight;i.style.marginLeft=(n-o)/2+"px",i.style.marginTop=(a-s)/2+"px"},vMiddle:function(t){var e=t.node(),i=e.offsetWidth;e.style.marginLeft=-i/2+"px"}});return h}),i("component/TrendLine",["require","../utils/Class","../utils/BaseUtils","../utils/ColorUtils","../Constants"],function(t){function e(t){return t===r.LEFT||t===r.RIGHT}function i(t,e){var i=function(t,e){return t+e},n=1*t.reduce(i)/t.length,r=1*e.reduce(i)/e.length,a=t.map(function(t){return Math.pow(t-n,2)}).reduce(i),o=(e.map(function(t){return Math.pow(t-r,2)}).reduce(i),t.map(function(t,i){return(t-n)*(e[i]-r)}).reduce(i)),s=o/a,l=r-n*s;return[s,l]}var n=(t("../utils/Class"),t("../utils/BaseUtils")),r=(t("../utils/ColorUtils"),t("../Constants"));return{trendLines:[],calcTrendLines:function(){for(var t=[],i=this,n=i.series,a=0,o=n.length;o>a;a++){var s=n[a],l=s.trendLine;if(l&&s.visible){var h;switch(l.type){case r.LINEAR:h=i.linear;break;case r.LOGARITHMIC:h=i.logarithmic;break;case r.POLYNOMIAL:h=i.polynomial;break;default:case r.EXPONENTIAL:h=i.exponential}var u=s.getTrendLineXYValues(s);if(!(u[0].length<=1)){var c,d,f=e(u[2]);f?(d=u[0],c=u[1]):(c=u[0],d=u[1]);var p=h(c,d,this.extendXs(c,l.period)),g=d3.svg.line().interpolate("cardinal");f&&g.x(function(t){return t[1]}).y(function(t){return t[0]});var m={d:g(p),trendLine:l};t.push(m)}}}this.trendLines=t},extendXs:function(t,e){function i(t,e){return Array.apply(null,Array(t)).map(e)}if(e&&2===e.length&&t.length>1){var n=t[1]-t[0];return i(-e[0],function(e,i){return t[0]-(i+1)*n}).reverse().concat(t).concat(i(e[1],function(e,i){return t[t.length-1]+(i+1)*n}))}return t},linear:function(t,e,n){var r,a,o,s,l=i(t,e);return r=n[0],o=l[0]*r+l[1],a=n[n.length-1],s=l[0]*a+l[1],[[r,o],[a,s]]},logarithmic:function(t,e,n){var r=[],a=[],o=Math.min.apply(null,n);t.map(function(t,i){0>=o&&(t+=-o+1),r.push(Math.log(t)),a.push(e[i])});var s=i(r,a);return n.map(function(t){var e=t;return 0>=o&&(t+=-o+1),[e,s[0]*Math.log(t)+s[1]]})},exponential:function(t,e,n){var r=[],a=[],o=Math.min.apply(null,e);t.map(function(t,i){0>=o&&(e[i]+=-o+1),r.push(t),a.push(Math.log(e[i]))});var s=i(r,a),l=s[0];return s[0]=Math.exp(s[1]),s[1]=l,n.map(function(t){var e=s[0]*Math.exp(t*s[1]);return 0>=o&&(e-=-o+1),[t,e]})},polynomial:function(t,e,i){var n=Math.min(t.length-1,6);n++;for(var r,a=[],o=[],s=0;n>s;s++)a[s]=[],o[s]=[];var s,l,h,u,c=[],d=[],f=[];for(s=0;n>s;s++)for(l=0;l<t.length;l++){for(r=1,u=0;s>u;u++)r*=t[l];a[s][l]=r}for(s=0;n>s;s++)for(h=0;n>h;h++){for(r=0,l=0;l<t.length;l++)r+=a[s][l]*a[h][l];o[s][h]=r}for(s=0;n>s;s++){for(r=0,l=0;l<t.length;l++)r+=e[l]*a[s][l];c[s]=r}for(s=1;n>s;s++)o[s][0]=o[s][0]/o[0][0];for(s=1;n>s;s++)for(l=s;n>l;l++){var p=0;for(h=0;s>h;h++)p+=o[h][l]*o[s][h];if(o[s][l]=o[s][l]-p,l+1!=n){var g=0;for(h=0;s>h;h++)g+=o[h][s]*o[l+1][h];o[l+1][s]=(o[l+1][s]-g)/o[s][s]}}for(d[0]=c[0],s=1;n>s;s++){for(r=0,l=0;s>l;l++)r+=o[s][l]*d[l];d[s]=c[s]-r}for(f[n-1]=d[n-1]/o[n-1][n-1],s=n-2;s>=0;s--){for(r=0,l=s+1;n>l;l++)r+=o[s][l]*f[l];f[s]=(d[s]-r)/o[s][s]}return i.map(function(t){return[t,f.reduce(function(e,i,n){return e+i*Math.pow(t,n)},0)]})},_renderTrendLine:function(){this.calcTrendLines();var t=this.trendLines,e=this.getPlotBounds(),i=this.renderer;this.trendLineGroup||(this.trendLineGroup=i.group().add(),i.clip(this.trendLineGroup,this.plotClip)),this.trendLineGroup.trendLines=this.trendLineGroup.trendLines||[];for(var a=this.trendLineGroup.trendLines,o=0,s=t.length;s>o;o++){var l=t[o],h={d:l.d},u={fill:"none",stroke:l.trendLine.color,"stroke-width":l.trendLine.width,"stroke-dasharray":r.DASH_TYPE[l.trendLine.dashStyle]};a[o]?a[o].attr(h).style(u):a[o]=i.path(h).style(u).addTo(this.trendLineGroup),a[o].attr("transform",n.makeTranslate(e))}for(var o=t.length;o<a.length;o++)a[o].remove(),a[o]=null;return a.length=t.length,this.trendLineGroup}}}),i("theme/config",["require","../Constants","../utils/QueryUtils","../utils/BaseUtils"],function(t){
    function e(){var t={pie:{plotOptions:{rotatable:!0,startAngle:0,endAngle:360,borderWidth:1,borderColor:"white",dataLabels:{formatter:{identifier:"${Y}"},enabled:!1,align:"inside"},tooltip:a()},options:{colors:b,style:T,legend:d()}},multiPie:{plotOptions:{borderWidth:1,borderColor:"rgb(255,255,255)",rotatable:!0,gradual:"lighter",innerRadius:0,startAngle:0,endAngle:360,drilldown:!0,tooltip:o(),dataLabels:{formatter:{identifier:"${NAME}"},enabled:!1,align:"inside"}},options:{colors:b,legend:d()}},treeMap:{plotOptions:{borderWidth:1,borderColor:"rgb(255,255,255)",zoom:!0,tooltip:o(),dataLabels:{formatter:{identifier:"${NAME}"},enabled:!1,align:"top"}},options:{colors:b,legend:d()}},bar:{plotOptions:{categoryGap:"20%",gap:"20%",borderRadius:0,borderWidth:1,borderColor:"white",dataLabels:{formatter:{identifier:"${Y}"},enabled:!1,align:"inside"},tooltip:i()},options:{colors:b,style:T,zoom:h(),legend:d(),xAxis:[g()],yAxis:[m()]}},column:{plotOptions:{categoryGap:"20%",gap:"20%",borderRadius:0,borderWidth:1,borderColor:"white",dataLabels:{formatter:{identifier:"${Y}"},enabled:!1,align:"inside"},tooltip:i()},options:{colors:b,style:T,zoom:h(),legend:d(),xAxis:[f()],yAxis:[p()]}},line:{plotOptions:{large:!1,connectNulls:!1,lineWidth:2,step:!1,curve:!1,marker:{radius:4.5},dataLabels:{formatter:{identifier:"${Y}"},enabled:!1,align:"outside"},tooltip:i()},options:{colors:b,zoom:h(),legend:d(),xAxis:[f()],yAxis:[p()]}},area:{plotOptions:{large:!1,connectNulls:!1,lineWidth:2,step:!1,curve:!1,marker:{radius:4.5},dataLabels:{formatter:{identifier:"${Y}"},enabled:!1,align:"outside"},tooltip:i(),fillColor:!0,fillColorOpacity:.15},options:{colors:b,zoom:h(),legend:d(),xAxis:[f()],yAxis:[p()]}},gauge:{thermometer:{layout:"horizontal",tooltip:n(),percentageLabel:{enabled:!1,useHtml:!1,align:"left",style:{color:"#333333",fontSize:"0.75rem",fontFamily:"Verdana",fontWeight:"bold"},formatter:{identifier:"${PERCENT}",percentFormat:d3.format(".2%")}},valueLabel:{enabled:!1,useHtml:!1,align:"left",style:{color:"#bababa",fontSize:"0.75rem",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}${VALUE}",valueFormat:d3.format(".2")}},needle:"#ffffff",slotBackgroundColor:"#eeeeee",thermometerLayout:"vertical"},ring:{layout:"horizontal",tooltip:n(),percentageLabel:{enabled:!1,useHtml:!1,style:{fontSize:"1.5rem",fontFamily:"Verdana",fontWeight:"bold"},formatter:{identifier:"${PERCENT}",percentFormat:d3.format(".2%")}},valueLabel:{enabled:!1,useHtml:!1,style:{color:"#777777",fontSize:"0.75rem",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}${VALUE}",valueFormat:d3.format(".2")}},clockwise:!1,paneBackgroundColor:"#eeeeee",innerPaneBackgroundColor:"#f4f4f4"},pointer:{layout:"horizontal",tooltip:n(),seriesLabel:{enabled:!1,align:_.BOTTOM,useHtml:!1,style:{color:"#333333",fontSize:"0.875rem",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}"}},valueLabel:{enabled:!1,useHtml:!1,backgroundColor:"#F5F5F7",style:{color:"#333333",fontSize:"0.6875rem",fontFamily:"Verdana"},formatter:{identifier:"${SERIES}${VALUE}",valueFormat:d3.format(".2")}},needle:"#E5715A",hinge:"#656B6D",hingeBackgroundColor:"#DCF2F9",paneBackgroundColor:"#FCFCFC"},slot:{layout:"horizontal",tooltip:n(),percentageLabel:{enabled:!1,useHtml:!1,style:{fontSize:"2.25rem",fontFamily:"Verdana",fontWeight:"bold",textShadow:"0px 2px 0px rgba(0,0,0,0.08)"},formatter:{identifier:"${PERCENT}",percentFormat:d3.format(".2%")}},valueLabel:{enabled:!1,useHtml:!1,style:{color:"#666666",fontSize:"0.875rem",fontFamily:"Verdana"},formatter:{identifier:"${CATEGORY}${VALUE}",valueFormat:d3.format(".2")}},needle:"#ffffff",slotBackgroundColor:"#eeeeee"},options:{colors:b,legend:d(),gaugeAxis:[{type:"value",showLabel:!0,step:1,enableTick:!0,tickColor:"#BBBBBB",tickWidth:1,enableMinorTick:!0,minorTickColor:"#e2e2e2",minorTickWidth:1,labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"0.625rem"}}]}},radar:{plotOptions:{fillColor:!1,fillColorOpacity:.15,columnType:!1,marker:{radius:4.5},lineWidth:2,shape:"circle",dataLabels:{formatter:{identifier:"${Y}"},enabled:!1,align:"outside"},tooltip:i()},options:{colors:b,polar:{},legend:d(),angleAxis:[v()],radiusAxis:[y()]}},scatter:{plotOptions:{large:!1,lineWidth:0,curve:!1,marker:{radius:4.5},opacity:1,tooltip:r(),dataLabels:{formatter:{identifier:"${X}${Y}${SIZE}"},enabled:!1,align:"outside"}},options:{colors:b,zoom:h(),legend:d(),rangeLegend:c(),xAxis:[g()],yAxis:[p()]}},bubble:{plotOptions:{large:!1,displayNegative:!0,shadow:!0,minSize:12,maxSize:60,sizeBy:"area",opacity:.7,tooltip:r(),dataLabels:{formatter:{identifier:"${X}${Y}${SIZE}"},enabled:!1,align:"inside"}},options:{colors:b,zoom:h(),rangeLegend:c(),legend:d(),xAxis:[g()],yAxis:[p()]}},funnel:{plotOptions:{borderColor:"rgb(255,255,255)",borderWidth:1,sort:!0,useSameSlantAngle:!0,dataLabels:{formatter:{identifier:"${VALUE}"},enabled:!1,connectorWidth:1,align:"outside"}},options:{colors:b,legend:d(),style:T}},wordCloud:{plotOptions:{fontFamily:"Microsoft YaHei",maxRotation:0,minRotation:0,tooltip:o(),dataLabels:{enabled:!1}},options:{colors:b,legend:d(),style:T,rangeLegend:c()}},forceBubble:{plotOptions:{large:!1,displayNegative:!0,shadow:!0,minSize:12,maxSize:60,sizeBy:"area",opacity:1,tooltip:i(),dataLabels:{formatter:{identifier:"{SERIES}"},enabled:!1,align:"inside"}},options:{colors:b,legend:d(),zoom:h(),rangeLegend:c()}},areaMap:{plotOptions:{color:"#cccccc",opacity:.75,borderColor:"#ffffff",borderWidth:1,borderOpacity:1,tooltip:s(),dataLabels:{formatter:{identifier:"${NAME}"},enabled:!1,align:"inside"}},options:{colors:b,title:l(),rangeLegend:u(),legend:d(),dTools:{style:{fontFamily:"Microsoft Yahei",color:"#b2b2b2",fontSize:"0.75rem",fontWeight:""},currentColor:"#62b2ef",backgroundColor:"white",enabled:!1}}},pointMap:{plotOptions:{opacity:1,icon:{iconUrl:"../../doc/example/marker-icon.png",iconSize:[25,41]},dataLabels:{formatter:{identifier:"${NAME}"},enabled:!1,align:"outside"},tooltip:s()},options:{colors:b,title:l(),rangeLegend:u(),legend:d(),dTools:{style:{fontFamily:"Microsoft Yahei",color:"#b2b2b2",fontSize:"0.75rem",fontWeight:""},currentColor:"#62b2ef",backgroundColor:"white",enabled:!1}}},heatMap:{plotOptions:{maxOpacity:1,minOpacity:0,radius:15,blur:.15},options:{colors:b,title:l(),rangeLegend:u(),legend:d()}},lineMap:{plotOptions:{lineWidth:.5,curveness:.3,mouseOverColor:"rgb(253,221,49)",opacity:1},options:{colors:b,title:l(),rangeLegend:u(),legend:d()}}};return t}function i(){return{formatter:{identifier:"${CATEGORY}${SERIES}${VALUE}"},enabled:!0,animation:!0,follow:!1,backgroundColor:"rgba(0,0,0,0.5)",borderColor:null,borderWidth:0,borderRadius:2,shadow:!0,hideDelay:500,shared:!1,padding:5}}function n(){return x.merge(i(),{formatter:{enabled:!1}},!0)}function r(){return x.merge(i(),{formatter:{identifier:"${SERIES}${X}${Y}${SIZE}"}},!0)}function a(){return x.merge(i(),{formatter:{identifier:"${SERIES}${VALUE}"}},!0)}function o(){return x.merge(i(),{formatter:{identifier:"${NAME}${SERIES}${VALUE}",shared:!0}},!0)}function s(){return x.merge(i(),{formatter:{identifier:"${NAME}${SERIES}${VALUE}${SIZE}",shared:!0}},!0)}function l(){return{align:"center",backgroundColor:null,borderRadius:0,floating:!1,x:0,y:0,text:null,style:{color:"#333333",fontSize:"1.375rem",fontFamily:"Verdana"},useHtml:!1}}function h(){return{zoomType:"xy",zoomTool:{enabled:!1,resize:!0}}}function u(){return{visible:!0,enabled:!0,borderColor:"#cccccc",borderWidth:0,hiddenColor:"#cccccc",hoverColor:"#293C55",style:{color:"#666666",fontFamily:"Verdana",fontSize:"0.875rem"},position:"right",floating:!1,x:0,y:0,layout:"vertical",continuous:!0,margin:10}}function c(){return x.merge(u(),{enabled:!1},!0)}function d(){return{visible:!0,enabled:!1,hiddenColor:"#cccccc",hoverColor:"#293C55",borderRadius:0,borderColor:"#cccccc",borderWidth:0,backgroundColor:null,style:{color:"#666666",fontFamily:"Verdana",fontSize:"0.875rem"},position:"right",floating:!1,layout:"vertical",x:0,y:0,shadow:!1,margin:10}}function f(){return{type:"category",position:"bottom",onZero:!1,reversed:!1,title:{text:null,align:"center",rotation:0,useHtml:!1,style:{color:"#666666",fontFamily:"Verdana",fontSize:"0.875rem"}},lineWidth:1,lineColor:"#cccccc",showArrow:!1,enableTick:!0,enableMinorTick:!1,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:0,gridLineColor:"#dddddd",showLabel:!0,labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"0.875rem"},labelRotation:0,useHtml:!1}}function p(){return{type:"value",position:"left",onZero:!1,reversed:!1,title:{text:null,align:"center",rotation:0,useHtml:!1,style:{color:"#666666",fontFamily:"Verdana",fontSize:"0.875rem"}},lineWidth:0,lineColor:"#cccccc",showArrow:!1,enableTick:!1,enableMinorTick:!1,minorTickColor:"#cccccc",minorTickWidth:1,minorTickLength:2,tickColor:"#cccccc",tickWidth:1,tickLength:4,tickPadding:6,gridLineWidth:1,gridLineColor:"#dddddd",showLabel:!0,labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"0.875rem"},labelRotation:0,useHtml:!1}}function g(){return x.merge(f(),{type:"value"},!0)}function m(){return x.merge(p(),{type:"category"},!0)}function v(){return{type:"category",lineWidth:1,lineColor:"#cccccc",gridLineWidth:1,gridLineColor:"#dddddd",showLabel:!0,labelStyle:{color:"#666666",fontFamily:"Verdana",fontSize:"0.875rem"},labelRotation:0,useHtml:!1}}function y(){return x.merge(v(),{type:"value"},!0)}var _=t("../Constants"),x=t("../utils/QueryUtils"),b=(t("../utils/BaseUtils"),["#63b2ee","#76da91","#f8cb7f","#f89588","#7cd6cf","#9192ab","#7898e1","#efa666","#eddd86","#9987ce"]),T="gradual";return e}),i("VanChart",["require","./utils/BaseUtils","./utils/QueryUtils","./utils/Class","./VanChartLayout","./ComponentLibrary","./ChartLibrary","./Constants","./HammerHandler","./vector/SvgRenderer","./vector/VmlRenderer","./component/TrendLine","./theme/config"],function(t){var e=t("./utils/BaseUtils"),i=t("./utils/QueryUtils"),n=t("./utils/Class"),r=t("./VanChartLayout"),a=t("./ComponentLibrary"),o=t("./ChartLibrary"),s=t("./Constants"),l=t("./HammerHandler"),h=t("./vector/SvgRenderer"),u=t("./vector/VmlRenderer"),c=t("./component/TrendLine"),d=250,f=500,p=250,g=5,m=[a.X_AXIS_COMPONENT,a.Y_AXIS_COMPONENT,a.ANGLE_AXIS_COMPONENT],v=n.extend({vanChartType:"vanChart",initialize:function(t,i,n){this.wrapDom=i,this.width=e.getDomWidth(i),this.height=e.getDomHeight(i),isNaN(+this.width)||isNaN(+this.height)||(i=this._initLeafLet?this._initLeafLet(i,t):i,this.dom=i,this.vancharts=n,this.handler=new l(this,i),this.renderer=e.isSupportSVG()?new h(i,this):new u(i,this),this.series=[],this.components={},this._changeDataState=!1,this.fullScreenChart=null,this._initIntermediateState(),e.extend(this,c),this.refresh(t))},_initIntermediateState:function(){this.colorMap={},this.orderMap={},this.cateMap={},this.scale=1,this.timeQueue=this.clearTimeQueue(),this.clipPool={},this.axisSize={left:0,right:0,bottom:0,top:0},this.parentPoint=null},_getAllMoreLabelAnimationTime:function(){return d+f+p},getShowMoreLabelTime:function(){return this._changeDataState===!0&&e.hasDefined(this.options.moreLabel)?this._getAllMoreLabelAnimationTime():0},_removeChangeDataState:function(t){this._changeDataState&&(this._changeDataSeries=this._changeDataSeries||[],this._changeDataSeries.push(t),this._changeDataSeries.length>=this.series.length&&(this._changeDataState=!1,this._changeDataSeries=[]))},refresh:function(t){return t&&t.plotOptions?(t.animation=t.plotOptions.animation&&e.isSupportSVG(),this._init(t),this._originSeries&&this._originSeries(),this._refreshOptions(),void(this.fullScreenChart&&this.fullScreenChart.setData(t))):(this.bounds=e.makeBounds(0,0,0,0),void this.vancharts.endLoading())},refreshRestore:function(){var t=this,e=t.components;m.forEach(function(i){e[i]&&t._restoreCategoryAxisBasedSeries(e[i])});var i=this.seriesOfType(s.GAUGE_CHART);i.length==this.series.length&&this.series.sort(function(t,e){return t.index-e.index}),this.seriesOfType(s.PIE_CHART).forEach(function(t){var e=t.points.map(function(t){return t.graphic}),i={};t.options.data.forEach(function(t,e){i[t.x]=e}),t.points.sort(function(t,e){return i[t.x]-i[e.x]}),t.points.forEach(function(t,i){t.graphic=e[i]})});var n=this.seriesOfType(s.MULTIPIE_CHART);n.length&&n[0].orderData(null),this._refreshOptions()},orderData:function(){var t=this,e=t.components;m.forEach(function(i){e[i]&&t._orderCategoryAxisBasedSeries(e[i])});var i=this.orderType==s.ASCENDING,n=i?1:-1,r=this.seriesOfType(s.GAUGE_CHART);r.length==this.series.length&&this.series.sort(function(t,e){var i=t.getSeryTotalValue(),r=e.getSeryTotalValue();return(i-r)*n}),this.seriesOfType(s.PIE_CHART).forEach(function(t){var e=t.points.filter(function(t){return t.visible}).map(function(t){return t.graphic});t.points.sort(function(t,e){return i?t.y-e.y:e.y-t.y});var n=0;t.points.forEach(function(t){t.visible&&(t.graphic=e[n],++n)})});var o=this.seriesOfType(s.MULTIPIE_CHART);o&&o.length&&o[0].orderData(i),this.reRenderSeries(),m.concat([a.ZOOM_COMPONENT,a.DATA_SHEET_COMPONENT,a.POLAR_COMPONENT]).forEach(function(t){e[t]&&e[t].render()})},_restoreCategoryAxisBasedSeries:function(t){for(var i=0,n=t.getAxisCount();n>i;i++){var r=t.getAxis(i),a=r.series;if(r._isBaseAxis()&&r.isCategory()&&this.orderMap&&Object.keys(this.orderMap).length){var o=this.orderMap[r.componentType][i],s={};o.forEach(function(t,e){s[t]=e});for(var l=r._dataDomain,h=0,u=a.length;u>h;h++){var c=[],d=a[h],f=!0;d.points.forEach(function(t){c[e.indexInArray(l,t.category)]=t.graphic,t.graphic||(f=!1)}),d.points.forEach(function(t){t.graphic=f?c[s[t.category]]:t.graphic,d.updatePointGraphic(t)})}}}},_orderCategoryAxisBasedSeries:function(t){for(var i=this.orderType==s.ASCENDING?1:-1,n=0,r=t.getAxisCount();r>n;n++){var a=t.getAxis(n);if(this.orderMap[a.componentType]=this.orderMap[a.componentType]||[],this.orderMap[a.componentType][n]||(this.orderMap[a.componentType][n]=a._dataDomain),a._isBaseAxis()&&a.isCategory()){for(var o=a.series,l=[],h=o[0].points,u=0,c=h.length;c>u;u++){var d=h[u],f=0;d.points.forEach(function(t){t.visible&&t.series.visible&&(f+=Math.abs(t.getTargetValue()))}),l.push({key:d.category,value:f})}l.sort(function(t,e){return(t.value-e.value)*i});var p={},g=[];l.forEach(function(t,e){p[t.key]=e,g.push(t.key)});for(var m=a.getOriginalCategories(),u=0,c=o.length;c>u;u++){var v=[],y=o[u],_=!0;y.points.forEach(function(t){v[e.indexInArray(m,t.category)]=t.graphic,t.graphic||(_=!1)}),y.points.forEach(function(t){t.graphic=_?v[p[t.category]]:t.graphic,y.updatePointGraphic(t)})}a.setCategories(g)}}},_refreshOptions:function(){this._initIntermediateState();for(var t,i,n=this.options,r=this,l=n.series,h=n.chartType,u=a.getRegisteredComponents(),c=a.ComponentsOrder,d=0,f=c.length;f>d;d++){if(t=c[d],i=u[t],t==a.RANGE_LEGEND_COMPONENT&&n[t]){var p=n[t].continuous?a.GradientRangeLegend:a.INTERVAL_RANGE_LEGEND;this.components[t]&&this.components[t].type!=p&&(this.components[t].remove(),this.components[t]=null),i=a.get(p)}if(i){var g=n[t]&&(e.hasNotDefined(n[t].enabled)||n[t].enabled);g||t!=a.TOOLBAR_COMPONENT||(g=!0,n[t]={enabled:!0,hidden:!1}),n[t]&&g?this.components[t]?this.components[t].refresh(n[t],r):this.components[t]=new i(n[t],t,r):this.components[t]&&(this.components[t].remove(),this.components[t]=null,delete this.components[t])}}var m,v={},y=[];r.series.forEach(function(t){v[t.name+t.type]=t}),l.forEach(function(t,i){m=t.type||h;var n=e.pick(t.name,"Series"+m+i)+m,a=v[n],s=o.get(m);a=a?a.refresh(t,i):new s(t,r,i),y.push(a),v[n]=null});for(var _ in v)v[_]&&v[_].remove();r.series=y;var x=this.components[a.GAUGE_AXIS_COMPONENT];x&&x.initAttributesWithSeries();var b=this.components[a.RANGE_LEGEND_COMPONENT];b&&b.initAttributesWithSeries(),y.forEach(function(t){if(t.type!==s.LINE_MAP||!t.large)for(var e=0,i=t.points.length;i>e;e++)t.points[e].refreshPointColor()}),r.layoutComponentsAndCharts()},layoutComponentsAndCharts:function(){this.hoverPoint=this.hoverSeries=null,r.PLANE_SYSTEM_LAYOUT(this),this.render()},_getDefaultBounds:function(){var t=this.options&&this.options.padding||g,i=this.options&&this.options.borderWidth||0;return t=i+t,e.makeBounds(t,t,Math.max(this.width-2*t,0),Math.max(this.height-2*t,0))},reRenderWholePlot:function(){r.reLayoutPlotBounds(this),r.calculateSeries(this),r.calculateSeriesShapes(this),this.render()},dealAxisZoom:function(t,e){var i=this.options.zoom.zoomType,n=this.components.xAxis,r=this.components.yAxis;n&&-1!==i.indexOf("x")&&n.axisZoom(t,e),r&&-1!==i.indexOf("y")&&r.axisZoom(t,e),this.reRenderWholePlot()},cancelLegendHighlight:function(){this.highlightTarget=null,this._updateSeriesStyle()},makeLegendHighlight:function(t){this.highlightTarget=t,this._updateSeriesStyle()},_updateSeriesStyle:function(){this.series.forEach(function(t){t.isSupportLegendHighlight()&&(t.useCanvas()?t._canvasRender():(t._updateSeriesGraphicStyle(),t.getDataToDraw().forEach(function(e){t._updatePointGraphicStyle(e)})))})},reRenderSeries:function(){r.calculateSeries(this),r.calculateSeriesShapes(this),this.renderSeries()},isSupportAnimation:function(){return this.options.animation},_init:function(t){if(t.series=t.series||[],t.series.forEach(function(t){t.data=t.data||[]}),this._mergeThemeConfig(t),t.chartType==s.SCATTER_CHART||t.chartType==s.BUBBLE_CHART){var e=t.tools.sort||{};e.enabled=!1}t.plotOptions.inverted&&t.dataSheet&&(t.dataSheet.enabled=!1),this.options=t},_mergeThemeConfig:function(n){var r=t("./theme/config")(),a={};n.series.forEach(function(t){var o=t.type||n.chartType,l=r[o].plotOptions;if(o==s.GAUGE_CHART){var h=t.style||n.plotOptions.gauge&&n.plotOptions.gauge.style||n.plotOptions.style;h="pointer_semi"==h?"pointer":h,l=r.gauge[h];var u=["seriesLabel","valueLabel","percentageLabel"];u.forEach(function(n){e.hasDefined(t[n])&&i.merge(t[n],l[n],!1)})}a[o]||(a[o]=!0,i.merge(n,r[o].options,!1),n.plotOptions[o]?n.plotOptions[o]=i.merge(n.plotOptions[o],l,!1):n.plotOptions=i.merge(n.plotOptions,l,!1))}),this.isMap()&&(n.xAxis=n.yAxis=n.zoom=void 0),n.chartType==s.RADAR_CHART&&(n.polar=n.polar||{}),n.tooltip=n.tooltip||{}},getPlotBackgroundOption:function(){var t=this.options;return{backgroundColor:t.plotBackgroundColor,backgroundImage:t.plotBackgroundImage,borderColor:t.plotBorderColor,borderWidth:t.plotBorderWidth,borderRadius:t.plotBorderRadius,shadow:t.plotShadow}},getChartBackgroundOption:function(){var t=this.options,e=this.options.geo;return{backgroundColor:e?"":t.backgroundColor,backgroundImage:e?"":t.backgroundImage,borderColor:t.borderColor,borderWidth:e?0:t.borderWidth,borderRadius:t.borderRadius,shadow:t.shadow}},getMinMaxFromSeries:function(){var t=this,e=t.isMap(),i=t.series,n=Number.MAX_VALUE,r=-n;return i.forEach(function(t){for(var i,a,o=t.type,l=t.points,h={},u=o==s.BUBBLE_CHART,c=0,d=l.length;d>c;c++)if(i=l[c],!(i.isNull||u&&!i.displayNegative&&i.getTargetValue()<0)){if(a=t.getPointValue4MinMax(i),e&&i.lnglat){if(h[i.lnglat.join("-")])continue;h[i.lnglat.join("-")]=!0}n=Math.min(a,n),r=Math.max(a,r)}}),n>r&&(n=0,r=100),[n,r]},getParentDom:function(){return this.dom},getDivParentDom:function(){return this.wrapDom},isInverted:function(){return!!this.getOptions().plotOptions.inverted},setPlotBounds:function(t){this.bounds=t},getPlotClipBounds:function(){var t=0,e=0,i=this.bounds.width,n=this.bounds.height,r={},a=[];return this.components.xAxis&&(a=a.concat(this.components.xAxis._axisList)),this.components.yAxis&&(a=a.concat(this.components.yAxis._axisList)),a.forEach(function(t){var e=t.getPosition();t.isOnZero()||r[e]||(r[e]=t.getLineWidth())}),e=r[s.TOP]?Math.ceil(r[s.TOP]/2):0,n-=e,n=r[s.BOTTOM]?n-Math.ceil(r[s.BOTTOM]/2-.5):n,t=r[s.LEFT]?Math.ceil(r[s.LEFT]/2):0,i-=t,i=r[s.RIGHT]?i-Math.ceil(r[s.RIGHT]/2):i,{x:t+this.bounds.x,y:e+this.bounds.y,width:Math.max(i,0),height:Math.max(n,0)}},getPlotBounds:function(){return this.bounds},getChartBounds:function(){return e.makeBounds(0,0,this.width,this.height)},xAxis:function(t){t||(t=0);var e=this.components.xAxis;return e?e.getAxis(t):null},yAxis:function(t){t||(t=0);var e=this.components.yAxis;return e?e.getAxis(t):null},polar:function(t){t||(t=0);var e=this.components.polar;return e?e.getAxis(t):null},angleAxis:function(t){t||(t=0);var e=this.components.angleAxis;return e?e.getAxis(t):null},radiusAxis:function(t){t||(t=0);var e=this.components.radiusAxis;return e?e.getAxis(t):null},gaugeAxis:function(t){t||(t=0);var e=this.components.gaugeAxis;return e?e.getAxis(t):null},getSharedAxis:function(){for(var t=[this.xAxis(),this.yAxis(),this.angleAxis()],e=0;e<t.length;e++){var i=t[e];if(i&&i.isCategory())return i}return null},getComponent:function(t){return this.components[t]},getOptions:function(){return this.options},getDefaultSeriesColor:function(t){if(t+="",!this.colorMap[t]){var e=this.options.colors,i=0;for(var n in this.colorMap)++i;this.colorMap[t]=e[i%e.length]}return this.colorMap[t]},registerPointsPara:function(t){if(e.hasDefined(t.category)){var i=this.cateMap;i[t.category]=i[t.category]||[],i[t.category].push(t),t.points=i[t.category]}},getValidPointsPara:function(t,e){var i=this.cateMap[t]||e&&e.points||[];return i&&i.length?i.filter(function(t){return t._hasEvents(t)&&t.tooltip&&t.tooltip.shared&&t.visible&&t.series.visible}):[]},getSharedPoints:function(t,e){var i=this.cateMap[t]||e&&e.points||[];return i&&i.length?i.filter(function(t){return t.tooltip&&t.tooltip.shared}):[]},render:function(){this.vancharts.endLoading();var t=this,e=this.renderer,i=this.getPlotClipBounds();this.plotClip?e.updateClip(this.plotClip,i):this.plotClip=e.createClip(i),this._renderBackground(),this.renderComponents(a.ComponentsOrder,function(t){return!t.isFloat}),t.clipSeriesGroup||e.clip(t.clipSeriesGroup=e.group().add(),t.plotClip),t.seriesGroup||(t.seriesGroup=e.group().add()),t.seriesTextRenderGroup||e.clip(t.seriesTextRenderGroup=e.group().add(),t.plotClip),t.seriesTextDivGroup||(t.seriesTextDivGroup=e.div().add()),t.seriesTextDivGroup.style({clip:"rect("+[i.y,i.x+i.width,i.y+i.height,i.x].join("px ")+"px)"}),this.renderSeries(),this.renderComponents(a.ComponentsOrder,function(t){return t.isFloat}),this._consoleDone()},_consoleDone:function(){window.console&&console.log("done")},renderComponents:function(t,e){e=e||function(){return!0},t.map(function(t){if(t in this.components){var i=this.components[t];e(i)&&i.render()}},this),t.map(function(t){if(t in this.components){var i=this.components[t];e(i)&&i.renderSpecial&&i.renderSpecial()}},this)},renderSeries:function(){this.getComponent(a.TOOLTIP_COMPONENT).immediateHide();for(var t=0,e=this.series.length;e>t;t++)this.series[t].render();this._renderTrendLine(),this._updateSeriesState()},_renderBackground:function(){var t=e.makeBounds(0,0,this.width,this.height),i=this.getChartBackgroundOption(),n=this.getPlotBounds(),r=this.getPlotBackgroundOption();this.chartBackgroundGroup||(this.chartBackgroundGroup=this.renderer.group().add(),this.plotBackgroundGroup=this.renderer.group().add()),i.shadow&&(t.width-=5,t.height-=5),this._renderRectangleBackground(this.chartBackgroundGroup,i,t),this._renderRectangleBackground(this.plotBackgroundGroup,r,n)},_renderRectangleBackground:function(t,i,n){var r=i.borderWidth||0,a=this.renderer,o=r/2,s=e.rectSubPixelOpt(n.x+o,n.y+o,Math.max(n.width-r,0),Math.max(n.height-r,0),r);if(s.rx=s.ry=i.borderRadius,i.shadow){var l=e.rectSubPixelOpt(n,1),h=[5,3,1],u=[.05,.1,.15];h.forEach(function(e,n){var r="shadowRect"+n;t[r]=t[r]||a.rect().style({fill:"none",stroke:"black","stroke-width":h[n],"stroke-opacity":u[n]}).addTo(t),t[r].attr(l).attr({rx:i.borderRadius,ry:i.borderRadius,transform:"translate(1, 1)"})})}if(i.backgroundColor&&"object"==typeof i.backgroundColor)if(e.isSupportSVG()){var c=i.backgroundColor,d={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2},f={offset:"0%","stop-color":c.startColor},p={offset:"100%","stop-color":c.endColor};t.gradientFill?a.updateColorGradient(t.gradientFill,d,[f,p]):t.gradientFill=a.colorGradient(d,[f,p])}else i.backgroundColor=i.backgroundColor.startColor;(i.backgroundColor||i.borderWidth)&&(t.backgroundColor=t.backgroundColor||a.rect().addTo(t),t.backgroundColor.attr(s).style({fill:i.backgroundColor?"string"==typeof i.backgroundColor?i.backgroundColor:"url(#"+e.stamp(t.gradientFill)+")":"none",stroke:i.borderColor,"stroke-width":e.pick(i.borderWidth,0)})),i.backgroundImage&&(t.backgroundImage=t.backgroundImage||a.image().addTo(t),t.backgroundImage.attr(n).attr("preserveAspectRatio","none").imageContent(i.backgroundImage))},filterRender:function(){for(var t=0,e=this.series.length;e>t;t++)this.series[t].filterRender()},showTooltip:function(t,e,i){this.handler.selectRect||this.components[a.TOOLTIP_COMPONENT].showWithPoint(t,e,i)},hideTooltip:function(){this.hoverPoint=null,this.components[a.TOOLTIP_COMPONENT].hide()},set:function(t){"enable"in t&&this.handler&&(t.enable?this.handler.hammer.set({enable:!0}):(this.handler.hammer.set({enable:!1}),this.handler.removeAllChosen()))},_updateSeriesState:function(){for(var t=this.series,e=0,i=t.length;i>e;e++)t[e].state=t[e].state==s.STATE_TO_DROP?s.STATE_DROPPED:t[e].state,t[e].state=t[e].state==s.STATE_TO_SHOW?s.STATE_SHOW:t[e].state},isMap:function(){return"vanChartMap"==this.vanChartType},chartType:function(){return this.options.chartType},isHeatMap:function(){return this.options.chartType==s.HEAT_MAP},isAreaMap:function(){return this.options.chartType==s.AREA_MAP},isForceBubble:function(){return"vanChartForceBubble"==this.vanChartType},isLargeMode:function(){return this.options.plotOptions.large},seriesOfType:function(t){return this.series.filter(function(e){return e.type==t})},pointsOfType:function(t){var e=[];return this.series.forEach(function(i){i.type==t&&(e=e.concat(i.points))}),e},setTimeout:function(t,e,i){this.timeQueue[t]&&window.clearTimeout(this.timeQueue[t]),i?this.timeQueue[t]=window.setTimeout(e,i):(e&&e(),this.timeQueue[t]=null)},clearTimeQueue:function(){var t=this.timeQueue||{};return Object.keys(t).map(function(e){window.clearTimeout(t[e])}),{}},removePointGraphics:function(t){t&&t.remove()},remove:function(){this.clearTimeQueue(),this.renderer&&this.renderer.remove(),this._leaflet&&this._leaflet.remove(),this.handler&&this.handler.destroy(),this.mainRenderer&&this.mainRenderer.remove(),this.animationRenderer&&this.animationRenderer.remove(),this.mainRenderer=null,this.animationRenderer=null,this.renderer=this.plotClip=this._leaflet=this.handler=this.chartBackgroundGroup=this.trendLineGroup=this.seriesGroup=this.clipSeriesGroup=this.seriesTextRenderGroup=this.seriesTextDivGroup=null},resize:function(){this._leaflet&&this._leaflet._onResize();var t=this.wrapDom;if(this.width=e.getDomWidth(t),this.height=e.getDomHeight(t),!isNaN(+this.width)&&!isNaN(+this.height)){if(this.renderer.resize(),this.isMap()){this._layoutMapComponents();var i=this.getCurrentGeo();i&&i.fitMapBounds()}else r.fixCoordinateSystem(this);this.render()}}});return v}),i("utils/Formatter",["require","./BaseUtils"],function(t){function e(t,e){return e=i.getFormatterFunction(e),e?e.bind(t)(t):t}var i=t("./BaseUtils");return{format:e}}),i("chart/Point",["require","../utils/QueryUtils","../utils/BaseUtils","../utils/ColorUtils","../utils/Formatter","../Constants","../ComponentLibrary","../dom/Evented"],function(t){var e=t("../utils/QueryUtils"),i=t("../utils/BaseUtils"),n=t("../utils/ColorUtils"),r=(t("../utils/Formatter"),t("../Constants")),a=t("../ComponentLibrary"),o=t("../dom/Evented"),s=o.extend({initialize:function(t,e){this.series=e,this.refresh(t||{})},refresh:function(t){this.options=t;var o=this._getQueryList(),s=this.series,l=s.vanchart;if(s.type===r.LINE_MAP&&s.large)return s._refreshPoint&&s._refreshPoint(this,o),this.visible=!0,this.seriesName=this.series.name,void(this.tooltip=e.queryList(o.concat([l.options]),"tooltip"));var h=this.series.type==r.BAR_CHART?t.y:t.x,u=this.series.name,c=this.series.isSeriesAccumulated(),d=e.queryList(o,"borderColor"),f=e.queryList(o,"borderOpacity");if(d){var p=n.getStandardColorAndOpacity(d,f);d=p.hex,f=p.alpha}var g=e.queryList(o,"lnglat"),m=t.x,v=s[s.getBaseAxisType()];if(v&&v.type==a.VALUE_AXIS_COMPONENT&&(m=+m),i.extend(this,{x:m,y:t.y,size:t.size,value:t[this.series.getTargetKey()],category:c?u:h,seriesName:c?h:u,name:t.name||t.x||"",className:t.name||""+u+(g||[]).join("-"),visible:i.pick(e.queryList(o,"visible"),!0),hyperlink:e.queryList(o,"hyperlink"),jsonHyperlink:e.queryList(o,"jsonHyperlink"),drillUpLink:e.queryList(o,"drillUpLink"),click:e.queryList(o,"click"),drilldown:e.queryList(o,"drilldown"),shadow:e.queryList(o,"shadow"),displayNegative:e.queryList(o,"displayNegative"),maxSize:t.maxSize,minSize:t.minSize,sizeBy:e.queryList(o,"sizeBy"),lnglat:g,borderWidth:e.queryList(o,"borderWidth"),borderRadius:e.queryList(o,"borderRadius"),borderColor:d,borderOpacity:f,image:e.queryList(o,"image"),imageWidth:e.queryList(o,"imageWidth"),imageHeight:e.queryList(o,"imageHeight"),icon:e.queryList(o,"icon"),dataLabels:e.queryList(o,"dataLabels"),tooltip:e.queryList(o.concat([l.options]),"tooltip"),style:e.queryList(o,"style")||l.options.style,effect:e.queryList(o,"effect")}),i.convertToREMUseDefault16PX(this.dataLabels&&this.dataLabels.style),i.convertToREMUseDefault16PX(this.tooltip&&this.tooltip.style),s.isNullValue)this.isNull=s.isNullValue(this);else{var y=this[s.getTargetKey()];this.isNull="-"==y||i.hasNotDefined(y)}if(s._refreshPoint&&s._refreshPoint(this,o),c?this.points=s.points:l.registerPointsPara(this),this.visible&&(this.graphic&&!this.graphic.ctx&&this.graphic.style("display","inline"),this.effectGraphic&&this.effectGraphic.style({display:"inline"}),this.textGraphic&&this.textGraphic.style({display:"inline"})),this.drilldown&&this.drilldown.geo){var _=a.get(a.GEO_COMPONENT);this.geo=new _(this.drilldown.geo,a.GEO_COMPONENT,l)}},refreshPointColor:function(){this.visible=!0;var t=this,r=t.series,a=r.vanchart,o=t._getQueryList();if(!r.isTreeSeries()){var s=this._getColorAndMarkerColor(r,a,e.queryList(o,"opacity")),l=i.clone(e.queryList(o,"marker"));i.hasDefined(l)&&(l.fillColor=s.markerColor,l.fillColorOpacity=s.markerOpacity,l.radius=isNaN(l.radius)?4.5:l.radius,l.symbol=l.symbol||r.marker&&r.marker.symbol||"");var h,u,c=s.color,d=e.queryList(o,"mouseOverColor");i.hasNotDefined(c)?this.visible=!1:(d=d||n.getHighLightColor(c),h=n.getClickColor(c),u=.95*s.opacity),i.extend(this,{marker:l,mouseOverColor:d,clickColor:h,clickOpacity:u,color:c,opacity:s.opacity})}},_getColorAndMarkerColor:function(t,e,o){var s=o,l=o,h=t.isSeriesAccumulated()?i.pick(this.options.x,this.options.name):t.name,u=e.getDefaultSeriesColor(h),c=u,d=e.options.plotOptions,f=d[t.type],p=f&&f.marker||d.marker;i.hasDefined(p)&&(c=p.fillColor||c),t.type==r.AREA_MAP&&this.isNull&&(u=d.color);var g=e.getComponent(a.RANGE_LEGEND_COMPONENT);g&&(u=g.getColorWithSize(this[t.getTargetKey()]),c=u),u=t.options.color||u,c=t.options.color||c;var m=t.options.marker;i.hasDefined(m)&&(c=m.fillColor||c),u=this.options.color||u,c=this.options.color||c;var v=this.options.marker;if(i.hasDefined(v)&&(c=v.fillColor||c),t._refreshPointColor&&(u=t._refreshPointColor(this,u)),i.hasDefined(u)){var y=n.getStandardColorAndOpacity(u,o);u=y.hex,s=y.alpha}if(i.hasDefined(c)){var y=n.getStandardColorAndOpacity(c,o);c=y.hex,l=y.alpha}return{color:u,opacity:s,markerColor:c,markerOpacity:l}},getTargetValue:function(){var t=this[this.series.getTargetKey()];return isNaN(+t)?0:+t},getLatLng:function(t){var e=this.lnglat;if(!e){var i=this.series.vanchart.getCurrentGeo();t||(t=i.getFeaturesByName(this.name,this.series.type),t=t&&t[0]),t&&(e=i.getDataPointLngLat(this,t))}return e?[e[1],e[0]]:null},remove:function(){this.visible=!1,this.graphic&&this.graphic.remove(),this.textGraphic&&this.textGraphic.remove(),this.leadLine&&this.leadLine.remove(),this.moreLabelG&&this.moreLabelG.remove(),this.graphic=this.textGraphic=this.moreLabelG=this.leadLine=null},_getQueryList:function(){return[this.options].concat(this.series._getQueryList())},_hasEvents:function(t){return t&&t.visible&&!t.isNull},_onPointMouseOver:function(t){
    var e=this,n=this.series,r=n.vanchart,a=r.renderer,o=r.hoverPoint,s=r.hoverSeries,l=r.hoverPoints,h=r.getSharedAxis();if((e.tooltip&&e.tooltip.follow||o!==e)&&e._hasEvents(e))if(o&&o!=e&&o._onPointMouseOut.call(o,t),e.tooltip&&e.tooltip.shared&&e.points){var u=r.getValidPointsPara(e.category,e),c=u.reduce(function(e,n){n.series.onPointMouseOver.call(n,t);var r=n;if(r._events||r.getEvents&&r.on(r.getEvents(),r),r.series.defaultMarker){var o=r.series.defaultMarker;a._targets[i.stamp(o.node())]=o,a._targets[i.stamp(o)]=r}return e?n.getTargetValue()>e.getTargetValue()?n:e:n},0);l&&l.length&&l[0]!=u[0]&&l[0]._onPointMouseOut.call(l[0],t),h&&h.drawHighlightBackground(u),n.vanchart.showTooltip(c,t,r.getSharedPoints(e.category,e)[0]),r.hoverPoints=u}else n.onPointMouseOver.call(e,t),n.vanchart.showTooltip(e,t),s!=e.series&&(s&&s.fire("seriesUnChosen",t),e.series.fire("mouseover",t)),r.hoverSeries=e.series,r.hoverPoint=e},_onPointMouseOut:function(t){var e=this,i=this.series;e._hasEvents(e)&&(e.tooltip&&e.tooltip.shared&&e.points&&e.points.length?e.points.map(function(e){e.graphic&&e.series.onPointMouseOut.call(e,t),e.series.fire("seriesUnChosen",t)}):i.onPointMouseOut.call(e,t),i.vanchart.hideTooltip())},_onPointTap:function(t){var e=this,n=this.series;e._hasEvents(e)&&(n.onPointTap.call(e,t),e.onClick(t.srcEvent),i.hasTouch()&&e.fire("mouseover",t))},_onPointPress:function(t){var e=this,i=this.series,n=i.vanchart,r=n.hoverPoint;r&&i.onPointPress.call(e,t)},_onPointPressUp:function(t){var e=this,i=this.series,n=i.vanchart,r=n.hoverPoint;r&&(i.onPointPressUp.call(e,t),r._onPointTap(t))},onClick:function(t){var e=this;if(e.click)e.click.call(e,t);else if(e.hyperlink){t=t.touches?t.touches.length?t.touches[0]:t.changedTouches[0]:t;var i=e.hyperlink;i&&window.FR&&FR.doHyperlink(t,new Function("return "+i)(),!0)}},getTooltipRect:function(){var t=this.series.vanchart.getComponent(a.TOOLTIP_COMPONENT);return t?t._tooltipRect:void 0},getEvents:function(){return this.series.pointEvents?this.series.pointEvents():{mouseover:this._onPointMouseOver,mouseout:this._onPointMouseOut,mousemove:this.series.onPointMouseMove,tap:this._onPointTap,press:this._onPointPress,pressup:this._onPointPressUp}}});return s}),i("utils/BezierEasing",[],function(){function t(t,e){return 1-3*e+3*t}function e(t,e){return 3*e-6*t}function i(t){return 3*t}function n(n,r,a){return((t(r,a)*n+e(r,a))*n+i(r))*n}function r(n,r,a){return 3*t(r,a)*n*n+2*e(r,a)*n+i(r)}function a(t,e,i,r,a){var o,s,l=0;do s=e+(i-e)/2,o=n(s,r,a)-t,o>0?i=s:e=s;while(Math.abs(o)>u&&++l<c);return s}function o(t,e,i,o){function s(e,a){for(var o=0;l>o;++o){var s=r(a,t,i);if(0===s)return a;var h=n(a,t,i)-e;a-=h/s}return a}function u(){for(var e=0;d>e;++e)v[e]=n(e*f,t,i)}function c(e){for(var n=0,o=1,l=d-1;o!=l&&v[o]<=e;++o)n+=f;--o;var u=(e-v[o])/(v[o+1]-v[o]),c=n+u*f,p=r(c,t,i);return p>=h?s(e,c):0===p?c:a(e,n,n+f,t,i)}function g(){y=!0,(t!=e||i!=o)&&u()}if(4!==arguments.length)throw new Error("BezierEasing requires 4 arguments.");for(var m=0;4>m;++m)if("number"!=typeof arguments[m]||isNaN(arguments[m])||!isFinite(arguments[m]))throw new Error("BezierEasing arguments should be integers.");if(0>t||t>1||0>i||i>1)throw new Error("BezierEasing x values must be in [0, 1] range.");var v=p?new Float32Array(d):[],y=!1,_=function(r){return y||g(),t===e&&i===o?r:0===r?0:.001>1-r?1:n(c(r),e,o)};_.getControlPoints=function(){return[{x:t,y:e},{x:i,y:o}]};var x=[t,e,i,o],b="BezierEasing("+x+")";return _.toString=function(){return b},_}var s=this,l=4,h=.001,u=1e-7,c=10,d=11,f=1/(d-1),p="Float32Array"in s;return o.css={ease:o(.25,.1,.25,1),linear:o(0,0,1,1),"ease-in":o(.42,0,1,1),"ease-out":o(0,0,.58,1),"ease-in-out":o(.42,0,.58,1),"ease-in-out-quad":o(.455,.03,.515,.955),swing:o(.02,.01,.47,1),"ease-in-quart":o(.895,.03,.685,.22),"ease-out-back":o(.175,.885,.32,1.275),"ease-out-quart":o(.165,.84,.44,1),"ease-in-quint":o(.755,.05,.855,.06),"ease-out-quint":o(.23,1,.32,1),"ease-in-quad":o(.55,.085,.68,.53),"ease-out-quad":o(.25,.46,.45,.94)},o}),i("vector/Cut",["require","../utils/BezierEasing"],function(t){var e=t("../utils/BezierEasing"),i=function(t){if(!t)throw'animation "targets" empty';null==t.length?this.targets=[t]:this.targets=t,this._needsRemove=!1,this._lastSectionTime=null,this._sections=[],this.onend=null};return i.prototype={step:function(t){this._lastSectionTime||(this._lastSectionTime=t);var e=t-this._lastSectionTime,i=this.targets,n=this._sections[0],r=Math.min(e/n.time,1);if(!(!r>0)){n.easing&&(r=n.easing(r));for(var a=n.props,o=i.length,s=0;o>s;s++)for(var l in a)a.hasOwnProperty(l)&&(i[s][l]=a[l][s](r));return 1===r&&(this._lastSectionTime=t,this._sections.shift(),0===this._sections.length)?(this._needsRemove=!0,"end"):void 0}},_fillProps:function(t){return this.targets.map(function(e){return t(e)})},delay:function(t){return this._sections.push({time:t,props:{}}),this},duration:function(t){return this._sections.push({time:t,props:{}}),this},tween:function(t,e){var i=this._sections.length,n=this._sections[i-1].props;return"function"==typeof e?n[t]=this._fillProps(e):n[t]=this._fillProps(function(i){var n=i[t];return function(t){return n+(e-n)*t}}),this},end:function(t){return this.onend=t,this},stop:function(){return this._needsRemove=!0,this},ease:function(t){var i=this._sections.length;return this._sections[i-1].easing="string"==typeof t?e.css[t]:t,this}},i}),i("vector/Animation",["require","./Cut"],function(t){var e=t("./Cut"),i=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},n=function(){this._initTime=null,this._running=!1,this._cuts=[],this._callback=[],this.onframe=null,this.onend=null};return n.prototype={_update:function(){var t=(new Date).getTime(),e=this._cuts,i=e.length;if(!e.length)return!1;for(var n=0;i>n;)e[n]._needsRemove?(e[n]=e[i-1],e.pop(),i--):n++;for(var n=0;i>n;n++){var r=e[n].step(t);r&&e[n]["on"+r]&&this._callback.push(e[n]["on"+r])}this.onframe&&this.onframe();for(var a,n=-1;a=this._callback[++n];)a();return this._callback=[],!0},_startLoop:function(){function t(){e._running&&(e._running=e._update(),i(t))}var e=this;i(t)},frame:function(t){return this.onframe=t,this},start:function(){return this._running||(this._running=!0,this._startLoop()),this},stop:function(){return this._running=!1,this},clear:function(){return this._running=!1,this._cuts=[],this},animate:function(t){var i=new e(t);return i.animation=this,this._cuts.push(i),this.start(),i}},n}),i("dom/Browser",["require"],function(t){var e=navigator.userAgent.toLowerCase(),i=document.documentElement,n="ActiveXObject"in window,r=-1!==e.indexOf("webkit"),a=-1!==e.indexOf("phantom"),o=-1!==e.search("android [23]"),s=-1!==e.indexOf("chrome"),l=-1!==e.indexOf("gecko")&&!r&&!window.opera&&!n,h="undefined"!=typeof orientation||-1!==e.indexOf("mobile"),u=!window.PointerEvent&&window.MSPointerEvent,c=window.PointerEvent||u,d=n&&"transition"in i.style,f="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!o,p="MozPerspective"in i.style,g="OTransition"in i.style,m=!window.L_NO_TOUCH&&(c||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);return{ie:n,ielt9:n&&!document.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in document),webkit:r,gecko:l,android:-1!==e.indexOf("android"),android23:o,chrome:s,safari:!s&&-1!==e.indexOf("safari"),ie3d:d,webkit3d:f,gecko3d:p,opera12:g,any3d:!window.L_DISABLE_3D&&(d||f||p)&&!g&&!a,mobile:h,mobileWebkit:h&&r,mobileWebkit3d:h&&f,mobileOpera:h&&window.opera,mobileGecko:h&&l,touch:!!m,msPointer:!!u,pointer:!!c,retina:(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1}}),i("vector/shape/Arc",["require","../../utils/BaseUtils","../../dom/Browser"],function(t){var e=t("../../utils/BaseUtils"),i=t("../../dom/Browser").touch,n=i?10:2,r=2*Math.PI,a=Math.max,o=Math.atan2,s=Math.abs,l=Math.sqrt,h=e.normalRadian,u=function(t){this.renderer=t,this.ctx=t.ctx,this.cut=null,this.style={ox:null,oy:null,r:null,startAngle:null,endAngle:null,lineWidth:null,color:null,fillStyle:"rgba(0, 0, 0, 0)"}};return u.prototype={setStyle:function(t){for(var e in this.style)t.hasOwnProperty(e)&&(this.style[e]=t[e]);return this},drawStyle:function(){var t=this.ctx,e=this.style;return(e.lineWidth&&e.lineWidth!==t.lineWidth||e.color&&e.color!==t.strokeStyle)&&(t.stroke(),t.beginPath(),t.lineWidth=e.lineWidth,t.strokeStyle=e.color),e.fillStyle&&e.fillStyle!==t.fillStyle&&(t.fill(),t.fillStyle=e.fillStyle),this},draw:function(){var t=this.ctx,e=this.style;return e.lineWidth?(t.moveTo(e.ox+e.r*Math.cos(e.startAngle),e.oy+e.r*Math.sin(e.startAngle)),t.arc(e.ox,e.oy,e.r,e.startAngle,e.endAngle),this):this},animate:function(){return this.cut||(this.cut=this.renderer.animation.animate(this.style)),this},delay:function(t){return this.cut.delay(t),this},duration:function(t){return this.cut.duration(t),this},tween:function(t,e){return this.cut.tween(t,e),this},end:function(t){return this.cut.end(t),this},stop:function(){return this.cut.stop(),this},ease:function(t){return this.cut.ease(t),this},remove:function(){this.cut&&this.cut.stop(),this.needToRemove=!0},contain:function(t){var e=t[0],i=t[1],u=this.style,c=a(u.lineWidth,n),d=e-u.ox,f=i-u.oy,p=s(l(d*d+f*f)-u.r);if(p>c)return!1;var g=h(o(f,d));return(g+r-u.startAngle)%r<=u.endAngle-u.startAngle}},u}),i("vector/shape/Circle",["require"],function(t){var e=2*Math.PI,i=function(t){this.renderer=t,this.ctx=t.ctx,this.cut=null,this.style={ox:null,oy:null,r:null,lineWidth:null,strokeStyle:null,fillStyle:null}};return i.prototype={setStyle:function(t){for(var e in this.style)t.hasOwnProperty(e)&&(this.style[e]=t[e]);return this},drawStyle:function(){var t=this.ctx,e=this.renderer,i=this.style;return(i.lineWidth&&i.lineWidth!==t.lineWidth||i.strokeStyle&&i.strokeStyle!==t.strokeStyle)&&(t.stroke(),t.lineWidth=i.lineWidth,t.strokeStyle=i.strokeStyle),i.fillStyle&&i.fillStyle!==e.fillStyle&&(t.fill(),t.beginPath(),t.fillStyle=i.fillStyle,e.fillStyle=i.fillStyle),this},draw:function(){var t=this.ctx,i=this.style;return t.moveTo(i.r+i.ox,i.oy),t.arc(i.ox,i.oy,i.r,0,e),this}},i}),i("vector/shape/Image",["require"],function(t){var e=function(t){this.renderer=t,this.ctx=t.ctx,this.cut=null,this.style={imagedata:null,dx:null,dy:null,dirtyX:null,dirtyY:null,dirtyWidth:null,dirtyHeight:null}};return e.prototype={setStyle:function(t){for(var e in this.style)t.hasOwnProperty(e)&&(this.style[e]=t[e]);return this},drawStyle:function(){return this},draw:function(){var t=this.style;return this.ctx.putImageData(t.imagedata,t.dx,t.dy),this}},e}),i("vector/CanvasRenderer",["require","./Renderer","../Constants","./Animation","./shape/Arc","./shape/Circle","./shape/Image"],function(t){var e=t("./Renderer"),i=t("../Constants"),n=t("./Animation"),r=t("./shape/Arc"),a=t("./shape/Circle"),o=t("./shape/Image"),s=["lineWidth","strokeStyle"],l=e.extend({_initContainerDom:function(t,e,i){var r=i||e.getPlotBounds(),a=i&&i.dpr||1;this.dom=this._createCanvas(t,r,a),this.ctx=this.dom.getContext("2d"),this.ctx.scale(a,a),this.elements=[],this.animation=(new n).frame(this.flush.bind(this))},arc:function(t){return this._create(r,t)},circle:function(t){return this._create(a,t)},image:function(t){return this._create(o,t)},_create:function(t,e){var i=new t(this);return i.rawElement=i,this.elements.push(i),e&&i.setStyle(e),i},style:function(){},_createCanvas:function(t,e,i){var n=document.createElement("canvas"),r=this.left=e.x,a=this.top=e.y,o=this.width=e.width,s=this.height=e.height;return this.dpr=i,n.style.position="absolute",n.style.left=r+"px",n.style.top=a+"px",n.style.width=o+"px",n.style.height=s+"px",n.width=o*i,n.height=s*i,n.onselectstart=function(){return!1},n.style["-webkit-user-select"]="none",n.style["user-select"]="none",n.style["pointer-events"]="none",n.style["-webkit-touch-callout"]="none",n.style.transform="translateZ(0)",t.appendChild(n),window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(n),n},flush:function(){this.clearAll(),this.ctx.beginPath();for(var t=this.elements,e=t.length,i=[],n=0;e>n;n++)t[n].needToRemove||(i.push(t[n]),t[n].drawStyle().draw());this.elements=i,this.ctx.stroke(),this.ctx.fill()},_updateCtxStatus:function(){for(var t,e,i=-1;t=s[++i];)this[t]!==this.ctx[t]&&(this[t]=this.ctx[t],e=!0);e&&this.ctx.stroke(),this.fillStyle!==this.ctx.fillStyle&&(this.fillStyle=this.ctx.fillStyle,this.ctx.fill())},clearAll:function(){this.ctx.clearRect(0,0,this.width,this.height)},remove:function(){this.animation.clear(),this.ctx=null,this.dom.parentNode&&this.dom.parentNode.removeChild(dom)},addBubbleSeries:function(t){var e=this.ctx;e.save();for(var i=0,n=t.points.length;n>i;i++){var r=t.points[i];r.visible&&!r.isNull&&(e.fillStyle=r.color,e.globalAlpha=this.getPointOpacity(r),e.beginPath(),e.arc(r.posX,r.posY,r.radius,0,2*Math.PI),e.fill())}e.restore()},getPointOpacity:function(t){var e=t.series,i=e.vanchart.highlightTarget;if(i){var n=e.name;return n==i||t._rangeItem==i?1:.3}return t.opacity},addScatterSeries:function(t){var e=this.ctx;e.save();for(var i=0,n=t.points.length;n>i;i++){var r=t.points[i];if(r.visible&&!r.isNull){var a=r.marker.symbol,o=isNaN(r.marker.radius)?4.5:r.marker.radius,s=r.marker.fillColor||r.color;e.translate(r.posX,r.posY),e.fillStyle=s,e.strokeStyle=s,e.globalAlpha=this.getPointOpacity(r),this._drawMarker(e,a,o),e.translate(-r.posX,-r.posY)}}e.restore()},addSeries:function(t){t.visible&&(t.type==i.SCATTER_CHART?this.addScatterSeries(t):this.addBubbleSeries(t))},_drawMarker:function(t,e,n){-1!=e.indexOf(i.CIRCLE)?(t.beginPath(),t.arc(0,0,n,0,2*Math.PI)):-1!=e.indexOf(i.SQUARE)?(t.beginPath(),t.moveTo(-n,-n),t.lineTo(n,-n),t.lineTo(n,n),t.lineTo(-n,n),t.closePath()):-1!=e.indexOf(i.DIAMOND)?(n=2*n/Math.sqrt(2),t.beginPath(),t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()):-1!=e.indexOf(i.TRIANGLE)?(t.beginPath(),t.moveTo(-n,n/Math.sqrt(3)),t.lineTo(0,-(2*Math.sqrt(3)/3)*n),t.lineTo(n,n/Math.sqrt(3)),t.closePath()):(t.beginPath(),t.arc(0,0,n,0,2*Math.PI)),-1==e.indexOf("hollow")?t.fill():(t.fillStyle="white",t.lineWidth=2,t.fill(),t.stroke())}});return l}),i("chart/Series",["require","../utils/BaseUtils","../utils/QueryUtils","../utils/ColorUtils","../Constants","./Point","../dom/Evented","../utils/Formatter","../utils/BezierEasing","../ComponentLibrary","../vector/CanvasRenderer"],function(t){var e=t("../utils/BaseUtils"),i=t("../utils/QueryUtils"),n=t("../utils/ColorUtils"),r=t("../Constants"),a=t("./Point"),o=t("../dom/Evented"),s=t("../utils/Formatter"),l=t("../utils/BezierEasing"),h=t("../ComponentLibrary"),u=t("../vector/CanvasRenderer"),c="{SERIES}",d="{X}",f="{Y}",p="{SIZE}",g="{NAME}",m="{CATEGORY}",v="{VALUE}",y="{PERCENT}",_=2,x=250,b=500,T=250,A=[.9,.85,.8,.75,.7,.65,.6,.55,.5],L="right-top",C="right-bottom",P="left-top",M="left-bottom",E=(2*Math.PI,Math.PI/180),w=600,S="quad-out",O=o.extend({initialize:function(t,e,i){this.vanchart=e,this.points=[],this.refresh(t,i)},refresh:function(t,o){this.options=t;var s=this.vanchart,l=t.type||s.options.chartType,h=e.pick(t.name,"Series"+l+o),u=this._getQueryList(l),c=e.pick(i.queryList(u,"visible"),!0);if(!this.isSeriesAccumulated()){var d=this.options.color||s.getDefaultSeriesColor(h),f=i.queryList(u,"opacity");if(e.hasDefined(d)){var p=n.getStandardColorAndOpacity(d,f);d=p.hex,f=p.alpha}var g=i.queryList(u,"fillColor");g=g===!0?d:g;var m=i.queryList(u,"fillColorOpacity");if(m=isNaN(m)?this._getDefaultFillColorOpacity():m,g){var p=n.getStandardColorAndOpacity(g,m);g=p.hex,m=p.alpha}var v=e.clone(i.queryList(u,"marker"));if(e.hasDefined(v)){var y=this._getMarkerColorAlpha(s,l,h,i.queryList(u,"opacity"));v.fillColor=y.markerColor,v.fillColorOpacity=y.markerOpacity}}if(e.extend(this,{type:l,name:h,index:o,className:"vancharts-series-"+o,visible:c,state:c?r.STATE_SHOW:r.STATE_DROPPED,stack:i.queryList(u,"stack"),stackByPercent:i.queryList(u,"stackByPercent"),style:i.queryList(u,"style")||s.options.style,large:i.queryList(u,"large"),trendLine:i.queryList(u,"trendLine"),bands:i.queryList(u,"bands"),image:i.queryList(u,"image"),animation:i.queryList(u,"animation")&&s.options.animation,marker:v,icon:i.queryList(u,"icon"),color:d,opacity:f,fillColor:g,fillColorOpacity:m,effect:i.queryList(u,"effect")}),this._bindAxis(),this._refresh(o),this._loadData)var _=this._loadData(t.data);else var _=t.data||[];var x=[],b=this,T={};this.points.forEach(function(t){var e=b._getPointKey(t);T[e]=T[e]||[],T[e].push(t)});for(var A=0,L=_.length;L>A;A++){var C=b._getPointKey(_[A]),P=T[C],M=null;if(P){for(var E=0,w=P.length;w>E;E++)if(M=P[E]){P[E]=null;break}M&&(M._lastValue=M[b.getTargetKey()],M.drillSeries=null,M.geo=null,M.moreLabelG&&M.moreLabelG.remove(),M.moreLabelG=null,M.refresh(_[A]))}M||(M=new a(_[A],this)),x.push(M)}for(var C in T)T[C]&&T[C].forEach(function(t){s.removePointGraphics(t,l)});return this.sort&&(x=x.filter(function(t){return!t.isNull}).sort(function(t,e){return Math.abs(e.getTargetValue())-Math.abs(t.getTargetValue())})),this.points=x,this},_getPointKey:function(t){return t.x},_getDefaultFillColorOpacity:function(){return 1},getStackAxis:function(){return this[this.getTargetKey()+"Axis"]},_getMarkerColorAlpha:function(t,i,r,a){var o=t.options.plotOptions,s=o[i],l=s&&s.marker||o.marker,h=this.options.marker,u=h&&h.fillColor||this.options.color||l&&l.fillColor||t.getDefaultSeriesColor(r),c=a;if(e.hasDefined(u)){var d=n.getStandardColorAndOpacity(u,a);u=d.hex,c=d.alpha}return{markerColor:u,markerOpacity:c}},_bindAxis:function(){var t=this,e=t.options,i=t.vanchart;t._getAxisTypes().forEach(function(n){if(i[n]){var r=i[n](e[n]);r&&(r.series.push(t),t[n]=r)}})},_getAxisTypes:function(){return["xAxis","yAxis"]},getTargetKey:function(){return"y"},getBaseAxisType:function(){return"xAxis"},getPointValue4MinMax:function(t){return t.getTargetValue()},_getQueryList:function(t){t=t||this.type;var e=this.vanchart.options.plotOptions;return[this.options,e[t],e]},_getBandsColor:function(t){var i=this.bands,n=this.getTargetKey();if(i){i=e.isArray(i)?i:[i];for(var r=0,a=i.length;a>r;r++){var o=i[r];if(o.axis){var s="x"==o.axis?this.xAxis:this.yAxis,l=s.getValueFromData(t.options),h=o.from,u=o.to;s.isCategory()&&(l=s.indexOfLabel(l),h=h?s.indexOfLabel(h):h,u=u?s.indexOfLabel(h):u);var c=e.hasDefined(h)?l>=h:!0,d=e.hasDefined(u)?u>=l:!0;if(c&&d)return o.color}else{var h=Math.min(o.from,o.to),u=Math.max(o.from,o.to);if(t[n]>=h&&t[n]<=u)return o.color}}if(o=i[0],o&&t[n]<=Math.min(o.from,o.to))return o.color;if(o=i[i.length-1],o&&t[n]>=Math.max(o.from,o.to))return o.color}},_calculateAutoLabelPos:function(t,i,n,r){function a(t,n,a,o){for(var s=t;0>a?s>n:n>s;s+=a){var l={x:i.x,y:s};if(!r.isOverlapped(e.makeBounds(l,o)))return l}}function o(t,n,a,o){for(var s=t;0>a?s>n:n>s;s+=a){var l={x:s,y:i.y};if(!r.isOverlapped(e.makeBounds(l,o)))return l}}var s,l=3,h=t.labelDim,u=this.vanchart.getPlotBounds();if(n){var c,d;c=Math.max(0,i.y),d=u.height-h.height,s=a(c,d,l,h),s||(d=0,c=Math.min(i.y,u.height-h.height),s=a(c,d,-l,h))}else{var f,p;f=Math.max(0,i.x),p=u.width-h.width,s=o(f,p,l,h),s||(p=0,f=Math.min(i.x,u.width-h.width),s=o(f,p,-l,h))}return s?s:i},getTooltipPos:function(t,e,i){var n;if(t.tooltip.follow){var r=i.containerPoint,a=r[0]||r.x,o=r[1]||r.y;n=[a+10,o+10]}else n=this._getFixedPos(t,e);if(n){var s=this.vanchart.getChartBounds(),l=s.y,h=s.x,u=s.y+s.height,c=s.x+s.width,d=n[0],f=n[1];return h>d?d+=h-d:d+e.width>c&&(d-=d+e.width-c),l>f?f+=l-f:f+e.height>u&&(f-=f+e.height-u),[d,f]}},_getArcPoint:function(t,e){return[this._dealWithFloat(t*Math.sin(e)),this._dealWithFloat(-t*Math.cos(e))]},_getNormalTrendLineXYValues:function(t){var e=[],i=[],n=this.vanchart.isInverted()?"posY":"posX",a=this.vanchart.isInverted()?r.LEFT:r.BOTTOM;return t.points.sort(function(t,e){return t[n]-e[n]}),t.points.forEach(function(t){t.isNull||(e.push(t.posX),i.push(t.posY))}),[e,i,a]},_getSeriesInterpolate:function(t){var e=i.queryList(t,"step"),n=i.queryList(t,"curve"),r=this.options,a="linear";return r.step||e&&!r.curve?a="step-after":(r.curve||n&&!r.step)&&(a="cardinal"),a},calculateMapLabel:function(t,i){if(!t||t.isNull||!i||!i.enabled)return t.labelContent=t.labelDim=null,{};var n=i.formatter,a=i.useHtml,o=t.series.type,l=o==r.SCATTER_CHART||o==r.POINT_MAP?r.OUTSIDE:r.INSIDE,h=[];if("object"==typeof n){var u=n.identifier;if(-1!=u.indexOf(g)){var d=s.format(t.name,n.nameFormat),f=t.series.getCategorySeriesStyle(i,l,t),m=e.getTextDimension(d,f,a);h.push({text:d,style:f,dim:m})}var _="",x=-1!=u.indexOf(c),b=-1!=u.indexOf(v)||-1!=u.indexOf(p),T=-1!=u.indexOf(y),A=s.format(t.seriesName,n.seriesFormat),L=s.format(t.getTargetValue(),n.valueFormat),C=s.format(t.percentage,n.percentFormat);if(x&&(_+=A,(b||T)&&(_+=":")),b&&(_+=L,T&&(_+=" ")),T&&(_+=C),_){var f=t.series.getValuePercentageStyle(i,l,t),m=e.getTextDimension(_,f,a);h.push({text:_,style:f,dim:m})}}else t.series.pushCustomLabelContent(t,n,i,a,h,l);var P=t.series.calculateTextDim(h);return{labelContent:h,labelDim:P}},calculateLabelInfo:function(t){if(this.vanchart.isMap())return void e.extend(t,this.calculateMapLabel(t,t.dataLabels));var i=t.dataLabels,n=this.calculateFormatterContent(t,i);e.extend(t,{labelContent:n,labelDim:this.calculateTextDim(n)})},calculateFormatterContent:function(t,e){if(!t||t.isNull||!e||!e.enabled)return[];var i=e.formatter,n=e.useHtml,r=[];return"object"==typeof i?this.pushNormalLabelContent(t,i,e,n,r):this.pushCustomLabelContent(t,i,e,n,r),r},_createMultiLineLabelContent:function(t,i){if(!t)return[];if("object"==typeof t){var n=[],r=t.identifier,a=s.format(i.category,t.categoryFormat),o=s.format(i.seriesName,t.seriesFormat),l=s.format(i[this.getTargetKey()],t.valueFormat),h=s.format(i.percentage,t.percentFormat);return-1!=r.indexOf(m)&&n.push(a),-1!=r.indexOf(c)&&n.push(o),-1!=r.indexOf(v)&&n.push(l),-1!=r.indexOf(y)&&n.push(h),n}return[e.getFormatterFunction(t).call(i)]},pushNormalLabelContent:function(t,e,i,n,r){return this._pushNormalLabelContent(t,e,i,n,r)},_pushNormalLabelContent:function(t,i,n,a,o){function l(t){return t.map(h).filter(u)}function h(e){return-1!==p.indexOf(e)?s.format(t[_[e][0]],i[_[e][1]]):null}function u(t){return null!==t}function d(i,o,s){if(o.length){var l=o.join(r.BLANK_VALUE_PERCENTAGE),h=s(n,null,t),u=e.getTextDimension(l,h,a);i.push({text:l,style:h,dim:u})}}var f=this,p=i.identifier,_={};_[g]=["name","nameFormat"],_[m]=["category","categoryFormat"],_[c]=["seriesName","seriesFormat"],_[v]=[this.getTargetKey(),"valueFormat"],_[y]=["percentage","percentFormat"];var x=[g,m,c],b=[v,y],T=f.getCategorySeriesStyle,A=f.getValuePercentageStyle;this.type===r.TREEMAP_CHART&&(b.unshift(x.shift()),A=T),d(o,l(x),T),d(o,l(b),A)},pushCustomLabelContent:function(t,i,n,r,a,o){var s="";try{s=e.getFormatterFunction(i).call(t)}catch(l){}var h=this.getValuePercentageStyle(n,o,t),u=e.getTextDimension(s,h,r);n.useHtml&&(u.width=isNaN(parseFloat(n.labelWidth))?u.width:parseFloat(n.labelWidth),u.height=isNaN(parseFloat(n.labelHeight))?u.height:parseFloat(n.labelHeight)),a.push({text:s,style:h,dim:u})},calculateTextDim:function(t){var e=0,i=0;if(t&&t.length){for(var n=0,r=t.length;r>n;n++){var a=t[n].dim;e=Math.max(e,a.width),i+=a.height}i+=(r-1)*_}return{width:e,height:i}},_labelUseSeriesColor:function(t){return t==r.OUTSIDE||t==r.TOP||t==r.BOTTOM},getCategorySeriesStyle:function(t,i,n){if(n=n||this,t&&t.style)return t.style;var a=i||(n.series&&n.series.columnType?r.INSIDE:t.align||r.OUTSIDE),o=a===r.OUTSIDE?.1:.15;return e.convertToREMUseDefault16PX({color:n.series._labelUseSeriesColor(a)?n.marker&&n.marker.fillColor||n.color:"#ffffff",fontSize:"0.75rem",fontFamily:"Verdana",textShadow:"1px 1px 1px rgba(0,0,0,"+o+")",fontWeight:"bold"})},getValuePercentageStyle:function(t,i,n){if(n=n||this,t&&t.style)return t.style;var a=i||(n.series&&n.series.columnType?r.INSIDE:t.align||r.OUTSIDE);return e.convertToREMUseDefault16PX({fontSize:"0.75rem",fontFamily:"Verdana",textShadow:"1px 1px 1px rgba(0,0,0,0.15)",color:n.series._labelUseSeriesColor(a)?n.marker&&n.marker.fillColor||n.color:"#ffffff"})},pushBubbleNormalLabelContent:function(t,i,n,r,a,o){var l=i.identifier;if(-1!=l.indexOf(c)){var h=s.format(t.seriesName,i.seriesFormat),u=this.getCategorySeriesStyle(n,o,t),g=e.getTextDimension(h,u,r);a.push({text:h,style:u,dim:g})}if(-1!=l.indexOf(d)||-1!=l.indexOf(f)||-1!=l.indexOf(p)){var m=this._getXYSizeString(t,i,l),v=this.getValuePercentageStyle(n,o,t),y=e.getTextDimension(m,v,r);a.push({text:m,style:v,dim:y})}},_getXYSizeString:function(t,e,i){var n=s.format(t.x,e.XFormat),a=s.format(t.y,e.YFormat),o="-"==t.size?"-":s.format(t.size,e.sizeFormat),l="";return(-1!=i.indexOf(d)||-1!=i.indexOf(f))&&(l="(",-1!=i.indexOf(d)?(l+=n,-1!=i.indexOf(f)&&(l=l+","+a),l+=")"):(l+=a,l+=")"),l+=r.BLANK_VALUE_PERCENTAGE),-1!=i.indexOf(p)&&"-"!=o&&(l+=o),l},calculateTooltipContent:function(t){return this._calculateTooltipContent(t)},_calculateBubbleTooltipContent:function(t){var i=t.tooltip,n=this;if(i&&i.enabled){var r=i.formatter,a="";if("object"==typeof r){var o=i.style,s=r.identifier;a+=n._createBubbleTooltipSeriesLine(t,s,o,r),a+=n._createBubbleTooltipXYSizeLine(t,s,o,r)}else a=e.getFormatterFunction(r).call(t);return a}},_calculateTooltipContent:function(t){var i=t.tooltip,n=this,r=t.points;if(i&&i.enabled){var a=i.formatter,o="";if("object"==typeof a){var s=i.style,l=a.identifier,u="vanChartMap"==this.vanchart.vanChartType,c=this.vanchart.getComponent(h.RANGE_LEGEND_COMPONENT);i.shared&&r&&r.length?(o+=this._createCategoryLine(t,l,s,a),r.filter(function(t){return t.visible&&t.series.visible&&!t.isNull&&t.tooltip&&t.tooltip.shared}).forEach(function(t){var i=u&&c?r[0].color:t.color;o+='<span style="font-size:'+(e.isSupportSVG()?"0.75rem":"12px")+";font-style:normal; color: "+i+";opacity:"+t.opacity+'">&#9679  </span>',o+=n._createSeriesLine(t,l,s,a),o+="<br />"})):(o+=n._createCategoryLine(t,l,s,a),o+=n._createSeriesLine(t,l,s,a))}else o=e.getFormatterFunction(a).call(t);return o}},_createCategoryLine:function(t,i,n,a){var o="",l=t.series.type,h="vanChartMap"==this.vanchart.vanChartType;return l!=r.SCATTER_CHART||h?(l===r.MULTIPIE_CHART?-1!=i.indexOf(c)&&(o=s.format(t.seriesName,a.seriesFormat)):(-1!=i.indexOf(m)&&(o=s.format(t.category,a.categoryFormat)),-1!=i.indexOf(g)&&l!==r.WORD_CLOUD_CHART&&(o=s.format(t.name,a.nameFormat))),o&&(o=(n?"<span>":e.TOOLTIP_CATEGORY_STYLE)+o+"</span>",o+="<br />"),o):this._createBubbleTooltipSeriesLine(t,i,n,a)},_createSeriesLine:function(t,i,n,a){var o,l="",h=t.series.type,u="vanChartMap"==this.vanchart.vanChartType,d=s.format(t[this.getTargetKey()],a.valueFormat),f=s.format(t.percentage,a.percentFormat),m=-1!=i.indexOf(p)||-1!=i.indexOf(v);return h!=r.SCATTER_CHART||u?(h===r.MULTIPIE_CHART||h===r.WORD_CLOUD_CHART?-1!=i.indexOf(g)&&(o=s.format(t.name,a.nameFormat)):-1!=i.indexOf(c)&&(o=s.format(t.seriesName,a.seriesFormat)),o&&((m||-1!=i.indexOf(y))&&(o+=":"),l+=(n?"<span >":e.TOOLTIP_SERIES_STYLE)+o+"</span>"),m&&-1!=i.indexOf(y)?l+=(n?"<span>":e.TOOLTIP_VALUE_STYLE)+d+"  "+f+"</span>":m?l+=(n?"<span>":e.TOOLTIP_VALUE_STYLE)+d+"</span>":-1!=i.indexOf(y)&&(l+=(n?"<span>":e.TOOLTIP_VALUE_STYLE)+f+"</span>"),l):this._createBubbleTooltipXYSizeLine(t,i,n,a)},_createBubbleTooltipSeriesLine:function(t,i,n,r){var a="";if(-1!=i.indexOf(c)){var o=s.format(t.seriesName,r.seriesFormat);a+=(n?"<span >":e.TOOLTIP_SERIES_STYLE)+o+"</span>",a+="<br />"}return a},_createBubbleTooltipXYSizeLine:function(t,i,n,r){var a="";if(-1!=i.indexOf(d)||-1!=i.indexOf(f)||-1!=i.indexOf(p)){var o=this._getXYSizeString(t,r,i);a+=(n?"<span>":e.TOOLTIP_VALUE_STYLE)+o+"</span>"}return a},_calculateSingleLineLabelContent:function(t,i){if(!t)return"";if("object"==typeof t){var n="",r=t.identifier,a=s.format(i.category,t.categoryFormat),o=s.format(i.seriesName,t.seriesFormat);if((-1!=r.indexOf(m)||-1!=r.indexOf(c))&&(n+=-1!=r.indexOf(m)&&-1!=r.indexOf(c)?a+" "+o:-1!=r.indexOf(m)?a:o),!i.isNull&&-1!=r.indexOf(v)||-1!=r.indexOf(y)){e.isEmpty(n)||(n+=":");var l=s.format(i[i.series.getTargetKey()],t.valueFormat),h=s.format(i.percentage,t.percentFormat);n+=-1!=r.indexOf(v)&&-1!=r.indexOf(y)?l+" "+h:-1!=r.indexOf(v)?l:h}return n}return e.getFormatterFunction(t).call(i)},_getAngle:function(t,e){return Math.atan2(t[1]-e[1],t[0]-e[0])/(Math.PI/180)},_getBackgroundColor:function(){var t=this.vanchart.options,e="string"==typeof t.plotBackgroundColor,i="string"==typeof t.backgroundColor,r=e?t.plotBackgroundColor:i?t.backgroundColor:"white";return n.colorToHex(r)},getFillFilter:function(t,e){return t},filterRender:function(){this.useCanvas()?this._canvasRender():this._svgFilterRender()},render:function(){this.useCanvas()?this._canvasRender():this._svgRender()},useCanvas:function(){return this.large&&(this.type==r.BUBBLE_CHART||this.type==r.SCATTER_CHART)},_createGroup:function(t,e){return t.group().addTo(e.clipSeriesGroup)},getSeryTotalValue:function(){var t=0;return this.points.forEach(function(e){t+=e.getTargetValue()}),t},_svgRender:function(){this.initialAnimationMoving=!this.group;var t=this.vanchart,i=t.renderer;this.group||(this.group=this._createGroup(i,t).style("cursor",this._pointerStyle()).attr("transform",e.makeTranslate(this._getTranslate())).attr("class",this.className+" "+this.type)),this.animation&&this.type==r.GAUGE_CHART?d3.select(this.group.node()).transition().duration(w).ease(S).attr("transform",e.makeTranslate(this._getTranslate())):this.group.attr("transform",e.makeTranslate(this._getTranslate())),this.drawSeries&&this.drawSeries(),this.drawPoints(),this.updateGraphics&&this.updateGraphics(),this._removeDataLabels();var n=this;t.setTimeout(n.className+"point_animate",function(){n._animateEnd()},n.animation?n._getAnimationTime():0)},_pointerStyle:function(){return this.points[0]&&this.points[0].hyperlink?"pointer":""},_isSeriesInteractive:function(){return!1},_svgFilterRender:function(){var t=this.visible,e=this;this.getDataToDraw().forEach(function(i){t&&i.visible?(i.graphic&&i.graphic.style({display:"inline"}),i.textGraphic||e._createTextGraphic(i),i.effectGraphic||e.drawPointEffect(i,i.series)):(i.graphic&&i.graphic.style({display:"none"}),i.effectGraphic&&i.effectGraphic.remove(),i.textGraphic&&i.textGraphic.remove(),i.textGraphic=i.effectGraphic=null)})},_canvasRender:function(){this._canvas||(this._canvas=new u(this.vanchart.dom,this.vanchart)),this._canvas.clearAll(),this._canvas.addSeries(this)},getEvents:function(){return{mouseover:this.onSeriesMouseOver,seriesUnChosen:this.onSeriesUnChosen,tap:this.onSeriesMouseOver}},onSeriesMouseOver:function(t){var i=this,n=i.vanchart,r=n.hoverSeries,a=n.hoverPoint,o=n.renderer;r!=i&&(r&&r.fire("seriesUnChosen",t),n.hoverSeries=i,i._onSeriesMouseOver&&i._onSeriesMouseOver());var s=i.getClosestPoint(t.containerPoint);if(!a||a.series==i&&a==s||a.fire("mouseout",t),s&&s!=a&&(s._events||s.getEvents&&s.on(s.getEvents(),s),s.fire("mouseover",t),s.series.defaultMarker)){var l=s.series.defaultMarker;o._targets[e.stamp(l.node())]=l,o._targets[e.stamp(l)]=s}},onSeriesUnChosen:function(t){this==this.vanchart.hoverSeries&&(this.vanchart.hoverSeries=null),this._onSeriesUnChosen&&this._onSeriesUnChosen(t)},_getAnimationTime:function(){switch(this.state){case r.STATE_SHOW:return this.getInitShowTime();case r.STATE_TO_SHOW:return this.getReAppearTime();case r.STATE_TO_DROP:return this.getDropTime();default:return 0}},getInitShowTime:function(){return 0},getReAppearTime:function(){return 0},getDropTime:function(){return 0},getDataToDraw:function(){return this.points},getTextDataToDraw:function(){return this.getDataToDraw()},updatePointGraphic:function(t){},_updateMarkerPointGraphic:function(t){var i=t.graphic,n=t.marker,r=n.symbol;i&&(e.isImageMarker(r)&&!i.image?(i.strokePath&&i.strokePath.remove(),i.fillPath&&i.fillPath.remove(),i.markerPath&&i.markerPath.remove(),i.strokePath=i.fillPath=i.markerPath=null,this._createMarker(n,i)):!e.isImageMarker(r)&&i.image&&(i.image&&i.image.remove(),i.image=null,this._createMarker(n,i)));
},drawPoints:function(){var t=this,e=t.vanchart,i=e.renderer,n=this._calculateAnimationDelay(),r=this._getPointGraphicGroup();this._isSeriesInteractive()&&i.registerInteractiveTarget(this,r),r._normalGroup=r._normalGroup||i.group(),r._effectGroup=r._effectGroup||i.group(),r._normalGroup.addTo(r),r._effectGroup.addTo(r),t.getDataToDraw().forEach(function(e){var i=e.effect&&e.effect.enabled?r._effectGroup:r._normalGroup;t.drawPoint(i,e,n)})},_drawEffectPoints:function(){var t=this;t.getTextDataToDraw().forEach(function(e){t.drawPointEffect(t,e)})},drawPointEffect:function(t,i){function n(){if(r){var e=i.graphic?i.graphic.node():null;t.effectAnimation(e,i)}}var r=t.visible&&i.visible&&!i.isNull;if(clearInterval(i.effectInterval),i.effectGraphic&&i.effectGraphic.remove(),i.effectGraphic=null,e.isSupportSVG()&&r&&i.effect&&i.effect.enabled){var a=t._getEffectTime(i);a&&(n(),i.effectInterval=setInterval(n,a))}},drawPoint:function(t,e,i){i=i||0;var n=e.series,r=n.vanchart,a=r.renderer,o=n.visible,s=n.animation,l=r.getComponent(h.RANGE_LEGEND_COMPONENT),u=n.getAttrs(e),c=o&&e.visible&&!e.isNull;c&&e.graphic&&!e.removed?(e.graphic.addTo(t),s?e.graphic.animate(n,n.updateAnimation,e,i):e.graphic.attr(u)):c?(e.graphic?(e.graphic.addTo(t),e.removed=!1):(n._createPointGraphic(e).addTo(t),n._updatePointGraphicStyle(e)),s?e.graphic.animate(n,n.createAnimation,e,i):e.graphic.attr(u)):c||!e.graphic||e.removed||(l?e.graphic.attr(u):(s?e.graphic.animate(n,n.dropAnimation,e,i):e.graphic.remove(),a.removeInteractiveTarget(e.graphic),e.removed=!0)),!e.removed&&e.graphic&&(n._updatePointGraphicStyle(e),a.registerInteractiveTarget(e,e.graphic)),clearInterval(e.effectInterval),e.effectGraphic&&e.effectGraphic.remove(),e.effectGraphic=null},_getEffectTime:function(t){return isNaN(t.effect.period)?t.series.getDefaultEffectTime():t.effect.period},_getPointEffectGroup:function(t){var e=t.series,i=e.vanchart.renderer;return t.effectGraphic=t.effectGraphic||i.group().addTo(e._getPointGraphicGroup()).style("pointer-events","none")},_createPointGraphic:function(t){var e=this.getPointGraphicKey(t),i=this.vanchart.renderer;return t.graphic=i[e](),t.graphic},getLegendKey:function(t){return this.isSeriesAccumulated()?t.name:this.name},_updateSeriesGraphicStyle:function(){this.drawSeries&&this.drawSeries();var t=this._getPointGraphicGroup();t&&(t._normalGroup&&t._normalGroup.addTo(t),t._effectGroup&&t._effectGroup.addTo(t))},_updatePointGraphicStyle:function(t){var e=this.getStyle(t),i=this.vanchart.highlightTarget;if(i&&this.isSupportLegendHighlight()){var n=this.getLegendKey(t),r=n==i||t._rangeItem==i?1:.3;e["fill-opacity"]=e["stroke-opacity"]=r}t.graphic&&t.graphic.style(e)},_createMarker:function(t,i){var n=t.symbol,a=t.radius,o=this.vanchart.renderer,i=i||o.group();if(e.isImageMarker(n)){var s=t.width,l=t.height;i.image=o.image({preserveAspectRatio:"none",x:-s/2,y:-l/2,width:s,height:l}).imageContent(n).addTo(i)}else{var h=this._isHollowMarker(n),u=this.type==r.LINE_CHART;h&&u?(i.strokePath=o.path({d:e.getMarkerPath(n,a+2)}).addTo(i),i.fillPath=o.path({d:e.getMarkerPath(n,a-1)}).addTo(i)):i.markerPath=o.path({d:e.getMarkerPath(n,a)}).addTo(i)}return i},_updateMarker:function(t,i,n){i=i||t.graphic,n=n||t.marker;var a=n.fillColorOpacity,o=this.vanchart.highlightTarget;if(o){var s=this.getLegendKey(t);a=s==o||t._rangeItem==o?1:.3}var l=n.symbol,h=this._getBackgroundColor();if(e.isImageMarker(l));else{var u=this._isHollowMarker(l),c=this.type==r.LINE_CHART;u&&c?(i.strokePath.style({fill:n.fillColor,"fill-opacity":a,stroke:h,"stroke-width":2}),i.fillPath.style({fill:h})):u?i.markerPath.style({stroke:n.fillColor,"stroke-opacity":a,"stroke-width":2,fill:h}):c?i.markerPath.style({fill:n.fillColor,"fill-opacity":a,"stroke-width":2,stroke:h}):i.markerPath.style({fill:n.fillColor,"fill-opacity":a})}},_onMarkerPressed:function(t){if(t.graphic){var i=t.marker,n=i.symbol,a=(t.series,{fill:t.clickColor,"fill-opacity":t.clickOpacity});if(!e.isImageMarker(n)){var o=this._isHollowMarker(n),s=this.type==r.LINE_CHART;o&&s?t.graphic.strokePath.style(a):t.graphic.markerPath.style(a)}}},_onMarkerMouseOver:function(t){if(t.graphic){var i=t.marker,n=i.symbol,a=(t.series.animation,i.radius+2);if(e.isImageMarker(n)){var o=i.width+4,s=i.height+4;t.graphic.image.attr({x:-o/2,y:-s/2,width:o,height:s})}else{var l=this._isHollowMarker(n),h=this.type==r.LINE_CHART;l&&h?(t.graphic.strokePath.attr({d:e.getMarkerPath(n,a+2)}),t.graphic.fillPath.attr({d:e.getMarkerPath(n,a-1)})):t.graphic.markerPath.attr({d:e.getMarkerPath(n,a)})}}else{var i=this._getDefaultMarker(t);t.series.vanchart.renderer;t.series.defaultMarker=t.series.defaultMarker||this._createMarker(i).addTo(this.group),t.series.defaultMarker.attr("transform",e.makeTranslate([t.posX,t.posY])),this._updateMarker(t,t.series.defaultMarker,i)}},_onMarkerMouseOut:function(t){var i=t.marker,n=i.symbol,a=(t.series.animation,i.radius);if(t.graphic)if(e.isImageMarker(n)){var o=i.width,s=i.height;t.graphic.image.attr({x:-o/2,y:-s/2,width:o,height:s})}else{var l=this._isHollowMarker(n),h=this.type==r.LINE_CHART;l&&h?(t.graphic.strokePath.attr({d:e.getMarkerPath(n,a+2)}),t.graphic.fillPath.attr({d:e.getMarkerPath(n,a-1)})):t.graphic.markerPath.attr({d:e.getMarkerPath(n,a)})}},_getDefaultMarker:function(t){return{symbol:r.CIRCLE,fillColor:t.marker.fillColor,fillColorOpacity:t.marker.fillColorOpacity,radius:4.5,enabled:!0}},_calculateAnimationDelay:function(){return 0},_isHollowMarker:function(t){return t&&-1!=t.indexOf("hollow")},_animateEnd:function(){this._showLabels(),this._drawEffectPoints()},_drawLabels:function(){var t=this,i=(t.vanchart,this.visible),n=t.animation;t.getTextDataToDraw().forEach(function(r){var a=i&&r.visible&&!r.isNull&&r.labelPos;if(a&&r.textGraphic){var o=r.labelPos.x,s=r.labelPos.y;r.dataLabels.useHtml?n?d3.select(r.textGraphic).transition().ease(l.css.swing).duration(250).style({left:o+"px",top:s+"px"}):(r.textGraphic.style.left=o+"px",r.textGraphic.style.top=s+"px"):n?d3.select(r.textGraphic.node()).transition().ease(l.css.swing).duration(250).attr("transform",e.makeTranslate([o,s])):r.textGraphic.attr("transform",e.makeTranslate([o,s])),r.labelPos.startPos&&(r.leadLine?r.leadLine.attr("d",t._getLeadLinePath(r)):r.leadLine=t._getLeadLine(r))}else a&&!r.textGraphic?t._createTextGraphic(r):!a&&r.textGraphic&&(r.textGraphic.remove(),r.leadLine&&r.leadLine.remove(),r.textGraphic=null,r.leadLine=null)})},_showLabels:function(){var t=this,e=t.vanchart;e.setTimeout(t.className+"more_label_animate",function(){if(e._removeChangeDataState(t),t._clearMoreLabels(),t._removeDataLabels(),t._updateDataLabels(),t.animation){var i=t._getPointTextLabelGroup();d3.select(i.node()).style("opacity",0).transition("linear").duration(400).style("opacity",1)}},e.getShowMoreLabelTime()),t._updateMoreLabels()},_updateMoreLabels:function(){var t=this,e=t.vanchart;0!==e.getShowMoreLabelTime()&&t.visible&&t.getTextDataToDraw().forEach(function(e){e.visible&&t._showAndExitMoreLabel(e)})},_clearMoreLabels:function(){this.getTextDataToDraw().forEach(function(t){t.moreLabelG&&t.moreLabelG.remove(),t.moreLabelG=null})},_getMoreLabelStyle:function(){var t=this.vanchart.options.moreLabel;return t.style||{fontFamily:"verdana",fontSize:"9pt"}},_showAndExitMoreLabel:function(t,i,r,a,o,s){if(0!==t.depth){var h=this,u=h.vanchart,c=u.renderer,d=h.animation,f=s||h.group,p=t._lastValue||0,g=e.accAdd(t[h.getTargetKey()],-p),m=u.options.moreLabel,v=0>g?m.minusColor||"#f4b145":m.plusColor||"#52d1b8";if(g>0)g="+"+g;else if(!(0>g))return;var y=h._getMoreLabelStyle(),_=e.getTextDimension(g,y);if(e.hasNotDefined(i)||e.hasNotDefined(r)){var A=h._getMoreLabelDefaultCenter(t,_);i=A.centerX,r=A.centerY,e.hasDefined(t.labelPos)&&e.hasDefined(t.labelDim)&&(i=t.labelPos.x+t.labelDim.width/2,r=t.labelPos.y+t.labelDim.height/2)}a&&(i=a(i,_.width)),o&&(r=o(r,_.height)),t.moreLabelG=c.text().addTo(f),d?d3.select(t.moreLabelG.node()).attr("dy",".32em").attr("text-anchor","middle").text(g).call(e.setTextStyle,y).style({fill:v}).attr("opacity",0).attr("x",i).attr("y",r+5).transition().duration(x).ease("back-out").attr("y",r).attrTween("opacity",function(){return function(t){return l.css.swing(t)}}).transition().delay(b).duration(T).ease("back-in").attr("y",r+5).attrTween("opacity",function(){return function(t){return 1-l.css.swing(t)}}):(y["white-space"]="nowrap",t.moreLabelG.textContent(g).attr("x",i-_.width/2).attr("y",r-_.height/2).style(y).style({color:n.colorToHex(v)}))}},_getMoreLabelDefaultCenter:function(t,e){return{centerX:t.x+t.width/2,centerY:t.y-e.height/2}},_updateDataLabels:function(){var t=this;t.getTextDataToDraw().forEach(function(e){t._createTextGraphic(e)})},_removeDataLabels:function(){var t=this;t.getTextDataToDraw().forEach(function(t){t.textGraphic&&(t.textGraphic.remove(),t.textGraphic=null),t.leadLine&&(t.leadLine.remove(),t.leadLine=null)})},_createTextGraphic:function(t){var i=this,n=function(t){return i.visible&&!t.isNull&&t.visible&&t.labelPos&&!isNaN(t.labelPos.x)&&!isNaN(t.labelPos.y)&&t.dataLabels&&t.dataLabels.enabled};if(n(t)){var a=i.vanchart,o=a.renderer,s=t.labelContent,l=t.labelPos.x,h=t.labelPos.y,u=t.dataLabels,c=u.useHtml,d=this._getPointTextLabelGroup(),f=o.vtext(c).attr("transform",e.makeTranslate([l,h])).style({"pointer-events":"none"});h=0;for(var p=0,g=s.length;g>p;p++){var m,v=s[p],y=v.dim,_=v.text,x=v.style;switch(t.dataLabels._align){case r.LEFT:m=0;break;case r.RIGHT:m=t.labelDim.width-y.width;break;case r.CENTER:default:m=(t.labelDim.width-y.width)/2}o.vtspan(c).style({width:u.labelWidth+"px",height:u.labelHeight+"px"}).attr("y",h).attr("x",0).attr("dy",.85*y.height).attr("dx",m).textContent(_).style(x).addTo(f),h+=y.height+2}t.textGraphic=d.append(f),t.labelPos.startPos&&(t.leadLine=d.append(this._getLeadLine(t)))}},_getLeadLine:function(t){return this.vanchart.renderer.path().attr("d",this._getLeadLinePath(t)).style({fill:"none",stroke:t.dataLabels.connectorColor||t.color,"stroke-width":t.dataLabels.connectorWidth||0})},_getLeadLinePath:function(t){var e=t.labelPos.startPos,i=t.labelPos.midPos,n=t.labelPos.endPos,r=this._dealWithFloat;return"M"+r(e.x)+","+r(e.y)+"L"+r(i.x)+","+r(i.y)+"L"+r(n.x)+","+r(n.y)},_dealWithFloat:function(t){return Math.abs(t)<1e-6?0:t},_getPointGraphicGroup:function(){return this.group},_getPointTextLabelGroup:function(){if(this.textGraphicGroup)this.textGraphicGroup.attr("transform",e.makeTranslate(this._getTranslate()));else{var t=this.vanchart,i=t.seriesTextRenderGroup,n=t.seriesTextDivGroup;this.textGraphicGroup=t.renderer.vgroup(),i.append(this.textGraphicGroup.renderG),n.append(this.textGraphicGroup.divG),this.textGraphicGroup.attr("transform",e.makeTranslate(this._getTranslate()))}return this.textGraphicGroup},_getTranslate:function(){return this.vanchart.getPlotBounds()},onPointTap:function(){},onPointMouseMove:function(t){var e=this.series.vanchart;e.showTooltip(e.hoverPoint,t)},calcOutsideLabel:function(t,e,i,n){var r=this,a={};if(t.map(function(t){var e=r.getLocByArc(r.getCenterAngle(t));a[e]=a[e]||[],a[e].push(t)}),n)return a=r.ignoreMin(a,n),r.placeOutSideLabels(a,n),n;n=Math.min(i[0]-e.x,e.x+e.width-i[0],i[1]-e.y,e.y+e.height-i[1]);for(var o=0,s=A.length;s>o;o++){var l=n*A[o],h=r.ignoreMin(a,l);if(r.placeOutSideLabels(h,l),r.testWithinBounds(h,i,e))break}return l},calculateInsideLabelBounds:function(t){var e=this;t.map(function(i,n){var r=t[n],a=e.getCenterAngle(r),o=e._getInnerRadius(r),s=e._getOuterRadius(r),l=o+(s-o)/2,h=e._getArcPoint(l,a),u=h[0]-r.labelDim.width/2,c=h[1]-r.labelDim.height/2;r.labelPos={x:u,y:c}})},calculateLeadLineStartPos:function(t){var e=this;t.map(function(t){var i=e._getOuterRadius(t),n=e.getCenterAngle(t);t.labelPos&&(t.labelPos.startPos={x:(i+1)*Math.sin(n),y:(i+1)*Math.cos(n+Math.PI)})})},getCenterAngle:function(t){var i=this.chartInfo.rotate||0,n=i+(this._getStartAngle(t)+this._getEndAngle(t))/2;return e.makeValueInRange(0,2*Math.PI,n)},getLocByArc:function(t){return t%=2*Math.PI,t<Math.PI/2?L:t<Math.PI?C:t<3*Math.PI/2?M:P},ignoreMin:function(t,e){var i={};for(var n in t)t[n].map(function(t){t.labelPos=null}),i[n]=this._ignoreMinArcLabel(e,t[n]);return i},_ignoreMinArcLabel:function(t,e){for(var i=0,n=0,r=e.length;r>n;n++){var a=e[n].labelDim;i+=a.height}if(i>1.2*t){var o=i-1.2*t;e.sort(function(t,e){return t.value-e.value});for(var n=0,r=e.length;r>n&&!(0>o);n++){var s=e[n].labelDim.height;o-=s}e=e.slice(n,e.length)}var l=this;return e.sort(function(t,e){return l.getCenterAngle(t)-l.getCenterAngle(e)}),e},placeOutSideLabels:function(t,e){var i=this;Object.keys(t).map(function(n){i.findNiceBounds(!0,t[n],e,n)||i.findNiceBounds(!1,t[n],e,n)})},findNiceBounds:function(t,e,i,n){var r,a,o=1.2*i,s=.1*i,l=this._getStartAndEndAngle(n),h=t?l.endAngle:l.startAngle,u=t?E:-E;e.map(function(t){t.labelPos=null});for(var c=0,d=e.length;d>c;c++){var f=t?c:d-c-1,p=t?Math.max:Math.min,g=e[f],m=g.labelDim,v=this.getCenterAngle(g);v=a?p(v,a):v;for(var y=!1,_=v;t?h>_:_>h;_+=u){var x=o*Math.sin(_),b=o*Math.cos(_+Math.PI),T=this._getLabelBounds(n,x,b,s,m);if(r?!this._isOverlapOrShadow(r,T):!0){y=!0,a=_;break}}if(!y)return!1;var A,P={x:x,y:b};A=n==L||n==C?{x:x+s,y:b}:{x:x-s,y:b},r=T,g.labelPos={x:T.x,y:T.y,midPos:P,endPos:A}}return!0},_getStartAndEndAngle:function(t){switch(t){case L:return{startAngle:0,endAngle:Math.PI/2};case C:return{startAngle:Math.PI/2,endAngle:Math.PI};case M:return{startAngle:Math.PI,endAngle:3*Math.PI/2};case P:return{startAngle:3*Math.PI/2,endAngle:2*Math.PI}}},_getLabelBounds:function(t,e,i,n,r){var a,o;return a=t==L||t==C?e+n+_:e-n-_-r.width,o=i-r.height/2,{x:a,y:o,width:r.width,height:r.height}},_isOverlapOrShadow:function(t,i){var n=Math.max(t.y,i.y),r=Math.min(t.y+t.height/2,i.y+i.height/2),a=Math.max(t.y+t.height/2,i.y+i.height/2),o=Math.min(t.y+t.height,i.y+i.height);return e.rectangleOverlapped(t,i)||r>=n||o>=a},testWithinBounds:function(t,i,n){for(var r in t){var a,o,s,l,h;switch(o=s=0,r){case L:case C:s=n.y-i[1],l=n.width+n.x-i[0],h=n.height;break;case M:case P:o=n.x-i[0],s=n.y-i[1],l=-o,h=n.height}a={x:o,y:s,width:l,height:h};for(var u=0;u<t[r].length;u++){var c=t[r][u];if(c.labelPos){var d={x:c.labelPos.x,y:c.labelPos.y,width:c.labelDim.width,height:c.labelDim.height};if(!e.containsRect(a,d))return!1}}}return!0},_getInnerRadius:function(t){return t.innerRadius},_getOuterRadius:function(t){return t.outerRadius},_getStartAngle:function(t){return t.startAngle},_getEndAngle:function(t){return t.endAngle},_getPercentValue:function(t,e){return t?(t+="",-1!=t.indexOf("%")&&(t=parseFloat(t)*e/100),parseFloat(t)):0},remove:function(){var t=this.vanchart;this.points.forEach(function(e){t.removePointGraphics(e,this.type)}),this._canvas&&this._canvas.remove(),this.textGraphicGroup&&this.textGraphicGroup.remove(),this.group&&this.group.remove(),this.textGraphicGroup=this._canvas=this.group=null},getPressedStyle:function(){return null},onPointPress:function(){var t=this,e=t.series,i=e.getPressedStyle(t);i&&t.graphic.style(i)},onPointPressUp:function(){var t=this,e=t.series,i=e.getHighLightStyle(t);i&&t.graphic.style(i)},isSupportLegendHighlight:function(){return!0},isSeriesAccumulated:function(){return!1},isTreeSeries:function(){return!1},onPointMouseOver:function(){},onPointMouseOut:function(){},getClosestPoint:function(){return null}});return O}),i("EffectHelper",["require","./utils/BaseUtils","./utils/BezierEasing"],function(t){function e(t,e){function i(){return function(t){return c.makeTranslate3d({x:p.x,y:p.y-25*t})}}function n(){return function(t){return c.makeTranslate3d({x:p.x,y:p.y-25*(1-t)})}}function r(){return m.path().addTo(y).style(v).attr("d",f)}function a(t,e,i){t.style(v).attr("transform",T),d3.select(t.node()).transition().delay(e).ease("linear").duration(i).attrTween("transform",function(){return function(t){return b+"scale("+(x+1.4*x*t)+")"}}).styleTween("fill-opacity",function(){return function(t){return.6*(1-t)}})}var o=e.series,s=o.vanchart,l=s._leaflet,h=e.getLatLng(),p=l.latLngToLayerPoint(h),g=o._getEffectTime(e);d3.select(t).interrupt("point-map-effect").transition("point-map-effect").ease(d.css["ease-out-quint"]).duration(.25*g).styleTween("transform",i).transition().ease(d.css["ease-in-quint"]).duration(.25*g).styleTween("transform",n).transition().ease(d.css["ease-out-quint"]).duration(.25*g).styleTween("transform",i).transition().ease(d.css["ease-in-quint"]).duration(.25*g).styleTween("transform",n);var m=s.renderer,v={"fill-opacity":0,fill:e.color},y=u(e,o),_=e.icon.iconSize,x=_[0]/90,b=c.makeTranslate({x:p.x,y:p.y}),T=b+" scale("+x+")",A=y.firstG=y.firstG||r(),L=y.secondG=y.secondG||r(),C=y.thirdG=y.thirdG||r(),P=g/o.getDefaultEffectTime();a(A,0,2e3*P),a(L,600*P,2e3*P),a(C,1200*P,2e3*P)}function i(t,e,i,n){var a=r(e,i,n);d3.select(t).attr("transform-origin","center").transition().ease(d.css["ease-out-quad"]).duration(.5*a.period).attrTween("filter",a.firstTweenFun).attr("transform",a.translate+"scale(1.05)").transition().ease(d.css["ease-in-quad"]).duration(.5*a.period).attrTween("filter",a.secondTweenFun).attr("transform",a.translate+"scale(1)")}function n(t,e){var i=r(e);d3.select(t).style("transform",i.translate+"scale(1)").style("transform-origin","center").transition().ease(d.css["ease-out-quad"]).duration(.5*i.period).attrTween("filter",i.firstTweenFun).style("transform",i.translate+"scale(1.05)").transition().ease(d.css["ease-in-quad"]).duration(.5*i.period).attrTween("filter",i.secondTweenFun).style("transform",i.translate+"scale(1)")}function r(t,e,i){function n(){return function(e){return s.updateDropShadowFilter&&s.updateDropShadowFilter(t.effectShadowFilter,3*e,3*e,.75*e,5*e,91/255,91/255,91/255),l}}function r(){return function(e){return s.updateDropShadowFilter&&s.updateDropShadowFilter(t.effectShadowFilter,3*(1-e),3*(1-e),.75*(1-e),5*(1-e),91/255,91/255,91/255),l}}var a=t.series,o=a.vanchart,s=o.renderer;t.effectShadowFilter=t.effectShadowFilter||s.createDropShadowFilter(3,3,.75,5,91/255,91/255,91/255);var l="url(#"+c.stamp(t.effectShadowFilter)+")",h=a._getEffectTime(t),u=isNaN(e)||isNaN(i)?"":c.makeTranslate({x:e,y:i});return{period:h,translate:u,firstTweenFun:n,secondTweenFun:r}}function a(t,e){o(t,null,e)}function o(t,e,i){function n(e){return a({outerRadius:t.radius+e*t.radius*1.5})}var r={"fill-opacity":0,stroke:"none",fill:t.color},a=d3.svg.arc().innerRadius(t.radius).startAngle(0).endAngle(360);h(t,{isMap:i,initStyle:r,pathFun:n,trans:e})}function s(t,e){function i(t){return t*o*2.5}function n(t){return c.getMarkerPath(a,o+i(t)/2-1)}if(t.marker&&t.marker.symbol){var r=t.marker,a=r.symbol,o=r.radius;if(c.isImageMarker(a))return;var s={fill:"none",stroke:r.fillColor,"stroke-width":0,"stroke-opacity":0};h(t,{isMap:e,initStyle:s,opacityKey:"stroke-opacity",pathFun:n,borderFun:i})}else l(t,e)}function l(t,e){function i(t){return o({outerRadius:t*r*3.5})}var n=t.marker,r=n.radius,a={"fill-opacity":0,stroke:"none",fill:n.fillColor},o=d3.svg.arc().innerRadius(0).startAngle(0).endAngle(360);h(t,{isMap:e,initStyle:a,pathFun:i})}function h(t,e){function i(){return s.path().addTo(r).style(l)}function n(t,i,n){t.style(l),d3.select(t.node()).transition().delay(i).ease("linear").duration(n).styleTween("stroke-width",function(){return e.borderFun}).styleTween(e.opacityKey||"fill-opacity",function(){return function(t){return.3*(1-t)}}).attrTween("d",function(){return e.pathFun})}var r,a=t.series,o=a.vanchart,s=o.renderer,l=e.initStyle,h=e.trans||{x:t.posX,y:t.posY};if(e.isMap){var d=o._leaflet,f=t.getLatLng(),p=d.latLngToLayerPoint(f);h=p,r=u(t,a)}else r=a._getPointEffectGroup(t);r.attr("transform",c.makeTranslate(h));var g=r.firstG=r.firstG||i(),m=r.secondG=r.secondG||i(),v=r.thirdG=r.thirdG||i(),y=a._getEffectTime(t),_=y/a.getDefaultEffectTime();n(g,0,1600*_),n(m,440*_,1600*_),n(v,880*_,1600*_)}function u(t,e){var i=e.vanchart,n=i._leaflet,r=i.renderer;return i._effectLayer||(i._effectLayer=L.layerGroup().addTo(n),i._effectLayer.rawElement=i._effectLayer._g),t.effectGraphic=t.effectGraphic||r.group().addTo(i._effectLayer).style("pointer-events","none"),t.effectGraphic}var c=t("./utils/BaseUtils"),d=t("./utils/BezierEasing"),f="M-56,0a56,16 0 1,0 112,0a56,16 0 1,0 -112,0";return{MARKER_EFFECT_TIME:2560,markerEffectAnimation:s,bubbleEffectAnimation:a,AREA_STYLE_EFFECT_TIME:2e3,areaStyleEffectAnimation:i,areaMapEffectAnimation:n,POINT_MAP_EFFECT_TIME:3200,pointMapEffectAnimation:e,forceBubbleEffectAnimation:o}}),i("chart/Map",["require","../Constants","../utils/BaseUtils","../utils/QueryUtils","../ComponentLibrary","./Series","../EffectHelper","../ChartLibrary","../ChartLibrary","../ChartLibrary"],function(t){var e=t("../Constants"),i=t("../utils/BaseUtils"),n=t("../utils/QueryUtils"),r=t("../ComponentLibrary"),a=t("./Series"),o=t("../EffectHelper"),s=a.extend({_refresh:function(){var t=this._getQueryList();i.extend(this,{icon:n.queryList(t,"icon")})},getTargetKey:function(){return"value"},_getPointKey:function(t){return t.name},mapEffectAnimation:function(t,i){this.type==e.POINT_MAP?o.pointMapEffectAnimation(t._icon,i):o.areaMapEffectAnimation(t._path,i)},getDefaultEffectTime:function(){return this.type==e.POINT_MAP?o.POINT_MAP_EFFECT_TIME:o.AREA_STYLE_EFFECT_TIME},_onPointMouseMove:function(t){var e=this,i=e.series;t.containerPoint=[t.containerPoint.x,t.containerPoint.y],i.vanchart.showTooltip(e,t)},_onPointClick:function(t){var e=this,i=e.series;i._onPointMouseMove.call(e,t),e.onClick(t.originalEvent)},pointEvents:function(){return{mousemove:this._onPointMouseMove,click:this._onPointClick}},_getFixedPos:function(t){var i=t.series.vanchart,n=i._leaflet,a=(i.getComponent(r.GEO_COMPONENT),t.series.type),o=t.getLatLng();if(o){var s=n.latLngToContainerPoint(o);if(a==e.AREA_MAP){var l=0,h=0;return t.dataLabels&&t.labelDim&&t.labelPos&&(l=t.labelDim.width/2,h=t.labelDim.height/2),[s.x+l,s.y+h]}return[s.x,s.y]}},getMapStyle:function(t){return this.type==e.POINT_MAP?{icon:L.icon(t.icon)}:{fillColor:t.color,fillOpacity:t.opacity,color:t.borderColor,weight:t.borderWidth,opacity:t.borderOpacity,filter:"none"}},getMapMouseOverStyle:function(t){return this.type==e.POINT_MAP?{}:{fillColor:t.mouseOverColor,weight:2,filter:"url(#"+i.stamp(this.vanchart._dropShadow)+")"}}});return t("../ChartLibrary").register(e.POINT_MAP,s),t("../ChartLibrary").register(e.AREA_MAP,s),t("../ChartLibrary").register(e.HEAT_MAP,s),s}),i("VanChartMap",["require","./VanChart","./VanChartLayout","./utils/BaseUtils","./utils/PathUtils","./ComponentLibrary","./ChartLibrary","./Constants","./utils/Formatter","./utils/BoundsManager","./utils/ColorUtils","./utils/QueryUtils","./chart/Map","./vector/CanvasRenderer","./vector/Animation"],function(t){var e=t("./VanChart"),i=t("./VanChartLayout"),n=t("./utils/BaseUtils"),r=t("./utils/PathUtils"),a=t("./ComponentLibrary"),o=t("./ChartLibrary"),s=t("./Constants"),l=(t("./utils/Formatter"),t("./utils/BoundsManager")),h=(t("./utils/ColorUtils"),t("./utils/QueryUtils")),u=(t("./chart/Map"),t("./vector/CanvasRenderer")),c=(t("./vector/Animation"),e.extend({vanChartType:"vanChartMap",layoutComponentsAndCharts:function(){this.initLayerInfo(),this._layoutMapComponents()},_layoutMapComponents:function(){this.hoverPoint=this.hoverSeries=null;var t=this;t.bounds=t._getDefaultBounds(),a.ComponentsOrder.map(function(e){e in t.components&&t.components[e].doLayout()},this),this.calculateMapSeries(),this.render()},filterRender:function(){this.renderSeries(!0)},_updateSeriesStyle:function(){this.renderSeries(!0)},reRenderWholePlot:function(){this.components[a.LEGEND_COMPONENT]&&this.components[a.LEGEND_COMPONENT].render(),this.reRenderSeries()},reRenderSeries:function(){this.calculateMapSeries(),this.renderSeries(!0)},calculateMapSeries:function(){var t=this;t.hoverPoint=null,t.hoverSeries=null;var e=t.seriesOfType(s.BUBBLE_CHART);i.calculateSeriesMinMaxValue(e),this._calculatePercentageRelated()},_calculatePercentageRelated:function(){for(var t={},e={},i=this.series,r=0,a=i.length;a>r;r++){var o=0,s=i[r],l=s.type,h=s.points;h.forEach(function(t){o=n.accAdd(o,Math.abs(t.getTargetValue()))}),h.forEach(function(i){i.percentage=Math.abs(i.getTargetValue()/o);var n=i.lnglat?i.lnglat.join("-"):i.name;n+=l;var r=i.isNull?e:t;r[n]=r[n]||[],r[n].push(i)})}for(var u in t){var h=t[u].concat(e[u]||[]);h.forEach(function(t){t.points=h,t.series.calculateLabelInfo(t)})}},renderSeries:function(t){var e=this,i=e._leaflet,r=this.layerMap[this.layerMap.length-1].geo,a={onEachFeature:function(t,i){i.on(e._mapHandler(i))}};this._geoJson=this._geoJson||L.geoJson([],a).addTo(i),this._pointLayer=this._pointLayer||L.layerGroup().addTo(i),this._layerToPointMap={},this.validPoints=this._getValidPoints(),e.updateNullAreaShape(this.validPoints.validAreaName),this.validPoints.points.forEach(function(t){var i=t.series,o=r.getFeaturesByName(t.name,i.type);t.layers?e.addLayers(t,i.type):(t.layers=[],o=t.lnglat?["null"]:o,o.forEach(function(i){var r=e.createLayer(i,t,a);e._layerToPointMap[n.stamp(r)]=t,t.layers.push(r)})),e._drawMapPointEffect(t)}),this._dropShadow=this._dropShadow||this._createDropShadowFilter(0,1,.5,2),this._renderHeatMap(),this._renderLineMap(t);var o=this._changeDataState?this._getMapAnimationTime():0,e=this;e.setTimeout("map-update",function(){e.updateLabel()},o)},_drawMapPointEffect:function(t){function e(){t.layers.forEach(function(e){i.mapEffectAnimation(e,t)})}if(t.layers){var i=t.series;if(clearInterval(t.effectInterval),t.effect&&t.effect.enabled){var n=i._getEffectTime(t);n&&(e(),t.effectInterval=setInterval(e,n))}}},_createDropShadowFilter:function(t,e,i,r){if(n.isSupportSVG()){var a=d3.select(this._leaflet._renderer._container).append("defs"),o=a.append("filter").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%"),s=n.stamp(o);return o.attr("id",s),o.append("feOffset").attr("in","SourceAlpha").attr("dx",t).attr("dy",e).attr("result","offOut"),o.append("feColorMatrix").attr("in","offOut").attr("type","matrix").attr("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+i+" 0").attr("result","matrixOut"),o.append("feGaussianBlur").attr("in","matrixOut").attr("stdDeviation",r).attr("result","blurOut"),o.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal"),o}return{}},getCurrentGeo:function(){return this.layerMap[this.layerMap.length-1].geo},_getValidPoints:function(){var t=this,e={},i={},n=[],r=t.getCurrentGeo();return t.series.forEach(function(a){var o,l=a.points,h=a.type;if(h!=s.LINE_MAP&&h!=s.HEAT_MAP)for(var u=0,c=l.length;c>u;u++){var d=l[u],f=t.isMapPointVisible(d),p=h==s.AREA_MAP?e:i,g=d.lnglat?d.lnglat.join("-"):d.name;h!=s.AREA_MAP&&d.lnglat||(o=r.getFeaturesByName(d.name,h),f=f&&o&&o.length),p[g]&&!t._drawBubble(h)||!f?t.removePointGraphics(d,h):(n.push(d),p[g]=!0)}}),{validAreaName:e,points:n}},_drawBubble:function(t){return this.getComponent(a.LEGEND_COMPONENT)&&t==s.BUBBLE_CHART},removePointGraphics:function(t,e){if(t){if(e===s.LINE_MAP&&(this.isDataSame||this._lineMapLayer.removeEffect(t),t.remove()),t.layers){var i=e==s.AREA_MAP?this._geoJson:this._pointLayer;t.layers.forEach(function(t){i.removeLayer(t)})}var n=this._textGroup;t.textLayers&&(t.textLayers.forEach(function(t){n.removeLayer(t)}),t.textLayers=null,t.labelPos=null),clearInterval(t.effectInterval),t.effectGraphic&&t.effectGraphic.remove(),t.effectGraphic=null}},_getHeatMapPoints:function(){var t=this.seriesOfType(s.HEAT_MAP),e=[],i=this.getCurrentGeo(),n=this;if(t&&t.length)for(var r=0,a=t.length;a>r;r++)t[r].points.forEach(function(t){if(!t.lnglat){var r=i.getFeaturesByName(t.name,s.HEAT_MAP);t.lnglat=i.getDataPointLngLat(t,r&&r[0])}!t.isNull&&t.visible&&t.lnglat?e.push(t):n.removePointGraphics(t,s.HEAT_MAP)});return e},_renderHeatMap:function(){var t=this.seriesOfType(s.HEAT_MAP),e=this.getComponent(a.RANGE_LEGEND_COMPONENT);if(t&&t.length&&e){var i={min:e._getMin(),max:e._getMax(),data:this._getHeatMapPoints()};if(!this._heatMapOverlay){var n=t[0]._getQueryList(),r={maxOpacity:h.queryList(n,"maxOpacity"),minOpacity:h.queryList(n,"minOpacity"),radius:h.queryList(n,"radius"),blur:h.queryList(n,"blur"),gradient:e._getGradient(),valueField:"value"};this._heatMapOverlay=L.heatMapOverlay(r).addTo(this._leaflet)}this._heatMapOverlay.setData(i)}},_renderLineMap:function(t){var e=this.seriesOfType(s.LINE_MAP),i=e.reduce(function(t,e){return t.concat(e.points)},[]);if(!e.length||!i.length)return void(this._lineMapLayer&&this._lineMapLayer.setData([]));if(!this._lineMapLayer){var n=this,r=this._leaflet,a=this._leaflet.getSize(),o={width:a.x,height:a.y,x:0,y:0,dpr:window.devicePixelRatio||1},l=this.mainRenderer=new u(r._panes.overlayPane,this,o),h=this.animationRenderer=new u(r._panes.overlayPane,this,o);this._lineMapLayer=L.lineMapLayer({mainRenderer:l,animationRenderer:h,vanchart:n}).addTo(r)}t?this._lineMapLayer.redraw():this._lineMapLayer.setData(i)},_getMapAnimationTime:function(){for(var t=!1,e=0,i=this.series.length;i>e;e++){var n=this.series[e];if(n.type==s.BUBBLE_CHART&&n.animation){t=!0;break}}return t?500:0},isMapPointVisible:function(t){var e=this.getComponent(a.RANGE_LEGEND_COMPONENT);return e&&t.points&&t.points.length&&(t=t.points[0]),t.visible&&t.series.visible},getMapStyle:function(t){var e=t.series.getMapStyle(t),i=this.highlightTarget;if(i){var n=t.series.name==i||t._rangeItem==i?1:.3;e.opacity=e.fillOpacity=n}return e},addLayers:function(t,e){var i=e==s.AREA_MAP?this._geoJson:this._pointLayer,r=this,a=r.getMapStyle(t);t.layers.forEach(function(e){e.setStyle(a),i.addLayer(e),r._layerToPointMap[n.stamp(e)]=t})},createLayer:function(t,e,i){var r,a=e.series.type,o=this.getMapStyle(e),l=e.getLatLng(t);switch(a){case s.AREA_MAP:r=this._geoJson.addData(t),r.setStyle(o);break;case s.BUBBLE_CHART:r=L.circleMarker(l,o).addTo(this._pointLayer);break;case s.POINT_MAP:r=L.marker(l,o).addTo(this._pointLayer);break;case s.SCATTER_CHART:r=n.isImageMarker(e.marker.symbol)?L.marker(l,o):L.scatterMarker(l,o,this),r.addTo(this._pointLayer)}return a!=s.AREA_MAP&&i.onEachFeature.call(null,null,r),r},getDataPointByLayer:function(t){return this._layerToPointMap[n.stamp(t)]},updateNullAreaShape:function(t){var e=this,i=e.getCurrentGeo(),n=i._validAreaName,r={};if(this.nullAreaFeatures=this.nullAreaFeatures||{},this.needsNullArea()){var a=this.getDefaultMapStyle();for(var o in n){if(!this.nullAreaFeatures[o]&&!t[o]){var s=n[o];this.nullAreaFeatures[o]=[];for(var l=0,h=s.length;h>l;l++){var u=this._geoJson.addData(s[l]);u.setStyle(a),this.nullAreaFeatures[o].push(u)}}if(t[o]){var c=this.nullAreaFeatures[o];c&&c.forEach(function(t){t.remove()}),this.nullAreaFeatures[o]=null}else r[o]=!0}}for(var o in this.nullAreaFeatures)if(!r[o]&&!t[o]){var c=this.nullAreaFeatures[o];c&&c.forEach(function(t){t.remove()}),this.nullAreaFeatures[o]=null}},needsNullArea:function(){return this.isAreaMap()||this.isHeatMap()||this.seriesOfType(s.AREA_MAP).length},getDefaultMapStyle:function(){var t=this.options.plotOptions,e=[t[s.AREA_MAP],t],i={fillColor:n.pick(h.queryList(e,"color"),"#cccccc"),fillOpacity:n.pick(h.queryList(e,"opacity"),.75),weight:n.pick(h.queryList(e,"borderWidth"),1),color:n.pick(h.queryList(e,"borderColor"),"#ffffff"),opacity:n.pick(h.queryList(e,"borderOpacity"),1)};return i},updateNormalLabel:function(){var t=this,e=t._leaflet,i=t.getCurrentGeo();this._textGroup=this._textGroup||L.layerGroup().addTo(e);var n=this._textGroup;this.getLabelPoints().forEach(function(e){var r=e.series.type,a=i.getFeaturesByName(e.name,r);a=e.lnglat?["null"]:a,e.labelPos&&e.labelContent?e.textLayers?e.textLayers.forEach(function(e){e.addTo(t._textGroup),e.setStyle()}):a&&a.forEach(function(i,n){e.labelPos[n]&&(e.textLayers=e.textLayers||[],e.textLayers[n]=L.text(e.getLatLng(i),{feature:i},e).addTo(t._textGroup))}):e.textLayers&&(e.textLayers.forEach(function(t){n.removeLayer(t)}),e.textLayers=null)})},_fixConflictLabel:function(){var t=this,e=(t.series,new l),i=t.getCurrentGeo(),n=this.getLabelPoints();n.forEach(function(n){var r=n.series.type;if(r==s.AREA_MAP&&n.labelContent){var a=i.getFeaturesByName(n.name,r);
    a&&(a.forEach(function(i,r){if(n.labelPos=n.labelPos||[],i.properties.center){var a=t._getTextBounds(n,i);n.labelPos[r]=a,e.addBounds(a)}else n.labelPos[r]=null}),n.labelPos&&!n.labelPos.filter(function(t){return!!t}).length&&(n.labelPos=null))}else n.labelPos=null}),n.forEach(function(n){if(n.labelContent){var r=n.series.type,a=i.getFeaturesByName(n.name,r);a=n.lnglat?["null"]:a,a?a.forEach(function(i,r){if(!n.labelPos||!n.labelPos[r]){var a=t._getTextBounds(n,i);e.isOverlapped(a)?(n.labelPos=n.labelPos||[],n.labelPos[r]=null):(n.labelPos=n.labelPos||[],n.labelPos[r]=a,e.addBounds(a))}n.labelPos&&!n.labelPos.filter(function(t){return!!t}).length&&(n.labelPos=null)}):n.labelPos=null}})},_getTextBounds:function(t,e){var i=this,r=i._leaflet,a=t.getLatLng(e),o=r.latLngToContainerPoint(a),l=o.y,h=t.series.type;if(h==s.AREA_MAP||h==s.BUBBLE_CHART||h==s.HEAT_MAP)l-=t.labelDim.height/2;else if(t.marker&&!n.isImageMarker(t.marker.symbol)){var u=t.marker.radius||4.5;l-=u+t.labelDim.height}else{var c=t.icon?t.icon.iconSize[1]:t.marker.height;l-=c/2+t.labelDim.height}return n.makeBounds([o.x,l],t.labelDim)},_mapHandler:function(t){var e=this,i=e.getComponent(a.TOOLTIP_COMPONENT);return{click:function(r){var a=e.getDataPointByLayer(t);a&&(e.drillDown(a),a.onClick&&a.onClick(r.originalEvent),n.hasTouch()&&i.showWithPoint(a))},mouseover:function(){var i=e.getDataPointByLayer(t);i&&(e.hoverPoint=i,i.layers.forEach(function(t){t.setStyle(i.series.getMapMouseOverStyle(i))}))},mouseout:function(){i.hide();var n=e.getDataPointByLayer(t);n&&n.layers.forEach(function(t){t.setStyle(n.series.getMapStyle(n))})},mousemove:function(){var n=e.getDataPointByLayer(t);i.showWithPoint(n)}}},path2vml:function(t){return r.path2vml(t)},getLabelPoints:function(){var t=this.validPoints&&this.validPoints.points;return(t||[]).concat(this._getHeatMapPoints())},updateLabel:function(){var t=this;this._fixConflictLabel();var e=t.getShowMoreLabelTime();e=this.layerIndex>0?0:e,t._setTextOpacity(e,0),t._moreLabelTimeOut&&clearTimeout(t._moreLabelTimeOut),t._moreLabelTimeOut=setTimeout(function(){t._changeDataState=!1,t._clearMoreLabels(),t._setTextOpacity(e,1),t.updateNormalLabel()},e),t._updateMoreLabel(e)},_setTextOpacity:function(t,e){if(0!==t)for(var i=this,n=i.series,r=0,a=n.length;a>r;r++){var o=n[r],l=o.type,h=o.points;l!=s.LINE_MAP&&l!=s.HEAT_MAP&&h.forEach(function(t){t.textLayers&&t.textLayers.forEach(function(t){t._text&&(t._text.style.fillOpacity=e)})})}},_updateMoreLabel:function(t){if(!(0>=t)){var e=this,i=(e.series,e._leaflet);this._moreLabelLayer=this._moreLabelLayer||L.layerGroup().addTo(i),this._moreLabelLayer.rawElement=this._moreLabelLayer._g,this.validPoints&&this.validPoints.points.forEach(function(t){var n=t.getLatLng();if(e.isMapPointVisible(t)&&n){var r=i.latLngToLayerPoint(n),a=r.y,o=null;t.series.type==s.POINT_MAP&&(a-=t.icon.iconSize[1]/2,o=function(t,e){return t-e/2-5}),t.series._showAndExitMoreLabel(t,r.x,a,null,o,e._moreLabelLayer)}})}},_clearMoreLabels:function(){this.series.forEach(function(t){t.points.forEach(function(t){t.moreLabelG&&t.moreLabelG.remove(),t.moreLabelG=null})})},_checkPointDrillDown:function(t){if(t&&!t.drilldown&&t.points)for(var e=t.points,i=e.length-1;i>=0;i--)e[i].drilldown&&(t.drilldown=e[i].drilldown,t.geo=e[i].geo)},_initLeafLet:function(t,e){function i(){if(a._leaflet){var t=a.hoverPoint,e=a._leaflet.getZoom();if(a._checkPointDrillDown(t),t&&t.geo){var i=t.geo.getZoomListener();if(i&&e>=i)return void a.drillDown(t)}var n=a.layerMap[a.layerIndex-1];n&&n.geo.getZoomListener()>e&&a.drillUp(n),a.viewreset()}}function r(){for(var t=a.series,e=0,i=t.length;i>e;e++){var n=t[e],r=n.type,o=n.points;r!=s.LINE_MAP&&r!=s.HEAT_MAP&&o.forEach(function(t){clearInterval(t.effectInterval),t.effectGraphic&&t.effectGraphic.remove(),t.effectGraphic=null,n.type==s.POINT_MAP&&t.layers&&t.layers.forEach(function(t){d3.select(t._icon).interrupt("point-map-effect").transition("point-map-effect")})})}}var a=this,o={zoomControl:!1,doubleClickZoom:!1,zoomDelta:.5,zoomSnap:.5};return this._leaflet=this._leaflet||L.map(t,o),this._leaflet.on("zoom",i,this._leaflet),this._leaflet.on("zoomstart",r,this._leaflet),this._leaflet.vanchart=this,t.style.cssText+=";overflow:hidden;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",n.setDomBackground(t,{backgroundImage:e.backgroundImage,backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,borderRadius:e.borderRadius,shadow:e.shadow}),this.mainRenderer=null,this.animationRenderer=null,this._leaflet._controlContainer.getElementsByTagName("div")[0]},_originSeries:function(){0!==this.layerIndex&&this.layerMap&&this.layerMap.length&&(this.series=this.layerMap[0].series)},initLayerInfo:function(){this.layerMap=[],this.layerIndex=0;var t=this.getComponent(a.GEO_COMPONENT),e=this.series;this.layerMap=[{series:e,geo:t,layerIndex:this.layerIndex,drillUpDataPoint:e[0]&&e[0].points[0]}];var i=this.options.initDrillPath;if(i&&i.length>1)for(var n=1;n<i.length;n++){for(var r=i[n],o=null,s=0;s<e.length;s++){for(var l=e[s].points,h=0;h<l.length;h++)if(l[h].drilldown&&l[h].drilldown.geo.name==r){o=l[h];break}if(o)break}if(o){this._createChildSeriesWhenLoaded(o),this.layerMap[this.layerIndex].drillUpDataPoint=o,this.series=e=o.childSeries;var u=this.getComponent(a.RANGE_LEGEND_COMPONENT);u&&u.initAttributesWithSeries(),e.forEach(function(t){for(var e=0,i=t.points.length;i>e;e++)t.points[e].refreshPointColor()}),this.layerIndex++,t=o.geo,this.layerMap[this.layerIndex]={geo:t,series:e,layerIndex:this.layerIndex}}}t.loadGeo(),this.setGeo(t),t.fitMapBounds()},_createChildSeriesWhenLoaded:function(t){if(!t.childSeries){var e=[],i=this;i.parentPoint=t,t.drilldown.series.forEach(function(t,n){var r=t.type||i.options.chartType,a=o.get(r);e.push(new a(t,i,n))}),t.childSeries=e}},drillDown:function(t){this._checkPointDrillDown(t);var e=this.layerMap[this.layerIndex-1];if(t.drilldown&&t.drilldown.series&&(!e||e.drillUpDataPoint!=t)){var i=this.layerMap[this.layerIndex].geo;this._createChildSeriesWhenLoaded(t),this.layerMap[this.layerIndex].drillUpDataPoint=t,this._setNewGeoAndSeries(t.geo,i,t.childSeries,++this.layerIndex)}},drillUp:function(t){var e=this;if(t.series!=e.series){var i=this.layerMap[t.layerIndex+1].geo;this._setNewGeoAndSeries(t.geo,i,t.series,t.layerIndex)}},_setNewGeoAndSeries:function(t,e,i,n){for(var r=this,o=0,s=r.series.length;s>o;o++){var l=r.series[o],h=l.type,u=l.points;u.forEach(function(t){r.removePointGraphics(t,h)})}if(this.nullAreaFeatures){for(var c in this.nullAreaFeatures){var d=this.nullAreaFeatures[c];d&&d.forEach(function(t){t.remove()})}this.nullAreaFeatures=null}r.series=i;var f=r.getComponent(a.RANGE_LEGEND_COMPONENT);f&&f.initAttributesWithSeries(),i.forEach(function(t){for(var e=0,i=t.points.length;i>e;e++)t.points[e].refreshPointColor()}),this.layerMap[n]={geo:t,series:i,layerIndex:n,drillUpDataPoint:i[0]&&i[0].points[0]},this.layerIndex=n,this.layerMap=this.layerMap.slice(0,n+1),this.setGeo(t,e),t.fitMapBounds(),this._layoutMapComponents()},setGeo:function(t,e){var i,n,r;e&&(i=e._tileLayer||e._wmsLayer,n=e._attribution,r=e._imageBackgroundLayer);var a=t._imageBackgroundLayer,o=t._tileLayer||t._wmsLayer,s=t._attribution,l=this._leaflet;a?(i&&i.remove(),n&&n.remove(),L.setOptions(l,{crs:L.CRS.Simple}),r!=a&&(r&&l.removeLayer(r),a.addTo(l))):o&&(r&&l.removeLayer(r),L.setOptions(l,{crs:L.CRS.EPSG3857}),i!=o&&(i&&i.remove(),o.addTo(l),n&&n.remove(),s&&s.addTo(l)))},viewreset:function(){for(var t=this,e=t.series,i=0,n=e.length;n>i;i++){var r=e[i],a=r.type,o=r.points;a!=s.LINE_MAP&&a!=s.HEAT_MAP&&o.forEach(function(e){t._drawMapPointEffect(e)})}clearTimeout(this.labelRelaoutTimeOut),this.labelRelaoutTimeOut=setTimeout(function(){t.updateLabel()},200)}}));return c}),i("VanChartForceBubble",["require","./VanChart","./utils/BaseUtils","./ComponentLibrary","./ChartLibrary","./Constants","./utils/Formatter"],function(t){var e=t("./VanChart"),i=t("./utils/BaseUtils"),n=(t("./ComponentLibrary"),t("./ChartLibrary"),t("./Constants")),r=(t("./utils/Formatter"),2),a=4,o=500,s=e.extend({vanChartType:"vanChartForceBubble",dealAxisZoom:function(t,e){this.force&&this.force.stop();var n=this.getPlotBounds(),r=Math.min(t[0],e[0])-n.x,a=Math.min(t[1],e[1])-n.y,o=Math.abs(t[0]-e[0]),s=Math.abs(t[1]-e[1]),l=Math.min(n.width/o,n.height/s),h=n.width/l,u=n.height/l,c=(n.width-h)/2-r,d=(n.height-u)/2-a,f=this;this.forceBubbleNodes.forEach(function(t){t.radius*=l;var e=t.x+c,i=t.y+d;e-=n.width/2,i-=n.height/2,t.x=e*l+n.width/2-c,t.y=i*l+n.height/2-d;var r=t.originalPoint;r.radius=t.radius,f._calculateLabelPos(t),r.effectGraphic&&r.effectGraphic.remove(),r.effectGraphic=null}),this.scale=l*i.pick(this.scale,1),this.scaleRender()},_calculateLabelPos:function(t){if(t.labelContent&&t.labelDim){var e=t.radius;t.labelDim.width>2*e||t.labelDim.height>2*e?t.labelPos=null:t.labelPos={x:-t.labelDim.width/2+t.x,y:-t.labelDim.height/2+t.y}}var i=t.originalPoint;i.labelPos=t.labelPos},orderData:function(){},refreshRestore:function(){this.scale=1,this._refreshOptions()},scaleRender:function(){for(var t=0,e=this.forceBubbleNodes.length;e>t;t++){var n=this.forceBubbleNodes[t],r=n.originalPoint,a=r.series,s=a.getAttrs(n),l=a.animation;l?d3.select(r.graphic.node()).transition().duration(o).ease("back-out").attr("transform",i.makeTranslate(n)).attr("r",s.r):r.graphic.attr(s),this._updatePointTextGraphic(r)}},renderSeries:function(){var t=this,e=t.renderer,r=this.getPlotBounds(),a=t.seriesOfType(n.FORCE_BUBBLE_CHART),o=a[0],s=o&&o.animation;r.width/2,r.height/2;this.group||(this.group=e.group().addTo(t.clipSeriesGroup)),this.group.attr("transform",i.makeTranslate(r));var l=[],h=[],u=0;a.forEach(function(t){var e;t.points.forEach(function(t){var n=i.extend({originalPoint:t},t);if(t.shadow=n,t.graphic&&s){var r=d3.transform(d3.select(t.graphic.node()).attr("transform")).translate;n.x=r[0],n.y=r[1]}else n.x=n.y=void 0;n.isNull||l.push(n),n.visible&&n.series.visible&&!n.isNull&&(h.push(n),u=Math.max(u,t.radius),e=e||n,e=n.radius>e.radius?n:e)}),t.cluster=e}),t.forceBubbleNodes=h,s||this._simulateForce();for(var c=0,d=l.length;d>c;c++){var f=l[c],p=f.visible&&f.series.visible,g=f.originalPoint||f,m=o.getStyle(f),v=o.getAttrs(f);p&&g.graphic?(o._updatePointGraphicStyle(g),s?d3.select(g.graphic.node()).datum(f).transition().duration(750).attr("r",f.radius):g.graphic.attr(v)):p&&!g.graphic?(s?(g.graphic=e.circle().style(m).addTo(this.group),d3.select(g.graphic.node()).datum(f).attr("r",0).transition().duration(750).attr("r",f.radius)):g.graphic=e.circle(v).style(m).addTo(this.group),o._updatePointGraphicStyle(g)):!p&&g.graphic&&(s?d3.select(g.graphic.node()).transition().duration(300).ease("back-in").attr("r",0).remove():g.graphic.remove(),g._events=null,g.graphic=null),g.textGraphic&&g.textGraphic.remove(),g.textGraphic=null,g.graphic&&e.registerInteractiveTarget(g,g.graphic)}s?this._updateWithForce(u):this._updateLabels()},_simulateForce:function(){var t=this.forceBubbleNodes,e=this.getPlotBounds(),i=[e.width,e.height];d3.layout.pack().sort(null).size(i).children(function(t){return t.values}).value(function(t){return t.radius*t.radius}).nodes({values:d3.nest().key(function(t){return t.category+t.seriesName}).entries(t)});var n=.1,r=.005,a=2,o=2,s=.5,l=.02,h=.9;t.forEach(function(t){t.px=t.x,t.py=t.y});for(var u=n;u>=r;u-=u>.07?.001:5e-4){var c,d,f,p,g,m=t.length;if((f=u*l)&&(p=i[0]/2,g=i[1]/2,c=-1,f))for(;++c<m;)d=t[c],d.x+=(p-d.x)*f,d.y+=(g-d.y)*f;for(c=-1;++c<m;)d=t[c],d.x-=(d.px-(d.px=d.x))*h,d.y-=(d.py-(d.py=d.y))*h;t.forEach(function(t){var e=t.series.cluster;if(e&&e!=t){var i=t.x-e.x,n=t.y-e.y,r=Math.sqrt(i*i+n*n),a=t.radius+e.radius;r!=a&&(r=(r-a)/r*u,t.x-=i*=r,t.y-=n*=r,e.x+=i,e.y+=n)}});for(var c=0;m>c;c++)for(var v=t[c],y=0;m>y;y++){var _=t[y];if(_!==v){var p=v.x-_.x,g=v.y-_.y,x=Math.sqrt(p*p+g*g),b=v.radius+_.radius+(v.series.cluster===_.series.cluster?a:o);b>x&&(x=(x-b)/x*s,v.x-=p*=x,v.y-=g*=x,_.x+=p,_.y+=g)}}}},_updatePointTextGraphic:function(t){t.textGraphic?t.labelPos?t.textGraphic.attr("transform",i.makeTranslate(t.labelPos)):(t.textGraphic.remove(),t.textGraphic=null):t.series._createTextGraphic(t)},_updateLabels:function(){var t=this,e=t.forceBubbleNodes;t._moreLabelTimeOut&&clearTimeout(t._moreLabelTimeOut);var i=t.getShowMoreLabelTime();t._moreLabelTimeOut=setTimeout(function(){t._changeDataState=!1,e.forEach(function(e){var i=e.originalPoint;i.moreLabelG&&i.moreLabelG.remove(),i.moreLabelG=null,t._calculateLabelPos(e),t._updatePointTextGraphic(i)})},i),0!==i&&e.forEach(function(e){e.series._showAndExitMoreLabel(e.originalPoint,e.x,e.y,null,null,t.group)})},_updateWithForce:function(t){function e(t){c.each(o(10*t.alpha*t.alpha)).each(s(.5)),c.each(function(){d3.select(this).attr("transform",function(t){return t.originalPoint.textGraphic&&(l._calculateLabelPos(t),l._updatePointTextGraphic(t.originalPoint)),t.originalPoint.effectGraphic&&t.originalPoint.effectGraphic.attr("transform",i.makeTranslate([t.x,t.y])),i.makeTranslate([t.x,t.y])})})}function o(t){return function(e){var i=e.series.cluster;if(i&&i!==e){var n=e.x-i.x,r=e.y-i.y,a=Math.sqrt(n*n+r*r),o=e.radius+i.radius;a!=o&&(a=(a-o)/a*t,e.x-=n*=a,e.y-=r*=a,i.x+=n,i.y+=r)}}}function s(e){var i=d3.geom.quadtree(h);return function(n){var o=n.radius+t+Math.max(r,a),s=n.x-o,l=n.x+o,h=n.y-o,u=n.y+o;i.visit(function(t,i,o,c,d){if(t.point&&t.point!==n){var f=n.x-t.point.x,p=n.y-t.point.y,g=Math.sqrt(f*f+p*p),m=n.radius+t.point.radius+(n.series.cluster===t.point.series.cluster?r:a);m>g&&0!==g&&(g=(g-m)/g*e,n.x-=f*=g,n.y-=p*=g,t.point.x+=f,t.point.y+=p)}return i>l||s>c||o>u||h>d})}}var l=this,h=l.forceBubbleNodes,u=l.getPlotBounds();l.setTimeout("forceBubbleLabel",function(){l._updateLabels(),l.pointsOfType(n.FORCE_BUBBLE_CHART).forEach(function(t){var e=t.series;e.drawPointEffect(e,t)})},800),this.force&&this.force.stop(),this.force=d3.layout.force().nodes(h).size([u.width,u.height]).gravity(.05).charge(0).on("tick",e).start();var c=d3.select(this.group.node()).selectAll("circle").filter(function(t){d3.select(this).call(l.force.drag);var e=t.originalPoint;return e.visible&&e.series.visible})}});return s}),i("VanChartWordCloud",["require","./VanChart","./Constants","./utils/BaseUtils"],function(t){var e=t("./VanChart"),i=t("./Constants"),n=t("./utils/BaseUtils"),r=e.extend({vanChartType:"vanChartWordCloud",dealAxisZoom:function(t,e){var i=this.getPlotBounds(),r=Math.min(t[0],e[0])-i.x,a=Math.min(t[1],e[1])-i.y,o=Math.abs(t[0]-e[0]),s=Math.abs(t[1]-e[1]),l=Math.min(i.width/o,i.height/s),h=i.width/l,u=i.height/l,c=(i.width-h)/2-r,d=(i.height-u)/2-a,f=this,p=f.series;p.forEach(function(t){var e=t.animation;t.points.forEach(function(i){if(i.word){var n=i.word.x,r=i.word.y;i.word.x=(n+c)*l-c,i.word.y=(r+d)*l-d,i.word.size*=l,e?t.updateAnimation(i.graphic.node(),i):i.graphic.attr(t.getAttrs(i)).style(t.getStyle(i))}})}),this.scale=l*n.pick(this.scale,1)},_getTranslate:function(){var t=this.getPlotBounds();return[t.x+t.width/2,t.y+t.height/2]},renderSeries:function(){function t(t){e.group||(e.group=r.group().addTo(e.clipSeriesGroup),e.mouseOverGroup=r.group().addTo(e.clipSeriesGroup)),e.group.attr("transform",n.makeTranslate(e._getTranslate())),e.mouseOverGroup.attr("transform",n.makeTranslate(e._getTranslate()));var a=e.seriesOfType(i.WORD_CLOUD_CHART);if(a&&a.length){var o=a[0];p.forEach(function(t){var i=t.word;i&&(t.labelDim=n.getTextDimension(i.text,{fontSize:i.size+"px",fontFamily:i.fontFamily},!1)),o.drawPoint(e.group,t)}),e.setTimeout("effect",function(){p.forEach(function(t){o.drawPointEffect(o,t)})},800)}e._updateSeriesState(),window.console&&console.log("done")}var e=this,r=e.renderer,a=e.options.plotOptions,o=e.getPlotBounds(),s=o.width,l=o.height,h=a.minRotation,u=a.maxRotation,c=a.fontFamily,d=a.minFontSize,f=a.maxFontSize,p=e.pointsOfType(i.WORD_CLOUD_CHART).filter(function(t){return!t.isNull}).sort(function(t,e){return Math.abs(e.value)-Math.abs(t.value)});if(0!==p.length){d=n.hasDefined(d)?d:10,f=n.hasDefined(f)?f:e._calculateNiceMaxFontSize(s,l,p[0].name,c),e.minFontSize=Math.min(parseFloat(d),parseFloat(f)),e.maxFontSize=Math.max(parseFloat(d),parseFloat(f));var g=d3.scale.linear().domain([Math.abs(p[p.length-1].value),Math.abs(p[0].value)]).range([e.minFontSize,e.maxFontSize]),m=d3.layout.cloud().size([s,l]).words(p.filter(function(t){return t.visible}).map(function(t){var i={text:t.name,size:g(Math.abs(t.value))*e.scale,point:t,fontFamily:c};return t.word=i,i})).simpleLayout(!n.isSupportSVG()).textDimFun(n.getTextDimension).path(a.path).padding(5).rotate(function(){return h+Math.random()*(u-h)}).font(c).fontSize(function(t){return t.size}).on("end",t);m.start()}},_consoleDone:function(){},_calculateNiceMaxFontSize:function(t,e,i,r){for(var a={min:0,max:100},o=function(){return a.max-a.min>2},s={fontSize:a.max+"px",fontFamily:r},l=n.getTextDimension(i,s,!1);o()&&(l.width>t||l.height>e);){var h=Math.ceil(a.min+(a.max-a.min)/2);s.fontSize=h+"px";var u=n.getTextDimension(i,s,!1);u.width>t||u.height>e?(a.max=h,l=u):a.min=h}return o()?a.max:a.min}});return r}),i("utils/LoadingUtils",[],function(){function t(t,e){if(e=e||"loading-div-id",e+=" loading-div-id",!i[e]&&!document.getElementById(e)){var n=document.createElement("div"),r=document.createElement("div");n.id=e,n.style.backgroundColor="white",n.style.opacity=.75,n.style.filter="alpha(opacity=75)",n.style.position="absolute",n.style.width="100%",n.style.height="100%",n.style.left=0,n.style.top=0,n.style.zIndex=9999,(void 0!=r.style.animation||void 0!=r.style.webkitAnimation)&&(r.style.left="50%",r.style.top="50%",r.className="loader-inner ball-scale-ripple-multiple",r.innerHTML="<div></div><div></div><div></div>"),n.appendChild(r),t.appendChild(n),i[e]=n}}function e(t,e){if(e=e||"loading-div-id",e+=" loading-div-id",i[e])t.removeChild(i[e]),i[e]=null;else{var n=document.getElementById(e);n&&t.removeChild(n)}}var i={};return{startLoading:t,endLoading:e}}),i("component/LegendIconFactory",["require","../Constants"],function(t){function e(t){return a[t]}function i(t){return o[t]?o[t]:o[r.NORMAL_ICON]}function n(t){return a[t]}var r=t("../Constants"),a={},o={};return a[r.PIE_ICON]="M15.795,7.943L7.909,12.5L0.205,8.052C1.756,5.333,4.68,3.5,8.032,3.5C11.338,3.5,14.23,5.287,15.795,7.943z",o[r.PIE_ICON]={width:16,height:16},a[r.TREEMAP_ICON]="M9,12H3c-1.6,0-3-1.4-3-3l0-6c0-1.6,1.3-3,3-3l6,0c1.7,0,3,1.4,3,3v6C12,10.6,10.6,12,9,12z",o[r.TREEMAP_ICON]={width:12,height:12},a[r.DONUT_ICON]="M8.945,11.107c1.671,0,3.181,0.684,4.269,1.786l4.271-4.271c-4.686-4.686-12.284-4.686-16.971,0l4.216,4.216C5.815,11.768,7.302,11.107,8.945,11.107z",o[r.DONUT_ICON]={width:18,height:18},a[r.NORMAL_ICON]="M0,0L12,0L12,12L0,12Z",o[r.NORMAL_ICON]={width:12,height:12},a[r.BUBBLE_ICON]="M6,11.5c-1.47,0-2.851-0.572-3.889-1.611C1.072,8.851,0.5,7.47,0.5,6s0.572-2.851,1.611-3.889C3.149,1.072,4.53,0.5,6,0.5s2.851,0.572,3.889,1.611C10.928,3.149,11.5,4.53,11.5,6s-0.572,2.851-1.611,3.889C8.851,10.928,7.47,11.5,6,11.5z",o[r.BUBBLE_ICON]={width:11,height:11},a[r.NULL_MARKER]="M1,8L1,8c0-0.552,0.448-1,1-1h12c0.552,0,1,0.448,1,1v0c0,0.552-0.448,1-1,1H2C1.448,9,1,8.552,1,8z",o[r.NULL_MARKER]={width:16,height:16},a[r.CIRCLE]="M11,8c0,1.657-1.343,3-3,3S5,9.657,5,8s1.343-3,3-3S11,6.343,11,8z M14,7h-2.142C11.942,7.322,12,7.653,12,8s-0.058,0.678-0.142,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M4,8c0-0.347,0.058-0.678,0.142-1H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.142C4.058,8.678,4,8.347,4,8z",o[r.CIRCLE]={width:16,height:16},a[r.SCATTER_ICON+r.NULL_MARKER]="M0,0L12,0L12,12L0,12Z",o[r.SCATTER_ICON+r.NULL_MARKER]={width:12,height:12},a[r.SCATTER_ICON+r.NORMAL_ICON]="M0,0L12,0L12,12L0,12Z",o[r.SCATTER_ICON+r.NORMAL_ICON]={width:12,height:12},a[r.SCATTER_ICON+r.CIRCLE]="M4,8C2.897,8,1.897,7.551,1.173,6.827S0,5.103,0,4s0.449-2.103,1.173-2.827S2.897,0,4,0s2.103,0.449,2.827,1.173S8,2.897,8,4S7.551,6.103,6.827,6.827S5.103,8,4,8",o[r.SCATTER_ICON+r.CIRCLE]={width:8,height:8},a[r.SQUARE]="M11,11H5V5h6V11z M14,7h-2v2h2c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M4,7H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2V7z",o[r.SQUARE]={width:16,height:16},a[r.SCATTER_ICON+r.SQUARE]="M0,0h8c0,0,0,3.889,0,8C4,8,0,8,0,8V0z",o[r.SCATTER_ICON+r.SQUARE]={width:8,height:8},a[r.DIAMOND]="M8,11L5,8l3-3l3,3L8,11z M14,7h-2.586l1,1l-1,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M3.586,8l1-1H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.586L3.586,8z",o[r.DIAMOND]={width:16,height:16},a[r.SCATTER_ICON+r.DIAMOND]="M0,4.5L4.502,0l4.5,4.5c0,0,0,0-4.5,4.5C0,4.5,0,4.5,0,4.5z",o[r.SCATTER_ICON+r.DIAMOND]={width:9,height:9},a[r.TRIANGLE]="M5,10l3-5.196L11,10H5z M14,7h-3.577l1.155,2H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M5.577,7H2C1.448,7,1,7.448,1,8c0,0.552,0.448,1,1,1h2.423L5.577,7z",o[r.TRIANGLE]={width:16,height:16},a[r.SCATTER_ICON+r.TRIANGLE]="M4.5,0L9,8c0,0-4.617,0-9,0L4.5,0z",o[r.SCATTER_ICON+r.TRIANGLE]={width:9,height:8},a[r.CIRCLE_HOLLOW]="M4.142,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2.142C4.058,7.322,4,7.653,4,8S4.058,8.678,4.142,9zM14,7h-2.142C11.942,7.322,12,7.653,12,8s-0.058,0.678-0.142,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M8,7C7.449,7,7,7.449,7,8s0.449,1,1,1s1-0.449,1-1S8.551,7,8,7 M8,5c1.657,0,3,1.343,3,3s-1.343,3-3,3S5,9.657,5,8S6.343,5,8,5L8,5z",o[r.CIRCLE_HOLLOW]={width:16,height:16},a[r.SCATTER_ICON+r.CIRCLE_HOLLOW]="M4,2c1.102,0,2,0.898,2,2S5.102,6,4,6S2,5.102,2,4S2.898,2,4,2 M4,0C1.791,0,0,1.791,0,4s1.791,4,4,4s4-1.791,4-4S6.209,0,4,0",o[r.SCATTER_ICON+r.CIRCLE_HOLLOW]={width:8,height:8},a[r.SQUARE_HOLLOW]="M4,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2V9z M14,7h-2v2h2c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M9,7H7v2h2V7 M11,5v6H5V5H11L11,5z",o[r.SQUARE_HOLLOW]={width:16,height:16},a[r.SCATTER_ICON+r.SQUARE_HOLLOW]="M6,6H2V2h4V6z M8,0H0v8h8V0z",o[r.SCATTER_ICON+r.SQUARE_HOLLOW]={width:8,height:8},a[r.DIAMOND_HOLLOW]="M4.157,9H2C1.448,9,1,8.552,1,8c0-0.552,0.448-1,1-1h2.157l-1,1L4.157,9z M14,7h-2.157l1,1l-1,1H14c0.552,0,1-0.448,1-1C15,7.448,14.552,7,14,7z M8,5.986L5.986,8L8,10.014L10.014,8L8,5.986 M8,4.571L11.429,8L8,11.429L4.571,8L8,4.571L8,4.571z",o[r.DIAMOND_HOLLOW]={width:16,height:16},a[r.SCATTER_ICON+r.DIAMOND_HOLLOW]="M2.121,4.999L5,2.121l2.878,2.878L5,7.879L2.121,4.999z M5,0L0,4.999L5,10l4.999-5.001L5,0z",o[r.SCATTER_ICON+r.DIAMOND_HOLLOW]={width:10,height:10},a[r.TRIANGLE_HOLLOW]="M4.5,9H2C1.448,9,1,8.552,1,8s0.448-1,1-1h3.655L4.5,9z M14,7h-3.655L11.5,9H14c0.552,0,1-0.448,1-1S14.552,7,14,7z M8,6.938L6.232,10h3.536L8,6.938 M8,4.938L11.5,11h-7L8,4.938L8,4.938z",o[r.TRIANGLE_HOLLOW]={width:16,height:16},a[r.SCATTER_ICON+r.TRIANGLE_HOLLOW]="M5.001,3.34L7.402,7.5H2.598L5.001,3.34z M5.001,0.34L0,9h10L5.001,0.34z",o[r.SCATTER_ICON+r.TRIANGLE_HOLLOW]={width:10,height:9},{getLegendIconPath:e,getLegendIconSize:i,hasIcon:n}}),i("component/Base",["require","../utils/BaseUtils","../utils/ColorUtils","../Constants","../dom/Evented","../utils/QueryUtils","../utils/Formatter","./LegendIconFactory","../utils/Class"],function(t){var e=t("../utils/BaseUtils"),i=t("../utils/ColorUtils"),n=t("../Constants"),r=t("../dom/Evented"),a=(t("../utils/QueryUtils"),t("../utils/Formatter")),o=(t("./LegendIconFactory"),t("../utils/Class"),4.5),s=r.extend({initialize:function(t,e,i){this.componentType=e,this.vanchart=i,this.refresh(t)},refresh:function(t){this.options=t||this.options,t=this.options,e.extend(this,{isFloat:t.floating,_floatX:this._getPercentValue(t.x,this.vanchart.width),_floatY:this._getPercentValue(t.y,this.vanchart.height)}),e.convertToREMUseDefault16PX(t.style),this._refresh&&this._refresh(t)},useHtmlLabel:function(){return this.options.useHtml||!e.isSupportSVG()},_getLegendType:function(t){var i=t.marker,r="";switch(t.type){case n.MULTIPIE_CHART:case n.PIE_CHART:return t.innerRadius&&parseFloat(t.innerRadius)>0?n.DONUT_ICON:n.PIE_ICON;case n.RADAR_CHART:if(t.columnType)return n.NORMAL_ICON;break;case n.FORCE_BUBBLE_CHART:case n.BUBBLE_CHART:return n.BUBBLE_ICON;case n.TREEMAP_CHART:return n.TREEMAP_ICON;case n.LINE_MAP:return n.NULL_MARKER;default:r=n.NORMAL_ICON}return t.type==n.POINT_MAP&&t.icon?t.icon.iconUrl:(t.image&&e.isSupportSVG()?r=t.image:i&&(r=i.symbol,t.type!=n.SCATTER_CHART||e.isImageMarker(r)||(r=n.SCATTER_ICON+i.symbol)),r)},_getPercentValue:function(t,e){return t?(t+="",-1!=t.indexOf("%")&&(t=parseFloat(t)*e/100),parseFloat(t)):0},_setComponentBounds:function(t,e){this.isFloat||this.options&&this.options.onZero?this._updateFloatBounds(t,e):this._updateComponentBounds(t,e)},isHorizontal:function(){var t=this.getPosition();return t==n.TOP||t==n.BOTTOM},isVertical:function(){return!this.isHorizontal()},getPosition:function(){return this.options.position},_updateFloatBounds:function(t,e){e=Math.ceil(e);var i=this.vanchart.getPlotBounds(),r=this._floatX,a=this._floatY,o=i.x+i.width-r,s=i.y+i.height-a;switch(t){case n.TOP:this.bounds={x:r,y:a,width:o,height:e};break;case n.BOTTOM:this.bounds={x:r,y:a,width:o,height:e};break;case n.LEFT:this.bounds={x:r,y:a,width:e,height:s};break;case n.RIGHT_TOP:case n.RIGHT:this.bounds={x:r,y:a,width:e,height:s}}},_updateComponentBounds:function(t,e){e=Math.ceil(e);var i=this.vanchart.getPlotBounds(),r=i.x,a=i.y,o=i.width,s=i.height;switch(t){case n.TOP:this.bounds={x:r,y:a,width:o,height:e};break;case n.BOTTOM:this.bounds={x:r,y:a+s-e,width:o,height:e};break;case n.LEFT:this.bounds={x:r,y:a,width:e,height:s};break;case n.RIGHT_TOP:case n.RIGHT:this.bounds={x:r+o-e,y:a,width:e,height:s}}this.vanchart.setPlotBounds(i),this._clipPlotBounds(t,e)},_clipPlotBounds:function(t,e){e=Math.ceil(e);var i=this.vanchart.getPlotBounds(),r=i.x,a=i.y,o=i.width,s=i.height;switch(t){case n.TOP:i={x:r,y:a+e,width:o,height:s-e};break;case n.BOTTOM:i={x:r,y:a,width:o,height:s-e};break;case n.LEFT:i={x:r+e,y:a,width:o-e,height:s};break;case n.RIGHT_TOP:case n.RIGHT:i={x:r,y:a,width:o-e,height:s}}this.vanchart.setPlotBounds(i)},_recordForPlotBounds:function(t,e){e=Math.ceil(e),t===n.RIGHT_TOP&&(t=n.RIGHT),this.vanchart.clipPool[t]=Math.max(this.vanchart.clipPool[t]||0,e)},_getBackgroundColor:function(){var t=this.option,e="string"==typeof t.plotBackgroundColor,n="string"==typeof t.backgroundColor,r=e?t.plotBackgroundColor:n?t.backgroundColor:"white";return i.colorToHex(r)},getMousePos:function(t){var i=this.vanchart.getParentDom();return e.getMousePos(t,i)},_maxHeight:function(t){var e=this.vanchart.height;return t||this.options.maxHeight?this._getPercentValue(this.options.maxHeight,e):e},_maxWidth:function(t){var e=this.vanchart.width;return t||this.options.maxWidth?this._getPercentValue(this.options.maxWidth,e):e},_getTickContent:function(t,e){return e?a.format(t,e):t},getDefaultMarkerRadius:function(){return o},getPlotBounds:function(){return this.vanchart.getPlotBounds()},getChartBounds:function(){return this.vanchart.getChartBounds()},getParentDom:function(){return this.vanchart.getParentDom()},getDivParentDom:function(){return this.vanchart.getDivParentDom()},getTooltipComponent:function(){return this.vanchart.components.tooltip},remove:function(){},_bindData:function(t,e,i){var n,r,a,o,s=t.length,l=e.length,h=[],u=[],c=[],d={},f=[];for(n=-1;++n<s;)a=t[n],r=i?i(a.datum()):n,d[r]=a,f[n]=r;for(n=-1;++n<l;)o=e[n],r=i?i(o):n,a=d[r],a?a!==!0&&(a.datum(o),c.push(a)):h.push(o),d[r]=!0;for(n=-1;++n<s;)d[f[n]]!==!0&&u.push(t[n]);return{update:c,enter:h,exit:u}},invisible:function(){return e.hasDefined(this.options.visible)&&this.options.visible===!1},_innerClip:function(t){var i=this,n=i.bounds,r=i.vanchart,a=r.renderer,o=e.makeBounds(0,0,n.width,n.height);if(this._clip?a.updateClip(this._clip,o):this._clip=a.createClip(o),"vgroup"===t.type){var s=0,l=0,h=l+o.width,u=s+o.height;t.divG.style({clip:"rect("+s+"px "+h+"px "+u+"px "+l+"px)"}),a.clip(t.renderG,this._clip)}else a.clip(t,this._clip)}});return s}),i("component/Tooltip",["require","./Base","../utils/BaseUtils","../Constants","../utils/ColorUtils","../ComponentLibrary"],function(t){var e=t("./Base"),i=t("../utils/BaseUtils"),n=(t("../Constants"),t("../utils/ColorUtils")),r=t("../ComponentLibrary"),a=.4,o=e.extend({_gCssText:"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:2000;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;pointer-events:none;",_style:function(t){if(!t)return"";var e=[];if(t.animation&&!t.follow){var r="left "+a+"s,top "+a+"s";e.push("transition:"+r),e.push("-moz-transition:"+r),e.push("-webkit-transition:"+r),e.push("-o-transition:"+r)}if(t.style){var o=i.cssNormalization(t.style);for(var s in o)"color"==s?e.push(s+":"+n.colorToHex(o[s])):e.push(s+":"+o[s])}if(t.backgroundColor)if("string"==typeof t.backgroundColor)if(i.isSupportSVG())e.push("background-Color:"+t.backgroundColor);else{var l=n.colorToHexAlpha(t.backgroundColor),h="#"+("0"+(255*l.alpha|0).toString(16)).slice(-2)+l.hex.replace("#","");e.push("filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="+h+", endColorstr="+h+", GradientType=0)")}else if("object"==typeof t.backgroundColor){var u=t.backgroundColor,c=n.colorToHex(u.startColor),d=n.colorToHex(u.endColor),f="left",p="left top",g="right top",m=1;u.x1==u.x2&&(f="top",p="left top",g="left bottom",m=0),e.push("background: -ms-linear-gradient("+f+", "+c+", "+d+")"),e.push("background-image: -moz-linear-gradient("+f+", "+c+", "+d+")"),e.push("background-image: -webkit-gradient(linear, "+p+", "+g+", color-stop(0, "+c+"), color-stop(1, "+d+"))"),e.push("filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="+c+", endColorstr="+d+", GradientType="+m+")")}null!=t.borderWidth&&e.push("border-width:"+t.borderWidth+"px"),null!=t.borderColor&&e.push("border-color:"+t.borderColor),null!=t.borderRadius&&(e.push("border-radius:"+t.borderRadius+"px"),e.push("-moz-border-radius:"+t.borderRadius+"px"),e.push("-webkit-border-radius:"+t.borderRadius+"px"),e.push("-o-border-radius:"+t.borderRadius+"px")),t.shadow&&e.push("box-shadow:1px 1px 2px rgba(0,0,0,0.2)");var v=t.padding;return null!=v&&void 0!=v&&(v=i.reformCssArray(v),e.push("padding:"+v[0]+"px "+v[1]+"px "+v[2]+"px "+v[3]+"px")),e=e.join(";")+";"},doLayout:function(t){this._tDom||(t=t||this.vanchart.getDivParentDom(),this._tDom=document.createElement("div"),this._hiddenDom=document.createElement("div"),this._tDom.onselectstart=function(){return!1},this._tDom.style.position="absolute",this._hiddenDom.style.visibility="hidden",t.appendChild(this._tDom),t.appendChild(this._hiddenDom),this._tooltipHideTick=null)},remove:function(){if(this._tDom){var t=this.vanchart.getDivParentDom();t.removeChild(this._tDom),t.removeChild(this._hiddenDom)}},showWithPoint:function(t,e,n){if(t&&t.tooltip){var r=n||t,a=r.tooltip,o=t.series,s=r.series.calculateTooltipContent(r),l=this.calculateTooltipDivDim(a,s),h=o.getTooltipPos(t,l,e);h&&(this._show(h,a,s),this._tooltipRect=i.makeBounds(h,l))}},_getTooltipText:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");return t.indexOf("Trident/7.0")>0||t.indexOf("Edge/")>0||e>0&&10===parseInt(t.substring(e+5,t.indexOf(".",e)),10)?function(t){for(var e,i="",n=!0,r=-1,a=t.length;++r<a;)e=t.charAt(r),n&&"-"===e?e="&#150;":"<"===e?n=!1:">"===e&&(n=!0),i+=e;return i}:function(t){return t}}(),_show:function(t,e,i){t&&e&&i&&!this.vanchart.isMouseDown&&(clearTimeout(this._tooltipHideTick),this._tDom.innerHTML=this._getTooltipText(i),this._tDom.style.cssText=this._gCssText+this._style(e)+"left:"+t[0]+"px;top:"+t[1]+"px;")},hide:function(){clearTimeout(this._tooltipHideTick),this._tooltipHideTick=setTimeout(function(){this._tDom.style.display="none"}.bind(this),400)},immediateHide:function(){this._tDom.style.display="none"},calculateTooltipDivDim:function(t,e){t=t||"";var i=this._hiddenDom;i.innerHTML=e,i.style.cssText=this._gCssText+this._style(t)+"visibility:hidden;";var n=i.offsetWidth,r=i.offsetHeight;return{width:n,height:r}},render:function(){}});return r.register(r.TOOLTIP_COMPONENT,o),o}),i("Carousel",["require","./utils/BaseUtils","./utils/QueryUtils","./utils/DomUtils","./utils/ColorUtils","./utils/PathUtils","./Constants","./utils/BezierEasing","./vector/ElementWrapper","./vector/SvgRenderer","./vector/VmlRenderer","./component/Tooltip"],function(t){
    function e(t){var e=t.title;return e.text&&e.useHtml?c.getPlainText(e.text):e.text||""}function i(t,e){Object.keys(e).map(function(i){"string"==typeof e[i]&&(t.style[i]=e[i])})}function n(t){var e=p.getRGBAColorArray(t),i=p.rgb2hsb(e[0],e[1],e[2]);return p.toColor(p.hsb2rgb(i[0],.85*i[1],100*(i[2]+.15)/115),"hex")}function r(t){var e=p.getRGBAColorArray(t),i=p.rgb2hsb(e[0],e[1],e[2]);return p.toColor(p.hsb2rgb(i[0],.75*i[1],100*(i[2]+.25)/125),"hex")}function a(t,e){var i=t.className.split(" ");-1===i.indexOf(e)&&(t.className+=" "+e)}function o(t,e){var i=t.className.split(" "),n=i.indexOf(e);-1!==n&&(i.splice(n,n),t.className=i.join(" "))}function s(t,e,i){if(c.isSupportSVG()){var n="<svg width=22 height=22><g>"+L[e]+"</g></svg>";t.innerHTML=n,t.querySelector("g").setAttribute("fill",i),e===m.RADAR_CHART&&t.querySelector("g").setAttribute("stroke",i)}else t.innerHTML='<img width="22" height="22" src="data:image/png;base64,'+C[e]+'">'}function l(t,e){if(c.isSupportSVG())t.style.background=e,t.innerHTML='<svg width=30 height=30><path fill="none" stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M11.1,21.5L20.9 15 11.1 8.5 M11.1,21.5z"></path></svg>';else{var i=u("shape");i.path=g.circlePath(15,15,15),i.stroked="False",i.fillcolor=e;var n=u("fill");n.color=e,n.opacity=.5,i.appendChild(n),t.appendChild(i);var r=u("shape");r.path=/vanchart-arrow-left/.test(t.className)?"m19,22 l9,15 l19,9 e":"m11,22 l21,15 l11,9 e",r.filled="False",r.strokecolor="#ffffff",t.appendChild(r),Hammer.on(t,"mouseover",function(){n.opacity=.2}),Hammer.on(t,"mouseout",function(){n.opacity=.5})}}function h(t){var e=u("shape");e.style.width="100%",e.style.height="100%",e.coordsize="10 10",e.path=g.circlePath(5,5,5),e.stroked="False",e.fillcolor="#7f7f7f";var i=u("fill");i.color="#7f7f7f",i.opacity=.5,e.appendChild(i),t.appendChild(e)}function u(t){var e=y.prototype.create(t);return e.style.cssText=P,e.coordsize="1 1",e}var c=t("./utils/BaseUtils"),d=t("./utils/QueryUtils"),f=t("./utils/DomUtils"),p=t("./utils/ColorUtils"),g=t("./utils/PathUtils"),m=t("./Constants"),v=t("./utils/BezierEasing"),y=(t("./vector/ElementWrapper"),t("./vector/SvgRenderer"),t("./vector/VmlRenderer")),_=t("./component/Tooltip"),x=3.4375,b={type:m.BUTTON,color:"#7f7f7f",interval:1e3,style:{fontSize:"16px",color:"#ffffff"}},T={borderWidth:1,borderColor:"#000000",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.5)",padding:5,shadow:!0,animation:!0,style:{fontSize:"12px",fontFamily:"MicrosoftYaHei, sans-serif",color:"#515151"}},A=function(t){function u(i,n){var r=e(i),a=N[n];return a.mText&&(a.mText.textContent?a.mText.textContent=r:a.mText.innerText=r,D(a)),a._title=r,E(i,t.charts[n],Y[n],n)}function g(t,e,o){t&&t.switchStyle||R();var s=t.options,h=d.merge(b,t.switchStyle,!0);c.isSupportSVG()||h.style.color&&(h.style.color=p.colorToHex(h.style.color)),G=o,B=h.type,Q=s.length,I=I||f.create("div","vanchart-menu",o),U=U||f.create("div","vanchart-cc",o),o.style.overflow="hidden",J.doLayout(o);var u=h.color;switch(e.splice(Q).map(function(t){t.remove()}),N.splice(Q).map(function(t){f.remove(t)}),Y.splice(Q).map(function(t){f.remove(t)}),a(U,"van-ani"),q=q>=Q?0:q,B){case m.CAROUSEL:I.style.bottom=0,I.style.height="18px",I.style.width="100%",I.mWrap=I.mWrap||f.create("div","vanchart-menu-wrap",I),U.style.cssText="top:0;bottom: 18px;left:"+100*-q+"%;width:"+100*Q+"%",c.isSupportSVG()||(U.style.height=G.clientHeight-18+"px"),H=H||f.create("div","vanchart-arrow-wrap",o),F=F||f.create("div","vanchart-arrow-wrap",o),F.style.right=0;var g=H.arrowLeft=H.arrowLeft||f.create("div","vanchart-arrow vanchart-arrow-left",H),v=F.arrowRight=F.arrowRight||f.create("div","vanchart-arrow vanchart-arrow-right",F);l(g,u),l(v,u);var _=h.interval;return new Hammer(g).on("tap",function(t){t.preventDefault(),R(_);var e=(Q+q-1)%Q;S(e,m.LEFT),O(e)}),new Hammer(v).on("tap",function(t){t.preventDefault(),R(_);var e=(q+1)%Q;S(e,m.RIGHT),O(e)}),Hammer.on(o,"mouseover",function(){R()}),Hammer.on(o,"mouseout",function(){R(_)}),R(_),y(s,e);case m.BUTTON:default:var T=n(u),A="width:100%;top:0;background-color:"+u+";filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="+T+", endColorstr="+p.colorToHex(u)+", GradientType=0);";A+="background-image: -webkit-gradient(linear, left top, left bottom, from("+T+"), to("+u+"));",A+="background-image: -moz-linear-gradient(top"+T+", "+u+");",A+="background-image: -webkit-linear-gradient(top"+T+", "+u+");",A+="background-image: linear-gradient(to bottom"+T+", "+u+");",I.style.cssText=A,i(I,h.style),j=c.getTextHeight(h.style);var L=j*x;return U.style.cssText="left:"+100*-q+"%;top:"+L+"px;bottom: 0;width:"+100*Q+"%",c.isSupportSVG()||(U.style.height=G.clientHeight-L+"px"),C(s,e,h.style.color,r(u))}}function y(t,e){z=z||f.create("div","vanchart-chart",U),z.style.width=100/Q+"%",z.style.marginLeft=-100/Q+"%",tt&&(z.style.width=G.clientWidth+"px",z.style.marginLeft=-G.clientWidth+"px");var i=t.map(function(t,i){return A(t,i),E(t,e[i],Y[i],i)});return W=W||f.create("div","vanchart-chart",U),W.style.width=100/Q+"%",W.style.marginRight=-100/Q+"%",tt&&(W.style.width=G.clientWidth+"px",W.style.marginLeft=-G.clientWidth+"px"),i}function A(t,i){var n=e(t),r=N[i];if(!Y[i]){if(Y[i]=f.create("div","vanchart-chart",U),N[i]=r=f.create("div","vanchart-menu-dot",I.mWrap),!c.isSupportSVG()){r.style.background="none";var o=f.create("div","vanchart-menu-dot-ie",r);h(o)}i||a(r,"van-on")}r._title=n,r.i=i,Hammer.on(r,"mouseover",function(){L(r)}),Hammer.on(r,"mouseout",function(){J.immediateHide()}),new Hammer(r).on("tap",function(t){t.preventDefault(),S(i),O(i)})}function L(t){var e=J.calculateTooltipDivDim(T,t._title),i=[G.clientWidth/2-(Q-1)/2*16+16*t.i-e.width/2,G.clientHeight-18-e.height];i[0]=Math.min(Math.max(i[0],0),G.clientWidth-e.width),J._show(i,T,t._title)}function C(t,e,i,n){return t.map(function(t,r){return P(t,r,i,n),E(t,e[r],Y[r],r)})}function P(t,i,n,r){var a=e(t),o=N[i];if(Y[i]||(Y[i]=f.create("div","vanchart-chart",U),N[i]=o=f.create("div","vanchart-menu-btn",I),o.mIcon=f.create("span","vanchart-menu-icon",o),o.mText=f.create("span","vanchart-menu-text",o),c.isSupportSVG()||o.insertAdjacentHTML("afterBegin",'<span class="vanchart-menu-btn_before"></span>'),i||(o.style.background=r)),s(o.mIcon,t.chartType,n),o.style.width=100/Q+"%",!c.isSupportSVG()){var l=G.clientWidth/Q;tt&&(l-=2*j+1),o.style.width=l+"px",0!==o.offsetTop&&(o.style.width=l-1+"px")}o.mText.textContent?o.mText.textContent=a:o.mText.innerText=a,o._title=a,o.i=i,D(o),Hammer.on(o,"mouseover",function(){o.style.background=r,M(o)}),Hammer.on(o,"mouseout",function(){q!==i&&(o.style.background=""),J.immediateHide()}),new Hammer(o).on("tap",function(t){t.preventDefault(),N[q].style.background="",N[i].style.background=r,O(i)})}function M(t){var e=!1;if(e=c.isSupportSVG()?t.scrollWidth>t.clientWidth:t.scrollWidth>=t.clientWidth,e||""===t.mText.innerHTML){var i=J.calculateTooltipDivDim(T,t._title),n=[G.clientWidth*(t.i+.5)/Q-i.width/2,t.offsetHeight];n[0]=Math.min(Math.max(n[0],0),G.clientWidth-i.width),J._show(n,T,t._title)}}function E(e,i,n,r){if(n.style.width=100/Q+"%",!c.isSupportSVG()||n.offsetLeft<G.clientWidth*r){var a=G.clientWidth*r-n.offsetLeft;n.style.width=G.clientWidth+a+"px"}var o,s=n;return r===Q-1?(V||(V=w(n)),s=V):0===r&&(X||(X=w(n)),s=X),o=t._initSingle(e,i,s),r!==q&&o.set({enable:!1}),o}function w(t){var e=f.create("div","vanchart-chart-wrap",t);return e.style.cssText="width:100%;height:100%",e}function S(t,e){var i;e===m.RIGHT&&q===Q-1&&0===t?(Y[0].appendChild(X),z.appendChild(V),o(U,"van-ani"),U.style.left="100%",i=U.clientWidth):e===m.LEFT&&0===q&&t===Q-1?(Y[Q-1].appendChild(V),W.appendChild(X),o(U,"van-ani"),U.style.left=100*-Q+"%",i=U.clientWidth):(Y[0].appendChild(X),Y[Q-1].appendChild(V)),a(U,"van-ani")}function O(e){if(o(N[q],"van-on"),t.charts[q].set({enable:!1}),a(N[e],"van-on"),t.charts[e].set({enable:!0}),$)U.style.left=100*-e+"%";else{var i=v.css.swing;k(U,"left",100*-e+"%",500,i)}q=e}function k(t,e,i,n,r){function a(){c>=n?(u=l,t.style[e]=u+h):(u=o+(l-o)*r(c/n),t.style[e]=u+h,c+=d,K=window.setTimeout(a,d))}window.clearTimeout(K);var o=parseFloat(t.style[e])||0,s=i.match(/([\d.E-]+)(.*)/i),l=+s[1],h=s[2],u=o,c=0,d=17;a()}function R(t){window.clearInterval(Z),t&&(Z=window.setInterval(function(){var t=(q+1)%Q;S(t,m.RIGHT),O(t)},t))}function D(t){t.clientWidth<=22+3*j&&(t.mText.innerHTML="",t.mText.style.marginLeft=0,tt||(t.style.padding=0))}var B=null,G=null,I=null,N=[],H=null,F=null,U=null,z=null,V=null,W=null,X=null,Y=[],q=0,Q=0,Z=null,K=null,j=0,J=new _({},m.TOOLBAR_COMPONENT,{}),$="transition"in document.getElementsByTagName("body")[0].style,tt=/MSIE 7/.test(navigator.userAgent);return{init:g,refresh:u}},L={};L[m.PIE_CHART]='<path d="M12,0.266v10.041l9.519-1.314C20.642,4.339,17,0.742,12,0.266z"/> <path d="M21.744,10.061l-7.309,1.009L11,11.511V11v-0.545V9.651V0.208C5.04,0.208,0.208,5.04,0.208,11 c0,5.96,4.832,10.792,10.792,10.792c0,0,1.214,0,1.602-0.12l0.006-0.012c5.195-0.778,9.183-5.247,9.183-10.659 C21.792,10.683,21.771,10.371,21.744,10.061z"/>',L[m.BAR_CHART]='<rect x="0.937" y="6.794" width="8.112" height="2.704"/> <rect x="0.938" y="12.502" width="13.52" height="2.704"/> <rect x="0.938" y="18.211" width="17.125" height="2.704"/> <rect x="0.937" y="1.086" width="6.309" height="2.704"/>',L[m.COLUMN_CHART]='<rect x="0.625" y="11.943" width="2.83" height="9.432"/> <rect x="6.284" y="8.17" width="2.83" height="13.205"/> <rect x="12.886" y="4.398" width="2.83" height="16.977"/> <rect x="18.545" y="0.625" width="2.83" height="20.75"/>',L[m.LINE_CHART]='<path d="M20.527,2.742c-0.813,0-1.473,0.659-1.473,1.473c0,0.308,0.095,0.593,0.256,0.83l-4.155,7.48 c-0.005,0-0.01-0.002-0.016-0.002c-0.296,0-0.571,0.089-0.802,0.24l-5.74-3.399c0.005-0.05,0.015-0.098,0.015-0.149 c0-0.814-0.66-1.473-1.473-1.473S5.667,8.402,5.667,9.215c0,0.154,0.03,0.299,0.074,0.439L1.987,13.84 c-0.161-0.06-0.333-0.097-0.514-0.097C0.66,13.742,0,14.402,0,15.215s0.66,1.473,1.473,1.473s1.473-0.659,1.473-1.473 c0-0.265-0.076-0.511-0.198-0.726l3.614-4.028c0.227,0.142,0.492,0.227,0.778,0.227c0.399,0,0.76-0.16,1.025-0.418l5.572,3.299 c-0.042,0.136-0.07,0.277-0.07,0.427c0,0.814,0.66,1.473,1.473,1.473s1.473-0.659,1.473-1.473c0-0.445-0.202-0.84-0.514-1.11 l4.033-7.259c0.126,0.035,0.257,0.06,0.395,0.06C21.34,5.688,22,5.029,22,4.215S21.34,2.742,20.527,2.742z"/>',L[m.AREA_CHART]='<path d="M15.255,15.935c0.045,0.075,0.079,0.159,0.079,0.253c0,0.276-0.224,0.5-0.5,0.5s-0.5-0.224-0.5-0.5 c0-0.106,0.041-0.199,0.097-0.28l-7.79-8.953C6.571,6.993,6.493,7.021,6.406,7.021c-0.106,0-0.199-0.04-0.28-0.097L1,12.315V21h21 V9.832L15.255,15.935z"/> <path d="M6.642,6.955C6.797,6.87,6.906,6.711,6.906,6.521c0-0.276-0.224-0.5-0.5-0.5s-0.5,0.224-0.5,0.5 c0,0.17,0.09,0.313,0.22,0.403C6.208,6.981,6.3,7.021,6.406,7.021C6.493,7.021,6.571,6.993,6.642,6.955z"/> <path d="M14.834,16.688c0.276,0,0.5-0.224,0.5-0.5c0-0.094-0.033-0.178-0.079-0.253c-0.087-0.145-0.24-0.247-0.421-0.247 c-0.17,0-0.312,0.09-0.403,0.22c-0.057,0.081-0.097,0.174-0.097,0.28C14.334,16.464,14.558,16.688,14.834,16.688z"/> <polygon points="1,12.315 1,0 0,0 0,22 0.088,22 22,22 22,21 1,21 "/>',L[m.GAUGE_CHART]='<path d="M11,1.149c-6.042,0-10.958,4.916-10.958,10.958c0,2.103,0.597,4.146,1.729,5.908l1.845-1.184 c-0.904-1.408-1.381-3.042-1.381-4.724c0-4.834,3.933-8.766,8.766-8.766s8.766,3.933,8.766,8.766c0,1.682-0.477,3.315-1.38,4.723 l1.845,1.184c1.13-1.762,1.728-3.804,1.728-5.907C21.958,6.065,17.042,1.149,11,1.149z"/> <path d="M11.49,12.11L11,4.273l-0.49,7.837c-0.236,0.16-0.4,0.417-0.4,0.724c0,0.492,0.398,0.89,0.89,0.89s0.89-0.399,0.89-0.89 C11.89,12.527,11.726,12.27,11.49,12.11z"/>',L[m.RADAR_CHART]='<polygon fill="none" stroke-miterlimit="10" points="6.828,20.531 1.417,13.746 3.348,5.286 11.167,1.521 18.985,5.286 20.916,13.746 15.506,20.531 "/> <polyline fill="none" stroke-miterlimit="10" points="3.38,5.38 11.042,10.885 15.506,20.531 "/> <polyline fill="none" stroke-miterlimit="10" points="18.985,5.286 11.057,10.87 1.417,13.746 "/> <line fill="none" stroke-miterlimit="10" x1="11.026" y1="10.885" x2="20.916" y2="13.746"/> <line fill="none" stroke-miterlimit="10" x1="11.167" y1="1.521" x2="11.042" y2="10.901"/> <line fill="none" stroke-miterlimit="10" x1="11.042" y1="10.885" x2="6.835" y2="20.539"/>',L[m.SCATTER_CHART]='<circle cx="14.625" cy="12.158" r="0.916"/> <circle cx="14.625" cy="7.383" r="1.291"/> <circle cx="7.958" cy="12.699" r="0.916"/> <circle cx="21.293" cy="3.702" r="0.707"/> <circle cx="2.041" cy="16.965" r="2.041"/>',L[m.BUBBLE_CHART]=L[m.FORCE_BUBBLE_CHART]='<circle cx="3.521" cy="14.938" r="3.521"/> <circle cx="11.927" cy="5.5" r="1.958"/> <circle cx="20.667" cy="10.219" r="1.333"/>',L[""]='<rect x="2" y="12" width="3" height="9"/> <rect x="7" y="8" width="3" height="13"/> <rect x="12" y="9" width="3" height="12"/> <rect x="17" y="5" width="3" height="16"/> <path d="M20.172,0.911c-0.507,0-0.917,0.411-0.917,0.917c0,0.056,0.022,0.105,0.032,0.158l-4.522,3.532 c-0.156-0.121-0.342-0.205-0.554-0.205c-0.404,0-0.737,0.266-0.859,0.629L8.582,5.56C8.425,5.278,8.135,5.079,7.79,5.079 c-0.507,0-0.917,0.411-0.917,0.917c0,0.053,0.021,0.1,0.031,0.151L2.395,9.78C2.238,9.654,2.046,9.567,1.828,9.567 c-0.506,0-0.917,0.411-0.917,0.917s0.411,0.917,0.917,0.917c0.507,0,0.917-0.411,0.917-0.917c0-0.121-0.026-0.236-0.069-0.342 l4.42-3.563c0.168,0.2,0.411,0.335,0.693,0.335c0.495,0,0.893-0.394,0.91-0.884l4.627,0.372c0.082,0.422,0.437,0.747,0.883,0.747 c0.507,0,0.917-0.411,0.917-0.917c0-0.127-0.026-0.248-0.073-0.358l4.428-3.457c0.168,0.197,0.41,0.329,0.689,0.329 c0.506,0,0.917-0.411,0.917-0.917C21.089,1.322,20.678,0.911,20.172,0.911z"/>',L[m.MULTIPIE_CHART]='<path d="M5.267,10.754c0,0.009-0.002,0.018-0.002,0.028c0,2.918,2.276,5.356,5.194,5.356l0.017-0.002 C7.585,16.12,5.291,13.643,5.267,10.754z"/> <path d="M10.499,18.487l0.003,0c2.997,0,5.568-1.763,6.804-4.219C16.071,16.724,13.5,18.486,10.499,18.487z"/> <path d="M2.916,10.745c0,0.012-0.002,0.025-0.002,0.037c0,4.215,3.329,7.705,7.544,7.705 c0.008,0,0.015-0.001,0.022-0.001C6.288,18.474,2.935,14.937,2.916,10.745z"/> <path fill-opacity = "0.2" d="M18.856,10h2.233C20.546,5,16,0.396,11,0.212v2.213C15,2.604,18.326,6,18.856,10z"/> <path fill-opacity = "0.6" d="M16.104,10h2.752C18.326,6,15,2.604,11,2.424v2.724C13,5.318,15.603,8,16.104,10z"/> <path d="M11,5.149V10h5.104C15.603,8,13,5.318,11,5.149z"/> <path fill-opacity = "0.2" d="M17.752,13.176c-0.119,0.376-0.269,0.741-0.445,1.092c-1.236,2.456-3.807,4.219-6.804,4.219l-0.003,0 l-0.004,0c0,0-0.007-0.001-0.015-0.001c-0.008,0-0.015,0.001-0.022,0.001c-4.215,0-7.544-3.49-7.544-7.705 c0-0.012,0.002-0.025,0.002-0.037c0-0.012-0.002-0.024-0.002-0.036C2.914,6.708,6,3.432,10,3.109V1.2 c-5,0.329-8.994,4.454-8.994,9.509c0,5.269,4.227,9.686,9.496,9.686c5.27,0,9.497-4.395,9.497-9.395h-1.908 C18.091,11.75,17.972,12.482,17.752,13.176z"/> <path fill-opacity = "0.6" d="M2.914,10.709c0,0.012,0.002,0.024,0.002,0.036c0.019,4.192,3.372,7.729,7.564,7.741 c0.007,0,0.015,0.001,0.015,0.001l0.004,0c3-0.001,5.572-1.764,6.808-4.219c0.177-0.351,0.326-0.716,0.445-1.092 c0.22-0.694,0.339-1.426,0.339-2.176h-2.349c0,3-2.321,5.138-5.239,5.138c-0.009,0-0.019-0.001-0.028-0.002l-0.017,0.002 c-2.917,0-5.194-2.438-5.194-5.356c0-0.009,0.002-0.018,0.002-0.028c0-0.015-0.002-0.03-0.002-0.045C5.264,8.007,7,5.783,10,5.468 V3.109C6,3.432,2.914,6.708,2.914,10.709z"/> <path d="M5.264,10.709c0,0.015,0.002,0.03,0.002,0.045c0.024,2.889,2.319,5.366,5.208,5.382c0.009,0,0.019,0.002,0.028,0.002 c2.918,0,5.239-2.138,5.239-5.138H10V5.468C7,5.783,5.264,8.007,5.264,10.709z"/>',L[m.AREA_MAP]=L[m.HEAT_MAP]=L[m.POINT_MAP]='<path d="M28.12 36.6h.03-.05z"/><path d="M19.53 15.7l.04-.02v-.04c0-.08-.1-.16-.2-.13h-.1c-.05 0-.1 0-.12.1 0 0 0 .1-.02.1-.07 0-.14.1-.17.2l-.1.2-.07.1-.1.1-.1.3v.2h-.1v.1h-.1l-.1.1v.5c0 .1 0 .4.1.4l.1-.1v.1h.2v.1h.2v-.2s-.1-.3.1-.5v-.9zM13-8.66h-.05.04zm7.2 16.68L20.18 8h-.1s-.03 0-.04.02h.18zM14.77 18v-.02s-.02.02 0 .02z"/><path d="M21.9 5.6c.05-.05-.02-.12-.05-.17 0 0-.04 0-.03-.02 0 0 .02-.1 0-.1h-.04v-.2c.02-.1 0-.1 0-.1.07 0 .1-.1.1-.1.05-.1 0-.2-.05-.2h.02c.05 0 .04-.1.04-.1l-.1-.1-.2.2h-.1c-.1 0-.1.1-.2.1l-.2.1c-.1 0-.1.1-.2.1l-.1.1c-.1 0-.1.1-.1.1l-.1.2s0 .1-.1.1-.2-.1-.2 0c-.1 0-.3 0-.4-.1V5c0-.1.2-.2.1-.24l.1-.1-.1-.05v.1l-.2-.1h-.4l-.1.1h-.2c.1-.1 0-.1 0-.1V4c0-.15-.1-.24-.2-.26v-.4l-.1-.05V3c0-.1-.1-.1-.1-.1 0-.1 0-.1-.1-.1h-.1c-.1-.1-.2 0-.2 0l-.3-.1-.1-.1v.14h-.5.1c0-.04.1 0 .1-.04L17 3v-.02l-.02-.1v.07-.02V3h-.07.1v.03s-.1 0-.1.02l-.1.04c0 .1-.1.1-.1.1l-.1.1s-.2 0-.2.1h.7-.2v.1l-.1-.1c.1 0 .1.1.1.1v.1h.1v.5c-.1.1-.3.1-.3.2l-.1.1v.2s-.1-.1-.1 0l-.1-.1H16c-.03 0-.1 0-.2.3l-.06.2h-.05c-.1 0-.1.1-.1.1h.1-.1c0 .1 0 .1.1.2 0 0 0 .1.1.1h.4s0 .1.1.1l.2-.2h.1l.1.1h.1l.2.2V6h-.2c-.1 0-.2 0-.2.03-.1 0-.2 0-.2.02l-.1.04c-.1 0-.2.4-.2.5V7H16c-.2 0-.3-.2-.3-.08-.07.1-.17-.04-.2-.02-.2 0-.28-.1-.35 0 0 .06-.03.05-.03.1s-.1.1-.1.1H15s-.04 0 0 0l-.4-.1-.1-.05c-.16 0-.25.2-.27.26-.04.1-.06.2-.05.2.04.2.15.3.2.3h-.06c-.3.2-.36.3-.36.3 0 .1-.1.1-.14.1h-.24s-.03-.1-.2-.1h-.05c-.04 0-.23.2-.3.2l-.1.1h-.03l-.02.1-.43.2-.37.4-.1.3h-.1s0-.2-.02-.2c0 0-.05-.1-.1-.1v-.2.2c-.04 0-.1.2-.16.2h-.1c-.1 0-.25-.3-.3-.4v-.1h-.04c-.2 0-.24-.2-.24-.2v-.1l-.6-.1H9l.03-.1-.08-.1.03.1c-.03-.1-.04 0-.03 0h-.02l.24-.7-.35.5-.06-.1-.04-.1c-.02 0-.03 0-.04-.1 0 0-.04-.2-.07-.2v-.1h-.2L8.3 7c0-.05-.2-.2-.2-.2-.1-.07-.2-.1-.4-.1h-.1l-.1-.04h-.2l-.1-.05s0 .2-.02.2V7H7.1v-.15c0-.02 0-.12-.03-.15v-.1c.05-.05.12-.1.14-.17l.1-.1v-.68l-.1-.1v-.03.3c0-.04 0 .2-.1.2H7c-.04 0-.06-.33-.1-.33s-.06-.2-.1-.2v-.4L6.5 5H6s.2-.05.17-.1l.1-.03c.03-.05.08-.06.08-.08 0-.1-.05-.1-.1-.1l-.12-.1H5.9c-.1 0-.1.1-.1.1V5h-.2c-.1 0-.1 0-.1.04l-.1.06c0 .02-.1.04-.1.07v.36l-.1.03c-.1 0-.1.2-.1.2L5 6s0-.3-.02-.3c0 0 0 .1-.1.1-.03 0-.1.1-.14.1l-.07-.3s0-.2-.05-.2c-.08 0-.1-.1-.1-.1 0-.05-.1-.1-.14-.1s-.1 0-.12.05v.05l-.07.04-.1.13-.1.05-.1.1c-.1 0-.1.03-.1.05v.08s-.1.1-.1.15V6l-.1-.04H3c-.03 0-.1.04-.13.1v.1c.03.07.1.1.14.1v.8s-.5 0-.5.04-.5.15-.5.15v.08l.4.03.1.04c-.1 0 0 .02-.1.03l-.1.03-.1.04H2c-.05 0-.1.03-.1.06-.05 0-.1 0-.1.03h-.1c0-.1-.04-.1-.1-.1h-.3s-.03 0-.05.1c-.04 0-.08.1-.1.1V8v-.2l-.02-.1c0-.04 0-.12-.1-.12 0 0-.1 0-.1.02v.2S1 8 .93 8H.8v-.16c-.03 0-.05-.1-.06-.1-.02 0-.04-.05-.07-.04 0 0 0-.03-.03-.03L.6 7.65H.5c-.06 0-.1.06-.1.07H.3c0 .02-.02.03-.03.04-.05.04-.05.1-.04.12H.15l-.02.02c-.06.04-.06.14-.02.2v.02l.1.02c0 .02-.1.06-.1.12 0 .04 0 .12.1.15v.1c.1.1.1.1.2.1h.1l.1.1.1.1V9s-.1.1 0 .2v-.05H.1c-.02.08 0 .18.06.2l.12.07H.3l.07.03H.4v.16h.1H0h.3c-.02.1.1.1.1.1-.06.1 0 .1 0 .1 0 .1.04.1.1.1 0 .1 0 .1.02.1l.03.1H.7l.04.1s.1.1.17.1H1l.1.1.2.1v.4l.3.1.1.1-.05.1h-.1s-.05 0-.06.1c-.1 0-.1.1-.1.1l-.2.1h-.1.1v.1l-.1.1v.1c-.1.1-.1.1-.1.2-.1 0-.1.1-.1.2v.1s-.1.1 0 .2v.1c-.1 0 0 0 0 .1-.1 0-.1 0-.1.1v.2l.1.1h.2l.1.1.1.1v.1h.1l.1.1h.1s.1 0 .1-.1V13H2v.1c0 .05.06.1.1.1h.1v.1l.1.1c0 .04 0 .04.03.05h.05v.14s.04.1.12.1H3v.1s.03.1.06.1h.05l.1.1h.2c0 .1 0 .1.1.2h.3l.1-.1H4c.05 0 .07.1.1.1 0 0 .03.1.07.1h.15v.3s.2.4.3.4h.05l.1-.3c.1 0 .1-.1.2-.2v-.1l.1-.07.04-.06v.15s0 .1.1.16c0 .1.1.1.2.1h.1c.1 0 .1-.1.1-.1v-.1h.1l.1-.1H6l.1.06h.2l.1.02H6v.1c0 .05.04.1.07.1h.16c-.04 0-.07.06-.07.1v.1c.03.1.17.1.2.1l.22.04H7c.02-.02.08-.03.1-.12l.03-.03.08-.07h.4l.1-.06h.1c.1-.05.1-.1.1-.1l.1-.04h.2l.2.1h.1c.1 0 .2.1.2.1h.2c.1-.05.1-.14.1-.2 0 .04.2.06.2.06v.1H9s-.03.04 0 .1v.2s0 .03.05.05c0 .1.05.1.08.1 0 .1.05.1.05.1v.1h.03v.4H9v.1h-.03c-.03 0-.04.1-.05.1h-.1v.2h-.1l-.1.1v.1l-.02.1v.1l.07.1-.1.1v.1c.04.1.07.1.1.1h.4s.03.1.05.1c0 0 0 .1.03.1-.03.02-.03.04 0 .06V17h.02l.1.28v.06c0 .05 0 .14.04.2H9l.15.03.04.02v.4-.5h.3v.2s0-.1.1-.1v-.2.1s0 .1.1.1h.2s.1 0 .1-.1v-.3l.1-.2v-.1c0 .1.1.1.1.1h.2l.1-.1s0 .3.1.3v.3h.1v-.6l.1-.1.1-.1c.1 0 .1-.1.1-.1h.2v.4l.1.5c.1 0 .2-.4.2-.4s.1 0 .1-.1v.1-.1.1h.1s0 .1.1.1c0 0 0 .1.2.1l.1-.1v-.1h.3v-.05h.4v.1c-.1 0-.2.2-.2.2-.1 0-.1.1-.1.2l-.1.1-.1.04v.1c-.07 0-.07 0-.07.1l.1.2c-.1 0 0 .1 0 .1s0 .1.1.1h.4l.1.02v-.05h.1l.1-.08h.06s.1.03.1 0l.1-.08V18h.1l.1-.2.2-.1-.1-.1c-.1-.1-.1-.1-.2-.14l-.3-.1H13h1v.1-.1h.1v-.14h.2s.1 0 .1-.1c.1.07.1.1.2 0h.1V17s.1-.1.18-.1.1.1.1.1c.1 0 .2-.04.2-.14v.6h.2c.08 0 .1-.4.1-.4V17l.1-.1v-.1l.1-.06c.1 0 .1 0 .1-.1v.4c.1.07.1.5.2.5l.1-.4V17h.1l.04-.03.02-.02c.1 0 .2-.04.2-.12l-.1-.05-.1-.05.2-.02h.2l.3.1-.1-.1h.23s.1 0 .1-.1v-.1h.3l.1-.1V16s.1 0 .1-.05l.1-.02.03-.04v-.1c.1 0 .1-.1.1-.1h.1v-.1c.08-.1.07-.2 0-.2v-.2h.05v-.4l.04-.1h.1l-.1-.1v-.5h.2v-.25c0-.1 0-.1-.03-.1l-.53-.1h.6l.1-.1.06-.08s.08-.1 0-.1l.07-.1V13h-.3c-.1-.06-.1-.07-.2-.07l.1-.1h.1l.1-.07-.1-.1v-.27c-.06-.1-.15-.2-.3-.2l-.06-.1s-.1-.1-.2-.1v-.1c0-.1 0-.1-.1-.2l-.1-.1v-.2c0-.1 0-.1-.03-.1l-.1-.2c-.1-.2-.1-.2-.1-.1-.1 0-.1-.1-.2 0-.1-.1-.4-.1-.5-.1l.3-.1h.2l.1-.1.6-.5-.46.1c0-.1.1-.1.1-.1.07 0 .17-.1.2-.1s.05-.1.04-.1l.1-.1v.2c.03 0 .04.2.05.2l.04-.3.1-.1c.06 0 .1-.1.1-.1l-.7-.1H17h.4l.1.1h.2l.1.1h.6c.1-.08.1-.28.1-.3l.1-.17c.1 0 .1-.1.1-.1v-.1h.1s.1 0 .1-.04l.1-.1c.1 0 .1 0 .1-.1.1 0 .1-.1.1-.1h.4l-.04-.1c-.1-.1 0-.1 0-.1v-.1c.1-.1.1-.1.1-.2.1 0 .17-.1.18-.1l.04-.1.05-.1.1-.1c0-.1.1-.2.1-.2l.06-.1h.3c0-.1.2-.1.2-.1v-.1l.3-.1c.1-.1.3-.2.3-.3s-.1-.1 0-.1v-.1s.1 0 .1-.1v-.3c0-.1 0-.2-.1-.2l-.1-.2c0-.1-.1-.1-.1-.1v-.1c.1-.1.1-.1.1-.2h.5c0-.1.1-.2.1-.3 0-.1-.1-.1-.1-.2zM1.25 11.5zm12.8 6.8h.04-.1z"/><path d="M17.38 10h.04"/><path d="M16 3.5h.23H16zm2.32 6.5l-.04-.02V10h.04zM21 7.34h.05L21 7.3v.03zm-4.4 5.4s-.02-.07-.1-.07h-.02v.15l-.03.14h-.03c-.03 0-.06-.13-.07-.13l-.02-.1c-.05 0-.1.08-.14.1-.1 0-.1.1-.1.1h.3c.1 0 .1.05.1.03v-.18l-.1-.05z"/>',L[m.TREEMAP_CHART]='<polygon fill-opacity = "0.6" points="11,0 11,10 11,13 11,14 11,16 11,22 22,22 22,16 22,14 22,13 22,10 22,0 "/> <rect y="14" fill-opacity = "0.2" width="10" height="8"/> <rect width="10" height="13"/>',L[m.FUNNEL_CHART]='<polygon points="20.06,6.533 1.989,6.533 1.082,1.656 20.966,1.656 "/> <polygon points="17.949,14.412 4.005,14.412 2.051,8.409 19.888,8.409 "/> <polygon points="14.963,20.79 6.944,20.79 4.271,15.912 17.933,15.912 "/>';var C={};C[m.PIE_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWBAMAAAA2mnEIAAAAMFBMVEUAAAD///////////////////////////////////////////////////////////87TQQwAAAAD3RSTlMAEM/vv4Bgr59AcFAg348jFhddAAAAjElEQVQY02MAArGSDx6JDGDAav//w//PASAmo/5/IPv/JwEgW/g/mP1fEcjWh7I/AVX/h7L/L2AQhrMvMOTD2b8Z6uHsfwz+ULZK1ByG/2B25smtLfYQ9hewLEQNRACoFwZ+AM2EgW9Au2DAkIEVzg6AuO0/xG1wRYpgv0CEBaB+/A/2I8Tv/zVAfgcA4kmspsM258YAAAAASUVORK5CYII=",C[m.BAR_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWBAMAAAA2mnEIAAAAElBMVEUAAAD///////////////////8+Uq06AAAABXRSTlMAQIAgEDB5ccoAAAA+SURBVBjTY0AGoqGhgTjZBICjoKCgCFw9SAMm20hJSUkZlwFwNWAgANELBgrobEdBMDDAZQZEPRQI4GQjAwAQhxXw9o2YjgAAAABJRU5ErkJggg==",C[m.COLUMN_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWBAMAAAA2mnEIAAAAG1BMVEUAAAD////////////////////////////////rTT7CAAAACHRSTlMAgEC/IGCPMNAZ/cwAAAAuSURBVBjTY4ADRSEEW6KRALvYDMHWaCbAtmgiwHZSgbOBiG5skJcDRRgcRYEMADB5J9shBWGXAAAAAElFTkSuQmCC",C[m.LINE_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAAM1BMVEUAAAD///////////////////////////////////////////////////////////////+3leKCAAAAEHRSTlMA74C/IM9AEN+vYDCfcFCP7HfXwgAAAG9JREFUGNPNjzsOxDAIRA0Yf+J1du5/2siKIQ1dmlA9PQ2gSa8nHznSBIo0gOgGlAPdm+M4HQuK4Qn8jEU88QdoZw6MZ0+lQ/Li5muDFpYGrokpu9UbJjUmtqaqdQeqAN2aYln7hx41nbwzLDN9Yi4tRQMa2y+S7gAAAABJRU5ErkJggg==",C[m.AREA_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAgklEQVR42mL4DwQMtACjBg8zg4FCBhRbiMPg+f8hIIFqBiMZCgMGFBuMxVAQeE+q4UD1AnCDgVT/f9zgPlgxcYaC4uc8Ayws/xMG5wkZDjX0Pdix/0kD8/EY6gAzlByDsRqOzcfkGIySDHEFIyMFGWEClC7AJslIqyw9avAQNhggwABVPsGVrLOsUQAAAABJRU5ErkJggg==",C[m.GAUGE_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWBAMAAAA2mnEIAAAAMFBMVEUAAAD///////////////////////////////////////////////////////////87TQQwAAAAD3RSTlMAgL9A3zAQn89wII/vr2A5/8HrAAAAnUlEQVQY02NAA5kq/52mQZjZ/0FgG4jJ6v/fXbDk/5cAIDvmvzJDKIPR/6MMDGz+HxkYjBkY5L8kMLD/FwCzGf8XMKz/xABmM+j/Ytj/GUjPBGL73wz9DUBaEIg5fjAAlYPYIA0M/ydA2ZxA9gMgfQaI+f5D1NyFqOm/AHUh7w+G/b+g7PXfGeK/Q9n1XxmYtKDsRQoMbHAvJTAQAQCj4DRASabatgAAAABJRU5ErkJggg==",C[m.RADAR_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAAM1BMVEUAAAD///////////////////////////////////////////////////////////////+3leKCAAAAEHRSTlMAEO+A32DPr7+fQFAwIHCP1A0rdQAAAMpJREFUGNOFUFlyRCEIlEXcfdz/tAHxVSr5mOmyQJu2UdI39Mob/pOjcuOK9KeQmbPJbd3CS3oqblWQVpiqnEx00tYnjlXqemlo+ISqZHhwBN25AOih0aQDGxhNuI2QbmGh16ByKSLT9w/FAw6aar0v89zItKMhqzJan3tf8i4qe3aWvHxLE81LQ5IKZU7nImu2Y3gvhcQjvBGsLHTat9srTZ0n+V8Ap4fuYd+h4rxCMkNp6YIEwhZwNfkdeWG+fxIfxQsQfdHTB/wA4h0GZUKWX6QAAAAASUVORK5CYII=",C[m.SCATTER_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAgUlEQVR42mJgGAVA8P//fwFaGFoAxP8ZaWCwAZByGHRhCPYuEKyntsH7oQb/x6WGhUyzF0LpCyMnoRtAkw+6uAMQnwdFIrlhfB5Ko6d3BSA2IDuMgS6aD8T9eDICeV6mNBzn/0eA+dQ0GB1QxeVMtExSDTQJCljBDMQKI7t6AggwAFyzgSCZYutPAAAAAElFTkSuQmCC",C[m.BUBBLE_CHART]=C[m.FORCE_BUBBLE_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAnUlEQVR42mJgGAVQwEiswv///ysAqQQodwIjI+MHqrgAaPD7/wiwn1qGOvxHA1QLM1JdzEKC2YbIYUz31AANNgFqG9oPDar3TFR2sAGUFoCnUSCeD4oUKG1AposNgHg9ECdgTUpQEEBpuNzHYfB9Sg3GBwzINZdQ5H0YlEFhgJZd/0P5BhQXm9CckgBNfyDvbwAWiw9GaxWqAIAAAwA2evfwKvysMwAAAABJRU5ErkJggg==",C[""]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAAM1BMVEUAAAD///////////////////////////////////////////////////////////////+3leKCAAAAEHRSTlMAQL/PMBBwgCDvn49gUN+vfvzE8AAAAGJJREFUGNPdjUEOgDAIBFkordpW+f9rNdqUQ3mBeyBhMiwURBNFYQu4HsK60E1aUNAlA+7sUgpQmdXMZh/vDORyPs8cJ+l4T7dEjhsPB8DE+bh0LD4IJkRO3K7Agj/xTzjKDUJoCsaJEKt8AAAAAElFTkSuQmCC",C[m.MULTIPIE_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAAe1BMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////NgkbwAAAAKHRSTlMAMpkDn0AnIBSz24Dmv4dKOhoQCuzKrJqMLfnyuaZ5dGZaUkIN0pRsCVisMQAAAOZJREFUGNN90dtygyAUhWHWEhA0Gg8xappz0pb3f8LKdkrTXvS/45s9DHtQL8G6TP0qcxYKS3n2gm0UVX9ugblPatFca63IsX4AfdLtB0nF2BbIhHPcNVkV6jBo8Txqj2bkfheCCmG3eA08ZfhC/RYii483GZ9BDkF4qSBLYGE8NDeJw4mUx+DGlU2ssdY9ZeWrFl7bkHcI48gicUHdCFt4+sRHTrCRHcoT33+GL3Cy+wxPVvHlh4Hcfy/fwXi9nL0ntTfo1JqDmSrGqglxxeQw57Iszwbx4lSWYy3/+2td27ad4D99Ae8gE70h03waAAAAAElFTkSuQmCC",C[m.AREA_MAP]=C[m.HEAT_MAP]=C[m.POINT_MAP]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAA5ElEQVR42mJgGHHg////AkDsAMQK1DZ4/38IeE/QcJACIDYgwlAHqIH/kQxvAOLz2BTPB0kA8X1CLoC6FtlgOEBXiA76QWGIx1cO/7GDfpCCAqjzcYH76MEC4hNQr8CAyys4QANUIzqAmbEe7kMcCkkF76HxooCeDqkB1mNLMtQAAdhyznkqGHwfawoikDKIBQ64EnwA1Ob9aLFNLFBgIDK7CpAQByDHNMD0s+AymJGR8QDUgngiyqIHQHwQiPlJLcHeIwXRe7QI+w/1mQLOMCZU7iKxQWXIfVoU7uS5blADgAADACOwXahZ5pbvAAAAAElFTkSuQmCC",C[m.TREEMAP_CHART]="iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAOUlEQVR42mL8DwQMRABGIAAqnclAJGBioBEYNXjU4FGDh5XBLEDMRyuD1YhUe3Y08kYNHqQGAwQYAL9YCMfrIWhGAAAAAElFTkSuQmCC",C[m.FUNNEL_CHART]="iVBORw0KGgoAAAANSUhEUgAAABcAAAAXBAMAAAASBMmTAAAAKlBMVEUAAAD///////////////////////////////////////////////////+Gu8ovAAAADXRSTlMAQMCAIGAw0FAQ8HCwS1BQUgAAAHVJREFUGNNjwA2Y78LAZQYGDjjnKgMDC5xzDahuLYxzAcjRhXEKgJxEQShIAHIcYRwHIGcvTFkAkOML40wActih7DsgJ3Aj7ETYehPsuloIRwHT3UlKYNAAZMKMuzUBzGFEGAZxKkJ/LojjAOWwGhsbW2CYCwC1z2uuESf9qgAAAABJRU5ErkJggg==";var P="position:absolute;width:1px;height:1px;behavior:url(#default#VML);";return A}),i("VanCharts",["require","./utils/BaseUtils","./Constants","./VanChart","./VanChartMap","./VanChartForceBubble","./VanChartWordCloud","./utils/LoadingUtils","./Carousel"],function(t){function e(t){r.initConst();var e=t.getAttribute(a.INSTANCES_KEY);e||(e=a.INSTANCES_KEY+d++,t.setAttribute(a.INSTANCES_KEY,e));var n=f[e]||new i(t);return f[e]=n,n}function i(t){this.dom=t,this.charts=[],this.carousel=c&&c(this),this.dom.style.cssText+=";overflow:hidden;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",this.dom.onselectstart=this.dom.ondrag=function(){return!1}}function n(t){r.initPaddingScale(t)}var r=t("./utils/BaseUtils"),a=t("./Constants"),o=t("./VanChart"),s=t("./VanChartMap"),l=t("./VanChartForceBubble"),h=t("./VanChartWordCloud"),u=t("./utils/LoadingUtils"),c=t("./Carousel"),d=0,f=Object.create(null);return i.prototype={constructor:i,setOptions:function(t){this.options=t||this.options,r.isArray(t.options)?this.charts=this.carousel.init(t,this.charts,this.dom):this.charts=[this._initSingle(t,this.charts[0],this.dom)]},_initSingle:function(t,e,i){var n;return n=t.geo?s:t.chartType==a.FORCE_BUBBLE_CHART?l:t.chartType==a.WORD_CLOUD_CHART?h:o,e&&e.vanChartType===n.prototype.vanChartType?(e._changeDataState=!0,e.refresh(t),e):(e&&e.remove(),new n(t,i,this))},setData:function(t,e){null!=e?this.charts[e]=this.carousel.refresh(t,e):this.setOptions(t)},refreshRestore:function(){this.setOptions(this.options)},resize:function(t){t?this.setOptions(t):this.charts.forEach(function(t){t.resize()})},clear:function(){for(var t=0,e=this.charts.length;e>t;t++)this.charts[t].remove(),this.charts[t]=null},startLoading:function(){this.dom&&u.startLoading(this.dom,this.dom.getAttribute(a.INSTANCES_KEY))},endLoading:function(){this.dom&&u.endLoading(this.dom,this.dom.getAttribute(a.INSTANCES_KEY))}},{init:e,initPaddingScale:n}}),i("chart/Bar",["require","../utils/BaseUtils","../utils/ColorUtils","../Constants","../utils/QueryUtils","../utils/BezierEasing","./Series","../ComponentLibrary","../dom/Browser","../ChartLibrary","../ChartLibrary"],function(t){var e=t("../utils/BaseUtils"),i=t("../utils/ColorUtils"),n=t("../Constants"),r=t("../utils/QueryUtils"),a=t("../utils/BezierEasing"),o=t("./Series"),s=(t("../ComponentLibrary"),t("../dom/Browser")),l=400,h=150,u=250,c=6,d=.35,f=1,p=3,g=2,m=o.extend({_refresh:function(){var t=this._getQueryList();e.extend(this,{width:r.queryList(t,"width"),categoryGap:r.queryList(t,"categoryGap")||"20%",gap:r.queryList(t,"gap")||"20%"})},doLayout:function(){var t=this.getSeriesOffsetAndWidth(),i=this,r=i.vanchart,a=i.type==n.COLUMN_CHART,o=r.isInverted(),s="x",l="y";a||(s="y",l="x");var h=a&&!o||!a&&o,u=i[s+"Axis"],c=i[l+"Axis"],d=c.getZeroPos(),f=0;u.isOnZero()&&(f=u.options.lineWidth),this.points.forEach(function(n){var r=n.borderWidth,p=u.scale(u.getAxisValue(n[s],n)),g=n[l+"0"],m=c.scale(0===g?c.getStartPosValue():g),v=c.getAxisValue(n[l],n)+n[l+"0"],y=c.scale(v);m===1/0&&(m=c.scale.range()[0]);var _,x,b,T;_=p+t.offset-t.width/2,x=Math.min(m,y),b=t.width,T=Math.abs(m-y),x===d?(x+=f/2,T-=f/2):x+T===d&&(T-=f/2),T=Math.max(T,0);var A={};h?(A.x=_,A.y=x,A.width=b,A.height=T):(A.x=x,A.y=_,A.width=T,A.height=b),n.rect=e.rectSubPixelOpt(A,r),n.rect.rx=n.rect.ry=n.borderRadius,n.isNull||i._calculateAnimationInitRect(n,a,o)})},getSeriesOffsetAndWidth:function(){var t=this,i=0,n={},r=0,a=0,o=this.vanchart.seriesOfType(this.type),s=this.getBaseAxisType();o.forEach(function(e){e[s]==t[s]&&e.visible&&(e.stack&&!n[e.stack]?(i++,n[e.stack]=!0,t.stack&&t.stack==e.stack&&(r=i-1)):e.stack||(i++,t==e&&(r=i-1))),e[s]==t[s]&&(a+=e.points.length)});var l=t[s],h=0,u=0;if(l.isCategory()){var c=t.categoryGap,d=t.gap,f=l.getTickLength();c=e.getPercentValue(c,f),h=(f-c)/i,u=c/2+h*(r+.5),d=e.getPercentValue(d,h),h-=d}else{var p=l._getRange();p=Math.abs(p[1]-p[0]),h=p/a/3,u=0}return{width:e.hasDefined(t.width)?t.width:Math.max(h,g),offset:u}},_getPointKey:function(t){return this.type==n.BAR_CHART?t.y:t.x},getTargetKey:function(){return this.type==n.BAR_CHART?"x":"y"},getBaseAxisType:function(){return this.type==n.COLUMN_CHART?"xAxis":"yAxis"},getTrendLineXYValues:function(t){for(var e=[],i=[],r=t.points,a=t.type==n.COLUMN_CHART?t.yAxis:t.xAxis,o=t.type==n.COLUMN_CHART?t.xAxis:t.yAxis,s=o.isHorizontal(),l=a.isAxisReversed(),h=[],u=0,c=r.length;c>u;u++){var d=r[u];!d.isNull&&d.rect&&h.push(d.rect)}return h.sort(function(t,e){return s?t.x-e.x:t.y-e.y}),h.forEach(function(t){var n,r;s?(n=t.x+t.width/2,r=l?t.y+t.height:t.y):(n=l?t.x:t.x+t.width,r=t.y+t.height/2),e.push(n),i.push(r)}),[e,i,o.getPosition()]},_calculateAnimationInitRect:function(t,e,i){var r,a,o=e?"y":"x",s=t.series[o+"Axis"],l=s.getAxisValue(t[o],t),h=s.getStartPos(),u=l>=0,c=e&&!i||!e&&i;c?u^s.isAxisReversed()?(r=n.BOTTOM_TO_TOP,a={x:t.rect.x,y:h,width:t.rect.width,height:0}):(r=n.TOP_TO_BOTTOM,a={x:t.rect.x,y:t.rect.y,width:t.rect.width,height:0}):u^s.isAxisReversed()?(r=n.LEFT_TO_RIGHT,a={x:t.rect.x,y:t.rect.y,width:0,height:t.rect.height}):(r=n.RIGHT_TO_LEFT,a={x:t.rect.x+t.rect.width,y:t.rect.y,
    width:0,height:t.rect.height}),t.location=r,t.initRect=a},_getFixedPos:function(t,e){var i,r,a=this.vanchart.getPlotBounds(),o=t.rect;return 0===t.initRect.height?(i=a.x+o.x+o.width+f,r=t.location==n.BOTTOM_TO_TOP?a.y+o.y:a.y+o.y+o.height):(r=a.y+o.y+o.height+f,i=t.location==n.LEFT_TO_RIGHT?a.x+o.x+o.width-e.width:a.x+o.x-e.width),[i,r]},_calculateLabelPos:function(t){var i=this;i.points.forEach(function(r){var a=r.dataLabels;if(a&&a.enabled){var o;a.align&&(o=i._calculateAlignLabelPos(r,a.align));var s=r.location==n.TOP_TO_BOTTOM||r.location==n.BOTTOM_TO_TOP;a.autoAdjust&&(o=i._calculateAutoLabelPos(r,o,s,t)),o&&(r.labelPos=o,t.addBounds(e.makeBounds(r.labelPos,r.labelDim)))}})},_calculateAlignLabelPos:function(t,e){var i,r,a=t.labelDim,o=t.rect,s=this.vanchart.getPlotBounds(),l=(s.width,s.height,t.location==n.TOP_TO_BOTTOM||t.location==n.BOTTOM_TO_TOP),h=t.location==n.BOTTOM_TO_TOP||t.location==n.LEFT_TO_RIGHT,u=o.x+o.width/2,c=o.y+o.height/2;switch(e){case n.CENTER:i=u-a.width/2,r=c-a.height/2;break;case n.INSIDE:l?(i=u-a.width/2,r=h?o.y+p:o.y+o.height-p-a.height):(r=c-a.height/2,i=h?o.x+o.width-p-a.width:o.x+p);break;case n.OUTSIDE:l?(i=u-a.width/2,r=h?o.y-p-a.height:o.y+o.height+p):(r=c-a.height/2,i=h?o.x+o.width+p:o.x-p-a.width)}return{x:i,y:r}},_getMoreLabelDefaultCenter:function(t,e){var i=this.type==n.COLUMN_CHART,r=this.vanchart.isInverted();return i&&!r||!i&&r?{centerX:t.rect.x+t.rect.width/2,centerY:t.rect.y-e.height/2}:{centerX:t.rect.x+t.rect.width+e.width/2,centerY:t.rect.y+t.rect.height/2}},getInitShowTime:function(){return l},getReAppearTime:function(){return l+h},getDropTime:function(){return h},getStyle:function(t){return{fill:t.series.getFillFilter(t.color,t),"fill-opacity":t.image?1:t.opacity,stroke:t.borderColor,"stroke-opacity":t.borderOpacity,"stroke-width":t.borderWidth}},getAttrs:function(t){return t.rect},getPointGraphicKey:function(){return"rect"},effectAnimation:function(t,e){function i(){return l.rect().addTo(h).attr(u).style(c)}function r(t){return.5*d*t}function a(t,e,i){t.style(c),d3.select(t.node()).transition().delay(e).ease("linear").duration(i).styleTween("stroke-opacity",function(){return function(t){return.8*(1-t)}}).styleTween("stroke-width",function(){return r}).attrTween("x",function(){return function(t){return u.x-r(t)/2+1}}).attrTween("y",function(){return function(t){return u.y-r(t)/2+1}}).attrTween("width",function(){return function(t){return Math.max(u.width+r(t)-2,0)}}).attrTween("height",function(){return function(t){return Math.max(u.height+r(t)-2,0)}})}if(!e.image){var o=e.series,s=o.vanchart,l=s.renderer,h=o._getPointEffectGroup(e),u=e.rect,c={fill:"none",stroke:e.color,"stroke-opacity":0,"stroke-width":0},d=e.location===n.BOTTOM_TO_TOP||e.location===n.TOP_TO_BOTTOM?u.width:u.height,f=h.firstG=h.firstG||i(),p=h.secondG=h.secondG||i(),g=h.thirdG=h.thirdG||i(),m=o._getEffectTime(e),v=m/o.getDefaultEffectTime();a(f,0,1600*v),a(p,600*v,1600*v),a(g,1200*v,1600*v)}},getDefaultEffectTime:function(){return 2800},getHighLightStyle:function(t){return{stroke:t.mouseOverColor||t.color,fill:t.series.getFillFilter(t.mouseOverColor||t.color,t),"fill-opacity":t.opacity,"stroke-width":c,"stroke-opacity":0===t.opacity?0:d}},getPressedStyle:function(t){return{stroke:t.mouseOverColor||t.color,fill:t.series.getFillFilter(t.clickColor,t),"fill-opacity":t.clickOpacity,"stroke-width":c,"stroke-opacity":0===t.opacity?0:d}},getFillFilter:function(t,r){if(e.isSupportSVG()){var a=this,o=a.vanchart,s=o.renderer;if(r.image){var l,h,u=r.rect;switch(r.location){case n.BOTTOM_TO_TOP:l=u.x,h=u.y+u.height%r.imageHeight;break;case n.TOP_TO_BOTTOM:case n.LEFT_TO_RIGHT:l=u.x,h=u.y;break;case n.RIGHT_TO_LEFT:l=u.x+u.width%r.imageWidth,h=u.y}var c={x:l,y:h,width:r.imageWidth,height:r.imageHeight,patternUnits:"userSpaceOnUse"},d={x:0,y:0,width:r.imageWidth,height:r.imageHeight};return r.imagePattern?s.updateImagePattern(r.imagePattern,c,d,r.image):r.imagePattern=s.imagePattern(c,d,r.image),"url(#"+e.stamp(r.imagePattern)+")"}if(r.style==n.STYLE_GRADUAL){var f,p,g,m;switch(f=p=g=m="0%",r.location){case n.BOTTOM_TO_TOP:p="100%";break;case n.TOP_TO_BOTTOM:m="100%";break;case n.LEFT_TO_RIGHT:g="100%";break;case n.RIGHT_TO_LEFT:f="100%"}var v={x1:f,y1:p,x2:g,y2:m},y={offset:"0%","stop-color":t},_={offset:"100%","stop-color":i.getColorWithDivider(t,.9)};return r.colorGradient?s.updateColorGradient(r.colorGradient,v,[y,_]):r.colorGradient=s.colorGradient(v,[y,_]),"url(#"+e.stamp(r.colorGradient)+")"}}return t},_calculateAnimationDelay:function(){if(this.stack)return 0;if(this.state==n.STATE_SHOW){for(var t=this.vanchart.seriesOfType(this.type),e=0,i=t.length;i>e;e++)if(t[e].state==n.STATE_TO_DROP)return h}else if(this.state==n.STATE_TO_SHOW)return u;return 0},onPointMouseOver:function(t){var e=this,i=e.series,r=i.animation,a=i.getHighLightStyle(e);r?(s.gecko&&/url/i.test(a.fill)&&(e.graphic.style({stroke:e.mouseOverColor||e.color,fill:a.fill}),delete a.fill),d3.select(e.graphic.rawElement).interrupt(n.SELECT_ANIMATION).transition(n.SELECT_ANIMATION).duration(100).ease("ease-out-in").style(a)):e.graphic.style(a)},onPointMouseOut:function(){var t=this,e=t.series,i=e.animation,r=e.getStyle(t);i?(s.gecko&&/url/i.test(r.fill)&&(t.graphic.style({fill:r.fill}),delete r.fill),d3.select(t.graphic.rawElement).interrupt(n.SELECT_ANIMATION).transition(n.SELECT_ANIMATION).duration(100).ease("ease-out-in").style(r)):t.graphic.style(r)},updateAnimation:function(t,e,i){var n=e.rect;t._current_=n,d3.select(t).transition().ease(a.css.swing).duration(u).delay(i).attr("x",n.x).attr("y",n.y).attr("width",n.width).attr("height",n.height)},createAnimation:function(t,e,i){var n=e.rect,r=e.initRect;t._current_=n,d3.select(t).attr("rx",e.borderRadius).attr("ry",e.borderRadius).attr("x",r.x).attr("y",r.y).attr("width",r.width).attr("height",r.height).transition().ease(a.css.swing).duration(l).delay(i).attr("x",n.x).attr("y",n.y).attr("width",n.width).attr("height",n.height)},dropAnimation:function(t,e,i){var n=e.initRect;n?d3.select(t).transition().duration(h).delay(i).ease(a.css.swing).attr("x",n.x).attr("y",n.y).attr("width",n.width).attr("height",0).remove():d3.select(t).remove()}});return t("../ChartLibrary").register(n.BAR_CHART,m),t("../ChartLibrary").register(n.COLUMN_CHART,m),m}),i("chart/Pie",["require","../Constants","../utils/BaseUtils","../utils/ColorUtils","./Series","../utils/QueryUtils","../utils/BoundsManager","../utils/BezierEasing","../EffectHelper","../ChartLibrary"],function(t){var e=t("../Constants"),i=t("../utils/BaseUtils"),n=t("../utils/ColorUtils"),r=t("./Series"),a=t("../utils/QueryUtils"),o=(t("../utils/BoundsManager"),t("../utils/BezierEasing")),s=t("../EffectHelper"),l=2*Math.PI,h=1.1,u=3,c=1e3,d="bounce",f=o.css.swing,p=400,g=r.extend({_refresh:function(){var t=this._getQueryList(),e=a.queryList(t,"startAngle")||0,n=a.queryList(t,"endAngle")||360;e>n?e-=360:e==n&&(n=e+360);var r=a.queryList(t,"center");r&&(r=[].concat(r),r[0]=this._getPercentValue(r[0],this.vanchart.width),r[1]=this._getPercentValue(r[1],this.vanchart.height)),i.extend(this,{startAngle:i.toRadian(e),endAngle:i.toRadian(n),center:r,radius:a.queryList(t,"radius"),innerRadius:a.queryList(t,"innerRadius")||0,roseType:a.queryList(t,"roseType"),rotatable:a.queryList(t,"rotatable")&&i.isSupportSVG(),style:this.vanchart.options.style})},_getAxisTypes:function(){return[]},doLayout:function(){var t=this._calculateSeriesBounds(),i=this;if(!t&&!this.radius&&!this.center)throw new Error("pie has no bounds");var n,r,a;t?(a=this.radius||Math.min(t.width/2,t.height/2),n=t.x+t.width/2,r=t.y+t.height/2,this.bounds=t):(a=this.radius,n=this.center[0],r=this.center[1]);var o=this.chartInfo&&this.chartInfo.rotate||0;this.chartInfo={radius:a,centerX:n,centerY:r,rotate:o};var s=d3.layout.pie().value(function(t){return i.roseType==e.SAME_ARC?1:Math.abs(t.getTargetValue())}).startAngle(i.startAngle).endAngle(i.endAngle).sort(null),l=this.points.filter(function(t){return t.visible}),h=this;l.forEach(function(t){t.lastShape=h._getArcData(t)});var u=s(l);u.forEach(function(t){var e=t.data;e.startAngle=isNaN(t.startAngle)?0:t.startAngle,e.endAngle=isNaN(t.endAngle)?0:t.endAngle})},_getFixedPos:function(t,e){var i=(this.vanchart.getPlotBounds(),t.series.chartInfo),n=i.centerX,r=i.centerY,a=this.getCenterAngle(t),o=t.outerRadius*h,s=o*Math.sin(a)+n,u=o*Math.cos(a+Math.PI)+r;return a<Math.PI/2?u-=e.height:a>=Math.PI&&a<3*Math.PI/2?s-=e.width:a>=3*Math.PI/2&&l>a&&(u-=e.height,s-=e.width),[s,u]},_calculateLabelPos:function(){for(var t=this.roseType,i=this.points.filter(function(t){return t.visible}),n=[],r=[],a=0,o=i.length;o>a;a++){var s=i[a],l=s.dataLabels;s.visible&&l&&l.enabled&&(l.align==e.OUTSIDE?n.push(s):r.push(s))}this._calculateOutsideLabelBounds(n),this.radius||(r.length&&!n.length||!r.length&&!n.length)&&(this.chartInfo.radius=this.chartInfo.radius/h-u);var c=0,d=this.chartInfo.radius;if(this.innerRadius&&(c="string"==typeof this.innerRadius&&-1!=this.innerRadius.indexOf("%")?parseFloat(this.innerRadius)*d/100:parseFloat(this.innerRadius)),this.chartInfo.innerRadius=c,this.points.forEach(function(t){t.innerRadius=c}),t){var f=d-c,p=0;i.forEach(function(t){p=Math.max(p,Math.abs(t.getTargetValue()))});var g=f/p;(isNaN(g)||!isFinite(g))&&(g=0),i.forEach(function(t){t.outerRadius=c+g*Math.abs(t.getTargetValue())})}else i.forEach(function(t){t.outerRadius=d});this.calculateLeadLineStartPos(n),this.calculateInsideLabelBounds(r)},_calculateLabelPosWhenRadiusFixed:function(){for(var t=this.points.filter(function(t){return t.visible}),i=[],n=[],r=0,a=t.length;a>r;r++){var o=t[r],s=o.dataLabels;s&&s.enabled&&(s.align==e.OUTSIDE?i.push(o):n.push(o))}this._calculateLabelBoundsForFixed([this.chartInfo.centerX,this.chartInfo.centerY],this.chartInfo.radius,i),this.calculateLeadLineStartPos(i),this.calculateInsideLabelBounds(n)},_calculateOutsideLabelBounds:function(t){if(t.length){t.forEach(function(t){t.labelPos=null});var e=this.chartInfo,i=e.radius,n=[e.centerX,e.centerY];this.radius?this.calcOutsideLabel(t,this.bounds,n,i):this.chartInfo.radius=this.calcOutsideLabel(t,this.bounds,n)}},_calculateLabelBoundsForFixed:function(t,e,i){var n=this.chartInfo,e=n.radius,t=[n.centerX,n.centerY];this.calcOutsideLabel(i,this.bounds,t,e)},_calculateSeriesBounds:function(){for(var t=this.vanchart.seriesOfType(e.PIE_CHART),i=this.vanchart.getPlotBounds(),n=0,r=0,a=t.length;a>r;r++)t[r].center&&t[r].radius&&n++;for(var o=i.width/Math.max(1,t.length-n),r=0,a=t.length;a>r;r++)if(t[r]==this&&!this.center)return{x:i.x+r*o,y:i.y,width:o,height:i.height}},_getTranslate:function(){return[this.chartInfo.centerX,this.chartInfo.centerY]},_getArcData:function(t){return i.hasDefined(t.startAngle)?{startAngle:t.startAngle,endAngle:t.endAngle,outerRadius:t.outerRadius}:void 0},_getMoreLabelDefaultCenter:function(t,e){var i=this.getCenterAngle(t),n=t.series.chartInfo.innerRadius+(t.outerRadius-t.series.chartInfo.innerRadius)/2,r=this._getArcPoint(n,i);return{centerX:r[0],centerY:r[1]}},effectAnimation:function(t,e){s.areaStyleEffectAnimation(t,e)},getDefaultEffectTime:function(){return s.AREA_STYLE_EFFECT_TIME},getStyle:function(t){return{fill:t.series.getFillFilter(t.color,t),"fill-opacity":t.opacity,stroke:t.borderColor,"stroke-opacity":t.borderOpacity,"stroke-width":t.borderWidth}},getHighLightStyle:function(t){return{fill:t.series.getFillFilter(t.mouseOverColor||t.color,t),"fill-opacity":t.opacity,stroke:t.borderColor||t.mouseOverColor||t.color,"stroke-width":t.borderWidth,"stroke-opacity":t.borderOpacity}},getPressedStyle:function(t){return{fill:t.series.getFillFilter(t.clickColor,t),"fill-opacity":t.clickOpacity,stroke:t.borderColor||t.mouseOverColor||t.color,"stroke-width":t.borderWidth,"stroke-opacity":t.borderOpacity}},getInitShowTime:function(){return c},getReAppearTime:function(){return c},getDropTime:function(){return c},getAttrs:function(t){var e=d3.svg.arc().innerRadius(t.innerRadius);return{d:e(this._getArcData(t))}},getPointGraphicKey:function(){return"path"},_getPositionInPie:function(t){var e=t[0]-this.chartInfo.centerX,i=t[1]-this.chartInfo.centerY;return[e,i]},_rotateLabels:function(){var t=this,e=t.vanchart;e.renderer,this.textLabelGroup;t.points.forEach(function(e){e.textGraphic&&!e.labelPos?(e.textGraphic.remove(),e.leadLine&&e.leadLine.remove(),e.textGraphic=null,e.leadLine=null):e.textGraphic&&e.labelPos?(e.textGraphic.attr("transform",i.makeTranslate(e.labelPos)),e.labelPos.startPos&&(e.leadLine?e.leadLine.attr("d",t._getLeadLinePath(e)):e.leadLine=t._getLeadLine(e))):!e.textGraphic&&e.labelPos&&t._createTextGraphic(e)})},_calculateAnimationDelay:function(){for(var t=0,e=0,i=0,n=this.points.length;n>i;i++){var r=this.points[i];r.visible&&r.series.visible&&t++,r.graphic&&e++}return e==t?0:1},_createGroup:function(t,e){return t.group().addTo(e.seriesGroup)},updateAnimation:function(t,e,i){var n=e.series,r=(n.startAngle,n.endAngle,d3.svg.arc().innerRadius(n.chartInfo.innerRadius)),a=d,o=c;i||(a=f,o=p),d3.select(t).transition().ease(a).duration(o).attrTween("d",function(){var t=n._getArcData(e),i=this._current_||t,a=d3.interpolate(i,t);return this._current_=a(1),function(t){return r(a(t))}})},createAnimation:function(t,e){var i=e.series,n=i.startAngle,r=(i.endAngle,d3.svg.arc().innerRadius(i.chartInfo.innerRadius));d3.select(t).transition().ease(d).duration(c).attrTween("d",function(){var t={startAngle:n,endAngle:n,outerRadius:e.outerRadius};if(!i.initialAnimationMoving){var a=i.getPreVisiblePoint(e);if("first"!=a&&a.lastShape){var o=Math.abs(a.lastShape.endAngle-a.endAngle),s=e.startAngle+o;t={startAngle:s,endAngle:s,outerRadius:e.outerRadius}}}var l=d3.interpolate(t,i._getArcData(e));return this._current_=l(1),function(t){return r(l(t))}})},dropAnimation:function(t,e){var i=e.series,n=i.startAngle,r=(i.endAngle,d3.svg.arc().innerRadius(i.chartInfo.innerRadius));d3.select(t).transition().ease(d).duration(c).attrTween("d",function(){var t=this._current_,a=i.getPreVisiblePoint(e),o=n;if("first"!=a&&a.lastShape){var s=Math.abs(a.lastShape.endAngle-a.endAngle);o=e.startAngle+s}var l={startAngle:o,endAngle:o,outerRadius:t.outerRadius},h=d3.interpolate(t,l);return function(t){return r(h(t))}}).remove()},getPreVisiblePoint:function(t){for(var e=t.series.points,i="first",n=0,r=e.length;r>n;n++){if(e[n]==t)return i;e[n].visible&&(i=e[n])}return i},getFillFilter:function(t,r){if(r.style==e.STYLE_GRADUAL&&i.isSupportSVG()){var a=this,o=a.vanchart,s=o.renderer,l={cx:"0%",cy:"0%",r:Math.max(r.outerRadius,0)+"px",gradientUnits:"userSpaceOnUse"},h={offset:r.innerRadius/Math.max(r.outerRadius,1)*100+"%","stop-color":n.getColorWithDivider(t,.8)},u={offset:"100%","stop-color":t};return r.colorGradient?s.updateColorGradient(r.colorGradient,l,[h,u]):r.colorGradient=s.colorGradient(l,[h,u],"radialGradient"),"url(#"+i.stamp(r.colorGradient)+")"}return t},onPanStart:function(t){this.rotatable&&(this.initPos=t.containerPoint,this.initRotate=i.toDegree(this.chartInfo.rotate))},onPanMove:function(t){if(this.rotatable){var e=this._getAngle(this._getPositionInPie(this.initPos),[0,0]),n=this._getAngle(this._getPositionInPie(t.containerPoint),[0,0]),r=n-e+this.initRotate;this.pathGroup.attr("transform","rotate("+r+")"),this.chartInfo.rotate=i.toRadian(r),this._calculateLabelPosWhenRadiusFixed(),this._rotateLabels()}},onPointMouseOver:function(){var t=this;t.series._onState.call(t,!0)},onPointMouseOut:function(){var t=this;t.series._onState.call(t,!1)},_onState:function(t){var i=this,n=i.series,r=n.animation,a=d3.svg.arc().innerRadius(i.innerRadius),o=t?n.getHighLightStyle(i):n.getStyle(i),s=i.outerRadius*h,l=i.outerRadius;t&&(s=i.outerRadius,l=i.outerRadius*h);var u=d3.interpolate(s,l),c={startAngle:i.startAngle,endAngle:i.endAngle};r?d3.select(i.graphic.style(o).rawElement).interrupt(e.SELECT_ANIMATION).transition(e.SELECT_ANIMATION).ease("elastic").duration(800).attrTween("d",function(){return function(t){return a.outerRadius(u(t))(c)}}):i.graphic.style(o).attr("d",a.outerRadius(l)(c))},_getPointGraphicGroup:function(){return this.pathGroup||(this.pathGroup=this.vanchart.renderer.group().addTo(this.group)),this.pathGroup},_isSeriesInteractive:function(){return!0},_getPointTextLabelGroup:function(){return this.textLabelGroup||(this.textLabelGroup=this.vanchart.renderer.vgroup().add(),this.group.append(this.textLabelGroup.renderG),this.textLabelGroup.divG.attr("transform",i.makeTranslate(this._getTranslate()))),this.textLabelGroup},onPanEnd:function(t){this.vanchart.handler.panTarget=null},getEvents:function(){return{panstart:this.onPanStart,panmove:this.onPanMove,panend:this.onPanEnd}},isSeriesAccumulated:function(){return!0}});return t("../ChartLibrary").register(e.PIE_CHART,g),g}),i("chart/Line",["require","../Constants","../utils/BaseUtils","../utils/QueryUtils","./Series","../utils/Class","../utils/BezierEasing","../utils/ColorUtils","../EffectHelper","../ChartLibrary","../ChartLibrary"],function(t){var e=t("../Constants"),i=t("../utils/BaseUtils"),n=t("../utils/QueryUtils"),r=t("./Series"),a=t("../utils/Class"),o=t("../utils/BezierEasing"),s=t("../utils/ColorUtils"),l=t("../EffectHelper"),h=2,u=800,c=250,d=.65,f="quad-in-out",p=o.css.swing,g=function(t){var e=t.indexFromLeft/t.series.points.length;return u*(.5>e?Math.sqrt(e/2):1-Math.sqrt(2-2*e)/2)},m=r.extend({type:e.LINE_CHART,_refresh:function(){var t=this._getQueryList();i.extend(this,{lineWidth:n.queryList(t,"lineWidth"),interpolate:this._getSeriesInterpolate(t),connectNulls:n.queryList(t,"connectNulls"),bands:n.queryList(t,"bands"),inverted:n.queryList(t,"inverted")})},doLayout:function(){var t=this,e=(t.vanchart,t.xAxis),i=t.yAxis,n=t.connectNulls,r=e.scale.rangeBand?e.scale.rangeBand()/2:0,a=t.inverted,o=a?"posY":"posX",s=i.getStartPosValue(),l=[];if(this.large){var h={},u={};t.points.forEach(function(t){var n=e.scale(e.getAxisValue(t.x,t))+r,a=i.scale(i.getAxisValue(t.y,t)+t.y0),o=i.scale(0===t.y0?s:t.y0);this.inverted?(t.posX=a,t.posY=n,t.posX0=o):(t.posX=n,t.posY=a,t.posY0=o),h[t.posX]&&u[t.posY]||(h[t.posX]=!0,u[t.posY]=!0,l.push(t))},this)}else l=t.points;var c=!0,d=[];l.forEach(function(t,l){if(this.large)h=t.posX,u=t.posY;else{var h=e.scale(e.getAxisValue(t.x,t))+r,u=i.scale(i.getAxisValue(t.y,t)+t.y0),f=i.scale(0===t.y0?s:0);this.inverted?(t.posX=u,t.posY=h,t.posX0=f):(t.posX=h,t.posY=u,t.posY0=f)}t.indexFromLeft=l,(!n||n&&!t.isNull)&&(d.length>0&&(c=c&&d[d.length-1][o]<=(a?u:h)),d.push(t))},this),t.y0=Number.MAX_VALUE,t.y=-Number.MAX_VALUE,l.forEach(function(e){Math.abs(e.y0)<Math.abs(t.y0)&&(t.y0=Math.abs(e.y0)),Math.abs(e.y+e.y0)>t.y&&(t.y=Math.abs(e.y+e.y0))}),c||(d.sort(function(t,e){return t[o]-e[o]}),d.forEach(function(t,e){t.indexFromLeft=e}));var f=d3.svg.line().interpolate(t.interpolate).x(function(t){return t.posX}).y(function(t){return t.posY}).defined(function(t){return!t.isNull}),p=d3.svg.area().interpolate(t.interpolate);p=this.inverted?p.y(function(t){return t.posY}).x0(function(e){var i=t._getPreviousStackingPoint(e);return i?i.posX:e.posX0}).x1(function(t){return t.posX}):p.x(function(t){return t.posX}).y0(function(e){var i=t._getPreviousStackingPoint(e);return i?i.posY:e.posY0}).y1(function(t){return t.posY}),p=p.defined(function(t){return!t.isNull}),this.linePath=f(d),this.areaPath=p(d),this.dataBands=this._calculateDataBands()},_getPreviousStackingPoint:function(t){if(i.hasDefined(t.series.stack))for(var e=t.points,n=0,r=e.length;r>n;n++){var a=e[n].series;if(a.stack==t.series.stack&&a.visible&&e[n+1]==t)return e[n]}},_calculateDataBands:function(){var t=this.vanchart.getPlotBounds(),e=this,i=this.bands||[],n=e.color,r=e.opacity,a=e.fillColor,o=e.fillColorOpacity,s=e.yAxis,l=s.scale.domain(),h=s.isHorizontal(),u=t.width,c=t.height,d=[];if(d.push({clipBounds:{x:0,y:0,width:u,height:c},color:n,fillColor:a,fillColorOpacity:o}),!i||!i.length)return d;for(var f=0,p=i.length;p>f;f++){var g=Math.max(l[0],i[f].from),m=Math.min(l[1],i[f].to);g=s.scale(g),m=s.scale(m);var v={x:0,y:Math.min(g,m),width:u,height:Math.abs(g-m)};h&&(v={x:Math.min(g,m),y:0,width:Math.abs(g-m),height:c}),d.push({clipBounds:v,color:i[f].color||n,opacity:i[f].opacity||r,fillColor:i[f].fillColor||a,fillColorOpacity:i[f].fillColorOpacity||o})}return d},_getFixedPos:function(t){var e=t.marker.radius||4.5,i=this.vanchart.getPlotBounds(),n=i.x+t.posX+e,r=i.y+t.posY+e;return[n,r]},_calculateLabelPos:function(t){var n=this,r=this.vanchart.isInverted(),a=(n.points.length,this.vanchart.getPlotBounds());n.points.forEach(function(o,s){var l=o.dataLabels;if(l&&l.enabled){var u,c,d,f=l.align==e.TOP,p=o.labelDim,g=h;o.marker&&o.marker.symbol&&(g+=o.marker.radius||4.5),r?(c=f?o.posX+g:o.posX-g-p.width,d=o.posY-p.height/2,0>=d?d=o.posY:d+p.height>=a.height&&(d=o.posY-p.height)):(c=o.posX-p.width/2,d=f?o.posY-g-p.height:o.posY+g,0>=c?c=o.posX:c+p.width>=a.width&&(c=o.posX-p.width)),u={x:c,y:d},l.autoAdjust&&(u=n._calculateAutoLabelPos(o,u,!r,t)),u&&(o.labelPos=u,t.addBounds(i.makeBounds(o.labelPos,o.labelDim)))}})},getTrendLineXYValues:function(t){return this._getNormalTrendLineXYValues(t)},getAttrs:function(t){return{transform:i.makeTranslate([t.posX,t.posY])}},_getMoreLabelDefaultCenter:function(t,e){return{centerX:t.posX+t.marker.radius/2,centerY:t.posY-e.height/2-t.marker.radius/2}},getStyle:function(){return{}},effectAnimation:function(t,e){l.markerEffectAnimation(e)},getDefaultEffectTime:function(){return l.MARKER_EFFECT_TIME},getHighLightStyle:function(){},getInitShowTime:function(){return u},getReAppearTime:function(){return c},getDropTime:function(){return c},getDataToDraw:function(){return this.points.filter(function(t){return t.marker&&t.marker.symbol})},getTextDataToDraw:function(){return this.points},_updatePointGraphicStyle:function(t){this._updateMarker(t)},updatePointGraphic:function(t){this._updateMarkerPointGraphic(t)},_createPointGraphic:function(t){return t.graphic=this._createMarker(t.marker)},onPointPress:function(){var t=this,e=t.series;e._onMarkerPressed(t)},onPointPressUp:function(){var t=this,e=t.series;e._updateMarker(t)},onPointMouseOver:function(){var t=this,e=t.series;e._onMarkerMouseOver(t)},onPointMouseOut:function(){var t=this,e=t.series;e._onMarkerMouseOut(t)},createAnimation:function(t,e){d3.select(t).attr("transform","translate("+e.posX+","+e.posY+") scale(0.01)").transition().delay(g(e)).duration(150).ease("ease-out-in").attr("transform","translate("+e.posX+","+e.posY+") scale(1.5)").transition().duration(150).ease("ease-out-in").attr("transform","translate("+e.posX+","+e.posY+") scale(1)")},updateAnimation:function(t,e){d3.select(t).transition().ease(p).duration(c).attr("transform","translate("+e.posX+","+e.posY+")")},dropAnimation:function(t){d3.select(t).remove()},getClosestPoint:function(t){var e,i=this.vanchart.isInverted(),n=i?"y":"x",r=i?"posY":"posX",a=Number.MAX_VALUE,o=this.vanchart.hoverSeries,s=this.vanchart.getPlotBounds(),l=s[n]-(i?t[1]:t[0]);return o.points.forEach(function(t){var i=Math.abs(t[r]+l);a>i&&!t.isNull&&(e=t,a=i)}),e},_onSeriesMouseOver:function(t){this.dataBandsGraphic.forEach(function(t){t._onSeriesMouseOver()}),i.toFront(this.group.node())},_onSeriesUnChosen:function(t){this.dataBandsGraphic.forEach(function(t){t._onSeriesUnChosen()}),this.defaultMarker&&this.defaultMarker.remove(),this.defaultMarker=null},_isSeriesInteractive:function(){return!0},drawSeries:function(){var t,e,i=this,n=this.vanchart,r=(n.renderer,this.dataBands);for(this.defaultMarker&&this.defaultMarker.remove(),this.defaultMarker=null,this.dataBandsGraphic=this.dataBandsGraphic||[],t=r.length,e=this.dataBandsGraphic.length;e>t;t++)this.dataBandsGraphic[t].remove(),this.dataBandsGraphic[t]=null;for(t=0,e=r.length;e>t;t++)this.dataBandsGraphic[t]?this.dataBandsGraphic[t].refresh(r[t]):this.dataBandsGraphic[t]=new v(r[t],i);this.dataBandsGraphic.length=r.length}}),v=a.extend({initialize:function(t,e){this.series=e,this.refresh(t)},refresh:function(t){this.options=t,this.render()},render:function(){var t=this.options,n=this.series,r=n.animation,a=n.group,o=n.vanchart,s=o.renderer,l=this._getLineStyle(n,t),h=this._getAreaStyle(n,t),d=i.isSupportSVG(),g=t.clipBounds,m=n.type==e.AREA_CHART,v=!this.linePath||this.removed;this.clipRect?s.updateClip(this.clipRect,g):this.clipRect=s.createClip({x:g.x,y:g.y,width:g.width,height:g.height}),n.visible?(this.removed=!1,this.linePath=this.linePath||s.path().attr("d",n.linePath),this.linePath.style(l).addTo(a),this.linePath.isLineChart=!0,d&&s.clip(this.linePath,this.clipRect),m&&(this.areaPath=this.areaPath||s.path().attr("d",n.areaPath),this.areaPath.style(h).addTo(a),this.areaPath.isLineChart=!0,d&&s.clip(this.areaPath,this.clipRect)),r?v?(this.linePath.attr("d",n.linePath),this.areaPath&&this.areaPath.attr("d",n.areaPath),d3.select(this.clipRect.rect.rawElement).attr(n.inverted?"height":"width",0).transition().ease(f).duration(u).attr("x",g.x).attr("y",g.y).attr("width",g.width).attr("height",g.height)):(d3.select(this.linePath.node()).transition().ease(p).duration(c).attr("d",n.linePath),this.areaPath&&d3.select(this.areaPath.node()).transition().ease(p).duration(c).attr("d",n.areaPath),d3.select(this.clipRect.rect.rawElement).transition().ease(p).duration(c).attr("x",g.x).attr("y",g.y).attr("width",g.width).attr("height",g.height)):(this.linePath.attr("d",n.linePath),this.areaPath&&this.areaPath.attr("d",n.areaPath))):(this.linePath&&this.linePath.remove(),this.areaPath&&this.areaPath.remove(),this.removed=!0)},_getAreaStyle:function(t,i){var n,r,a=t.vanchart.highlightTarget;return a?(n=i.fillColor,r=a==t.name?1:.3):(n=this._getFillFilter(i.fillColor,t),r=t.style==e.STYLE_GRADUAL?1:i.fillColorOpacity),{fill:n,"fill-opacity":r}},_getLineStyle:function(t,e){var i=e.opacity,n=t.vanchart.highlightTarget;return n&&(i=n==t.name?1:.3),{fill:"none",stroke:e.color,"stroke-width":t.lineWidth,"stroke-opacity":i}},_getFillFilter:function(t,n){if(i.isSupportSVG()){var r=n.vanchart,a=r.renderer;if(n.style==e.STYLE_GRADUAL){var o,s,l,h;o=s=l=h="0%";var u=Math.abs(n.y)/Math.abs(n.y-n.y0);n.inverted===!0?(o=100*(1-u)+"%",l="100%"):s=100*u+"%";var c={x1:o,y1:s,x2:l,y2:h},d={offset:"0%","stop-color":t+";stop-opacity:0"},f={offset:"100%","stop-color":t+";stop-opacity:0.8"};return this.colorGradient?a.updateColorGradient(this.colorGradient,c,[d,f]):this.colorGradient=a.colorGradient(c,[d,f]),"url(#"+i.stamp(this.colorGradient)+")"}}return t},_onSeriesMouseOver:function(){this.linePath.style({stroke:s.getHighLightColor(this.options.color),"stroke-width":this.series.lineWidth+1}),this.series.type==e.AREA_CHART&&this.areaPath.style({fill:s.getHighLightColor(this.options.fillColor),"fill-opacity":0===this.options.fillColorOpacity?0:d})},_onSeriesUnChosen:function(){this.linePath&&this.linePath.style(this._getLineStyle(this.series,this.options)),this.areaPath&&this.areaPath.style(this._getAreaStyle(this.series,this.options))},remove:function(){this.linePath&&this.linePath.remove(),this.areaPath&&this.areaPath.remove(),this.clipRect&&this.clipRect.remove(),this.linePath=this.areaPath=this.clipRect=null}});return t("../ChartLibrary").register(e.LINE_CHART,m),t("../ChartLibrary").register(e.AREA_CHART,m),m}),i("chart/ColumnRadar",["require","../EffectHelper"],function(t){var e=t("../EffectHelper"),i=500,n="back-out",r=500,a="exp-out",o=6,s=.35,l="radar-top",h="radar-bottom",u="radar-left",c="radar-right",d=8;return{columnType:!0,_calcLabelPos:function(t){var e=this.polar.angleAxis._getPolarPosition(t.category),i=this._getArcPoint(t.outerRadius-d,t.radian),n=t.labelDim;switch(e){case l:t.labelPos={x:-n.width/2,y:i[1]};break;case c:t.labelPos={x:i[0]-n.width,y:i[1]-n.height/2};break;case h:t.labelPos={x:-n.width/2,y:i[1]-n.height};break;case u:t.labelPos={x:i[0],y:i[1]-n.height/2}}},_getMoreLabelDefaultCenter:function(t,e){var i=this._getArcPoint(t.outerRadius/2,t.radian);return{centerX:i[0],centerY:i[1]}},effectAnimation:function(t,i){e.areaStyleEffectAnimation(t,i)},getDefaultEffectTime:function(){return e.AREA_STYLE_EFFECT_TIME},getAttrs:function(t){return{d:this._getRadarColumnPath(t.innerRadius,t.outerRadius,t.radian)}},getStyle:function(t){return{fill:t.color,"fill-opacity":t.opacity,stroke:t.borderColor,"stroke-width":t.borderWidth,"stroke-opacity":1}},getHighLightStyle:function(t){return{stroke:t.mouseOverColor||t.color,fill:t.color,"fill-opacity":1,"stroke-width":o,"stroke-opacity":s}},getPressedStyle:function(t){return{fill:t.clickColor,"fill-opacity":t.clickOpacity}},getPointGraphicKey:function(){return"path"},_getRadarColumnPath:function(t,e,i){var n=.375*this.polar.angleAxis.piece,r=i-n,a=i+n,o=d3.svg.arc().innerRadius(t).outerRadius(e).startAngle(r).endAngle(a);return o()},createAnimation:function(t,e){t._innerRadius_=e.innerRadius,t._outerRadius_=e.outerRadius;var r=this;d3.select(t).transition().duration(i).ease(n).attrTween("d",function(){var t=d3.interpolate(e.animateInitRadius,e.innerRadius),i=d3.interpolate(e.animateInitRadius,e.outerRadius);return function(n){return r._getRadarColumnPath(t(n),i(n),e.radian)}})},updateAnimation:function(t,e){var i=this;d3.select(t).transition().duration(r).ease(a).attrTween("d",function(){var n=d3.interpolate(t._innerRadius_,e.innerRadius),r=d3.interpolate(t._outerRadius_,e.outerRadius);return t._innerRadius_=e.innerRadius,t._outerRadius_=e.outerRadius,function(t){return i._getRadarColumnPath(n(t),r(t),e.radian)}})},dropAnimation:function(t,e){var i=this;d3.select(t).transition().duration(r).ease(a).attrTween("d",function(){var t=d3.interpolate(e.outerRadius,e.innerRadius);return function(n){return i._getRadarColumnPath(e.innerRadius,t(n),e.radian)}}).remove()},onPointMouseOver:function(){var t=this,e=t.series,i=e.animation,n=e.getHighLightStyle(t);i?d3.select(t.graphic.rawElement).transition().duration(100).ease("ease-out-in").style(n):t.graphic.style(n)},onPointMouseOut:function(){var t=this,e=t.series,i=e.animation,n=e.getStyle(t);i?d3.select(t.graphic.rawElement).transition().duration(100).ease("ease-out-in").style(n):t.graphic.style(n)},_getFixedPos:function(t,e){var i=t.radian,n=this.getCenter(),r=t.posX+n[0],a=t.posY+n[1];return i<Math.PI/2?a-=e.height:i>=Math.PI&&i<3*Math.PI/2?r-=e.width:i>=3*Math.PI/2&&i<2*Math.PI&&(a-=e.height,r-=e.width),[r,a]}}}),i("chart/LineRadar",["require","../utils/BaseUtils","../EffectHelper"],function(t){var e=t("../utils/BaseUtils"),i=t("../EffectHelper"),n=500,r="back-out",a=500,o="exp-out",s="radar-top",l="radar-bottom",h="radar-left",u="radar-right",c=8;return{columnType:!1,_calcLabelPos:function(t){var e=this.polar.angleAxis._getPolarPosition(t.category),i=this._getArcPoint(t.outerRadius+c,t.radian),n=t.labelDim;switch(e){case s:t.labelPos={x:-n.width/2,y:i[1]-n.height};break;case u:t.labelPos={x:i[0],y:i[1]-n.height/2};break;case l:t.labelPos={x:-n.width/2,y:i[1]};break;case h:t.labelPos={x:i[0]-n.width,y:i[1]-n.height/2}}},_getMoreLabelDefaultCenter:function(t,e){return{centerX:t.posX+t.marker.radius/2,centerY:t.posY-e.height/2-t.marker.radius/2}},_isSeriesInteractive:function(){return!0},drawSeries:function(){this.defaultMarker&&this.defaultMarker.remove(),this.defaultMarker=null;var t=this,e=t.vanchart,i=e.renderer,s=t.fillColor&&t.fillColorOpacity,l=this._getRadarPathStyle();this.radarPath=this.radarPath||i.path(),this.radarPath.style(l).addTo(t.group),t.visible?(this.removed&&(this.radarPath.node()._pathSegment_=null,this.radarPath.addTo(t.group),this.removed=!1),t.animation?d3.select(this.radarPath.node()).transition().duration(n).ease(r).attrTween("d",function(){var e=!!this._pathSegment_;if(e&&this._pathSegment_.length==t.pathSegment.length)for(var i=this._pathSegment_,n=0,r=i.length;r>n&&e;n++)i[n].length!=t.pathSegment[n].length&&(e=!1);var a=e?this._pathSegment_:t._getInitPathSegment(t.pathSegment),o=d3.interpolateArray(a,t.pathSegment);return this._pathSegment_=t.pathSegment,function(e){return t._getRadarSeriesPath(o(e),t.connectNulls,s)}}):this.radarPath.attr("d",t._getRadarSeriesPath(t.pathSegment,t.connectNulls,s))):(this.removed=!0,t.animation?d3.select(this.radarPath.node()).transition().duration(a).ease(o).attrTween("d",function(){
    var e=t._getInitPathSegment(t.pathSegment),i=d3.interpolateArray(t.pathSegment,e);return function(e){return t._getRadarSeriesPath(i(e),t.connectNulls,s)}}).remove():this.radarPath.remove())},_getRadarPathStyle:function(){var t=this,e=t.fillColor&&t.fillColorOpacity,i=t.fillColorOpacity,n=t.opacity,r=t.vanchart.highlightTarget;return r&&(i=r==t.name?1:.3,n=r==t.name?1:.3),{fill:e?t.fillColor:"none","fill-opacity":i,stroke:t.color,"stroke-width":t.lineWidth,"stroke-opacity":n}},getAttrs:function(t){return{transform:e.makeTranslate([t.posX,t.posY])}},getStyle:function(){return{}},effectAnimation:function(t,e){i.markerEffectAnimation(e)},getDefaultEffectTime:function(){return i.MARKER_EFFECT_TIME},_createPointGraphic:function(t){return t.graphic=this._createMarker(t.marker)},_updatePointGraphicStyle:function(t){this._updateMarker(t)},getDataToDraw:function(){return this.points.filter(function(t){return t.marker&&t.marker.symbol})},getTextDataToDraw:function(){return this.points},onPointPress:function(){var t=this,e=t.series;e._onMarkerPressed(t)},onPointPressUp:function(){var t=this,e=t.series;e._updateMarker(t)},onPointMouseOver:function(){var t=this,e=t.series;e._onMarkerMouseOver(t)},onPointMouseOut:function(){var t=this,e=t.series;e._onMarkerMouseOut(t)},createAnimation:function(t,e){d3.select(t).attr("transform","translate(0,0) scale(0.01)").transition().duration(n).ease(r).attr("transform","translate("+e.posX+","+e.posY+") scale(1)")},updateAnimation:function(t,e){d3.select(t).transition().ease(r).duration(n).attr("transform","translate("+e.posX+","+e.posY+") scale(1)")},dropAnimation:function(t){d3.select(t).remove()},_calculateLabelPos:function(){},_getFixedPos:function(t){var e,i,n=isNaN(t.marker.radius)?4.5:t.marker.radius,r=this.getCenter();return e=r[0]+t.posX+n,i=r[1]+t.posY+n,[e,i]},_onSeriesMouseOver:function(){var t=this;t.radarPath&&t.radarPath.style({"stroke-width":t.lineWidth+1}),e.toFront(t.group.node())},_onSeriesUnChosen:function(){var t=this;this.defaultMarker&&this.defaultMarker.remove(),this.defaultMarker=null,t.radarPath&&t.radarPath.style(t._getRadarPathStyle())},updatePointGraphic:function(t){this._updateMarkerPointGraphic(t)},getClosestPoint:function(t){var e,i=this.getCenter(),n=Number.MAX_VALUE;return this.points.forEach(function(r){var a=r.posX+i[0]-t[0],o=r.posY+i[1]-t[1],s=Math.sqrt(a*a+o*o);n>s&&!r.isNull&&(e=r,n=s)}),e}}}),i("chart/Radar",["require","./Series","../utils/BaseUtils","../Constants","../utils/QueryUtils","../utils/BoundsManager","./ColumnRadar","./LineRadar","../ChartLibrary"],function(t){var e=t("./Series"),i=t("../utils/BaseUtils"),n=t("../Constants"),r=t("../utils/QueryUtils"),a=(t("../utils/BoundsManager"),t("./ColumnRadar")),o=t("./LineRadar"),s=500,l=500,h=e.extend({_refresh:function(){var t=this._getQueryList(),e=r.queryList(t,"columnType"),n=i.pick(r.queryList(t,"connectNulls"),!0),s=r.queryList(t,"lineWidth")||0;i.extend(this,{marker:e?null:this.marker,lineWidth:s,columnType:e,connectNulls:n}),e!=this.columnType&&this.remove(),this.stack=this.columnType?"radar-column"+this.stack:this.stack,i.extend(this,e?a:o)},getInitShowTime:function(){return s},getReAppearTime:function(){return l},_getAxisTypes:function(){return["angleAxis","radiusAxis","polar"]},getBaseAxisType:function(){return"angleAxis"},_bindAxis:function(){var t=this,e=t.options,i=t.vanchart;t._getAxisTypes().forEach(function(n){if(i[n]){var r=i[n](e.polar);r&&(r.series.push(t),t[n]=r)}})},_getDefaultFillColorOpacity:function(){var t=this._getQueryList(),e=r.queryList(t,"columnType");return e?1:.15},_getTranslate:function(){return this.getCenter()},getCenter:function(){return this.polar&&this.polar.center},getRadius:function(){return this.polar&&this.polar.radius},doLayout:function(){var t=this,e=t.polar,i=e.radiusAxis,n=e.angleAxis,r=(this.getCenter(),this.getRadius(),n.piece),a=i.scale,o=n.scale;t.points.forEach(function(e){e.innerRadius=a(e.y0),e.outerRadius=a(e.getTargetValue()+e.y0),e.animateInitRadius=i.getStartPos(),e.radian=o(e.category)*r;var n=t._getArcPoint(e.outerRadius,e.radian);e.posX=n[0],e.posY=n[1],this._calcLabelPos(e)},this),t.pathSegment=t._getPathSegment(t.points,t.connectNulls)},_calculateLabelPos:function(){},getTargetKey:function(){return"y"},_createGroup:function(t,e){return t.group().addTo(e.seriesGroup)},additionalClip:function(t){this.vanchart.renderer.clip(t,this.polar.clip)},_getPathSegment:function(t,e){var i=this,n=i.polar,r=n.angleAxis,a=r.scale;t=[].concat(t),t.sort(function(t,e){return a(t.category)-a(e.category)});var o=[],s=[];if(e)o.push(s),t.forEach(function(t){t.isNull||s.push([t.posX,t.posY])});else{for(var l=0,h=t.length,u=h-1;u>0;u--){var c=t[u],d=t[u-1];!c.isNull&&d.isNull&&(l=u)}for(var u=0;h>u;u++){var f=t[(u+l)%h];f.isNull&&s.length?(s.length>1&&o.push(s),s=[]):f.isNull||s.push([f.posX,f.posY])}s.length&&o.push(s)}return o},_getRadarSeriesPath:function(t,e,n){var r="",a=[];if(1===t.length){a=t[0];var o=a.length==this.angleAxis.getCategoryCount()||e;n=!o&&n,r=n?"M0,0":"";for(var s=0,l=a.length;l>s;s++){var h=s||n?"L":"M";r+=h+i.dealFloatPrecision(a[s][0])+","+i.dealFloatPrecision(a[s][1])}r+=o||n?"Z":""}else t.forEach(function(t){r+=n?"M0,0":"",t.forEach(function(t,e){r+=(e||n?"L":"M")+i.dealFloatPrecision(t[0])+","+i.dealFloatPrecision(t[1])}),r+=n?"Z":""});return r},_getInitPathSegment:function(t){var e=[];return t.forEach(function(t){var i=[];e.push(i),t.forEach(function(){i.push([0,0])})}),e}});return t("../ChartLibrary").register(n.RADAR_CHART,h),h}),i("chart/TreeSeries",["require","./Series","../utils/BaseUtils","../utils/QueryUtils","../utils/ColorUtils","../Constants","./Point","../dom/Evented","../utils/Formatter"],function(t){function e(t){t.children&&t.children.forEach(function(t){e(t),t.remove()}),t.remove()}var i=t("./Series"),n=t("../utils/BaseUtils"),r=t("../utils/QueryUtils"),a=(t("../utils/ColorUtils"),t("../Constants")),o=t("./Point"),s=(t("../dom/Evented"),t("../utils/Formatter"),i.extend({refresh:function(t,e){this.options=t;var i=this.vanchart,o=t.type||i.options.chartType,s=n.pick(t.name,"Series"+o+e),l=this._getQueryList(o),h=n.pick(r.queryList(l,"visible"),!0);return n.extend(this,{type:o,name:s,className:"vancharts-series-"+e,visible:h,state:h?a.STATE_SHOW:a.STATE_DROPPED,animation:r.queryList(l,"animation")&&i.options.animation}),this._refresh(),this._initChildren(),this},_initChildren:function(){this.traverseInitData(this.visitBefore,null),this.points=this.root.children},_getPointKey:function(t){return t.name},getTargetKey:function(){return"value"},_getChildrenKey:function(){return"children"},traverseData:function(t,e,i){function n(a,s,l,h){a.children||(a.children=a.options[r._getChildrenKey()]);var u=a.children;if(a.parent=l,a.depth=s,a.height=0,a.ancestor=h,e&&e.call(r,a),u&&(c=u.length))for(var c,d=-1;++d<c;)u[d]instanceof o||(u[d]=new o(u[d],t.series)),0===s&&(h=u[d]),n(u[d],s+1,a,h),a.height=Math.max(a.height,u[d].visible?u[d].height+1:0);i&&i.call(r,a)}var r=this;n(t,0,null,null)},traverseInitData:function(t,i){function r(s,l,h,u,c){var d=l[a._getChildrenKey()];if(s.parent=u,s.depth=h,s.height=0,s.ancestor=c,s.seriesName=a.name,s.children=s.children||[],t&&t.call(a,s),n.hasDefined(d)){for(var f=[],p=0,g=d.length;g>p;p++){var m,v=!1;s.children.forEach(function(t){var e=a._getPointKey(t);n.hasDefined(e)&&e==a._getPointKey(d[p])&&(t._lastValue=t[a.getTargetKey()],t.refresh(d[p]),v=!0,m=t,f.push(t))}),v||(m=new o(d[p],a),f.push(m)),0===h&&(c=m),m.index=p,r(m,d[p],h+1,s,c),s.height=Math.max(s.height,m.visible?m.height+1:0)}for(var y=0,_=s.children.length;_>y;y++)-1==n.arrayIndexOf(f,s.children[y])&&e(s.children[y]);s.children=f}i&&i.call(a,s)}var a=this,s={children:this.options.data,name:this.name};this.root?this.root.refresh(s):this.root=new o(s,a),r(this.root,s,0,null,null)},visitBefore:function(t){1===t.depth&&(t.color=this.vanchart.getDefaultSeriesColor(t.name))},visitAfter:function(){},_calculatePercentage:function(t,e){var i=0;t.forEach(function(t){i+=Math.abs(t[e])}),i=i>0?i:1,t.forEach(function(t){t.percentage=Math.abs(t[e])/i})},_onPointMouseOver:function(t){var e=this,i=this.series,n=i.vanchart,r=n.hoverPoint;r&&r._onPointMouseOut(r,t),e.depth&&(i.onPointMouseOver.call(e,t),n.showTooltip(e,t),n.hoverPoint=e)},_onPointMouseOut:function(t){var e=this,i=this.series;i.onPointMouseOut.call(e,t),i.vanchart.hideTooltip()},_onPointTap:function(t){this._onPointTap(t)},pointEvents:function(){return{mouseover:this._onPointMouseOver,mousemove:this.onPointMouseMove,mouseout:this._onPointMouseOut,tap:this._onPointTap}},isSeriesAccumulated:function(){return!0},getLegendKey:function(t){for(var e=t.parent;e&&e.parent!=this.root;)e=e.parent;return e?e.name:""},isTreeSeries:function(){return!0}}));return s}),i("chart/TreeMap",["require","../Constants","../utils/BaseUtils","./TreeSeries","../utils/QueryUtils","../utils/ColorUtils","../utils/BoundsManager","./Point","../EffectHelper","../ChartLibrary"],function(t){var e=t("../Constants"),i=t("../utils/BaseUtils"),n=t("./TreeSeries"),r=t("../utils/QueryUtils"),a=t("../utils/ColorUtils"),o=(t("../utils/BoundsManager"),t("./Point"),t("../EffectHelper")),s=6,l=800,h="out-bounce",u=1e3,c=800,d=100,f=n.extend({nodes:[],root:null,zoomNow:null,sx:null,sy:null,zoom:null,_refresh:function(){this.sx=d3.scale.linear(),this.sy=d3.scale.linear();var t=this._getQueryList();this.zoom=r.queryList(t,"zoom")},visitBefore:function(t){this._setColor(t)},visitAfter:function(t){var e=t.children,i=t.options.value;if(i=isNaN(i)?0:i,t.chSum=i,e&&(n=e.length)){var n,r=0,a=-1;for(this._calculatePercentage(e,"value");++a<n;)r+=Math.abs(e[a].chSum);t.chSum=r}t.value=i||t.chSum||0,t.ancestor&&!t.ancestor.visible&&(t.value=0)},doLayout:function(){function t(t){t._dx=t.dx,t._dy=t.dy,t._x=t.x,t._y=t.y}this.traverseData(this.root,null,this.visitAfter);var e=this.vanchart.getPlotBounds();this.sx.range([0,e.width]).domain([0,e.width]),this.sy.range([0,e.height]).domain([0,e.height]);var i=d3.layout.treemap().value(function(t){return Math.abs(t.value)}).size([e.width,e.height]);this.nodes=i.nodes(this.root).filter(function(t){return!t.children&&t.depth}).map(function(i){return i.value=i.chSum,i.visible=i.ancestor.visible,i.visible&&this._setVanishPos(i,e),this.calculateLabelInfo(i),this._calculateLabelPos(i),t(i),i},this)},getDataToDraw:function(){return this.nodes},_setVanishPos:function(t,e){t.vanishPos=[Math.round((t.ancestor.x+t.ancestor.dx/2)/e.width)*e.width,Math.round((t.ancestor.y+t.ancestor.dy/2)/e.height)*e.height]},_setColor:function(t){1===t.depth&&(t.color=t.options.color||this.vanchart.getDefaultSeriesColor(t.name),t.mouseOverColor=t.options.mouseOverColor||a.getHighLightColor(t.color),t.clickColor=t.options.clickColor||a.getClickColor(t.color)),t.depth>1&&!t.options.children&&(t.options.color?t.color=t.options.color:t.color=t.ancestor.color,t.options.mouseOverColor?t.mouseOverColor=t.options.mouseOverColor:t.options.color?t.mouseOverColor=a.getHighLightColor(t.options.color):t.mouseOverColor=t.ancestor.mouseOverColor,t.options.clickColor?t.clickColor=t.options.clickColor:t.options.color?t.clickColor=a.getClickColor(t.options.color):t.clickColor=t.ancestor.clickColor);var e=a.getStandardColorAndOpacity(t.color,t.options.opacity);t.color=e.hex,t.opacity=e.alpha},_calculateLabelPos:function(t){var n=t.dataLabels;if(n&&n.enabled){switch(n.align){case e.CENTER:n._align=e.CENTER,t.labelPos={x:t.x+(t.dx-t.labelDim.width)/2,y:t.y+(t.dy-t.labelDim.height)/2};break;case e.TOP:default:n._align=e.LEFT,t.labelPos={x:t.x+s,y:t.y+s}}var r={x:t.x,y:t.y,width:t.dx,height:t.dy},a={x:t.labelPos.x,y:t.labelPos.y,width:t.labelDim.width,height:t.labelDim.height};i.containsRect(r,a)||(t.labelPos=null)}},calculateTooltipContent:function(t){var e=t.tooltip;if(e&&e.enabled&&e.formatter){var n=e.formatter;if("object"==typeof n){var r=e.style,a=n.identifier,o="";if(e.shared){if(-1!=a.indexOf("NAME")){for(var s,l=t,h=[t.name];(s=l.parent)&&s.depth;)l=s,h.unshift(s.name);o+=(r?"<span>":i.TOOLTIP_CATEGORY_STYLE)+h.join(" / ")+"</span><br>"}o+=this._createSeriesLine(t,a,r,n)}else o+=this._createCategoryLine(t,a,r,n),o+=this._createSeriesLine(t,a,r,n)}else o=i.getFormatterFunction(n).call(t);return o}return null},_getMoreLabelDefaultCenter:function(t,e){return{centerX:t.x+t.dx/2,centerY:t.y+t.dy/2}},effectAnimation:function(t,e){o.areaStyleEffectAnimation(t,e,e.x+e.dx/2,e.y+e.dy/2)},getDefaultEffectTime:function(){return o.AREA_STYLE_EFFECT_TIME},getStyle:function(t){return{fill:t.color,"fill-opacity":t.opacity,stroke:t.borderColor,"stroke-opacity":t.borderOpacity,"stroke-width":t.borderWidth}},getAttrs:function(t){return{x:-t.dx/2,y:-t.dy/2,width:t.dx,height:t.dy,transform:"translate("+(t.x+t.dx/2)+","+(t.y+t.dy/2)+")"}},getPointGraphicKey:function(){return"rect"},_getFixedPos:function(t){var e=this.vanchart.getPlotBounds(),i=e.x+t.x+t.dx,n=e.y+t.y;return[i,n]},zoomTo:function(t){t=this.zoomNow==t.parent?this.root:t.parent;var e=this.sx.domain([t.x,t.x+t.dx]),i=this.sy.domain([t.y,t.y+t.dy]),n=this.vanchart.getPlotBounds(),r=n.width/t.dx,a=n.height/t.dy;this.nodes.map(function(t){t.dx=r*t._dx,t.dy=a*t._dy,t.x=e(t._x),t.y=i(t._y),this._calculateLabelPos(t)},this),this.render(),this.zoomNow=t},getChartNodes:function(){return this.nodes},getZoom:function(){return this.zoom},_getPointGraphicGroup:function(){return this.pathGroup||(this.pathGroup=this.group.append(this.vanchart.renderer.group())),this.pathGroup},initialAnimation:function(){var t=this,e=this._getPointGraphicGroup().node(),i=this.vanchart.getPlotBounds(),n=i.width/2,r=i.height/2;d3.select(e).transition().duration(l).ease(h).attrTween("transform",function(){var t=d3.interpolate(0,1);return function(e){var i=t(e);return"matrix("+i+",0,0,"+i+","+(n-i*n)+","+(r-i*r)+")"}}).each("end",function(){t.initialAnimationMoving=!1})},updateAnimation:function(t,e,i){e.visible?d3.select(t).transition().duration(this.initialAnimationMoving?0:u).attr("x",-e.dx/2).attr("y",-e.dy/2).attr("width",e.dx).attr("height",e.dy).attr("transform","translate("+(e.x+e.dx/2)+","+(e.y+e.dy/2)+")"):this.dropAnimation(t,e,i)},createAnimation:function(t,e,i){this.initialAnimationMoving&&this.initialAnimation(),d3.select(t).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("transform","translate("+e.vanishPos[0]+","+e.vanishPos[1]+")"),this.updateAnimation(t,e,i)},dropAnimation:function(t,e,i){d3.select(t).transition().duration(c).attr("width",0).attr("height",0).attr("transform","translate("+e.vanishPos[0]+","+e.vanishPos[1]+")").remove()},onPointMouseOver:function(t){var e=this;e.series._onState.call(e,!0)},onPointMouseOut:function(){var t=this;t.series._onState.call(t,!1)},_onState:function(t){var i=this,n=i.series,r=n.animation,a={"fill-opacity":t?1:i.opacity,fill:t?i.mouseOverColor:i.color};r?d3.select(i.graphic.style(a).rawElement).interrupt(e.SELECT_ANIMATION).transition(e.SELECT_ANIMATION).duration(d):i.graphic.style(a)},onPointTap:function(){this.series.getZoom()&&this.series.zoomTo(this)},_labelUseSeriesColor:function(){return!1},getInitShowTime:function(){return l},getReAppearTime:function(){return u}});t("../ChartLibrary").register(e.TREEMAP_CHART,f)}),i("chart/Bubble",["require","./Series","../utils/BaseUtils","../Constants","../utils/QueryUtils","../ComponentLibrary","../EffectHelper","../ChartLibrary"],function(t){var e=t("./Series"),i=t("../utils/BaseUtils"),n=t("../Constants"),r=t("../utils/QueryUtils"),a=t("../ComponentLibrary"),o=t("../EffectHelper"),s=500,l=500,h=300,u=300,c="rgb(138, 138, 138)",d=e.extend({_refresh:function(){var t=this._getQueryList();i.extend(this,{sizeBy:r.queryList(t,"sizeBy"),maxSize:r.queryList(t,"maxSize"),minSize:r.queryList(t,"minSize"),shadow:r.queryList(t,"shadow"),displayNegative:r.queryList(t,"displayNegative")})},_refreshPointColor:function(t,e){return this.vanchart.getComponent(a.RANGE_LEGEND_COMPONENT)?e:t.getTargetValue()<0&&t.displayNegative?c:t.getTargetValue()<0?null:e},doLayout:function(){this._calculateBubblePosition()},getTargetKey:function(){return"size"},isNullValue:function(t){return this.type==n.FORCE_BUBBLE_CHART?"-"==t.x||"-"==t.y:"-"==t.x||"-"==t.y||"-"==t.size||i.hasNotDefined(t.size)},_getPointKey:function(t){return this.vanchart.isMap()?t.name:""+t.x+t.y},getPointValue4MinMax:function(t){var e=t.getTargetValue();return 0>e&&!t.displayNegative?0:t.minSize||t.maxSize?0:e},pushNormalLabelContent:function(t,e,i,r,a){this.pushBubbleNormalLabelContent(t,e,i,r,a,n.INSIDE)},_labelUseSeriesColor:function(){return!1},calculateTooltipContent:function(t){return t.series.vanchart.isMap()?this._calculateTooltipContent(t):this._calculateBubbleTooltipContent(t)},_calculateLabelPos:function(){},_calculateBubbleRadius:function(){if(this.points.length>0){var t=Math.max(this.maxSize,this.minSize),e=Math.min(this.minSize,this.maxSize),r=this.sizeBy==n.SIZE_BY_AREA,a=this.seriesMaxValue,o=this.seriesMinValue;if(!this._sizeByCurrentSeries()){var s=this.vanchart.isMap()?this.vanchart.getMinMaxFromSeries():this._calculateBubbleChartMinMax();a=i.pick(s.max,s[1]),o=i.pick(s.min,s[0])}var l=0;o!=a&&(l=r?(t*t-e*e)/(a-o):(t-e)/(a-o));var h=i.pick(this.vanchart.scale,1),u=this.getTargetKey();this.points.forEach(function(t){var i=l*(Math.abs(t[u])-o),a=r?Math.sqrt(e*e+i):e+i;if(t.minSize||t.maxSize){var s=isNaN(t.minSize)?t.maxSize:t.minSize;a=t.sizeBy==n.SIZE_BY_AREA?2*Math.sqrt(s):s}a=t[u]<0&&!t.displayNegative?0:a,t.radius=a/2*h})}},_sizeByCurrentSeries:function(){return i.hasDefined(this.options.minSize)&&i.hasDefined(this.options.maxSize)},_calculateBubbleChartMinMax:function(){var t=this.vanchart.seriesOfType(this.type),e=Number.MAX_VALUE,i=-e;return t.forEach(function(t){t._sizeByCurrentSeries()||(e=Math.min(e,t.seriesMinValue),i=Math.max(i,t.seriesMaxValue))}),{min:e,max:i}},_calculateBubblePosition:function(){var t=this.vanchart.isInverted(),e=this.xAxis,i=this.yAxis;this.points.forEach(function(n){var r=e.scale.rangeBand?e.scale.rangeBand()/2:0,a=e.scale(n.x)+r,o=i.scale(n.y);n.posX=t?o:a,n.posY=t?a:o;var s=!(n.isNull||n.size<0&&!n.displayNegative);s&&n.dataLabels&&n.dataLabels.enabled&&(n.labelPos={x:n.posX-n.labelDim.width/2,y:n.posY-n.labelDim.height/2})})},getTrendLineXYValues:function(t){return this._getNormalTrendLineXYValues(t)},_getFixedPos:function(t){var e,i=this.vanchart,n=i.getPlotBounds(),r=t.radius||0;if("vanChartMap"==i.vanChartType){var o=i._leaflet,s=(i.getComponent(a.GEO_COMPONENT),t.getLatLng());s&&(e=o.latLngToContainerPoint(s))}else e={x:n.x+t.posX,y:n.y+t.posY};return e?(r=(r+1)/1.414,[e.x+r,e.y+r]):void 0},getInitShowTime:function(){return s+800},getReAppearTime:function(){return l},_getMoreLabelDefaultCenter:function(t,e){return{centerX:t.posX,centerY:t.posY}},getStyle:function(t){var e=t.series,n=e.vanchart,r=n.renderer;n.bubbleShadowFilter=n.bubbleShadowFilter||r.createDropShadowFilter(0,0,.2,2);var a={fill:t.color,"fill-opacity":t.opacity,stroke:t.color,"stroke-opacity":1,"stroke-width":0};return t.shadow&&!i.isMS&&(a.filter="url(#"+i.stamp(n.bubbleShadowFilter)+")"),a},getMapStyle:function(t){return{radius:t.radius,fill:!0,fillColor:t.color,fillOpacity:t.opacity,stroke:!0,weight:0,color:"none"}},getMapMouseOverStyle:function(t){return{fillColor:t.mouseOverColor,opacity:.35,color:t.mouseOverColor,weight:6,stroke:!0}},getAttrs:function(t){return{r:t.radius,transform:i.makeTranslate({x:t.posX,y:t.posY})}},getPointGraphicKey:function(){return"circle"},mapEffectAnimation:function(t,e){o.bubbleEffectAnimation(e,!0)},effectAnimation:function(t,e){o.bubbleEffectAnimation(e)},getDefaultEffectTime:function(){return o.MARKER_EFFECT_TIME},createAnimation:function(t,e){d3.select(t).attr("transform",i.makeTranslate({x:e.posX,y:e.posY})).attr("r",0).transition().delay(e.delayTime).ease("bounce").duration(this.state==n.STATE_TO_SHOW?u:s).attr("r",e.radius)},updateAnimation:function(t,e){d3.select(t).transition().duration(l).ease("back-out").attr("r",e.radius).attr("transform","translate("+e.posX+","+e.posY+")")},dropAnimation:function(t,e){d3.select(t).transition().duration(h).ease("back-in").attr("r",0).remove()},getHighLightStyle:function(t){return{stroke:t.mouseOverColor,"stroke-opacity":.35,fill:t.mouseOverColor,"fill-opacity":1,"stroke-width":6}},getPressedStyle:function(t){return{stroke:t.mouseOverColor,"stroke-opacity":.35,"stroke-width":6,fill:t.clickColor,"fill-opacity":t.clickOpacity}},onPointMouseOver:function(t){var e=this,i=e.series,r=i.animation,a=i.getHighLightStyle(e);i.vanchart.isLargeMode()||(r?d3.select(e.graphic.rawElement).interrupt(n.SELECT_ANIMATION).transition(n.SELECT_ANIMATION).duration(200).ease("back-out").style(a):e.graphic.style(a))},onPointMouseOut:function(t){var e=this,i=e.series,r=i.animation,a=i.getStyle(e);i.vanchart.isLargeMode()||(r?(d3.select(e.graphic.rawElement).interrupt(n.SELECT_ANIMATION).transition(n.SELECT_ANIMATION),d3.select(e.graphic.rawElement).style(a)):e.graphic.style(a))}});return t("../ChartLibrary").register(n.BUBBLE_CHART,d),d}),i("chart/ForceBubble",["require","./Bubble","../Constants","../utils/BaseUtils","../EffectHelper","../ChartLibrary"],function(t){var e=t("./Bubble"),i=t("../Constants"),n=t("../utils/BaseUtils"),r=t("../EffectHelper"),a=e.extend({_calculateBubblePosition:function(){},pushNormalLabelContent:function(t,e,i,n,r){return this._pushNormalLabelContent(t,e,i,n,r)},_getFixedPos:function(t){var e=t.radius||0,i=t.shadow,n=this.vanchart.getPlotBounds(),r=n.x+i.x+e,a=n.y+i.y+e;return[r,a]},calculateTooltipContent:function(t){return this._calculateTooltipContent(t)},_getAxisTypes:function(){return[]},getTargetKey:function(){return"y"},_getPointKey:function(t){return""+t.x},effectAnimation:function(t,e){r.forceBubbleEffectAnimation(e,e.shadow)},_getPointEffectGroup:function(t){var e=t.series,i=e.vanchart,n=i.renderer;return t.effectGraphic=t.effectGraphic||n.group().addTo(i.group).style("pointer-events","none")},getAttrs:function(t){return{r:t.radius,transform:n.makeTranslate({x:t.x,y:t.y})}},remove:function(){this.points.forEach(function(t){t.graphic&&(t.graphic.remove(),t.graphic=null)}),this.textGraphicGroup&&this.textGraphicGroup.remove(),this.group&&this.group.remove(),this.textGraphicGroup=this._canvas=this.group=null}});return t("../ChartLibrary").register(i.FORCE_BUBBLE_CHART,a),a}),i("chart/Scatter",["require","./Series","../utils/BaseUtils","../Constants","../utils/QueryUtils","../ComponentLibrary","../EffectHelper","../ChartLibrary"],function(t){var e=t("./Series"),i=t("../utils/BaseUtils"),n=t("../Constants"),r=t("../utils/QueryUtils"),a=t("../ComponentLibrary"),o=t("../EffectHelper"),s=300,l=500,h=2,u=e.extend({_refresh:function(t){i.isNullMarker(this.marker)&&(this.marker.symbol=i.getDefaultMarkerSymbol(t));var e=this._getQueryList();i.extend(this,{lineWidth:r.queryList(e,"lineWidth")||0,interpolate:this._getSeriesInterpolate(e)})},doLayout:function(){var t=this.vanchart.isInverted(),e=this.xAxis,i=this.yAxis;this.points.forEach(function(n){var r=e.scale.rangeBand?e.scale.rangeBand()/2:0,a=e.scale(n.x)+r,o=i.scale(n.y);n.posX=t?o:a,n.posY=t?a:o,n.dataLabels&&n.dataLabels.enabled&&(n.labelPos={x:n.posX-n.labelDim.width/2,y:n.posY-n.marker.radius-h-n.labelDim.height})});var n=this,r=d3.svg.line().interpolate(n.interpolate).x(function(t){return t.posX}).y(function(t){return t.posY}).defined(function(t){return!t.isNull});this.points.sort(function(t,e){return t.x-e.x}),this.linePath=r(this.points)},getTargetKey:function(){return"size"},isNullValue:function(t){return"vanChartMap"==t.series.vanchart.vanChartType?"-"==t.size||i.hasNotDefined(t.size):"-"==t.x||"-"==t.y||i.hasNotDefined(t.y)},pushNormalLabelContent:function(t,e,i,r,a){this.pushBubbleNormalLabelContent(t,e,i,r,a,n.OUTSIDE)},calculateTooltipContent:function(t){return t.series.vanchart.isMap()?this._calculateTooltipContent(t):this._calculateBubbleTooltipContent(t)},_labelUseSeriesColor:function(t){return!0},_calculateLabelPos:function(t){},getTrendLineXYValues:function(t){return this._getNormalTrendLineXYValues(t)},_getFixedPos:function(t){var e,i=this.vanchart,n=i.getPlotBounds(),r=t.marker&&t.marker.radius||0;if("vanChartMap"==i.vanChartType){var o=i._leaflet,s=(i.getComponent(a.GEO_COMPONENT),t.getLatLng());s&&(e=o.latLngToContainerPoint(s))}else e={x:n.x+t.posX,y:n.y+t.posY};return e?(r=(r+1)/1.414,[e.x+r,e.y+r]):void 0},getInitShowTime:function(){return s+800},getReAppearTime:function(){return l},_animateEnd:function(){this._showLabels(),this._drawEffectPoints();var t=this,e=t.group,i=t.vanchart,n=i.renderer;t.lineGraphic=t.lineGraphic||n.path({d:t.linePath}).addTo(e).style({fill:"none","pointer-events":"none","stroke-width":t.lineWidth,stroke:t.color})},_getMoreLabelDefaultCenter:function(t,e){return{centerX:t.posX+t.marker.radius/2,centerY:t.posY-e.height/2-t.marker.radius/2}},getStyle:function(t){return{}},mapEffectAnimation:function(t,e){o.markerEffectAnimation(e,!0)},effectAnimation:function(t,e){o.markerEffectAnimation(e)},getDefaultEffectTime:function(){return o.MARKER_EFFECT_TIME},getMapStyle:function(t){var e=this._isHollowMarker(t.marker.symbol),n=i.isImageMarker(t.marker.symbol);return n?{icon:L.icon({iconUrl:t.marker.symbol,iconSize:[t.marker.width,t.marker.height]})}:e?{fill:!1,stroke:!0,color:t.marker.fillColor,weight:2,opacity:t.opacity,markerType:t.marker.symbol,radius:t.marker.radius}:{fill:!0,stroke:!1,fillColor:t.marker.fillColor,fillOpacity:t.opacity,markerType:t.marker.symbol,radius:t.marker.radius}},getMapMouseOverStyle:function(t){var e=this._isHollowMarker(t.marker.symbol),n=i.isImageMarker(t.marker.symbol);return n?{}:e?{color:t.mouseOverColor,radius:t.marker.radius+2}:{fillColor:t.mouseOverColor,radius:t.marker.radius+2}},_getPointKey:function(t){return this.vanchart.isMap()?t.name:""+t.x+t.y},getAttrs:function(t){return{transform:i.makeTranslate({x:t.posX,y:t.posY})}},_updatePointGraphicStyle:function(t){this._updateMarker(t)},_createPointGraphic:function(t){return t.graphic=this._createMarker(t.marker)},createAnimation:function(t,e){d3.select(t).attr("transform","translate("+e.posX+","+e.posY+") scale(0.01)").transition().delay(e.delayTime).duration(s).ease("back-out").attr("transform","translate("+e.posX+","+e.posY+") scale(1)")},updateAnimation:function(t,e){d3.select(t).transition().duration(l).ease("back-out").attr("transform","translate("+e.posX+","+e.posY+") scale(1)")},dropAnimation:function(t,e){d3.select(t).transition().duration(s).ease("back-in").attr("transform","translate("+e.posX+","+e.posY+") scale(0)").remove()},drawSeries:function(){var t=this,e=t.animation;t.visible&&t.lineGraphic&&(e?d3.select(t.lineGraphic.node()).transition().duration(l).ease("back-out").attr("d",t.linePath):t.lineGraphic.attr("d",t.linePath)),t.visible||t.lineGraphic&&t.lineGraphic.remove()},onPointMouseOver:function(t){var e=this,i=e.series;i.vanchart.isLargeMode()||i._onMarkerMouseOver(e)},onPointMouseOut:function(t){var e=this,i=e.series;i.vanchart.isLargeMode()||i._onMarkerMouseOut(e)}});return t("../ChartLibrary").register(n.SCATTER_CHART,u),u}),i("chart/MultiPie",["require","../Constants","../utils/BaseUtils","./TreeSeries","../utils/QueryUtils","../utils/ColorUtils","../utils/BoundsManager","./Point","../utils/BezierEasing","../EffectHelper","../ChartLibrary"],function(t){var e=t("../Constants"),i=t("../utils/BaseUtils"),n=t("./TreeSeries"),r=t("../utils/QueryUtils"),a=t("../utils/ColorUtils"),o=(t("../utils/BoundsManager"),t("./Point"),t("../utils/BezierEasing")),s=t("../EffectHelper"),l=2/3,h=15,u=5,c=2*Math.PI,d=1e-10,f=1e3,p=300,g=400,m="bounce",v=o.css.swing,y=o.css.swing,_=n.extend({nodes:[],root:null,ordered:null,drilldownNow:null,center:[],innerRadius:null,radius:null,startAngle:null,endAngle:null,drilldown:null,rotatable:null,chartInfo:{},arc:d3.svg.arc().startAngle(function(t){return t.x}).endAngle(function(t){return t.x+t.dx}).innerRadius(function(t){return t.y}).outerRadius(function(t){return t.y+t.dy}),_refresh:function(){this.chartInfo={rotate:0},this.sx=d3.scale.linear(),this.sy=d3.scale.linear();var t=this._getQueryList(),e=r.queryList(t,"center"),n=r.queryList(t,"innerRadius"),a=r.queryList(t,"radius"),o=r.queryList(t,"gradual"),s=r.queryList(t,"drilldown"),l=r.queryList(t,"startAngle"),h=r.queryList(t,"endAngle"),u=r.queryList(t,"rotatable")&&i.isSupportSVG();l>h?l-=360:l==h&&(h=l+360),l=i.toRadian(l),h=i.toRadian(h),i.extend(this,{center:e,innerRadius:n,radius:a,gradual:o,drilldown:s,startAngle:l,endAngle:h,rotatable:u},!0)},visitAfter:function(t){var e=t.children,i=t.options.value;if(i=isNaN(i)?0:i,t.chSum=i,e&&(n=e.length)){var n,r=0,a=-1;for(this._calculatePercentage(e,"value");++a<n;)r+=Math.abs(e[a].chSum);var o=this.orderType;e.sort(function(t,e){return o&&null!=t.value&&null!=e.value?o*(Math.abs(t.value)-Math.abs(e.value)):t.index-e.index}),t.chSum=Math.max(r,Math.abs(i||0))}t.value=i||t.chSum||0,t.visible||(t.value=0,t.chSum=0)},_visitBefore:function(t){t.isNull=!1,t.depth&&(1===t.depth?t.points=[t]:(t.points=t.parent.points.slice(),t.points.push(t)))},doLayout:function(){var t,e,i=this,n=[],r=this.vanchart.getPlotBounds();i.center&&0!==i.center.length?(n[0]=this._getPercentValue(i.center[0],this.vanchart.width),n[1]=this._getPercentValue(i.center[1],this.vanchart.height)):n=[r.width/2+r.x,r.height/2+r.y],e={x:r.x,y:r.y,width:r.width,height:r.height},t=i.radius||Math.min(n[0]-e.x,e.x+e.width-n[0],n[1]-e.y,e.y+e.height-n[1]),i.chartInfo.innerRadius=i.innerRadius,i.chartInfo.radius=t,i.chartInfo.center=n,i.chartInfo.bounds=e,this.traverseData(this.root,this._visitBefore,this.visitAfter),this._initData(i)},_initData:function(t){t.nodes=t._bfsTraverseData(t.root);var i=t.graphics;if(i&&i.length===t.nodes.length&&t.nodes.map(function(t,e){t.graphic=i[e]}),t.radius)t._calcData(t.root),t._calculateLabelPos();else{t._calcData(t.root);var n=t.nodes.filter(function(t){return t.depth&&t.dx&&t.dataLabels&&t.dataLabels.enabled&&t.dataLabels.align===e.OUTSIDE}),r=t.chartInfo;r.radius=t.calcOutsideLabel(n,r.bounds,r.center),t._calcData(t.root),t._calculateLabelPos()}t.sx=this.sx.range([this.startAngle,this.endAngle]).domain([this.startAngle,this.endAngle]),t.sy=this.sy.range([0,this.innerRadius,this.radius]).domain([0,this.innerRadius,this.radius])},getDataToDraw:function(){return this.nodes},orderData:function(t){this.orderType=t===!0?1:t===!1?-1:null},_bfsTraverseData:function(t){var e=[],i=[];for(e.push(t);n=e.shift();){var n;i.push(n);var r=n.children;if(r&&(a=r.length))for(var a,o=-1;++o<a;)e.push(r[o])}return i},_calcData:function(t){function n(t,a,o,l,h,u,d){var f=t.children;if(t.x=a,t.y=(t.depth-2)*h+u+d,t.dx=o,t.hdx=l,t.dy=h,t.depth?(1!==t.depth||u||(t.y=0,t.dy=d),t.dataLabels&&t.dataLabels.enabled&&(t.dataLabels._align||t.dataLabels.align!==e.OUTSIDE||(t.dataLabels=i.clone(t.dataLabels),t.dataLabels._align=t.dataLabels._align||t.dataLabels.align),t.dataLabels._align===e.OUTSIDE&&(t.depth===s?t.dataLabels.align=e.OUTSIDE:t.dataLabels.align=e.INSIDE)),r._setColor(t,c,s),r.calculateLabelInfo(t)):(t.y=-1,t.dy=u+1),t._x=t.x,t._dx=t.dx,t._hdx=t.hdx,t._y=t.y,t._dy=t.dy,f&&(p=f.length)){var p,g,m,v,y=-1;for(o=t.value?o/Math.abs(t.value):0,l=t.chSum?l/Math.abs(t.chSum):0;++y<p;)g=f[y],m=Math.abs(g.value)*o,v=Math.abs(g.chSum)*l,n(g,a,m,v,h,u,d),a+=v}}var r=this;r.radius=r.chartInfo.radius,r.center=r.chartInfo.center,r.radius&&r.chartInfo.innerRadius&&(r.innerRadius=this._getPercentValue(r.chartInfo.innerRadius,r.radius));var a,o,s=t.height,h=r.radius,u=r.innerRadius,c=r.gradual,d=r.startAngle,f=r.endAngle,p=f-d;u?(a=s?(h-u)/s:0,o=a):(a=s>1?h*(1-l)/(s-1):0,o=s>1?h*l:h),n(t,d,p,p,a,u,o)},_setColor:function(t,i,n){if(t&&i&&n){if(t.options.color)t.color=t.options.color;else{var r,o,s=a.getRGBAColorArray(t.ancestor.color),l=a.rgb2hsb(s[0],s[1],s[2]),h=(t.depth-1)/n;i===e.GRADUAL_LIGHTER?(r=-l[1]*h,o=(1-l[2])*h):(r=(1-l[1])*h,o=-l[2]*h),t.color=a.mixColorWithHSB(t.ancestor.color,0,r,o)}if(t.options.mouseOverColor)t.mouseOverColor=t.options.mouseOverColor;else{var r,o;i===e.GRADUAL_LIGHTER?(r=.1,o=-.05):(r=-.1,o=.05),t.mouseOverColor=a.mixColorWithHSB(t.tooltip&&t.tooltip.enabled&&t.tooltip.shared?t.ancestor.color:t.color,0,r,o);
}var u=a.getStandardColorAndOpacity(t.color,t.options.opacity);t.color=u.hex,t.opacity=u.alpha}},_calculateLabelPos:function(){var t=this,i=[],n=[];t.nodes.map(function(r){r.labelPos=null,r.dx<d||r.name&&r.depth&&r.dx&&r.dy&&(t.drilldownNow?r!==t.drilldownNow.parent:!0)&&r.dataLabels&&r.dataLabels.enabled&&(r.dataLabels.align===e.OUTSIDE?i.push(r):n.push(r))},t);var r=t.chartInfo;t.calcOutsideLabel(i,r.bounds,r.center,r.radius),t.calculateLeadLineStartPos(i),t.calculateInsideLabelBounds(n)},_getInnerRadius:function(t){return t.y},_getOuterRadius:function(t){return t.y+t.dy},_getStartAngle:function(t){return t.x},_getEndAngle:function(t){return t.x+t.dx},_getFixedPos:function(t,e){var i=this.center[0],n=this.center[1],r=this.getCenterAngle(t),a=t.y+t.dy,o=a*Math.sin(r)+i,s=a*Math.cos(r+Math.PI)+n;return r<Math.PI/2?s-=e.height:r>=Math.PI&&r<3*Math.PI/2?o-=e.width:r>=3*Math.PI/2&&c>r&&(s-=e.height,o-=e.width),[o,s]},drillDown:function(t){function i(t){var e=t.children,n=t;if(e&&(r=e.length))for(var r,a=-1;++a<r;){var o=i(e[a]);o.depth>n.depth&&(n=o)}return n}if(this.drilldownNow!==t){for(var n,a=t;(n=a.parent)&&n.depth;)if(a=n,!n.name)return;this.drilldownNow=t;var o,s,l=this.radius,u=this.innerRadius;if(t.depth){var c=t.ancestor.parent.height;if(0===t.height)o=[t.parent._y,t._y,t._y+t._dy],s=[0,h,l];else if(t.height+t.depth!==c){var d=i(t);o=[t.parent._y,t._y,t._y+t._dy,d._y+d._dy,l],s=[0,h,l/2,l,l]}else o=[t.parent._y,t._y,t._y+t._dy,l],s=[0,h,l/2,l]}else o=[0,u,l],s=[0,u,l];var f=t.depth+t.height;this.sx.domain([t._x,t._x+t._dx]),this.sy.domain(o).range(s),this.nodes.map(function(t){t.depth&&t.dataLabels&&t.dataLabels.enabled&&t.dataLabels._align===e.OUTSIDE&&(t.depth===f?t.dataLabels.align=e.OUTSIDE:t.dataLabels.align=e.INSIDE,r.merge(t,this.calculateLabelInfo(t),!0)),t.x=this.safeAngle(t._x),t.dx=this.safeAngle(t._x+t._dx)-t.x,t.y=this.safeRadius(t._y),t.dy=this.safeRadius(t._y+t._dy)-t.y,t===this.drilldownNow.parent&&(t.dx=this.safeAngle(7))},this),this._calculateLabelPos(),this.drawDrillDown(t)}},safeAngle:function(t){return Math.max(this.startAngle,Math.min(this.endAngle,this.sx(t)))},safeRadius:function(t){return Math.max(0,this.sy(t))},_getTranslate:function(){return this.center},_getMoreLabelDefaultCenter:function(t,e){var i=t.rotate||0,n=i+t.x+t.dx/2,r=t.y+t.dy/2,a=this._getArcPoint(r,n);return{centerX:a[0],centerY:a[1]}},effectAnimation:function(t,e){s.areaStyleEffectAnimation(t,e)},getDefaultEffectTime:function(){return s.AREA_STYLE_EFFECT_TIME},getStyle:function(t){return{display:t.name||!t.depth?"":"none",fill:t.color,"fill-opacity":t.depth?t.opacity:0,stroke:t.borderColor,"stroke-opacity":t.borderOpacity,"stroke-width":t.borderWidth}},getAttrs:function(t){return{d:this.arc(t)}},getPointGraphicKey:function(){return"path"},getChartNodes:function(){return this.nodes},getCenter:function(){return this.center},getInnerRadius:function(){return this.innerRadius},getRadius:function(){return this.radius},getStartAngle:function(){return this.startAngle},getEndAngle:function(){return this.endAngle},getDrilldown:function(){return this.drilldown},getRotatable:function(){return this.rotatable},getIsChanged:function(){return this.isChanged},_getPositionInPie:function(t){var e=t[0]-this.center[0],i=t[1]-this.center[1];return[e,i]},_getPointGraphicGroup:function(){return this.wrapGroup||(this.wrapGroup=this.group.append(this.vanchart.renderer.group()),this.pathGroup=this.wrapGroup.append(this.vanchart.renderer.group()),this.drawRing()),this.pathGroup},_isSeriesInteractive:function(){return!0},_getPointTextLabelGroup:function(){return this.textLabelGroup||(this.textLabelGroup=this.group.append(this.vanchart.renderer.group())),this.textLabelGroup},getAnimationTime:function(){return f},drawRing:function(){this.ringPath||(this.ringPath=this.group.append(this.vanchart.renderer.path()),this.ringPath.attr({d:d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(h).outerRadius(h+u)()}).style({display:"none",fill:"rgba(0,0,0,0.1)","pointer-events":"none"}))},drawDrillDown:function(t){var e=this,n=e.animation;e._removeDataLabels();var r=e.arc;if(n){var a=0;e.nodes.filter(function(t){return t.graphic}).map(function(i){i.graphic.animate(e,function(i,n){d3.select(i).transition().each(function(){++a}).duration(f).style("fill",function(){return n.color}).attrTween("d",function(){var t=this,e=d3.interpolate({x:t.x1,y:t.y1,dx:t.dx1,dy:t.dy1},n);return function(i){var n=e(i);return t.x1=n.x,t.y1=n.y,t.dx1=n.dx,t.dy1=n.dy,r(n)}}).attrTween("opacity",function(){var t=this;return function(e){return n.depth&&t.y1+t.dy1>=h?1:0}}).each("end",function(){d3.select(this).attr("opacity",n.depth&&n.dx&&n.y+n.dy>h?1:0),--a||e._animateEnd(t)})},i)}),t.depth?d3.select(e.ringPath.node()).transition().delay(f).style("display",""):d3.select(e.ringPath.node()).transition().style("display","none")}else e.nodes.map(function(t){t.graphic.attr({d:r(t),opacity:t.depth&&t.dx&&t.y+t.dy>h?1:0})}),e._animateEnd(t),i.isSupportSVG()||e.root.graphic.style({fill:"rgba(0,0,0,0)"}),e.ringPath.style("display",t.depth?"":"none")},_animateEnd:function(t){this.ordered=this.orderType,this._showLabels(),this.ringPath.style("display",t&&t.depth?"":"none"),this._drawEffectPoints()},updateGraphics:function(){var t=this.vanchart.renderer;this.graphics=this.nodes.map(function(e){return e.graphic&&t.registerInteractiveTarget(e,e.graphic),e.graphic})},initialAnimation:function(){var t=this;d3.select(this.wrapGroup.node()).transition().duration(550).ease("linear").attrTween("transform",function(){var t=d3.interpolate(-180,0);return function(e){var i=t(e);return"rotate("+i+")"}}),d3.select(this.pathGroup.node()).transition().duration(400).ease("linear").attrTween("transform",function(){var t=d3.interpolate(0,.9);return function(e){var i=t(e);return"scale("+i+")"}}).transition().duration(1e3).ease("elastic",1.1,.3).attrTween("transform",function(){var t=d3.interpolate(.9,1);return function(e){var i=t(e);return"scale("+i+")"}}).each("end",function(){t.initialAnimationMoving=!1})},updateAnimation:function(t,e,i,n){var r=this.arc,a=this.ordered!==this.orderType,o=a?y:m,s=a?g:f;e.graphic.attr("opacity",e.depth?1:0),d3.select(t).transition().ease(o).duration(s).attrTween("d",function(){var t=this,i=d3.interpolate({x:t.x1,y:t.y1,dx:t.dx1,dy:t.dy1},e);return function(e){var n=i(e);return t.x1=n.x,t.y1=n.y,t.dx1=n.dx,t.dy1=n.dy,r(n)}}).each("end",n)},createAnimation:function(t,e,i){function n(){t.x1=a.x,t.y1=a.y,t.dx1=a.dx,t.dy1=a.dy}var r,a;this.initialAnimationMoving?(this.initialAnimation(),a=e):a={x:e.x,y:e.y,dx:0,dy:e.dy},r=this.arc(a),e.graphic.attr("d",r).attr("opacity",e.depth?1:0),d3.select(t).each(n),this.initialAnimationMoving||this.updateAnimation(t,e)},dropAnimation:function(t,e,i){this.updateAnimation(t,e,i,function(){d3.select(t).remove()})},onPointMouseOver:function(){this.series._onState.call(this,!0)},onPointMouseOut:function(){this.series._onState.call(this,!1)},_onState:function(t){var e=this;if(e.tooltip&&e.tooltip.shared)for(var i,n=e;(i=n.parent)&&i.depth&&i.y+i.dy!==h;)n=i,i.series._onSingleState.call(i,t);e.series._onSingleState.call(e,t)},_onSingleState:function(t){var n=this,r=n.series,a=r.animation,o=n.graphic.rawElement,s={},l={};n.depth&&o.y1+o.dy1===h?l={opacity:t?1:0}:s={"fill-opacity":t?1:n.opacity,fill:t?n.mouseOverColor:n.color},a?(n.graphic.style(s),d3.select(o).interrupt(e.SELECT_ANIMATION).transition(e.SELECT_ANIMATION).duration(p).ease(v).attr(l)):(n.graphic.attr(l).style(s),n.depth||i.isSupportSVG()||n.graphic.style("fill","rgba(0,0,0,0)"))},onPanStart:function(t){this.rotatable&&(this.initPos=t.containerPoint,this.initRotate=i.toDegree(this.chartInfo.rotate))},onPanMove:function(t){if(this.rotatable){var e=this._getAngle(this._getPositionInPie(this.initPos),[0,0]),n=this._getAngle(this._getPositionInPie(t.containerPoint),[0,0]),r=n-e+this.initRotate;this.pathGroup.attr("transform","rotate("+r+")"),this.chartInfo.rotate=i.toRadian(r),this._calculateLabelPos(),this._rotateLabels()}},onPointTap:function(){this.series.getDrilldown()&&this.series.drillDown(this)},onPanEnd:function(t){this.vanchart.handler.panTarget=null},getEvents:function(){return{panstart:this.onPanStart,panmove:this.onPanMove,panend:this.onPanEnd}},_rotateLabels:function(){var t=this,e=t.vanchart;e.renderer,this.textLabelGroup;t.nodes.forEach(function(e){e.textGraphic&&!e.labelPos?(e.textGraphic.remove(),e.leadLine&&e.leadLine.remove(),e.textGraphic=null,e.leadLine=null):e.textGraphic&&e.labelPos?(e.textGraphic.attr("transform",i.makeTranslate(e.labelPos)),e.labelPos.startPos&&(e.leadLine?e.leadLine.attr("d",t._getLeadLinePath(e)):e.leadLine=t._getLeadLine(e))):!e.textGraphic&&e.labelPos&&t._createTextGraphic(e)})},getInitShowTime:function(){return f},getReAppearTime:function(){return g},isSupportLegendHighlight:function(){return!1}});t("../ChartLibrary").register(e.MULTIPIE_CHART,_)}),i("chart/PointerGauge",["require","../Constants","../utils/BaseUtils","../utils/ColorUtils","../utils/BoundsManager"],function(t){var e=t("../Constants"),i=t("../utils/BaseUtils"),n=t("../utils/ColorUtils"),r=t("../utils/BoundsManager"),a=150,o=90;return{gaugeType:e.POINTER_GAUGE,_doLayout:function(){this._dealSeriesLabel(),this._dealValueLabel(),"pointer"==this.style?this._fixPointerCenter():this._fixPointerSemiCenter()},_drawDiffMoreLabels:function(){var t=this,e=t.points,n=i.getTextHeight(t._getMoreLabelStyle()),r=n*e.length+n/2*(e.length-1),a=Math.max(0,(t.radius-r)/2),o="pointer"==t.style?a:-t.radius+a;e.forEach(function(e){t._showAndExitMoreLabel(e,0,o+n/2),o+=n+n/2})},getDataToDraw:function(){return this.points},_fixPointerCenter:function(){var t=this,i=t.gaugeRadius,n=t.center,r=t.seriesLabel.align||e.BOTTOM;if(n)t.centerX=n[0],t.centerY=n[1],t.radius=i;else{var a=t.bounds,o=20+t.seriesLabelDim.height,s=a.height-o,l=a.x+a.width/2,h=a.y+a.height/2;if(i=i||Math.min(a.width,s)/2-t.DEFAULT_PADDING,r==e.BOTTOM){if(h+i+o>a.y+a.height){var u=a.height-(2*i+o);u>=0&&(h=a.y+i+u/2)}}else if(h-i-o<a.y){var u=a.height-(2*i+o);u>=0&&(h=a.y+i+o+u/2)}t.centerX=l,t.centerY=h,t.radius=i}if(t.seriesLabelContent){var c=t.seriesLabelDim;t.seriesLabelPos={x:-c.width/2,y:r==e.BOTTOM?i+20:-i-20-c.height}}t.valueLabelContent&&this._dealValueLabelContent(t,i)},_fixPointerSemiCenter:function(){var t=this,i=t.gaugeRadius,n=t.seriesLabel.align;if(t.center)t.centerX=t.center[0],t.centerY=t.center[1],t.radius=i;else{var r=t.bounds,a=20+t.seriesLabelDim.height,o=r.height-a;i=i||Math.min(r.width/2,o/1.14)-t.DEFAULT_PADDING;var s=r.x+r.width/2,l=r.y+r.height/2+i/2;if(n==e.BOTTOM){if(l+.14*i+a>r.y+r.height){var h=r.height-(1.14*i+a);h>=0&&(l=r.y+i+h/2)}}else if(l-i-a<r.y){var h=r.height-(1.14*i+a);h>=0&&(l=r.y+i+a+h/2)}t.centerX=s,t.centerY=l,t.radius=i}if(t.seriesLabelContent){var u=t.seriesLabelDim;t.seriesLabelPos={x:-u.width/2,y:n==e.BOTTOM?.14*i+20:-i-20-u.height}}t.valueLabelContent&&this._dealSemiValueLabelContent(t,i)},_dealValueLabelContent:function(t,e){for(var n=t.gaugeAxis,r=n.options,a=n.scale.domain(),o=d3.scale.linear().domain(a).range([i.toRadian(-150),i.toRadian(150)]),s=i.getTextHeight(r.labelStyle),l=.16*e+s/2,h=t.valueLabel.style,u=t.valueLabel.useHtml,c=i.getTextHeight(h),d=this._getPointerTickBoundsManager(n,e,o,s),f=d.heightBoundsManager,p=d.widthBoundsManager,g=0,m=l,v=Number.MAX_VALUE,y=0,_=t.valueLabelContent.length;_>y;y++){var x=t.valueLabelContent[y],b=Math.min(-x.labelDim.width/2-c/4,v),T={x:b,y:m,width:2*Math.abs(b),height:l+c*(1+this.LINE_GAP)-m},A=x.labelContent,L=!1;if(!t._boundsInCircle(T))break;if(f.isOverlapped(T))break;for(;p.isOverlapped(T)&&A.length;){A=A.substr(0,Math.floor(.9*A.length));var C=i.getTextDimension(A+"...",h,u);b=Math.min(-C.width/2-c/4,v),T={x:b,y:m,width:2*Math.abs(b),height:l+c*(1+this.LINE_GAP)-m},L=!0}L&&(x.labelContent=A+"...",x.labelDim=i.getTextDimension(x.labelContent,h,u),b=Math.min(-x.labelDim.width/2-c/4,v)),x.labelPos={x:-x.labelDim.width/2,y:l+c/2},l+=c*(1+this.LINE_GAP),v=b,g++}t.valueLabelContent.length=g,t.valueLabelBackground={x:v,y:m,width:2*Math.abs(v),height:c*(1+this.LINE_GAP)*g+c}},_dealSemiValueLabelContent:function(t,e){for(var n=t.gaugeAxis,r=n.options,a=n.scale.domain(),o=d3.scale.linear().domain(a).range([i.toRadian(-90),i.toRadian(90)]),s=t.valueLabel.style,l=t.valueLabel.useHtml,h=i.getTextHeight(s),u=i.getTextHeight(r.labelStyle),c=-(.11*e+u/2)-h,d=this._getPointerTickBoundsManager(n,e,o,u),f=d.heightBoundsManager,p=d.widthBoundsManager,g=0,m=c,v=Number.MAX_VALUE,y=0,_=t.valueLabelContent.length;_>y;y++){var x=t.valueLabelContent[y];m-=h*(1+this.LINE_GAP);var b=Math.min(-x.labelDim.width/2-h/4,v),T={x:b,y:m,width:2*Math.abs(b),height:c-m},A=x.labelContent,L=!1;if(!t._boundsInCircle(T)){m+=h*(1+this.LINE_GAP);break}if(f.isOverlapped(T)){m+=h*(1+this.LINE_GAP);break}for(;p.isOverlapped(T)&&A.length;){A=A.substr(0,Math.floor(.9*A.length));var C=i.getTextDimension(A+"...",s,l);b=Math.min(-C.width/2-h/4,v),T={x:b,y:m,width:2*Math.abs(b),height:c-m},L=!0}L&&(x.labelContent=A+"...",x.labelDim=i.getTextDimension(x.labelContent,s,l),b=Math.min(-x.labelDim.width/2-h/4,v)),v=b,g++}t.valueLabelContent.length=g;for(var y=0;g>y;y++){var x=t.valueLabelContent[y];x.labelPos={x:-x.labelDim.width/2,y:m+h/2+y*h*(1+this.LINE_GAP)}}t.valueLabelBackground={x:v,y:m,width:2*Math.abs(v),height:h*(1+this.LINE_GAP)*g+h}},_boundsInCircle:function(t){for(var e=this.radius,i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y+t.height}],n=0;4>n;n++){var r=i[n],a=Math.abs(r.x),o=Math.abs(r.y);if(Math.pow(a*a+o*o,.5)>e)return!1}return!0},_getPointerTickBoundsManager:function(t,e,i,n){var a=new r,o=new r,s=.84*e,l=t.tickData,h=this,u=.5*n;l.forEach(function(t){var e=i(t.tickValue),n=h._getPointerTickCenter(t,s,i);h._addToBoundsManager(e,{x:n.x-t.tickDim.width/2-u,y:n.y-t.tickDim.height/2-u,width:t.tickDim.width+u,height:t.tickDim.height+u},a,o)});var c=t.getMinorTickData()||[],d=.85*e,f=.1*e;return c.forEach(function(t){var e,n,r=i(t),s=h._getArcPoint(d,r);r<Math.PI?(e=s[0],n=s[1]):(e=s[0]-f,n=s[1]),h._addToBoundsManager(r,{x:e,y:n,width:f,height:f},a,o)}),{widthBoundsManager:a,heightBoundsManager:o}},_addToBoundsManager:function(t,e,i,n){t>-Math.PI/4&&t<Math.PI/4&&n.addBounds(e),(t<3*-Math.PI/4||t>3*-Math.PI/4)&&n.addBounds(e),i.addBounds(e)},_getPointerTickCenter:function(t,e,i){var n,r,a=i(t.tickValue),o=this._getArcPoint(e,a),s=o[0],l=o[1],h=t.tickDim,u=Math.atan(h.width/h.height);if(Math.abs(a)<u){var c=h.height/2;n=s+c*s/l,r=l+c}else if(a>=u&&a<=Math.PI-u){var c=h.width/2;n=s-c,r=l-c*l/s}else if(a>=u-Math.PI&&-u>=a){var c=h.width/2;n=s+c,r=l+c*l/s}else{var c=h.height/2;n=s-c*s/l,r=l-c}return{x:n,y:r}},drawSeries:function(){var t=this,e=t.vanchart,i=e.renderer,n=t.group;this.backgruondPath||(this.backgruondPath=i.path().addTo(n),this.hingePath=i.path().addTo(n),this.labelGroup=this._getPointTextLabelGroup(),this.axisGroup=this.labelGroup,this.needleGroup=i.group().addTo(n),this.pointerHingePath=i.path().addTo(n)),i.registerInteractiveTarget(this,n),this.labelGroup=this._getPointTextLabelGroup(),this.dropFilter||(this.dropFilter=i.createDropShadowFilter(0,2,.1,2),this.innerFilter=i.createInnerShadowFilter(0,2,.1,2)),"pointer"==this.style?this._drawPointer(180,.16,.07):this._drawPointer(98,.11,.055)},onSeriesPress:function(){var t=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0),e="pointer"==this.style?.16:.11,i="pointer"==this.style?.07:.055;t.outerRadius(e*this.radius*1.25),this.hingePath.attr("d",t()),t.outerRadius(i*this.radius*1.25),this.pointerHingePath.attr("d",t())},onSeriesPressUp:function(){var t=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0),e="pointer"==this.style?.16:.11,i="pointer"==this.style?.07:.055;t.outerRadius(e*this.radius),this.hingePath.attr("d",t()),t.outerRadius(i*this.radius),this.pointerHingePath.attr("d",t())},_getScale:function(){var t=this,e=t.style,n="pointer"==e?a:o,r=t.gaugeAxis.scale.domain();return d3.scale.linear().domain(r).range([i.toRadian(-n),i.toRadian(n)])},getStyle:function(t){var e=t.series;return{fill:e.needle,"fill-opacity":n.getColorOpacity(e.needle)}},getAttrs:function(t){return{d:t.series._getArrowPath(i.getValueInDomain(t.y,t.series._getScale().domain()))}},getPointGraphicKey:function(){return"path"},_getPointGraphicGroup:function(){return this.needleGroup},createAnimation:function(t,e){var n=e.series,r=n._getScale(),a=t._current_||r.domain()[0];t._current_=i.getValueInDomain(e.y,r.domain()),d3.select(t).transition().duration(n.ANIMATION_TIME).ease(n.EASE_TYPE).attrTween("d",function(){var e=d3.interpolate(a,t._current_);return function(t){return n._getArrowPath(e(t))}})},updateAnimation:function(t,e){this.createAnimation(t,e)},dropAnimation:function(t){d3.select(t).remove()},_getArrowPath:function(t){var e=this._getScale()(t),i=this.radius,n=this._getArcPoint(.9*i,e),r=this._getArcPoint(.02*i,e+Math.PI/2),a=this._getArcPoint(.02*i,e-Math.PI/2);return"M"+n[0]+","+n[1]+"L"+r[0]+","+r[1]+"L"+a[0]+","+a[1]+"Z"},_drawPointer:function(t,e,r){var a=this,o=a.radius,s=(a.vanchart.renderer,d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0)),l=d3.svg.arc().startAngle(i.toRadian(-t)).endAngle(i.toRadian(t)).innerRadius(0).outerRadius(o).toCenter(!1);a.backgruondPath.attr("d",l()).style({fill:a.paneBackgroundColor,"fill-opacity":n.getColorOpacity(a.paneBackgroundColor),filter:"url(#"+i.stamp(a.dropFilter)+")"}),s.outerRadius(e*o),a.hingePath.attr("d",s()).style({fill:a.hingeBackgroundColor,"fill-opacity":n.getColorOpacity(a.hingeBackgroundColor),filter:"url(#"+i.stamp(a.innerFilter)+")"}),this._drawPointerTicks(),this._drawGaugeLabels(a.labelGroup),s.outerRadius(r*o),a.pointerHingePath.attr("d",s()).style({fill:a.hinge,"fill-opacity":n.getColorOpacity(a.hinge),filter:"url(#"+i.stamp(a.dropFilter)+")"})},_drawPointerTicks:function(){var t=this,e=t.defaultBands,n=t.vanchart,r=t.gaugeAxis,a=n.renderer,o=this.axisGroup,s=r.getTickData(),l=r.getMinorTickData(),h=r.options,u=h.labelStyle,c=h.useHtml,d=.95*t.radius,f=.84*t.radius,p=this._getScale();this.ticks=this.ticks||[];var g,m,v=r._bindData(this.ticks,s,function(t){return p(t.tickValue)}),y=[];for(v.exit.map(function(t){t.text&&t.text.remove(),t.remove()}),y=v.enter.map(function(t){var e=o.append(a.line().datum(t));return i.hasDefined(t.tickContent)&&(e.text=o.append(a.vtext(c))),e}),this.ticks=y=y.concat(v.update),g=0,m=y.length;m>g;g++){var _=y[g],x=_.datum(),b=p(x.tickValue),T=t._getArcPoint(d,b),A=t._getArcPoint(d-.1*t.radius,b),L=t._getColorFromBands(x.tickValue,e);_.attr("x1",T[0]).attr("y1",T[1]).attr("x2",A[0]).attr("y2",A[1]).style({stroke:L,"stroke-width":1});var C=t._getPointerTickCenter(x,f,p);_.text&&_.text.textContent(x.tickContent).style(u).attr({x:C.x-x.tickDim.width/2,y:C.y-x.tickDim.height/2,dy:".85em"})}this.minorTics=this.minorTics||[];var g,m,v=r._bindData(this.minorTics,l),y=[];for(g=0,m=v.exit.length;m>g;g++)v.exit[g].remove();for(g=0,m=v.enter.length;m>g;g++)y.push(o.append(a.line().datum(v.enter[g])));for(this.minorTics=y=y.concat(v.update),g=0,m=y.length;m>g;g++){var P=y[g],M=P.datum(),b=p(M),T=t._getArcPoint(d,b),A=t._getArcPoint(d-.05*t.radius,b),L=t._getColorFromBands(M,e);P.attr("x1",T[0]).attr("y1",T[1]).attr("x2",A[0]).attr("y2",A[1]).style({stroke:L,"stroke-width":1})}}}}),i("chart/SlotGauge",["require","../Constants","../utils/Formatter","../utils/ColorUtils","../utils/BaseUtils"],function(t){var e=t("../Constants"),i=(t("../utils/Formatter"),t("../utils/ColorUtils")),n=t("../utils/BaseUtils");return{gaugeType:e.SLOT_GAUGE,_getFixedPos:function(t,e){var i=t.series,n=i.centerX+1.08*i.radius+10,r=i.centerY-e.height/2;return[n,r]},_dealValueLabel:function(){var t=this,e=t.points[0],i=t.valueLabel,r=i.useHtml,a=i.formatter;if(e&&!e.isNull){for(var o=this._createMultiLineLabelContent(a,e),s=i.style,l=[],h=0,u=o.length;u>h;h++)l.push({labelContent:o[h],labelStyle:s,labelDim:n.getTextDimension(o[h],s,r)});t.valueLabelContent=l}},_fixCenterAndRadius:function(){var t=this,e=t.gaugeRadius;if(t.center)t.centerX=t.center[0],t.centerY=t.center[1],t.radius=e;else{var i=t.bounds;e||(e=Math.min(i.width/2,i.height/2),e=e/1.08-t.DEFAULT_PADDING);var r=i.x+i.width/2,a=i.y+i.height/2;t.centerX=r,t.centerY=a,t.radius=e}if(t.percentageLabelContent&&t.valueLabelContent&&t.valueLabelContent.length>0){t.percentageLabelPos={x:-t.percentageLabelDim.width/2,y:-t.percentageLabelDim.height*(1+t.LINE_GAP)};for(var o=0,s=0,l=t.valueLabelContent.length;l>s;s++){var h=t.valueLabelContent[s];h.labelPos={x:-h.labelDim.width/2,y:o},o+=h.labelDim.height*(1+t.LINE_GAP)}}else if(t.percentageLabelContent)t.percentageLabelPos={x:-t.percentageLabelDim.width/2,y:-t.percentageLabelDim.height/2};else if(t.valueLabelContent&&t.valueLabelContent.length>0)for(var u=n.getTextHeight(t.valueLabel.style),c=t.valueLabelContent.length,d=u*c+u*(c-1)/2,o=-d/2,s=0;c>s;s++){var h=t.valueLabelContent[s];h.labelPos={x:-h.labelDim.width/2,y:o},o+=u*(1+t.LINE_GAP)}},drawSeries:function(){var t=this,e=t.points[0],r=t.vanchart,a=r.renderer,o=t.group;this.backgruondPath||(this.backgruondPath=a.path().addTo(o),this.slotBackground=a.path().addTo(o),this.needlePath=a.circle().addTo(o)),this.labelGroup=this._getPointTextLabelGroup(),this.innderShadow||(this.innderShadow=a.createInnerShadowFilter(0,2,.05,0),this.dropShadow=a.createDropShadowFilter(0,2,.05,0));var s=d3.svg.arc().startAngle(n.toRadian(-135)).endAngle(n.toRadian(135)).innerRadius(0).outerRadius(t.radius).toCenter(!1).closePath(!1),l=d3.svg.arc().startAngle(n.toRadian(-135)).endAngle(n.toRadian(135)).innerRadius(0).outerRadius(t.radius).toCenter(!1).closePath(!1),h=t.gaugeAxis.scale.domain(),u=d3.scale.linear().domain(h).range([n.toRadian(-135),n.toRadian(135)]);if(t.backgruondPath.attr("d",l()).style({fill:"none",stroke:t.slotBackgroundColor,"stroke-linecap":"round","stroke-width":.16*t.radius,filter:"url(#"+n.stamp(this.innderShadow)+")"}),e&&!e.isNull){var c=u(h[0]),d=u(n.getValueInDomain(e.y,h)),f=n.toDegree(d-c),p=(t._getColorFromBands(h[0],t.defaultBands),e.color);t.slotBackground.style({fill:"none",stroke:i.colorToHex(p),"stroke-linecap":"round","stroke-width":.16*t.radius});var g=this._getArcPoint(t.radius,c);if(t.needlePath.attr("cx",g[0]).attr("cy",g[1]).attr("r",.048*t.radius).style({fill:t.needle,"fill-opacity":i.getColorOpacity(t.needle),filter:"url(#"+n.stamp(this.dropShadow)+")"}),t.animation)d3.select(t.slotBackground.node()).transition().duration(t.ANIMATION_TIME).ease(t.EASE_TYPE).attrTween("d",function(){this._lastRadian_=this._lastRadian_||c;var t=d3.interpolate(this._lastRadian_,d);return this._lastRadian_=d,function(e){return s.endAngle(t(e))()}}),d3.select(t.needlePath.node()).transition().duration(t.ANIMATION_TIME).ease(t.EASE_TYPE).attrTween("transform",function(){this._lastRotate_=this._lastRotate_||0;var t=d3.interpolate(this._lastRotate_,f);return this._lastRotate_=f,function(e){return"rotate("+t(e)+")"}});else{var m=s.endAngle(d)(),v=t._getArcPoint(t.radius,d),y=v[0],_=v[1],x=.008*t.radius;if(Math.abs(d-c)<1e-6){var s="a"+x+","+x+" 0 1,0 ";m="M"+(y-x)+","+_+s+2*x+",0 "+s+2*-x+",0 "}t.slotBackground.attr("d",m),t.needlePath.attr({cx:v[0],cy:v[1]})}this._drawGaugeLabels(this.labelGroup)}},_onSeriesMouseOver:function(){var t=this.points[0];if(t){var e=i.getHighLightColor(t.color),n=i.getHighLightColor(this.needle);this.slotBackground.style({stroke:i.colorToHex(e)}),this.needlePath.style({fill:n})}},_onSeriesUnChosen:function(){var t=this.points[0];t&&(this.slotBackground.style({stroke:t.color}),this.needlePath.style({fill:this.needle}))},onSeriesPress:function(){var t=this.points[0];if(t){var e=i.getColorWithDivider(t.color,1/.95),n=i.getColorWithDivider(this.needle,1/.95);this.slotBackground.style({stroke:i.colorToHex(e)}),this.needlePath.style({fill:n})}},onSeriesPressUp:function(){this._onSeriesMouseOver()}}}),i("chart/RingGauge",["require","../Constants","../utils/ColorUtils","../utils/BaseUtils"],function(t){var e=t("../Constants"),i=t("../utils/ColorUtils"),n=t("../utils/BaseUtils");return{gaugeType:e.RING_GAUGE,_fixCenterAndRadius:function(){var t,e,i=this,n=i.gaugeRadius;if(i.center)t=i.center[0],e=i.center[1];else{var r=i.bounds;n=n||Math.min(r.width/2,r.height/2)-i.DEFAULT_PADDING,t=r.x+r.width/2,e=r.y+r.height/2}i.centerX=t,i.centerY=e,i.radius=n;var a=0,o=i.valueLabelContent?i.valueLabelContent[0]:null;i.percentageLabelContent&&o?a=i.percentageLabelDim.height*(1+i.LINE_GAP)+o.labelDim.height:i.percentageLabelContent?a=i.percentageLabelDim.height:o&&(a=o.labelDim.height);var s=-a/2;i.percentageLabelContent&&(i.percentageLabelPos={x:-i.percentageLabelDim.width/2,y:s},s+=i.percentageLabelDim.height*(1+i.LINE_GAP)),o&&(o.labelPos={x:-o.labelDim.width/2,y:s})},drawSeries:function(){var t=this,e=t.vanchart,r=e.renderer,a=t.group;if(this.backgruondPath||(this.backgruondPath=r.path().addTo(a),this.ringPath=r.path().addTo(a),this.innerBackgroundPath=r.path().addTo(a),this.innerStroke=r.path().addTo(a),this.outerStroke=r.path().addTo(a)),this.labelGroup=this._getPointTextLabelGroup(),!this.colorGradient){var o={x1:"0%",y1:"0%",x2:"0%",y2:"100%"},s={offset:"0%","stop-color":"#ffffff"},l={offset:"100%","stop-color":"#dddddd"};this.colorGradient=r.colorGradient(o,[s,l]),s["stop-color"]="#dddddd",l["stop-color"]="#ffffff",this.clickedGradient=r.colorGradient(o,[s,l]),n.isSupportSVG()||(this.colorGradient="#ffffff",this.clickedGradient="#dddddd")}var h=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0).outerRadius(t.radius),u=t.gaugeAxis.scale.domain(),c=(t._getColorFromBands(u[0],t.defaultBands),.8*t.radius),d=c+2,f=c-1.5;this.backgruondPath.attr("d",h()).style({fill:t.paneBackgroundColor,"fill-opacity":i.getColorOpacity(t.paneBackgroundColor)});var p=t.points[0];if(p){var g=d3.svg.arc().startAngle(0).innerRadius(0).outerRadius(t.radius),m=p.color,v=Math.max(p.percentage,0),y=2*Math.PI*v*(t.clockwise?1:-1);t.animation?(this.ringPath.style({fill:i.colorToHex(m),"fill-opacity":i.getColorOpacity(m)}),d3.select(this.ringPath.node()).transition().duration(t.ANIMATION_TIME).ease(t.EASE_TYPE).attrTween("d",function(){this._lastRadian_=this._lastRadian_||0;var t=d3.interpolate(this._lastRadian_,y);return this._lastRadian_=y,function(e){return g.endAngle(t(e))()}})):this.ringPath.attr("d",g.endAngle(y)()).style({fill:m,"fill-opacity":i.getColorOpacity(m)})}this.innerBackgroundPath.attr("d",h.outerRadius(c)()).style({fill:t.innerPaneBackgroundColor,"fill-opacity":i.getColorOpacity(t.innerPaneBackgroundColor)}),this.outerStroke.attr("d",h.outerRadius(d)()).style({fill:"none",stroke:"#000000","stroke-opacity":.05,"stroke-width":4}),this.innerStroke.attr("d",h.outerRadius(f)()).style({fill:"none",stroke:this._getStroke(this.colorGradient),"stroke-width":3}),this._drawGaugeLabels(this.labelGroup)},_onSeriesMouseOver:function(){var t=this.points[0];t&&(this.innerStroke.style({stroke:this._getStroke(this.colorGradient)}),this.ringPath.style({fill:t.mouseOverColor}))},_onSeriesUnChosen:function(){var t=this.points[0];t&&(this.innerStroke.style({stroke:this._getStroke(this.colorGradient)}),this.ringPath.style({fill:t.color}))},onSeriesPress:function(){var t=this.points[0];t&&(this.innerStroke.style({stroke:this._getStroke(this.clickedGradient)}),this.ringPath.style({fill:t.clickColor}))},onSeriesPressUp:function(){this._onSeriesMouseOver()}}}),i("chart/ThermometerGauge",["require","../Constants","../utils/ColorUtils","../utils/BaseUtils"],function(t){var e=t("../Constants"),i=t("../utils/ColorUtils"),n=t("../utils/BaseUtils"),r=6,a=4,o=5,s=.001;return{gaugeType:e.THERMOMETER_GAUGE,_drawDiffMoreLabels:function(){function t(t,e){return t-e/2}var i=this.points[0];if(i&&!i.isNull){var n=this.gaugeAxis.scale.domain(),r=this.thermometerLayout==e.VERTICAL_LAYOUT,a=d3.scale.linear().domain(n).range(r?[this.radius,-this.radius]:[-this.radius,this.radius]),s=a(i.y),l=r?0-2*o:s,h=r?s:0-2*o;this._showAndExitMoreLabel(i,l,h,t,t)}},_fixCenterAndRadius:function(){var t=this.points[0];if(!t||t.isNull)return void(this.centerX=this.centerY=this.radius=0);var i=this,n=i.thermometerLayout==e.HORIZONTAL_LAYOUT?this._fixHorizontalThermometerCenter():this._fixVerticalThermometerCenter(),r=n.centerX,a=n.centerY,o=n.radius,s=i.valueLabelContent?i.valueLabelContent[0]:null;if(i.percentageLabelContent&&(i.percentageLabelPos.x-=r,i.percentageLabelPos.y-=a,i.percentageLabelPos.y=Math.min(i.percentageLabelPos.y,o-i.percentageLabelDim.height)),s){s.labelPos.x-=r,s.labelPos.y-=a;var l=o-s.labelDim.height-s.labelPos.y;0>l&&(s.labelPos.y+=l,i.percentageLabelContent&&(i.percentageLabelPos.y+=l))}i.centerX=r,i.centerY=a,i.radius=o},_fixHorizontalThermometerCenter:function(){var t,i,n,s=this,l=s.gaugeAxis,h=s.percentageLabel,u=s.valueLabel,c=s.valueLabelContent?s.valueLabelContent[0]:null,d=s.gaugeRadius,f=this._getThermometerSize();if(s.center)t=s.center[0],i=s.center[1],n=i;else{var p=s.bounds;n=p.y+(p.height-f)/2,t=p.x+p.width/2,d=d||p.width/2-l.getMaxTickWidth()-s.DEFAULT_PADDING}return(s.percentageLabelContent||c)&&(s.percentageLabelContent&&c&&h.align==e.TOP&&u.align==e.TOP?(s.center&&(n-=s.percentageLabelDim.height*(1+s.LINE_GAP),n-=c.labelDim.height*(1+s.HORIZONTAL_GAP),n-=l.getTickHeight()+a+r+a+o),s.percentageLabelPos={x:-s.percentageLabelDim.width/2+t,y:n},n+=s.percentageLabelDim.height*(1+s.LINE_GAP),c.labelPos={x:-c.labelDim.width/2+t,y:n},n+=c.labelDim.height*(1+s.HORIZONTAL_GAP)):(s.percentageLabelContent&&h.align==e.TOP&&(s.center&&(n-=s.percentageLabelDim.height*(1+s.HORIZONTAL_GAP),n-=l.getTickHeight()+a+r+a+o),s.percentageLabelPos={x:-s.percentageLabelDim.width/2+t,y:n},n+=s.percentageLabelDim.height*(1+s.HORIZONTAL_GAP)),c&&u.align==e.TOP&&(s.center&&(n-=c.labelDim.height*(1+s.HORIZONTAL_GAP),n-=l.getTickHeight()+a+r+a+o),c.labelPos={x:-c.labelDim.width/2+t,y:n},n+=c.labelDim.height*(1+s.HORIZONTAL_GAP)))),s.center?n=i+5:(n+=l.getTickHeight()+a+r+a+2*o,i=n-5),(s.percentageLabelContent||c)&&(s.percentageLabelContent&&c&&h.align==e.BOTTOM&&u.align==e.BOTTOM?(n+=s.percentageLabelDim.height*s.HORIZONTAL_GAP,s.percentageLabelPos={x:-s.percentageLabelDim.width/2+t,y:n},n+=s.percentageLabelDim.height*(1+s.LINE_GAP),c.labelPos={x:-c.labelDim.width/2+t,y:n}):(s.percentageLabelContent&&h.align==e.BOTTOM&&(n+=s.percentageLabelDim.height*s.HORIZONTAL_GAP,s.percentageLabelPos={x:-s.percentageLabelDim.width/2+t,y:n}),c&&u.align==e.BOTTOM&&(n+=c.labelDim.height*s.HORIZONTAL_GAP,c.labelPos={x:-c.labelDim.width/2+t,y:n}))),{centerX:t,centerY:i,radius:d}},_fixVerticalThermometerCenter:function(){var t,i,s,l=this,h=l.gaugeAxis,u=l.percentageLabel,c=l.valueLabel,d=l.gaugeRadius,f=l.points[0],p=h.scale.domain(),g=l.valueLabelContent?l.valueLabelContent[0]:null,m=this._getThermometerSize();if(l.center)t=l.center[0],i=l.center[1],s=t-2*o;else{var v=l.bounds;s=v.x+(v.width-m)/2,i=v.y+v.height/2,d=d||v.height/2-h.getTickHeight()-l.DEFAULT_PADDING}var y=d3.scale.linear().domain(p).range([d,-d]),_=i+y(n.getValueInDomain(f.y,p));return l.percentageLabelDim&&(_-=l.percentageLabelDim.height/3),(l.percentageLabelContent||g)&&(l.percentageLabelContent&&g&&u.align==e.LEFT&&c.align==e.LEFT?(l.center||(s+=Math.max(l.percentageLabelDim.width,g.labelDim.width),t=s+o),l.percentageLabelPos={x:s-l.percentageLabelDim.width,y:_},g.labelPos={x:s-g.labelDim.width,y:_+l.percentageLabelDim.height*(1+l.LINE_GAP)},s+=l.LINE_GAP*Math.max(l.percentageLabelDim.height,g.labelDim.height)):(l.percentageLabelContent&&u.align==e.LEFT&&(l.center&&(s-=l.percentageLabelDim.width+l.LINE_GAP*l.percentageLabelDim.height),l.percentageLabelPos={x:s,y:_},s+=l.percentageLabelDim.width+l.LINE_GAP*l.percentageLabelDim.height),g&&c.align==e.LEFT&&(l.center&&(s-=g.labelDim.width+l.LINE_GAP*g.labelDim.height),g.labelPos={x:s,y:_},s+=g.labelDim.width+l.LINE_GAP*g.labelDim.height))),l.center?s=t-o:t=s+o,s+=2*o+a+r+a+h.getMaxTickWidth(),(l.percentageLabelContent||g)&&(l.percentageLabelContent&&g&&u.align==e.RIGHT&&c.align==e.RIGHT?(s+=l.LINE_GAP*Math.max(l.percentageLabelDim.height,g.labelDim.height),l.percentageLabelPos={x:s,y:_
},g.labelPos={x:s,y:_+l.percentageLabelDim.height*(1+l.LINE_GAP)}):(l.percentageLabelContent&&u.align==e.RIGHT&&(l.percentageLabelPos={x:s+l.LINE_GAP*l.percentageLabelDim.height,y:_}),g&&c.align==e.RIGHT&&(g.labelPos={x:s+l.LINE_GAP*g.labelDim.height,y:_}))),{centerX:t,centerY:i,radius:d}},_getThermometerSize:function(){var t=this,i=t.valueLabel,n=t.gaugeAxis,s=t.valueLabelContent?t.valueLabelContent[0]:null,l=t.percentageLabel;if(t.thermometerLayout==e.HORIZONTAL_LAYOUT){var h=0;return t.percentageLabelContent&&s?l.align==i.align&&(h+=t.percentageLabelDim.height+s.labelDim.height,h+=t.LINE_GAP*t.percentageLabelDim.height,h+=t.HORIZONTAL_GAP*(i.align==e.TOP?s.labelDim.height:t.percentageLabelDim.height)):t.percentageLabelContent?h+=(1+t.HORIZONTAL_GAP)*t.percentageLabelDim.height:s&&(h+=(1+t.HORIZONTAL_GAP)*s.labelDim.height),h+=2*o+a+r+a+n.getTickHeight()}var u=0;return t.percentageLabelContent&&s?l.align==i.align?(u+=Math.max(t.percentageLabelDim.width,s.labelDim.width),u+=t.VERTICAL_GAP*Math.max(t.percentageLabelDim.height,s.labelDim.height)):(u+=t.percentageLabelDim.width+s.labelDim.width,u+=t.VERTICAL_GAP*(t.percentageLabelDim.height+s.labelDim.height)):t.percentageLabelContent?u+=t.percentageLabelDim.width+t.VERTICAL_GAP*t.percentageLabelDim.height:s&&(u+=s.labelDim.width+t.VERTICAL_GAP*s.labelDim.height),u+=n.getMaxTickWidth(),u+=2*o+a+r+a},drawSeries:function(){var t=this,r=t.points[0],a=t.vanchart,l=a.renderer,h=t.group;if(r&&!r.isNull){var u=t.gaugeAxis,c=u.scale.domain(),d=t.thermometerLayout==e.VERTICAL_LAYOUT,f=n.getValueInDomain(r.y,c),p=r.color,g=t.radius;if(!this.backgruondLine){this.backgruondLine=l.line().addTo(h),this.thermometerLine=l.line().addTo(h),this.needlePath=l.circle().addTo(h),this.axisGroup=l.group().addTo(h);var m=p,v=i.mixColorWithHSB(m,0,-.1,.1),y=i.getStandardColorAndOpacity(m).alpha;1>y&&(v=i.mixColorWithAlpha(v,y));var _="0%",x="0%";d?x="100%":_="100%";var b={offset:"0%","stop-color":d?m:v},T={offset:"100%","stop-color":d?v:m};this.colorGradient=l.colorGradient({x1:"0%",y1:"0%",x2:_,y2:x},[b,T]);var A=i.getColorWithDivider(m,1/.95),L=i.mixColorWithHSB(m,0,-.1,.1);b={offset:"0%","stop-color":d?A:L},T={offset:"100%","stop-color":d?L:A},this.clickedColorGradient=l.colorGradient({x1:"0%",y1:"0%",x2:_,y2:x},[b,T]);var C=i.getColorWithDivider(r.mouseOverColor,1/.95),P=i.mixColorWithHSB(r.mouseOverColor,0,-.1,.1);b={offset:"0%","stop-color":d?C:P},T={offset:"100%","stop-color":d?P:C},this.mouseOverColorGradient=l.colorGradient({x1:"0%",y1:"0%",x2:_,y2:x},[b,T]),n.isSupportSVG()||(this.colorGradient=m,this.clickedColorGradient=A,this.mouseOverColorGradient=C)}this.labelGroup=this._getPointTextLabelGroup();var M=d3.scale.linear().domain(c).range([-g,g]),E="x1",w="y1",_="x2",x="y2",S="cx",O="cy",k=M(f),R=-g;d&&(E="y1",w="x1",_="y2",x="x2",S="cy",O="cx",R=g,k=M.range([g,-g])(f));var D=n.pick(t.thermometerLine.node()._lastX_,R);t.thermometerLine.node()._lastX_=k,t.backgruondLine.attr(E,-g).attr(w,0).attr(_,g).attr(x,s).style({fill:"none",stroke:t.slotBackgroundColor,"stroke-width":2*o,"stroke-linecap":"round"}),t.thermometerLine.attr(E,R).attr(w,0).attr(x,s).attr(_,D).style({stroke:t._getStroke(t.colorGradient),"stroke-width":2*o,"stroke-linecap":"round"}),t.needlePath.attr("r",.9*o).attr(S,D).attr(O,0).style({fill:t.needle,"fill-opacity":i.getColorOpacity(t.needle),"stroke-width":.6*o,stroke:i.mixColorWithHSB(p,0,.1,-.1)}),t.animation?(d3.select(t.thermometerLine.node()).transition().duration(t.ANIMATION_TIME).ease(t.EASE_TYPE).attr(_,k),d3.select(this.needlePath.node()).transition().duration(t.ANIMATION_TIME).ease(t.EASE_TYPE).attr(S,k)):(t.thermometerLine.attr(_,k),this.needlePath.attr(S,k).attr("r",.9*o)),this._drawGaugeLabels(this.labelGroup),this._drawThermometerTicks(M)}},_drawThermometerTicks:function(t){var i=this,r=(i.bands,i.vanchart),a=i.gaugeAxis,o=r.renderer,s=this.labelGroup,l=a.getTickData(),h=a.getMinorTickData(),u=a.options,c=u.labelStyle,d=u.useHtml,f="x1",p="y1",g="x2",m="y2",v=-9,y=-15,_=-13,x=-19,b=function(t,e){return{x:e-t.tickDim.width/2,y:x-.85*t.tickDim.height,dy:"0.85em"}};i.thermometerLayout==e.VERTICAL_LAYOUT&&(f="y1",p="x1",g="y2",m="x2",v=9,y=15,_=13,x=19,b=function(t,e){return{x:x,y:e-t.tickDim.height/2,dy:".85em"}}),this.ticks=this.ticks||[];var T,A,L=a._bindData(this.ticks,l,function(e){return t(e.tickValue)}),C=[];for(L.exit.map(function(t){t.text&&t.text.remove(),t.remove()}),C=L.enter.map(function(t){var e=s.append(o.line().datum(t));return n.hasDefined(t.tickContent)&&(e.text=s.append(o.vtext(d))),e}),this.ticks=C=C.concat(L.update),T=0,A=C.length;A>T;T++){var P=C[T],M=P.datum(),E=n.lineSubPixelOpt(t(M.tickValue),1);P.attr(f,E).attr(p,v).attr(g,E).attr(m,y).style({stroke:u.tickColor,"stroke-width":u.tickWidth}),P.text&&P.text.textContent(M.tickContent).style(c).attr(b(M,E))}this.minorTics=this.minorTics||[];var T,A,L=a._bindData(this.minorTics,h),C=[];for(T=0,A=L.exit.length;A>T;T++)L.exit[T].remove();for(T=0,A=L.enter.length;A>T;T++)C.push(s.append(o.line().datum(L.enter[T])));for(this.minorTics=C=C.concat(L.update),T=0,A=C.length;A>T;T++){var w=C[T],S=w.datum(),E=n.lineSubPixelOpt(t(S),1);w.attr(f,E).attr(p,v).attr(g,E).attr(m,_).style({stroke:u.minorTickColor,"stroke-width":u.minorTickWidth})}},_getFixedPos:function(t,i){var n,s,l=t.series,h=l.thermometerLayout;if(h==e.HORIZONTAL_LAYOUT){n=l.centerX-i.width/2;var u=l.centerY;if(s=u+o+10,l.percentageLabelContent&&l.percentageLabel.align==e.BOTTOM&&(s=u+l.percentageLabelPos.y+l.percentageLabelDim.height+10),l.valueLabelContent&&l.valueLabel.align==e.BOTTOM){var c=l.valueLabelContent[0];s=u+c.labelPos.y+c.labelDim.height+10}}else{s=l.centerY-i.height/2;var d=l.gaugeAxis.getMaxTickWidth(),f=l.centerX;if(n=f+o+a+r+a+d+10,l.percentageLabelContent&&l.percentageLabel.align==e.RIGHT&&(n=f+l.percentageLabelPos.x+l.percentageLabelDim.width+10),l.valueLabelContent&&l.valueLabel.align==e.RIGHT){var c=l.valueLabelContent[0];n=Math.max(n,f+c.labelPos.x+c.labelDim.width+10)}}return[n,s]},_onSeriesMouseOver:function(){var t=this.points[0];t&&(this.thermometerLine.style("stroke",this._getStroke(this.mouseOverColorGradient)),this.needlePath.style({stroke:i.getHighLightColor(t.color),fill:i.getHighLightColor(this.needle)}))},_onSeriesUnChosen:function(){var t=this.points[0];t&&(this.thermometerLine.style("stroke",this._getStroke(this.colorGradient)),this.needlePath.style({stroke:t.color,fill:this.needle}))},onSeriesPress:function(){var t=this.points[0];t&&(this.thermometerLine.style("stroke",this._getStroke(this.clickedColorGradient)),this.needlePath.style({stroke:i.getClickColor(t.color),fill:i.getClickColor(this.needle)}))},onSeriesPressUp:function(){this._onSeriesMouseOver()}}}),i("chart/Gauge",["require","../Constants","../utils/BaseUtils","./Series","../utils/QueryUtils","../utils/BoundsManager","../utils/Formatter","../utils/ColorUtils","./PointerGauge","./SlotGauge","./RingGauge","./ThermometerGauge","../ChartLibrary"],function(t){var e=t("../Constants"),i=t("../utils/BaseUtils"),n=t("./Series"),r=t("../utils/QueryUtils"),a=(t("../utils/BoundsManager"),t("../utils/Formatter"),t("../utils/ColorUtils")),o=t("./PointerGauge"),s=t("./SlotGauge"),l=t("./RingGauge"),h=t("./ThermometerGauge"),u={pointer:o,slot:s,ring:l,thermometer:h},c=n.extend({DEFAULT_PADDING:5,LINE_GAP:.3,VERTICAL_GAP:.3,HORIZONTAL_GAP:.8,ANIMATION_TIME:1e3,EASE_TYPE:"quad-out",_refresh:function(){var t=this._getQueryList(),n=r.queryList(t,"style");n="pointer_semi"==n?e.POINTER_GAUGE:n;var a=r.queryList(t,"thermometerLayout"),o=r.queryList(t,"seriesLabel")||{},s=r.queryList(t,"valueLabel")||{},l=r.queryList(t,"percentageLabel")||{},h=r.queryList(t,"center");h&&(h=[].concat(h),h[0]=this._getPercentValue(h[0],this.vanchart.width),h[1]=this._getPercentValue(h[1],this.vanchart.height)),i.extend(this,{layout:r.queryList(t,"layout")||e.HORIZONTAL_LAYOUT,gaugeRadius:r.queryList(t,"radius"),center:h,style:r.queryList(t,"style"),bands:r.queryList(t,"bands"),seriesLabel:o,valueLabel:s,percentageLabel:l,needle:r.queryList(t,"needle"),hinge:r.queryList(t,"hinge"),clockwise:r.queryList(t,"clockwise"),hingeBackgroundColor:r.queryList(t,"hingeBackgroundColor"),paneBackgroundColor:r.queryList(t,"paneBackgroundColor"),slotBackgroundColor:r.queryList(t,"slotBackgroundColor"),innerPaneBackgroundColor:r.queryList(t,"innerPaneBackgroundColor")}),i.convertToREMUseDefault16PX(this.seriesLabel&&this.seriesLabel.style),i.convertToREMUseDefault16PX(this.valueLabel&&this.valueLabel.style),i.convertToREMUseDefault16PX(this.percentageLabel&&this.percentageLabel.style),(this.gaugeType!=n||this.thermometerLayout!=a)&&(this.remove(),this.backgruondPath=null,this.backgruondLine=null,this.ticks=this.minorTics=null,this.points.forEach(function(t){t.graphic&&(t.graphic.remove(),t.graphic=null)})),this.gaugeType=n,this.thermometerLayout=a,this.valueLabelBackground=this.seriesLabelContent=this.percentageLabelContent=this.valueLabelContent=null,i.extend(this,c.prototype,u[n])},_getPointTextLabelGroup:function(){if(!this.textGraphicGroup){var t=this.vanchart,e=(t.seriesTextRenderGroup,t.seriesTextDivGroup);this.textGraphicGroup=t.renderer.vgroup(),this.textGraphicGroup.renderG.addTo(this.group),e.append(this.textGraphicGroup.divG)}return this.textGraphicGroup.divG.attr("transform",i.makeTranslate(this._getTranslate())),this.textGraphicGroup},doLayout:function(){var t=this._calculateGaugeBounds();if(!t&&!this.gaugeRadius&&!this.center)throw new Error("gauge has no bounds");this.bounds=t,this._calculatePercentage();var e=this;e.defaultBands=(e.bands||[]).concat(e._getDefaultBands(e.gaugeAxis.scale.domain())),e.points.forEach(function(t){var i=e._getColorFromBands(t.getTargetValue(),e.defaultBands);i&&(i=a.getStandardColorAndOpacity(i),t.color=i.hex,t.opacity=i.alpha),t.mouseOverColor=a.getHighLightColor(t.color),t.clickColor=a.getClickColor(t.color)}),this._doLayout()},_doLayout:function(){this._dealPercentLabel(),this._dealValueLabel(),this._fixCenterAndRadius()},_createGroup:function(t,e){return t.group().addTo(e.seriesGroup)},_getAxisTypes:function(){return["gaugeAxis"]},getDataToDraw:function(){return[]},_calculatePercentage:function(){if(this.points.length){var t=this.gaugeAxis,e=t.scale.domain(),i=this.points;i.forEach(function(t){t.points=i,t.percentage=(t.y-e[0])/(e[1]-e[0])})}},_calculateLabelPos:function(){},_getTranslate:function(){return[Math.round(this.centerX),Math.round(this.centerY)]},_validPoint:function(){return this.points.filter(function(t){return!t.isNull})[0]},_dealSeriesLabel:function(){var t=this;if(t.seriesLabelContent="",t.seriesLabelDim={width:0,height:0},t.seriesLabel&&t.seriesLabel.enabled){var e=t.seriesLabel.style,i=t.calculateFormatterContent(t._validPoint(),t.seriesLabel),n=this.calculateTextDim(i);t.seriesLabelContent=i[0]?i[0].text:"",t.seriesLabelStyle=e,t.seriesLabelDim=n}},_dealPercentLabel:function(){var t=this;t.percentageLabelContent="",t.percentageLabelDim={width:0,height:0};var e=t.points[0];if(e&&!e.isNull&&t.percentageLabel&&t.percentageLabel.enabled){var n=i.clone(t.percentageLabel.style);n.color||(n.color=e.color);var r=t.calculateFormatterContent(e,t.percentageLabel),a=this.calculateTextDim(r);t.percentageLabelContent=r[0]?r[0].text:"",t.percentageLabelStyle=n,t.percentageLabelDim=a}},_dealValueLabel:function(){var t=this,e=t.valueLabel,n=e.style,r=e.useHtml,a=e.formatter;if(t.valueLabelContent="",t.valueLabelDim={width:0,height:0},t.valueLabel&&t.valueLabel.enabled){for(var o=[],s=0,l=t.points.length;l>s;s++){var h=t.points[s];if(!h.isNull){var u=this._calculateSingleLineLabelContent(a,h),c=i.getTextDimension(u,n,r);o.push({labelContent:u,labelDim:c,labelStyle:n})}}t.valueLabelContent=o}},_getDefaultBands:function(t){var e=r.queryList(this._getQueryList(),"color"),n=[];if(e)n.push({from:t[0],to:t[1],color:e});else{var a=t[0],o=t[1],s=i.accDiv(o-a,3),l=i.accAdd(a,s),h=i.accAdd(l,s),u=this.vanchart.options.colors;n=[{from:a,to:l,color:u[0]},{from:l,to:h,color:u[1]},{from:h,to:o,color:u[2]}]}return n},_getColorFromBands:function(t,e){if(e&&e.length)for(var i=0,n=e.length;n>i;i++){var r=e[i],a=Math.min(r.from,r.to),o=Math.max(r.from,r.to);if(t>=a&&o>=t)return r.color}},_calculateGaugeBounds:function(){for(var t=this.vanchart.seriesOfType(e.GAUGE_CHART),i=this.vanchart.getPlotBounds(),n=0,r=0,a=t.length;a>r;r++)t[r].center&&t[r].gaugeRadius&&n++;for(var o=this.layout==e.HORIZONTAL_LAYOUT,s=o?"width":"height",l=i[s]/Math.max(1,t.length-n),r=0,a=t.length;a>r;r++)if(t[r]==this&&!this.center)return o?{x:i.x+r*l,y:i.y,width:l,height:i.height}:{x:i.x,y:i.y+r*l,width:i.width,height:l};return{x:0,y:0,width:0,height:0}},_getFixedPos:function(t,e){var i,n,r=t.series,a=r.style;return"pointer_semi"==a?(i=r.centerX-e.width/2,n=r.centerY+.14*r.radius+10):(i=r.centerX+r.radius+10,n=r.centerY-e.height/2),[i,n]},_animateEnd:function(){},_isSeriesInteractive:function(){return!0},_drawGaugeLabels:function(t){var e=this,i=e.vanchart;e._removeNormalLabels(t),i.setTimeout(e.className+"more_label_animate",function(){i._removeChangeDataState(e),e._removeMoreLabels(),e._drawNormalLabels(t)},i.getShowMoreLabelTime()),e._drawMoreLabels()},_removeMoreLabels:function(){this.points.forEach(function(t){t.moreLabelG&&t.moreLabelG.remove(),t.moreLabelG=null})},_drawMoreLabels:function(){var t=this,e=t.vanchart;0!==e.getShowMoreLabelTime()&&t.visible&&t._drawDiffMoreLabels()},_drawDiffMoreLabels:function(){var t=this.points[0];t&&!t.isNull&&this._showAndExitMoreLabel(t,0,0)},_removeNormalLabels:function(t){for(var e=t.labels||[],i=0,n=e.length;n>i;i++)e[i]&&e[i].remove(),e[i]=null},_drawNormalLabels:function(t){var e=this,n=e.vanchart,r=n.renderer;if(t.labels=[],e.seriesLabelContent&&e._drawLabel(t,e.seriesLabelContent,e.seriesLabelPos,e.seriesLabelDim,e.seriesLabelStyle,e.seriesLabel.useHtml),e.percentageLabelContent&&e._drawLabel(t,e.percentageLabelContent,e.percentageLabelPos,e.percentageLabelDim,e.percentageLabelStyle,e.percentageLabel.useHtml),e.valueLabelContent&&e.valueLabelContent.length){if(e.valueLabelBackground){var o=i.rectSubPixelOpt(e.valueLabelBackground,0);o.rx=o.rx=.02*e.radius,t.labels.push(t.append(r.rect(o).style({fill:e.valueLabel.backgroundColor,"fill-opacity":a.getColorOpacity(e.valueLabel.backgroundColor),filter:"url(#"+i.stamp(e.innerFilter)+")"})))}for(var s=0,l=e.valueLabelContent.length;l>s;s++){var h=e.valueLabelContent[s];e._drawLabel(t,h.labelContent,h.labelPos,h.labelDim,h.labelStyle,e.valueLabel.useHtml)}}},_drawLabel:function(t,e,n,r,a,o){if(n){var s=this,l=s.vanchart,h=l.renderer,u=i.getTextHeight(a);t.labels.push(t.append(h.vtext(o).attr({x:n.x,y:n.y,dy:.85*u}).textContent(e).style(a)))}},_onSinglePointerTap:function(t){this.points&&1===this.points.length&&this.points[0].onClick(t.srcEvent)},_onSinglePointerMouseMove:function(t){this.points&&1===this.points.length&&this.vanchart.showTooltip(this.points[0],t),this.onSeriesMouseOver(t)},getClosestPoint:function(){return 1===this.points.length?this.points[0]:null},_getStroke:function(t){return i.isSupportSVG()?"url(#"+i.stamp(t)+")":t},getEvents:function(){return{mousemove:this._onSinglePointerMouseMove,seriesUnChosen:this.onSeriesUnChosen,tap:this._onSinglePointerTap,press:this.onSeriesPress,pressup:this.onSeriesPressUp}},isSupportLegendHighlight:function(){return!1},isSeriesAccumulated:function(){return!0}});return t("../ChartLibrary").register(e.GAUGE_CHART,c),c}),i("chart/Funnel",["require","./Series","../utils/BaseUtils","../Constants","../utils/QueryUtils","../utils/BezierEasing","../utils/Formatter","../EffectHelper","../ChartLibrary"],function(t){var e=t("./Series"),i=t("../utils/BaseUtils"),n=t("../Constants"),r=t("../utils/QueryUtils"),a=t("../utils/BezierEasing"),o=t("../utils/Formatter"),s=t("../EffectHelper"),l=.03,h=.05,u=.03,c=.05,d=u+c,f=.4,p=.02,g=6,m=.35,v=400,y=400,_=500,x=500,b=e.extend({_refresh:function(){var t=this._getQueryList();i.extend(this,{sort:r.queryList(t,"sort"),useSameSlantAngle:r.queryList(t,"useSameSlantAngle")})},_getAxisTypes:function(){return[]},getTargetKey:function(){return"value"},getPointValue4MinMax:function(t){return Math.abs(t[this.getTargetKey()])},_getPointKey:function(t){return t.name},_calculatePercentage:function(){var t,e=this.points.filter(function(t){return t._bottomPoint=null,!t.isNull&&t.visible}),i=e.length;e.forEach(function(e,n){t?(t._bottomPoint=e,e.percentage=Math.abs(e.value/(t.value||1))):e.percentage=1,e.delayTime=v*Math.sqrt(n/i),t=e})},calculateLabelInfo:function(t){},calculateFunnelLabelInfo:function(t){var e=t.dataLabels,n=this.calculateFormatterContent(t,e),r=n&&(n.nameLabelContent||n.valueLabelContent);i.extend(t,{labelContent:n,labelDim:r?this.calculateOutSideTextDim(n):this.calculateTextDim(n)})},pushNormalLabelContent:function(t,e,r,a,s){var l=this;if(r.align==n.INSIDE)return l._pushNormalLabelContent(t,e,r,a,s);var h=e.identifier;if(-1!=h.indexOf("{NAME}")){var u=o.format(t.name,e.nameFormat),c=l.getCategorySeriesStyle(r,n.OUTSIDE,t),d=i.getTextDimension(u,c,a);s.nameLabelContent={text:u,style:c,dim:d},l.maxNameLabelWidth||(l.maxNameLabelWidth=0),l.maxNameLabelWidth=Math.max(l.maxNameLabelWidth,d.width)}if(-1!=h.indexOf("{VALUE}")||-1!=h.indexOf("{PERCENT}")){var f="";-1!=h.indexOf("{VALUE}")&&(f+=o.format(t.value,e.valueFormat),-1!=h.indexOf("{PERCENT}")&&(f+=n.BLANK_VALUE_PERCENTAGE)),-1!=h.indexOf("{PERCENT}")&&(f+=o.format(t.percentage,e.percentFormat));var p=l.getValuePercentageStyle(r,n.OUTSIDE,t),g=i.getTextDimension(f,p,a);s.valueLabelContent={text:f,style:p,dim:g},l.maxValueLabelWidth||(l.maxValueLabelWidth=0),l.maxValueLabelWidth=Math.max(l.maxValueLabelWidth,g.width)}},calculateOutSideTextDim:function(t){var e=0,i=0,n=0;if(t.nameLabelContent){var r=t.nameLabelContent.dim;e+=r.width,i=Math.max(i,r.height)}if(t.valueLabelContent){var r=t.valueLabelContent.dim;e+=r.width,i=Math.max(i,r.height)}if(t.nameLabelContent&&t.valueLabelContent){var a=this,o=a.vanchart,s=o.getPlotBounds();n=s.width*p,e+=n}return{width:e,height:i,nameValueGap:n}},_outSideSpecialLabel:function(t){var e=t.labelContent;return e&&(e.nameLabelContent||e.valueLabelContent)},doLayout:function(){var t=this;t.points.forEach(function(e){t.calculateFunnelLabelInfo(e)}),this._calculatePosAndSize()},_calculateTotalValue:function(t,e){var i=0;return this.points.filter(t).forEach(function(t){i+=Math.abs(t[e])}),i},_calculateSeriesMaxValue:function(t,e){var i=0;return this.points.filter(t).forEach(function(t){i=Math.max(i,Math.abs(t[e]))}),i},_calculatePosAndSize:function(){var t=this,e=t.vanchart,i=e.getPlotBounds(),n=function(t){return!t.isNull&&t.visible},r=t.getTargetKey(),a=i.width,o=i.height,s=a*(1-2*l),u=o*(1-2*h),c=t._calculateTotalLabelSize();s-=c.useWidth>0?c.useWidth+i.width*d:0,t.useCurveConnectorLine=!1;var f,p=t.points.filter(n),g=p.length;if(!(1>g)){var m=p[0],v=p[g-1],y=m.labelDim?m.labelDim.height:0,_=v.labelDim?v.labelDim.height:0;if(t.useSameSlantAngle){var x=t._calculateTotalValue(n,r),b=Math.abs(m[r])*u/x,T=Math.abs(v[r])*u/x,A=Math.max(0,y-b)/2;u-=A,u-=Math.max(0,_-T)/2,p.forEach(function(e){e.posX=Math.round(A*s/2/u),e.width=Math.round(s-2*e.posX),e.posY=Math.round(A),e.height=Math.round(Math.abs(e[r])*u/x),A+=e.height,t._calculateInsideLabelPos(e,f),f=e})}else{var L=t._calculateSeriesMaxValue(n,r),C=u/g,P=Math.max(0,y-C)/2;u-=P,u-=Math.max(0,_-C)/2,p.forEach(function(e,i){e.width=Math.round(s*Math.abs(e[r])/L),e.posX=Math.round((s-e.width)/2),e.posY=Math.round(P+i*C),e.height=Math.round(C),t._calculateInsideLabelPos(e,f),f=e})}t._calculateOutSideLabelPos(n,c.useWidth,c.useHeight)}},_calculateInsideLabelPos:function(t,e){t.dataLabels&&t.dataLabels.enabled&&(t.dataLabels.align==n.INSIDE?t.labelPos={x:t.posX+t.width/2-t.labelDim.width/2,y:t.posY+t.height/2-t.labelDim.height/2}:e&&(this.useCurveConnectorLine=this.useCurveConnectorLine||t.height+e.height<t.labelDim.height+e.labelDim.height))},_calculateOutSideLabelPos:function(t,e,i){var r=this,a=r.vanchart,o=a.getPlotBounds(),s=o.width*c,u=o.height*(1-2*h),d=Math.max(1,this.points.filter(t).length-1),f=Math.max(0,(u-i)/d),p=o.width*(1-2*l)-e,g=0;this.points.filter(t).forEach(function(t){var i=t.dataLabels;if(i&&i.enabled&&i.align==n.OUTSIDE&&u>g){var a=t.labelContent,o=t.labelDim,l=o.height,h=r.useCurveConnectorLine?g:t.posY+t.height/2-l/2,c=t._bottomPoint,d=((c?c.width:0)-t.width)/4,m={x:p,y:h+l/2},v={x:p-s,y:h+l/2},y={x:t.posX+t.width+d,y:t.posY+t.height/2};if(t.labelPos={x:p,y:h,endPos:m,midPos:v,startPos:y},g+=t.labelDim.height+f,r._outSideSpecialLabel(t)){var _=a.nameLabelContent,x=a.valueLabelContent,b=o.nameValueGap,T=Math.min(e,r.maxValueLabelWidth);if(_){var A=_.dim,L=_.text,C=e-b-T;L=r._omitLabel(L,C,_.style),_.text=L,_.x=0,_.y=(l-A.height)/2}if(x){var P=x.dim,M=x.text;M=r._omitLabel(M,T,x.style),x.text=M,x.x=e-T,x.y=(l-P.height)/2}}}})},_omitLabel:function(t,e,n){for(var r=i.getTextDimension(t,n,!1),a=!1;r.width>e&&t.length;)t=t.substr(0,Math.floor(.9*t.length)),r=i.getTextDimension(t+"...",n,!1),a=!0;return a&&t&&(t+="..."),t},_calculateTotalLabelSize:function(){var t=this,e=t.vanchart,i=e.getPlotBounds(),r=0,a=0;return t.points.filter(function(t){return!t.isNull&&t.visible&&t.dataLabels&&t.dataLabels.enabled}).forEach(function(e){e.dataLabels.align==n.OUTSIDE&&(r=+t.maxNameLabelWidth||+t.maxValueLabelWidth?Math.max(r,(t.maxNameLabelWidth||0)+(t.maxValueLabelWidth||0)+e.labelDim.nameValueGap):Math.max(r,e.labelDim.width),a+=e.labelDim.height)}),r=Math.min(r,i.width*f),{useWidth:r,useHeight:a}},_calculateLabelPos:function(){},_getFixedPos:function(t,e){var i=t.series._getTranslate();return[i[0]+t.posX+t.width/2,i[1]+t.posY+t.height/2]},_getMoreLabelDefaultCenter:function(t,e){return{centerX:t.posX+t.width/2,centerY:t.posY+t.height/2}},getInitShowTime:function(){return y+v},getReAppearTime:function(){return x},getFillFilter:function(t,e){if(e.style==n.STYLE_GRADUAL&&i.isSupportSVG()){var r=this,a=r.vanchart,o=a.renderer,s={x1:"0%",y1:"0%",x2:"100%",y2:"0%"},l={offset:"0%","stop-color":ColorUtils.getColorWithDivider(t,.9)},h={offset:"100%","stop-color":t};return e.colorGradient?o.updateColorGradient(e.colorGradient,s,[l,h]):e.colorGradient=o.colorGradient(s,[l,h]),"url(#"+i.stamp(e.colorGradient)+")"}return t},getAttrs:function(t){return{transform:i.makeTranslate({x:t.posX+t.width/2,y:t.posY+t.height/2}),d:t.series._getPointPath(t)}},_getPointPath:function(t){var e=t._bottomPoint,i=-t.width/2+","+-t.height/2,n=t.width/2+","+-t.height/2;if(e){var r=e.width/2+","+t.height/2,a=-e.width/2+","+t.height/2;return"M"+i+"L"+n+"L"+r+"L"+a+"Z"}var o="0,"+t.height/2;return"M"+i+"L"+n+"L"+o+"L"+o+"Z"},getPointGraphicKey:function(){return"path"},getStyle:function(t){return{fill:t.series.getFillFilter(t.color,t),"fill-opacity":t.opacity,stroke:t.borderColor,"stroke-opacity":t.borderOpacity,"stroke-width":t.borderWidth}},getHighLightStyle:function(t){return{stroke:t.mouseOverColor||t.color,fill:t.series.getFillFilter(t.mouseOverColor||t.color,t),"fill-opacity":t.opacity,"stroke-width":g,"stroke-opacity":0===t.opacity?0:m}},getPressedStyle:function(t){return{stroke:t.clickColor||t.color,fill:t.series.getFillFilter(t.clickColor,t),"fill-opacity":t.clickOpacity,"stroke-width":g,"stroke-opacity":0===t.opacity?0:m}},effectAnimation:function(t,e){s.areaStyleEffectAnimation(t,e,e.posX+e.width/2,e.posY+e.height/2)},getDefaultEffectTime:function(){return s.AREA_STYLE_EFFECT_TIME},createAnimation:function(t,e){var i=e.series,n=i.initialAnimationMoving;d3.select(t).attr("d",i._getPointPath(e)).attr("transform","translate("+(e.posX+e.width/2)+","+(e.posY+e.height/2)+") scale(0.01)").transition().delay(n?e.delayTime:0).ease(n?a.css["ease-out-quart"]:a.css.swing).duration(n?y:x).attr("transform","translate("+(e.posX+e.width/2)+","+(e.posY+e.height/2)+") scale(1)")},updateAnimation:function(t,e){d3.select(t).transition().duration(_).ease(a.css.swing).attr("d",e.series._getPointPath(e)).attr("transform","translate("+(e.posX+e.width/2)+","+(e.posY+e.height/2)+")")},dropAnimation:function(t,e){d3.select(t).remove()},onPointMouseOver:function(t){var e=this,i=e.series,r=i.animation,a=i.getHighLightStyle(e);r?d3.select(e.graphic.rawElement).interrupt(n.SELECT_ANIMATION).transition(n.SELECT_ANIMATION).duration(200).ease("back-out").style(a):e.graphic.style(a)},onPointMouseOut:function(t){var e=this,i=e.series,r=i.animation,a=i.getStyle(e);r?(d3.select(e.graphic.rawElement).interrupt(n.SELECT_ANIMATION).transition(n.SELECT_ANIMATION),d3.select(e.graphic.rawElement).style(a)):e.graphic.style(a)},_getTranslate:function(){var t=this.vanchart.getPlotBounds();return[t.x+t.width*l,t.y+t.height*h]},_updateDataLabels:function(){var t=this;t.getTextDataToDraw().forEach(function(e){t._outSideSpecialLabel(e)?t._createOutSideTextGraphic(e):t._createTextGraphic(e)})},_createOutSideTextGraphic:function(t){var e=this,n=function(t){return e.visible&&!t.isNull&&t.visible&&t.labelPos&&!isNaN(t.labelPos.x)&&!isNaN(t.labelPos.y)&&t.dataLabels&&t.dataLabels.enabled};if(n(t)){var r=e.vanchart,a=r.renderer,o=t.labelContent,s=t.labelPos.x,l=t.labelPos.y,h=t.dataLabels,u=h.useHtml,c=this._getPointTextLabelGroup(),d=a.vtext(u).attr("transform",i.makeTranslate([s,l])).style({"pointer-events":"none"}),f=function(t){if(t){var e=t.dim,i=t.text,n=t.style;a.vtspan(u).style({width:h.labelWidth+"px",height:h.labelHeight+"px"}).attr("y",t.y).attr("x",t.x).attr("dy",.85*e.height).attr("dx",0).textContent(i).style(n).addTo(d)}};f(o.nameLabelContent),f(o.valueLabelContent),t.textGraphic=c.append(d),t.labelPos.startPos&&(t.leadLine=c.append(this._getLeadLine(t)))}},isSeriesAccumulated:function(){return!0}});return t("../ChartLibrary").register(n.FUNNEL_CHART,b),b}),i("chart/WordCloud",["require","./Series","../Constants","../utils/BezierEasing","../EffectHelper","../utils/BaseUtils","../ChartLibrary"],function(t){var e=t("./Series"),i=t("../Constants"),n=t("../utils/BezierEasing"),r=(t("../EffectHelper"),t("../utils/BaseUtils")),a=800,o=600,s=320,l=320,h=e.extend({isNullValue:function(t){var e=t[t.series.getTargetKey()];return"-"==e||r.hasNotDefined(e)||r.hasNotDefined(t.name)},getTargetKey:function(){return"value"},_getPointKey:function(t){return t.name},_refresh:function(){},doLayout:function(){},_calculateLabelPos:function(){},_getFixedPos:function(t,e){var i=t.word,n=t.labelDim,a=t.series._getTranslate(),o=n.width/2,s=n.height/2,l=r.toRadian(i.rotate),h=l===Math.PI/2?s:o*Math.cos(l)-s*Math.sin(l),u=o*Math.sin(l)+s*Math.cos(l),c=.35*n.height*Math.cos(l),d=.35*n.height*Math.sin(l);return r.isSupportSVG()?[a[0]+i.x+h+d,a[1]+i.y+u-c]:[a[0]+i.x+n.width,a[1]+i.y+n.height]},_getTranslate:function(){var t=this.vanchart.getPlotBounds();return[t.x+t.width/2,t.y+t.height/2]},effectAnimation:function(t,e){var i=e.word,r=e.series,a=r._getEffectTime(e);d3.select(t).style("text-shadow","rgba(91,91,91,0.75) 0px 0px 0px").transition().ease(n.css["ease-out-quint"]).duration(.5*a).style("font-size",1.2*i.size+"px").style("text-shadow","rgba(91,91,91,0.75) 3px 3px 5px").transition().ease(n.css["ease-in-quint"]).duration(.5*a).style("font-size",i.size+"px").style("text-shadow","rgba(91,91,91,0.75) 0px 0px 0px")},getDefaultEffectTime:function(){return 2e3},_updateSeriesGraphicStyle:function(){this.drawSeries&&this.drawSeries()},_createPointGraphic:function(t){var e=this.getPointGraphicKey(t),i=this.vanchart.renderer;return t.graphic=i[e](),t.graphic.textContent(t.word.text),t.graphic},getPointGraphicKey:function(){return"text"},getAttrs:function(t){var e=t.word;return e?{"text-anchor":"middle",transform:"translate("+[e.x,e.y]+")rotate("+e.rotate+")"}:{}},getStyle:function(t){var e=t.word;return e?{"font-size":e.size+"px","font-family":e.fontFamily,fill:t.color,"text-shadow":"","stroke-width":0,"stroke-opacity":1,"fill-opacity":t.opacity,filter:""}:{}},getHighLightStyle:function(t){function e(){for(var t=[0,15,35,50,65,85,1/0],e=[2,4,6,8,10,12],i=0,r=e.length;r>i;i++)if(n>t[i]&&n<=t[i+1])return e[i]}var i=t.word,n=i.size,a={"font-size":n+"px","font-family":i.fontFamily,fill:t.color,stroke:"white","stroke-opacity":1,"stroke-width":e(),"text-shadow":"rgba(91,91,91,0.75) 3px 3px 4px"};if(r.isMS){var o=t.series,s=o.vanchart,l=s.renderer;s.wordCloudShadowFilter=s.wordCloudShadowFilter||l.createDropShadowFilter(3,3,.75,4),a.filter="url(#"+r.stamp(s.wordCloudShadowFilter)+")"}return a},onPointMouseOver:function(){var t=this,e=t.series,i=e.getHighLightStyle(t),n=e.vanchart,a=n.renderer;t.effectInterval&&(clearInterval(t.effectInterval),d3.select(t.graphic.node()).interrupt()),!t.mouseOverGraphic&&r.isSupportSVG()&&(t.mouseOverGraphic=a.text().attr("class","mouseOverGraphic").style("pointer-events","none").textContent(t.name).addTo(n.mouseOverGroup)),t.mouseOverGraphic&&t.mouseOverGraphic.attr(e.getAttrs(t)).style(e.getStyle(t)).style("fill-opacity",1),t.graphic.style(i)},onPointMouseOut:function(){var t=this,e=t.series,i=e.getStyle(t);t.mouseOverGraphic&&t.mouseOverGraphic.style("fill-opacity",0),t.graphic.style(i),e.drawPointEffect(e,t)},_getInitFontSize:function(){var t=this,e=t.vanchart;return e.minFontSize/2+"px"},createAnimation:function(t,e){var i=e.series,r=i.initialAnimationMoving,o=e.word;d3.select(t).attr("text-anchor","middle").attr("transform","translate("+[o.x,o.y]+")rotate("+o.rotate+")").style("font-size",i._getInitFontSize()).transition().ease(n.css["ease-out-quart"]).duration(r?a:l).style("font-size",o.size+"px")},updateAnimation:function(t,e){var i=e.word;d3.select(t).transition().duration(o).ease(n.css["ease-out-quart"]).style("font-size",i.size+"px").attr("transform","translate("+[i.x,i.y]+")rotate("+i.rotate+")")},dropAnimation:function(t,e){d3.select(t).transition().duration(s).ease(n.css["ease-in-quart"]).style("font-size","0px").remove()},isSeriesAccumulated:function(){return!0}});return t("../ChartLibrary").register(i.WORD_CLOUD_CHART,h),h}),i("LineMapDataNormalizer",["require","./utils/BaseUtils"],function(t){function e(t,e){e.loadGeo();var i=t.name||t,n=e.getFeaturesByName(i);return n&&n.length?n.map(function(t){return{name:i,lnglat:t.geometry.coordinates}}):void 0}function i(t,e,i,r){if(t&&e){var a=0,o=t[0]||t;do{var s=0,l=e[0]||e;do{var h={};n(h,i),h.from=o,h.to=l,r.push(h)}while(l=e[++s])}while(o=t[++a])}}var n=t("./utils/BaseUtils").extend;return function(t,n){for(var r,a=[],o=-1;r=t[++o];){var s,l,h=r.from&&r.from.lnglat,u=r.to&&r.to.lnglat;h&&u?a.push(r):(s=h?r.from:e(r.from,n),l=u?r.to:e(r.to,n),i(s,l,r,a))}return a}}),i("LineMapLayer",["require","./utils/BaseUtils","./utils/ColorUtils","./Constants","./dom/Browser"],function(t){function e(t,e,i,n){if(!d[t]){var r=document.createElement("canvas");r.style.width=e+"px",r.style.height=i+"px",r.width=e*n,r.height=i*n;var a=r.getContext("2d");a.scale(n,n),d[t]=a}return d[t]}function i(t){if(f[t])return f[t];var e=new Image;return e.crossOrigin="Anonymous",e.onload=function(){f[t]=e},e.src=t,!1}function n(t,n,r,a,o){var s=l*Math.max(n,r),h=e(t,s,s,a),u=null;return(u=i(t))?(h.clearRect(0,0,s,s),h.translate(s/2,s/2),h.rotate(o),h.drawImage(u,-n/2,-r/2,n,r),h.rotate(-o),h.translate(-s/2,-s/2),h.getImageData(0,0,s*a,s*a)):null}function r(t,e,i){function r(t){return b=t,this}function s(){return b=[],this}function d(t){f(!0,t)}function f(e,n){var r=b.length;if(r&&b[0]&&b[0].series.large){b[0].refreshPointColor();var a=o.mixColorWithAlpha(b[0].color,b[0].opacity)}b.map(function(s){var l=s.series,d=l.large,f=s.visible&&l.visible,m=s.graphic,y=s.from.lnglat[0],_=s.from.lnglat[1],x=s.to.lnglat[0],b=s.to.lnglat[1];if(y!==x||_!==b){var T=i.latLngToContainerPoint([_,y]),A=i.latLngToContainerPoint([b,x]);if(s.ax=T.x,s.ay=T.y,s.bx=A.x,s.by=A.y,0===s.curveness&&(s.curveness=.01),f)if(d)t.ctx.globalCompositeOperation="lighter",s._color=a;else{var L=s.opacity;n&&(L*=s.series.name==n||s._rangeItem==n?1:.3),s._color=o.mixColorWithAlpha(s.color,L)}if(f&&!m){var C,P;if(s.graphic=t.arc(),s.graphic.point=s,C=g(s.graphic,s),!e&&!d&&l.animation&&s.lineWidth&&(s.graphic.style.endAngle=C[3],P=s.graphic.animate().duration(u).ease(c).tween("endAngle",C[4])),h&&!d&&f&&s.effect&&s.effect.enabled){var M=l.points.indexOf(s);
    P?P.end(v.bind(this,s,r,M)):v(s,r,M)}}else f&&m?g(s.graphic,s):!f&&m&&(s.graphic.needToRemove=!0,s.graphic=null,p(s))}})}function p(t){t._effect&&(t._effect.stop(),t._effect=null),t._symbol&&(t._symbol.map(function(t){t.needToRemove=!0}),t._symbol=null)}function g(t,e){var i=a.computeArc(e.ax,e.ay,e.bx,e.by,e.curveness);return t.setStyle({ox:i[0],oy:i[1],r:i[2],startAngle:i[3],endAngle:i[4],lineWidth:e.lineWidth,color:e._color}),i}function m(){e.clearAll()}function v(t,i,n){if(t.graphic){var r=t.effect.period||2e3;t._effect=e.animation.animate(t.graphic.style).delay(r/5*n/i).duration(r).tween("track",function(e){return y(e,t)}).end(v.bind(this,t,i,n))}}function y(t,e){var i=t.startAngle,n=t.endAngle,r=(n-i)/3,a=n-i+r,o=e.effect;if(o.symbol){var s=o.symbol,l=o.width,h=o.height,u=window.devicePixelRatio||1;return function(i){e._symbol&&(e._symbol[0].needToRemove=!0),e._symbol=_(a*i,t.ox,t.oy,t.r,t.startAngle,t.endAngle,r,s,l,h,u)}}var c=1.4,d=1.5;return function(i){e._symbol&&e._symbol.map(function(t){t.needToRemove=!0}),e._symbol=x(a*i,t.ox,t.oy,t.r,t.startAngle,t.endAngle,r,d,c,e.color)}}function _(t,i,r,a,o,s,h,u,c,d,f){var p=t-h+o;if(!(t+o>s)){var g=h+p,m=a*Math.cos(g)+i,v=a*Math.sin(g)+r,y=null;if(y=n(u,c,d,f,Math.PI+g)){var _=l*Math.max(c,d);return[e.image({imagedata:y,dx:(m-_/2)*f,dy:(v-_/2)*f})]}}}function x(t,i,n,r,a,o,s,l,h,u){for(var c=t>s?0:s-t,d=o>t+a?s:s-(t+a-o),f=t-s+a,p=[],g=d;g>c;g-=h/r){var m=g+f,v=r*Math.cos(m)+i,y=r*Math.sin(m)+n,_=g/s;p.push(e.circle({ox:v,oy:y,r:_*l,strokeStyle:"rgba(0, 0, 0, 0)",fillStyle:u}))}return p}var b=[];return{data:r,clear:s,draw:f,redraw:d,stop:m,removeEffect:p}}var a=t("./utils/BaseUtils"),o=t("./utils/ColorUtils"),s=(t("./Constants").LINE_MAP,t("./dom/Browser").touch),l=Math.SQRT2,h=a.isSupportSVG(),u=800,c="ease-in-out-quad",d={},f={};window.L&&(L.LineMapLayer=(L.Layer?L.Layer:L.Class).extend({options:{mainRenderer:null,animationRenderer:null,vanchart:null},initialize:function(t){L.setOptions(this,t)},setData:function(t){return this._pairs=t,this._draw()},addData:function(t){return this._pairs.push(t),this._draw()},setOptions:function(t){return L.setOptions(this,t),this._lineMap&&this._updateOptions(),this._draw()},redraw:function(){return this._lineMap.redraw(this.options.vanchart.highlightTarget),this.options.mainRenderer.flush(),this},removeEffect:function(t){this._lineMap&&this._lineMap.removeEffect(t)},onAdd:function(t){this._map=t,this._lineMap||this._initRenderer(),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),t.on(this._events,this),this._reset()},onRemove:function(t){this.options.pane?(this.getPane().removeChild(this._canvas),this.getPane().removeChild(this._animCanvas)):(t.getPanes().overlayPane.removeChild(this._canvas),t.getPanes().overlayPane.removeChild(this._animCanvas)),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this),t.off(this._events,this)},addTo:function(t){return t.addLayer(this),this},_initRenderer:function(){var t=this._canvas=this.options.mainRenderer.dom,e=this._animCanvas=this.options.animationRenderer.dom,i=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[i]=e.style[i]="50% 50%";var n=this._map.options.zoomAnimation&&L.Browser.any3d,a="leaflet-zoom-"+(n?"animated":"hide"),o="leaflet-linemap-layer leaflet-layer ";L.DomUtil.addClass(t,o+a),L.DomUtil.addClass(e,o+a),this._lineMap=r(this.options.mainRenderer,this.options.animationRenderer,this._map)},_updateOptions:function(){},_reset:function(){this._lineMap.stop();var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t),L.DomUtil.setPosition(this._animCanvas,t),this._draw()},_draw:function(){return this._map&&this._pairs&&this._pairs.length?(this._lineMap.data(this._pairs).draw(),void this.options.mainRenderer.flush()):void this.options.mainRenderer.flush()},_animateZoom:function(t){this._lineMap.stop();var e=this._map.getZoomScale(t.zoom),i=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());if(L.DomUtil.setTransform)L.DomUtil.setTransform(this._canvas,i,e),L.DomUtil.setTransform(this._animCanvas,i,e);else{var n=L.DomUtil.getTranslateString(i)+" scale("+e+")";this._canvas.style[L.DomUtil.TRANSFORM]=n,this._animCanvas.style[L.DomUtil.TRANSFORM]=n}},_click:function(t){s&&this._mousemove(t);var e=this.hoverPoint;e&&e.onClick&&e.onClick(t.originalEvent)},_mousemove:function(t){for(var e,i,n=this.options.mainRenderer,r=this.options.vanchart,o=this,s=n.elements,l=n.elements.length,h=a.getMousePos(t,n.dom);e=s[--l];)if(e.contain(h)){i=e;break}var u=i&&i.point,c=u&&u.series.large;u?(r.showTooltip(u,t),n.dom.parentElement.style.cursor="pointer",u.mouseOverColor&&!c&&u!==o.hoverPoint&&(i.style.color=i.point.mouseOverColor)):(r.hoverPoint||r.hideTooltip(),n.dom.parentElement.style.cursor=""),c||o.hoverPoint==u||(o.hoverPoint&&(o.hoverPoint.graphic.style.color=o.hoverPoint._color),o.hoverPoint=u,n.flush())},_events:{click:function(t){this._click(t)},mousemove:function(t){this._mousemove(t)}}}),L.lineMapLayer=function(t){return new L.LineMapLayer(t)})}),i("chart/LineMap",["require","../Constants","../utils/BaseUtils","../utils/QueryUtils","../ComponentLibrary","./Series","../utils/Formatter","../LineMapDataNormalizer","../LineMapLayer","../ChartLibrary"],function(t){var e=t("../Constants"),i=t("../utils/BaseUtils"),n=t("../utils/QueryUtils"),r=t("../ComponentLibrary"),a=t("./Series"),o=t("../utils/Formatter"),s=t("../LineMapDataNormalizer"),l=(t("../LineMapLayer"),"{SERIES}"),h="{VALUE}",u="{PERCENT}",c="{FROM.NAME}",d="{TO.NAME}",f=6,p=Math.PI,g=a.extend({_loadData:function(t){var e=this.vanchart.getComponent(r.GEO_COMPONENT);return s(t,e)},_refresh:function(){},_refreshPoint:function(t,e){var i=t.series.vanchart;i.getComponent(r.GEO_COMPONENT);t.lineWidth=n.queryList(e,"lineWidth"),t.curveness=n.queryList(e,"curveness"),t.from=t.options.from,t.to=t.options.to},getTargetKey:function(){return"value"},_getPointKey:function(t){return t.from.lnglat.join()+t.to.lnglat.join()},_getFixedPos:function(t,e){var n=i.computeArc(t.ax,t.ay,t.bx,t.by,t.curveness),r=(n[3]+n[4])/2;r%=2*p;var a=n[2]+f,o=a*Math.cos(r)+n[0],s=a*Math.sin(r)+n[1];return p/2>=r||(p>=r?o-=e.width:1.5*p>=r?(o-=e.width,s-=e.height):s-=e.height),[o,s]},_calculateTooltipContent:function(t){var e=t.tooltip,n=this;if(e&&e.enabled){var r=e.formatter,a="";if("object"==typeof r){var o=e.style,s=r.identifier;a+=n._createCategoryLine(t,s,o,r),a+=n._createSeriesLine(t,s,o,r)}else a=i.getFormatterFunction(r).call(t);return a}},_createCategoryLine:function(t,e,n,r){var a="";if(-1!=e.indexOf(l)){var s=o.format(t.seriesName,r.seriesFormat);a+=(n?"<span >":i.TOOLTIP_SERIES_STYLE)+s+"</span>",a+="<br />"}return a},_createSeriesLine:function(t,e,n,r){var a="",s=function(t){return-1!==e.indexOf(t)},l=[];s(c)&&t.from.name&&l.push(t.from.name),s(d)&&t.to.name&&l.push(t.to.name),l.length&&(a+=(n?"<span>":i.TOOLTIP_SERIES_STYLE)+l.join("\u2192")+"</span>&nbsp;");var f=[];if(s(h)){var p=o.format(t[this.getTargetKey()],r.valueFormat);p&&f.push(p)}if(s(u)){var g=o.format(t.percentage,r.percentFormat);g&&f.push(g)}return f.length&&(a+=(n?"<span>":i.TOOLTIP_VALUE_STYLE)+f.join("&nbsp;&nbsp;")+"</span>"),a},remove:function(){this.points.map(function(t){t.remove()}),this.points=[]}});return t("../ChartLibrary").register(e.LINE_MAP,g),g}),i("component/BaseAxis",["require","../Constants","../utils/BaseUtils","../utils/QueryUtils","../utils/Formatter","../ComponentLibrary","../utils/BoundsManager","./Base","../utils/BezierEasing"],function(t){var e,i,n=t("../Constants"),r=t("../utils/BaseUtils"),a=(t("../utils/QueryUtils"),t("../utils/Formatter"),t("../ComponentLibrary")),o=(t("../utils/BoundsManager"),t("./Base")),s=t("../utils/BezierEasing"),l=400,h=s.css.swing,u=function(){return null==e&&(e=r.paddingConvertWithScale("0.1875rem")),e},c=5,d=function(){return null==i&&(i=r.paddingConvertWithScale("0.3125rem")),i},f=5,p=4,g=100,m=5,v="main",y="minor",_=15,x=o.extend({labelRotation:0,_refresh:function(){this.series=[],this.isRangePoints=!0,this.animation=this.vanchart.isSupportAnimation(),this.piece=null,this.forecast=[0,0],this._zoomDomain=this._dataDomain=this._domain=this._tickStart=this._step=0,this.initScale();var t=this.options,e=t.title;r.convertToREMUseDefault16PX(t.labelStyle),r.convertToREMUseDefault16PX(e&&e.style),t.tickPadding=isNaN(t.tickPadding)?6:t.tickPadding,t.tickLength=t.enableTick?isNaN(t.tickLength)?4:t.tickLength:0,t.minorTickLength=t.enableMinorTick?isNaN(t.minorTickLength)?2:t.minorTickLength:0},_calculateSize:function(t){var e=this.options;this.tickLabelLength=this._getTickLabelLength(t);var i=this._getAxisTitleLength();i+=i>0?d():0;var n=this.tickLabelLength+i,r=this.isHorizontal(),a=this.vanchart.isInverted();if(r){var o=a?e.maxWidth:e.maxHeight;n=o?Math.min(this._maxHeight(o),n):n}else{var o=a?e.maxHeight:e.maxWidth;n=o?Math.min(this._maxWidth(o),n):n}this._size=Math.round(n)},_recordAxisSize:function(){this.isOnZero()||(this.vanchart.axisSize[this.getPosition()]+=this._size)},calculateDomainFromData:function(t){if(!t){var e=this.series;if(this.byPercent=!1,!this._isBaseAxis())for(var i=0,n=e.length;n>i&&!this.byPercent;i++)this.byPercent=e[i].stackByPercent;t=this._getDomainFromData()}this._dataDomain=t;var r=this.vanchart.getComponent(a.ZOOM_COMPONENT),o=this._zoomDomain||r&&r.getZoomInitDomain(this);if(this._isBaseAxis()&&o){var s=parseFloat(o[0]),l=parseFloat(o[1]);if(!isNaN(s)&&!isNaN(l)){var h=s;s=Math.min(s,l),l=Math.max(h,l)}this._calculateNiceDomain(this._dataDomain[0],this._dataDomain[1],isNaN(s)?null:s,isNaN(l)?null:l)}else{var u=this.options;this._calculateNiceDomain(this._dataDomain[0],this._dataDomain[1],u.min,u.max)}this._calculateDateFormat&&this._calculateDateFormat()},_calculateNiceDomain:function(t,e,i,n){var r=this.options;return r.log?this._calculateLogNiceDomain(t,e,i,n):this.byPercent?this._calculatePercentValueDomain(t,e,i,n):this._calculateValueNiceDomain(t,e,i,n)},calculateDomainFromZoom:function(){var t=this._zoomDomain,e=this.options;if(this._isBaseAxis())this._calculateNiceDomain(this._dataDomain[0],this._dataDomain[1],t[0],t[1]);else{var i=r.hasDefined(e.min)?Math.max(e.min,t[0]):t[0],n=r.hasDefined(e.max)?Math.min(e.max,t[1]):t[1];if(i>n)return;var o=this.type==a.VALUE_AXIS_COMPONENT&&r.hasNotDefined(e.min),s=this.isLog()?1:0;i=o?Math.min(s,i):i,this._calculateNiceDomain(t[0],t[1],i,n)}},isCategory:function(){return this.type==a.CATEGORY_AXIS_COMPONENT},zoomRefresh:function(t){this._zoomDomain=t,this.calculateDomainFromZoom()},axisZoom:function(t,e){var i,n,o=this.type==a.DATE_AXIS_COMPONENT,s=o?1e3:1e-11,l=this.vanchart.getPlotBounds();this.isHorizontal()?(i=Math.min(t[0],e[0])-l.x,n=Math.max(t[0],e[0])-l.x,i=Math.max(i,0),n=Math.min(n,l.width)):(i=Math.min(t[1],e[1])-l.y,n=Math.max(t[1],e[1])-l.y,i=Math.max(i,0),n=Math.min(n,l.height));var h=this.scale.invert(i),u=this.scale.invert(n);o&&(h=r.date2int(h),u=r.date2int(u)),Math.abs(h-u)<s||this.zoomRefresh([Math.min(h,u),Math.max(h,u)])},getAxisValue:function(t){return t},getTrendLineForecast:function(t){if(t.trendLine&&t.trendLine.period&&2===t.trendLine.period.length){var e=t.trendLine.period;this.forecast[0]=Math.min(0,e[0]),this.forecast[1]=Math.max(0,e[1])}},_getStartAndEndTick:function(){return this._domain},updateClipBounds:function(t){var e,i,r,a,o=this.isHorizontal(),s=this.isAxisReversed(),l=this.options;if(this.options.showLabel){var h=this._getStartAndEndTick(),u=this._getTickDim(this._getTickContent(h[0],l.formatter)),c=this._getTickDim(this._getTickContent(h[1],l.formatter));s?(r=c,a=u):(r=u,a=c),e=o?r.width:r.height,i=o?a.width:a.height,e=Math.round(e/2)+m,i=Math.round(i/2)+m,this.showArrow()&&(i=Math.max(i,_))}else e=0,i=this.showArrow()?_:0;var d=this.vanchart.getPlotBounds();if(o){var f=this.vanchart.axisSize,p=d.x+f.left+m,g=f.right+m;if(this.isCategory()&&!this.isRangePoints){var v=this._zoomDomain||this._dataDomain,y=(d.width-f.left-f.right)/v.length;p+=Math.round(y/2),g+=Math.round(y/2)}this.options.labelRotation<=-15?e=Math.round(2*(e-m)):this.options.labelRotation>=15&&(i=Math.round(2*(i-m))),e=Math.max(e-p,0)+m,i=Math.max(i-g,0)+m,t[n.LEFT]=Math.max(t[n.LEFT]||0,e),t[n.RIGHT]=Math.max(t[n.RIGHT]||0,i)}else t[n.TOP]=Math.max(t[n.TOP]||0,i),t[n.BOTTOM]=Math.max(t[n.BOTTOM]||0,e)},updateAxisSizeAndBounds:function(){this._setComponentBounds(this.getPosition(),this._size)},fixScaleAndTickData:function(){this.scale.domain(this._domain).rangeRound(this._getRange()),this._updateOriginTickData(),this._calculateTickPosAndStep()},dealOnZero:function(){var t=this.options;if(t.onZero){var e=t.onZero===!0?0:t.onZero,i=this.componentType==a.X_AXIS_COMPONENT?a.Y_AXIS_COMPONENT:a.X_AXIS_COMPONENT;i=this.vanchart.getComponent(i).getAxis(e);var r,o,s,l,h=i.getZeroPos(),u=this.vanchart.getPlotBounds();this.isHorizontal()?(r=u.x,o=h+u.y-(this.getPosition()==n.TOP?this.bounds.height:0),s=u.width,l=this.bounds.height):(r=h+u.x-(this.getPosition()==n.LEFT?this.bounds.width:0),o=u.y,s=this.bounds.width,l=u.height),this.bounds={x:r,y:o,width:s,height:l}}},_getTickLabelLength:function(t){var e=this.options,i=0,n=0,r=this.isHorizontal();if(e.showLabel&&(i=isNaN(+e.tickPadding)?u():e.tickPadding),e.enableTick&&(i+=isNaN(+e.tickLength)?c:e.tickLength),t)t.forEach(function(t){var e=t.tickDim;n=Math.max(n,r?e.height:e.width)});else for(var a=this._getTickValues(),o=0,s=a.length;s>o;o++){var l=this._getTickDim(this._getTickContent(a[o],e.formatter));n=Math.max(r?l.height:l.width,n)}return i+(e.showLabel?n:0)},_getTickDim:function(t){var e=this.options,i=e.useHtml,n=e.labelRotation||0,a=e.labelStyle||{};return r.getTextDimensionWithRotation(t,a,i,n)},_updateOriginTickData:function(){var t=this._getTickValues(),e=this.options,i=e.formatter,n=e.useHtml;isNaN(e.labelRotation)?e.autoRotate?this.labelRotation=this.getLabelAutoRotation(t,e,i):this.labelRotation=0:this.labelRotation=e.labelRotation,this.tickData=[];for(var o=e.labelStyle||{},s=r.extend({writingMode:"tb-rl","writing-mode":"tb-rl","-webkit-writing-mode":n?"vertical-rl":""},o),l=0,h=t.length;h>l;l++){var u=t[l],c=this._getTickContent(u,i);this.type===a.CATEGORY_AXIS_COMPONENT&&(c=c.trim());var d,f,p=o,g=this.labelRotation;90===Math.abs(g)&&r.hasChn(c)&&(g=360,p=s),d=r.getTextDimension(c,p,n),f=r.getTextDimRotated(d,g),n&&(f.width=isNaN(parseFloat(e.labelWidth))?f.width:parseFloat(e.labelWidth),f.height=isNaN(parseFloat(e.labelHeight))?f.height:parseFloat(e.labelHeight)),this.tickData.push({tickValue:u,tickContent:c,tickDim:f,tickRectDim:d,labelRotation:g})}},_isBaseAxis:function(){return this.series.length?this.componentType==this.series[0].getBaseAxisType():!1},getLabelAutoRotation:function(){return 0},_getAxisTitleLength:function(){var t=this.options.title,e=0;if(t){var i,n;this.titleRotation=t.rotation,r.hasChn(t.text)&&90===Math.abs(t.rotation)&&(this.titleRotation=360,r.extend(t.style,{writingMode:"tb-rl","writing-mode":"tb-rl","-webkit-writing-mode":t.useHtml?"vertical-rl":""})),i=r.getTextDimension(t.text,t.style,t.useHtml),n=r.getTextDimRotated(i,this.titleRotation),this.titleRectDim=i,this.titleDim=n,e=this.isHorizontal()?n.height:n.width}return e},getAxisTitleBounds:function(){var t=this.bounds,e=this.tickLabelLength+d(),i=this.getPosition(),r=t.x,a=t.y,o=t.width,s=t.height;switch(i){case n.LEFT:o-=e;break;case n.BOTTOM:a+=e,s-=e;break;case n.RIGHT:r+=e,o-=e;break;case n.TOP:s-=e}return{x:r,y:a,width:Math.max(o,0),height:Math.max(s,0)}},getTickLength:function(){var t=this.scale.range();return Math.abs(t[0]-t[1])/Math.max(this.tickData.length,1)},adjustDomain4Radius:function(){if(this.type===a.VALUE_AXIS_COMPONENT||this.type===a.DATE_AXIS_COMPONENT){var t=this._domain,e=this.type==a.DATE_AXIS_COMPONENT,i=this._getRange(),o=this._dataDomain,s=Math.max((t[0]+"").length,(t[1]+"").length);e&&(t=[r.int2date(t[0]),r.int2date(t[1])]);var l=this.scale.domain(t).range(i),h=this,u=this._isBaseAxis(),c=this.componentType===a.X_AXIS_COMPONENT?"x":"y",d=Number.MAX_VALUE,f=-Number.MAX_VALUE;if(this.series.map(function(t){if(t.visible&&((t.type===n.BUBBLE_CHART||t.type===n.SCATTER_CHART)&&t.points.map(function(t){var e=l(h.getAxisValue(t[c],t));if(!t.isNull&&!isNaN(e)){var i=r.pick(t.radius,t.marker&&t.marker.radius);d=Math.min(d,e-i),f=Math.max(f,e+i)}}),u&&(t.type===n.COLUMN_CHART||t.type===n.BAR_CHART||t.type===n.LINE_CHART||t.type===n.AREA_CHART))){var e=t.points;if(!e.length)return;var i,a=l(o[0]),s=l(o[1]),p=Math.min(a,s),g=Math.max(a,s);i=t.type===n.COLUMN_CHART||t.type===n.BAR_CHART?t.getSeriesOffsetAndWidth().width/2:e[0].marker&&e[0].marker.radius||1,isNaN(p)||(d=Math.min(d,p-i)),isNaN(g)||(f=Math.max(f,g+i))}}),d===Number.MAX_VALUE||f===-Number.MAX_VALUE)return;var p=l.invert(d),g=l.invert(f);e&&(p=r.date2int(p),g=r.date2int(g)),this.calculateDomainFromData([Math.min(Math.min(p,g),o[0]),Math.max(Math.max(p,g),o[1])]);var m=Math.max((this._domain[0]+"").length,(this._domain[1]+"").length);if(m>s)return!0}},_getRange:function(){return this._getPlotRange()},_getPlotRange:function(){var t=this.vanchart.getPlotBounds();return this.isHorizontal()?this.isAxisReversed()?[t.width,0]:[0,t.width]:this.isAxisReversed()?[0,t.height]:[t.height,0]},_getPlotBands:function(){var t=this.options.plotBands,e=this.scale,i=!(!e.rangeBand||!e.rangeBand());if("string"==typeof t){var n=t;t=[];for(var a=this._getTickValuesWithEndValue(),o=i?-1:0,s=a.length-1;s>o;s-=2)t.push({color:n,from:i?a[s]:a[s-1],to:a[s]})}else{t=t||[];for(var l=[],h=0,u=t.length;u>h;h++){var c=t[h];r.hasDefined(c.from)&&r.hasDefined(c.to)&&l.push(c)}t=l}return t},_getTickValuesWithEndValue:function(){var t=this._getTickValues(),e=this._domain[1],i=this.type==a.DATE_AXIS_COMPONENT;if(t.length){var n=t[t.length-1];i?r.date2int(n)<e&&t.push(r.int2date(e)):e>n&&t.push(e)}return t},getTickData:function(){return this.tickData},getMinorTickData:function(){var t=[],e=this.options,i=this._step;if(this.options.enableMinorTick&&this.tickData.length)if(this.type==a.CATEGORY_AXIS_COMPONENT){var n=Math.round(this.getTickLength()/5),o=this.tickData.length;o=this.isRangePoints?o-1:o;for(var s=0;o>s;s++)for(var l=this.tickData[s].tickPos,h=1;5>h;h++)t.push(l+n*h)}else{for(var u=e.minorTickInterval?e.minorTickInterval:i/5,s=0,c=this.tickData.length;c-1>s;s++){var d=this.tickData[s].tickValue,f=this.tickData[s+1].tickValue,p=d instanceof Date&&f instanceof Date;d=p?r.date2int(d):d,f=p?r.date2int(f):f;for(var g=r.accAdd(d,u);f>g;g=r.accAdd(g,u))t.push(p?r.int2date(g):g)}var m=this.tickData[this.tickData.length-1].tickValue,v=this.scale.domain()[1],p=m instanceof Date&&v instanceof Date;if(m=p?r.date2int(m):m,v=p?r.date2int(v):v,v>m)for(var g=m+u;v>=g;g+=u)t.push(p?r.int2date(g):g);var y=this.tickData[0].tickValue,_=this.scale.domain()[0];if(p=y instanceof Date&&_ instanceof Date,y=p?r.date2int(y):y,_=p?r.date2int(_):_,y>_)for(g=y-u;g>=_;g-=u)t.push(p?r.int2date(g):g)}return t},getMaxTickWidth:function(){var t=0;return this.tickData.forEach(function(e){t=Math.max(t,e.tickDim.width)}),t},getTickHeight:function(){return this.options.labelStyle&&this.options.showLabel?r.getTextHeight(this.options.labelStyle):0},_calculateTickPosAndStep:function(){var t=this.options,e=this.scale,i=this.getTickLength(),n=e.rangeBand?e.rangeBand()/2:0;if(this.tickData.forEach(function(t){t.tickPos=e(t.tickValue),t.tickLabelPos=t.tickPos+n}),t.showLabel)if(t.step){var a=0;this.tickData.forEach(function(e){a++%t.step&&(e.tickContent="")})}else{var o,s=this.isHorizontal(),l=1,h=1,u=Math.abs(Math.abs(this.labelRotation)-(s?0:90)),c=u>=15&&90!==u;o=r.toRadian(u);var d,f,p,g,m=-1,v=Math.sin(o);this.tickData.forEach(function(t){if(""!==t.tickContent)if(c)g=t.tickRectDim.height,f=Math.abs(t.tickPos-d),p=(g+m)/2,f*v>p||-1===m?(l=1,d=t.tickPos,m=g):(l++,h=Math.max(h,l));else{var e=s?t.tickDim.width:t.tickDim.height;i&&(h=Math.max(h,Math.ceil(e/i)))}});var a=0;this.tickData.forEach(function(t){a++%h&&(t.tickContent="")})}else this.tickData.forEach(function(t){t.tickContent=""})},_getAxisOriginPoint:function(){var t,e,i=this.bounds,r=this.getPosition();switch(r){case n.TOP:t=i.x,e=i.y+i.height;break;case n.BOTTOM:t=i.x,e=i.y;break;case n.LEFT:t=i.x+i.width,e=i.y;break;case n.RIGHT:t=i.x,e=i.y}return{x:t,y:e}},getPosition:function(){var t=this.componentType==a.X_AXIS_COMPONENT?"bottom":"left",e=this.options.position||t;if(!this.vanchart.isInverted())return e;switch(e){case n.TOP:return n.RIGHT;case n.RIGHT:return n.BOTTOM;case n.BOTTOM:return n.LEFT;case n.LEFT:return n.TOP}},isAxisReversed:function(){return this.componentType===a.X_AXIS_COMPONENT&&this.vanchart.isInverted()?!this.options.reversed:this.options.reversed},isOnZero:function(){return this.options.onZero},getLineWidth:function(){return this.options.lineWidth},showArrow:function(){return this.options.showArrow},getTitleAlign:function(){var t=this.options.title;if(!t)return null;if(this.vanchart.isInverted())switch(t.align){case n.TOP:return n.RIGHT;case n.RIGHT:return n.BOTTOM;case n.BOTTOM:return n.LEFT;case n.LEFT:return n.TOP}return this.isHorizontal()?t.align||n.LEFT:t.align||n.TOP},_calculateLogNiceDomain:function(t,e,i,n){var a=this.options,o=a.log,s=parseInt(r.pick(a.tickInterval,1));t=t>=1?1:t,t=0>=t?1:t,t=r.pick(i,t),e=r.pick(n,e),t=Math.pow(o,Math.floor(r.log(o,t))),e=Math.pow(o,Math.ceil(r.log(o,e))),this._domain=[t,e],this._tickStart=t,this._step=s},_calculatePercentValueDomain:function(t,e,i,n){var a=this.options,o=r.pick(i,0),s=r.pick(n,1),l=r.pick(a.tickInterval,.25);this._domain=[o,s],this._tickStart=o,this._step=l},_calculateValueNiceDomain:function(t,e,i,n){var o=this.type==a.VALUE_AXIS_COMPONENT&&!this._isBaseAxis(),s=this.options;o&&(t>0?t=0:0>e&&(e=0)),t=r.hasDefined(i)?i:t,e=r.hasDefined(n)?n:e,t>=e&&(e=t+g*(this.type===a.DATE_AXIS_COMPONENT?1e3:1));var l=s.tickInterval||this._linearTickInterval(t,e),h=this._linearNiceDomain(t,e,l);t=r.hasDefined(i)?i:h[0],e=r.hasDefined(n)?n:h[1],t>=e&&(e=t+g*(this.type===a.DATE_AXIS_COMPONENT?1e3:1));var u=h[0];if(r.hasDefined(i)){var c=r.accMul(Math.ceil(r.accDiv(r.accAdd(i,-u),l)),l);u=r.accAdd(u,c)}this._domain=[t,e],this._tickStart=u,this._step=l},_linearTickInterval:function(t,e,i){i=i||this._getDefaultTickCount();var n=e-t,r=Math.pow(10,Math.floor(Math.log(n/i)/Math.LN10)),o=i/n*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),this.type===a.DATE_AXIS_COMPONENT&&(r=Math.max(r,1e3)),r},_linearNiceDomain:function(t,e,i){return t=r.accMul(Math.floor(t/i),i),e=r.accMul(Math.ceil(e/i),i),[t,e]},_getDefaultTickCount:function(){return this.vanchart.options.chartType==n.RADAR_CHART?p:f},getIndexByPosition:function(t){var e,i=this.getPlotBounds(),n=this.scale,o=n(this.isAxisReversed()?n.domain()[n.domain().length-1]:n.domain()[0]);e=this.isHorizontal()?t[0]-i.x-o:t[1]-i.y-o;var s;switch(this.type){case a.DATE_AXIS_COMPONENT:s=r.date2int(n.invert(e));break;default:s=n.invert(e)}return s=Math.round(s)},_valueInDomain:function(){return!0},render:function(){this.lastScale=this.scale&&this.scale.copy();var t=this.vanchart,e=t.renderer;this.axisGroup||(this.axisGroup=e.group().add(),e.clip(this.clipAxisGroup=e.group().add(),t.plotClip));var i=this.bounds,n={x:i.x,y:i.y,width:i.width,height:i.height};this.isHorizontal()?(n.x=0,n.width=t.width):(n.y=0,n.height=t.height),this.axisGroupClip?e.updateClip(this.axisGroupClip,n):(this.axisGroupClip=e.createClip(n),e.clip(this.axisGroup,this.axisGroupClip)),this.axisLineGroup||(this.axisLineGroup=e.group().add()),0!==this.series.length&&(this._drawPlotBands(),this._drawGridLine(),this._drawTickLine(),this._drawTickLabel(),this._drawPlotLines(),this._drawAxisTitle())},isLog:function(){return this.options.log},getZeroPos:function(){switch(this.type){case a.VALUE_AXIS_COMPONENT:return this.isLog()?this.scale(1):this.scale(0);case a.DATE_AXIS_COMPONENT:return this.scale(r.int2date(0));case a.CATEGORY_AXIS_COMPONENT:return 0}},renderSpecial:function(){if(0===this.series.length||!this.options.lineWidth)return this.axisLine&&this.axisLine.remove(),this.arrowGroup&&this.arrowGroup.remove(),void(this.axisLine=this.arrowGroup=null);var t=this.vanchart;t.renderer;this._drawAxisLine()},_drawPlotBands:function(){var t,e,i,n,a,o=this._getPlotBands(),s=this.scale,u=s.rangeBand,c=u?s.rangeBand():0,d=this.vanchart.renderer,f=this.animation,p=this.vanchart.getPlotBounds(),g=this,m=g.isHorizontal(),v=0,y=0,_=p.width,x=p.height;for(this.plotBandsGroup||(this.plotBandsGroup=d.group().addTo(this.clipAxisGroup),this.plotBands=[]),this.plotBandsGroup.attr({transform:r.makeTranslate(p)}),t=o.length;t<this.plotBands.length;t++)this.plotBands[t]&&this.plotBands[t].remove(),this.plotBands[t]=null;for(this.plotBands.length=o.length,t=0,e=o.length;e>t;t++){var b=o[t],T=s(b.from),A=s(b.to);i=Math.min(T,A),n=Math.max(T+c,A+c),i=Math.max(m?v:y,i),n=Math.min(m?_:x,n),a=m?{x:i,y:y,width:Math.max(n-i,0),height:x}:{x:v,y:i,width:_,height:Math.max(n-i,0)},this.plotBands[t]=this.plotBands[t]||d.rect(a).addTo(this.plotBandsGroup),f?(this.plotBands[t].style({fill:b.color}),d3.select(this.plotBands[t].rawElement).transition().duration(l).ease(h).attr("x",a.x).attr("y",a.y).attr("width",a.width).attr("height",a.height)):this.plotBands[t].attr(a).style({fill:b.color})}},_drawAxisLine:function(){var t=this.options,e=t.lineWidth,i=t.lineColor,n=this.getPlotBounds(),a=this._getAxisOriginPoint(),o="x1",s="y1",l="x2",h="y2",u=n.width,c=this.vanchart.renderer;this.isHorizontal()||(o="y1",s="x1",l="y2",h="x2",u=n.height);var d=r.lineSubPixelOpt(0,e);this.axisLine||(this.axisLine=c.line().addTo(this.axisLineGroup));var f={};if(f[o]=0,f[l]=u,f[s]=f[h]=d,f.transform=r.makeTranslate(a),this.axisLine.attr(f).style({stroke:i,"stroke-width":e}),this.showArrow()){this.arrowGroup||(this.arrowGroup=c.group().addTo(this.axisLineGroup));var p=this.arrowGroup.line||c.line().addTo(this.arrowGroup),g=this.arrowGroup.path||c.path().addTo(this.arrowGroup);this.arrowGroup.line=p,this.arrowGroup.path=g,this.isHorizontal()?(this.arrowGroup.attr("transform",r.makeTranslate([a.x+n.width,a.y])),p.attr({x1:0,y1:d,x2:6,y2:d}).style({stroke:i,"stroke-width":e}),g.attr({d:"M2,-4 L10,0 L2,4 L6,0 L2,-4"}).style({fill:i})):(this.arrowGroup.attr("transform",r.makeTranslate(a)),p.attr({x1:d,y1:0,x2:d,y2:-6}).style({stroke:i,"stroke-width":e}),g.attr({d:"M-4,-2 L0,-10 L4,-2 L0,-6 L-4,-2"}).style({fill:i}))}else this.arrowGroup&&this.arrowGroup.remove()},_drawGridLine:function(){var t=this.options,e=this.getPlotBounds(),i=this.animation,o=this.getTickData(),s=this.scale,u=this.lastScale||s,c=t.gridLineColor,d=t.gridLineWidth;0===d&&(c="");var f=r.lineSubPixelOpt(0,d),p=this.vanchart.renderer,g="x1",m="y1",v="x2",y="y2",_=e.height;this.isHorizontal()||(g="y1",m="x1",v="y2",y="x2",_=e.width),this.gridLinesGroup||(this.gridLinesGroup=p.group().addTo(this.axisLineGroup),this.gridLines=[]),this.gridLinesGroup.attr("transform",r.makeTranslate(e));for(var x=this.type==a.CATEGORY_AXIS_COMPONENT?[{tickPos:this.getPosition()==n.BOTTOM?e.width:e.height-1}]:[],b=this._bindData(this.gridLines,o.concat(x),function(t){return t.tickValue}),T=[],A=0,L=b.exit.length;L>A;A++)if(i){var C=b.exit[A].datum(),P=s(C.tickValue);d3.select(b.exit[A].rawElement).transition().duration(l).ease(h).style("opacity",0).attr(g,P).attr(v,P).remove()}else b.exit[A]&&b.exit[A].remove();for(var A=0,L=b.enter.length;L>A;A++){var C=b.enter[A],M=p.line().style({stroke:c,"stroke-width":d}).addTo(this.gridLinesGroup),E=u(C.tickValue)+f,P=C.tickPos+f;E=isNaN(E)?P:E,M.attr(g,E).attr(v,E).attr(m,0).attr(y,_),i?d3.select(M.rawElement).transition().duration(l).ease(h).attr(g,P).attr(v,P).attr(m,0).attr(y,_):M.attr(g,P).attr(v,P).attr(m,0).attr(y,_),M.datum(C),T.push(M)}T=T.concat(b.update);for(var A=0,L=T.length;L>A;A++){var M=T[A].style({stroke:c,"stroke-width":d}),C=M.datum(),P=C.tickPos+f;i?d3.select(M.rawElement).transition().duration(l).ease(h).attr(g,P).attr(m,0).attr(v,P).attr(y,_):M.attr(g,P).attr(v,P).attr(m,0).attr(y,_)}this.gridLines=T},_drawTickLine:function(){function t(t,e,n){var o,s,l=m._bindData(t,e),h=[];for(o=0,s=l.exit.length;s>o;o++)l.exit[o].remove();for(o=0,s=l.enter.length;s>o;o++)h.push(g.line().datum(l.enter[o]).addTo(m.tickLinesGroup));for(h=h.concat(l.update),o=0,s=h.length;s>o;o++){var u,c=h[o].datum(),d={};u=r.hasDefined(c.tickPos)?c.tickPos:m.type==a.CATEGORY_AXIS_COMPONENT?c:m.scale(c);var f=i.x,p=i.y;m.isHorizontal()||(f=i.y,p=i.x),d[_]=u+n.det+f,d[b]=d[_],d[x]=p,d[T]=(A*n.tickLength||0)+p,h[o].attr(d).style({stroke:n.tickColor,"stroke-width":n.tickWidth})}return h}var e=this.options,i=this._getAxisOriginPoint(),o=this.getPosition(),s=this.getTickData(),l=e.enableTick?e.tickLength||0:0,h=e.tickWidth||1,u=e.tickColor,c=this.getMinorTickData(),d=e.enableMinorTick?e.minorTickLength||0:0,f=e.minorTickColor,p=e.minorTickWidth||1,g=this.vanchart.renderer,m=this,_="x1",x="y1",b="x2",T="y2";this.isHorizontal()||(_="y1",x="x1",b="y2",T="x2");var A=o==n.TOP||o==n.LEFT?-1:1,L=r.lineSubPixelOpt(0,h),C=r.lineSubPixelOpt(0,p);this.tickLinesGroup||(this.tickLinesGroup=g.group().addTo(this.axisGroup),this.tickLines={},this.tickLines[v]=[],this.tickLines[y]=[]),this.tickLines[v]=t(this.tickLines[v],s,{det:L,tickWidth:h,tickLength:l,tickColor:u}),this.tickLines[y]=t(this.tickLines[y],c,{det:C,tickWidth:p,tickLength:d,tickColor:f})},_drawPlotLines:function(){function t(t){return{stroke:t.color,"stroke-width":t.width,"stroke-dasharray":t.dataArray}}function e(t){return f.text().textContent(t.text).style(t.style).attr({x:t.textX,y:t.textY,"text-anchor":"left",dy:.85*t.textDim.height})}function i(t,i){i._textG&&(i._textG.remove(),i._textG=null),t.text&&t.textDim&&(i._textG=e(t).addTo(i))}var o=this.options.plotLines||[],s=(this.getPosition(),this.vanchart.getPlotBounds()),l=this.scale,h=this.type==a.DATE_AXIS_COMPONENT,c=[],d=this,f=this.vanchart.renderer;o.forEach(function(t){if(!r.isEmpty(t.value)){var e,i,a,o,f=l(h?r.object2date(t.value):t.value)+(l.rangeBand?l.rangeBand()/2:0),p=r.lineSubPixelOpt(f,t.width);if(d.isHorizontal()){if(0>f||f>s.width)return;e=i=p,a=0,o=s.height}else{if(0>f||f>s.height)return;e=0,i=s.width,a=o=p}var g,m,v,y;if(t.label&&t.label.text&&t.label.style){y=t.label.style,v=t.label.text;var _=t.label.align,x=r.getTextDimension(v,y,t.label.useHtml);switch(_){case n.TOP:g=e-x.width,m=a;break;case n.BOTTOM:g=e-x.width,m=o-x.height;break;case n.LEFT:g=e,m=a-x.height-u();break;case n.RIGHT:g=i-x.width,m=o-x.height-u()}}c.push({color:t.color,line:{x1:e,y1:a,x2:i,y2:o},width:t.width,dataArray:n.DASH_TYPE[t.dashStyle],text:v,textDim:x,style:y,textX:g,textY:m})}}),this.plotLinesGroup||(this.plotLinesGroup=f.group().addTo(this.axisLineGroup),this.plotLines=[]),this.plotLinesGroup.attr("transform",r.makeTranslate(s));var p,g,m=this._bindData(this.plotLines,c);for(this.plotLines=[],p=0,g=m.exit.length;g>p;p++)m.exit[p].remove();for(p=0,g=m.enter.length;g>p;p++){var v=m.enter[p],y=f.group();this.plotLines.push(y),y._lineG=y.append(f.line(v.line).style(t(v))),i(v,y),y.addTo(this.plotLinesGroup)}for(p=0,g=m.update.length;g>p;p++){var y=m.update[p],v=y.datum();y._lineG.attr(v.line).style(t(v)),i(v,y),this.plotLines.push(y)}},_drawTickLabel:function(){this._drawSvgTickLabel()},_drawSvgTickLabel:function(){var t=this,e=this.vanchart,i=e.renderer,n=this.scale,r=this.lastScale||n,a=this.options,o=a.labelStyle,s=this.animation,u=a.useHtml,c=this.getTickData().filter(function(t){return""!==t.tickContent});this.tickLabelsGroup||(this.tickLabelsGroup=i.vgroup().add(),this.axisGroup.append(this.tickLabelsGroup.renderG),this.tickLabels=[]);var d,f,p=this._bindData(this.tickLabels,c,function(t){return t.tickValue}),g=[];for(d=0,f=p.exit.length;f>d;d++)if(s){var m=p.exit[d].datum(),v=n(m.tickValue);d3.select(p.exit[d].rawElement).transition().duration(l).ease(h).style("opacity",0).attr(t.isHorizontal()?"x":"y",v).remove()}else p.exit[d]&&p.exit[d].remove();for(d=0,f=p.enter.length;f>d;d++){var m=p.enter[d],y=this._getLabelAttr(r,m),_=this.tickLabelsGroup.append(i.vtext(u).textContent(m.tickContent).style({
    opacity:0})),x=m.labelRotation%360?_.vRotate(m.labelRotation,!0).rotateStr:"";y.transform+=x,_.attr(y),_.datum(m),g.push(_)}for(g=g.concat(p.update),d=0,f=g.length;f>d;d++){var _=g[d],m=_.datum();_.textContent(m.tickContent).style(o);var y=this._getLabelAttr(n,m),b=this._valueInDomain(m.tickValue)?1:0;if(s&&!u){var x=m.labelRotation%360?_.vRotate(m.labelRotation,!0).rotateStr:"";y.transform+=x,d3.select(_.node()).transition().duration(l).ease(h).attr(y).style({opacity:b})}else _.attr(y).style({opacity:b}),_.vRotate(m.labelRotation)}this.tickLabels=g},_getLabelAttr:function(t,e){var i,a,o=this._getAxisOriginPoint(),s=t.rangeBand?t.rangeBand()/2:0,l=t(e.tickValue)+s,h=this.options,u=this.isHorizontal(),c=h.enableTick?h.tickLength:0,d=h.tickPadding+c||0,f=e.labelRotation||0,p=(h.labelStyle,h.useHtml),g=this.getPosition(),m=g==n.TOP||g==n.LEFT?-1:1,v=e.tickRectDim,y=e.tickDim,_=0,x=0,b=0,T=.85*v.height,A=r.toRadian(f);360===f&&(b=p||r.isMS?0:.85*v.width/2,T=0,a="tb-rl"),u?(i=Math.abs(f%90)<15?0:f>0?1:-1,x+=m*(y.height-v.height)/2,_+=m*i*(y.width-Math.abs(v.height*Math.sin(A)))/2,g===n.TOP&&(x-=v.height),x+=m*d,_+=o.x+l-v.width/2,x+=o.y):(i=Math.abs(f%90)>85?0:f>0?1:-1,_+=m*(y.width-v.width)/2,x+=m*i*(y.height-v.height*Math.cos(A))/2,g===n.LEFT&&(_-=v.width),_+=m*d,_+=o.x,x+=o.y+l-v.height/2);var L=p?"px":"",C="translate("+_+L+" "+x+L+")",P={transform:C,dy:T,dx:b,writingMode:a,"writing-mode":a};return p&&a&&(P["-webkit-writing-mode"]="vertical-rl"),P},_drawAxisTitle:function(){var t=this.options,e=t.title;if(!e||!e.text)return this.titleGroup&&this.titleGroup.remove(),void(this.titleGroup=null);var i=this.vanchart.renderer,a=this.axisGroup,o=e.useHtml,s=this.titleRotation,l=this.getTitleAlign(),h=e.text,u=e.style,c=this.titleDim,d=this.titleRectDim,f=this.getAxisTitleBounds();this.titleGroup||(this.titleGroup=i.vgroup().add(),a.append(this.titleGroup.renderG)),this.titleGroup.attr({transform:r.makeTranslate(f)});var p=this.titleGroup;p.text||(p.text=p.append(i.vtext(o)));var g=0,m=0,v=0,y=.85*d.height;switch(l){case n.TOP:m=0;break;case n.BOTTOM:m=f.height-c.height;break;case n.LEFT:g=0;break;case n.RIGHT:g=f.width-c.width;break;case n.CENTER:default:this.isHorizontal()?g=(f.width-c.width)/2:m=(f.height-c.height)/2}360===this.titleRotation?(v=o||r.isMS?0:.85*d.width/2,y=0):(g+=(c.width-d.width)/2,m+=(c.height-d.height)/2),p.text.textContent(h).attr({x:g,y:m,dy:y,dx:v}).style(u),s%360&&p.text.vRotate(s)},remove:function(){this.axisGroup&&this.axisGroup.remove(),this.clipAxisGroup&&this.clipAxisGroup.remove(),this.axisGroup=this.clipAxisGroup=null,this.axisLineGroup&&this.axisLineGroup.remove(),this.axisLineGroup=null,this.tickLabelsGroup&&this.tickLabelsGroup.remove(),this.tickLabelsGroup=null}});return x}),i("component/CategoryAxis",["require","./Base","./BaseAxis","../utils/BaseUtils","../Constants","../ComponentLibrary"],function(t){var e,i=(t("./Base"),t("./BaseAxis")),n=t("../utils/BaseUtils"),r=t("../Constants"),a=t("../ComponentLibrary"),o=function(){return null==e&&(e=n.paddingConvertWithScale("0.1875rem")),e},s=i.extend({type:a.CATEGORY_AXIS_COMPONENT,initScale:function(){this.lastScale=this.scale,this.scale=d3.scale.ordinal()},calculateDomainFromData:function(){this._dataDomain=this._getDomainFromData();var t=this.vanchart.getComponent(a.ZOOM_COMPONENT);this._zoomDomain=this._zoomDomain||t&&t.getZoomDomain(this),this._domain=this._zoomDomain||this._dataDomain},calculateDomainFromZoom:function(){this._domain=this._zoomDomain},_getStartAndEndTick:function(){return[this._domain[0],this._domain[this._domain.length-1]]},_getDomainFromData:function(){var t=this.options,e=this.series,i=this,n={},a=t.categories||[];return a.forEach(function(t){n[t]=!0}),e.forEach(function(t){var e=t.type==r.BAR_CHART?"y":"x";this.getTrendLineForecast(t);for(var o=0,s=t.points.length;s>o;o++){var l=t.points[o][e];n[l]||(n[l]=!0,a.push(l))}t.type!==r.AREA_CHART&&(i.isRangePoints=!1)},this),this.addTrendLineCategories(a)},setCategories:function(t){var e=this._dataDomain;this._dataDomain=this.addTrendLineCategories(t);var i=this.vanchart.getComponent(a.ZOOM_COMPONENT);if(this._isBaseAxis()&&i&&i.zoomToolEnabled()){i.updateRangeLeftAndRight(this,e,t);var n=i&&i.getZoomDomain(this);this._zoomDomain=n,this.calculateDomainFromZoom()}else this._domain=this._dataDomain,this._zoomDomain=null;this.fixScaleAndTickData()},addTrendLineCategories:function(t){function e(t,e){return Array.apply(null,Array(t)).map(e)}if(this.forecast&&(this.forecast[0]||this.forecast[1])){var i=0;t=e(-this.forecast[0],function(){return Array(2+i++).join(" ")}).concat(t).concat(e(this.forecast[1],function(){return Array(2+i++).join(" ")}))}return t},getOriginalCategories:function(){return this.forecast&&(this.forecast[0]||this.forecast[1])?this._dataDomain.slice(-this.forecast[0],this._dataDomain.length-this.forecast[1]):this._dataDomain},updateAxisSizeAndBounds:function(){this._updateOriginTickData(),this._calculateSize(this.tickData),this._setComponentBounds(this.getPosition(),this._size)},_getTickValuesWithEndValue:function(){return this._getTickValues()},fixScaleAndTickData:function(){this.scale.domain(this._dataDomain),this.isRangePoints?this.scale.rangePoints(this._getRange()):this.scale.rangeBands(this._getRange()),this._updateOriginTickData(),this._calculateTickPosAndStep()},_getRange:function(){var t=this._getPlotRange();if(this._dataDomain.length==this._domain.length)return t;var e,i=Math.abs(t[1]-t[0]);e=this.isRangePoints?i/Math.max(this._domain.length-1,1):i/this._domain.length;var r=n.indexInArray(this._dataDomain,this._domain[0]),a=this._dataDomain.length-n.indexInArray(this._dataDomain,this._domain[this._domain.length-1])-1;if(!(this.isAxisReversed()^this.isHorizontal())){var o=r;r=a,a=o}var s=-r*e,l=i+a*e;return this.isHorizontal()?this.isAxisReversed()?[l,s]:[s,l]:this.isAxisReversed()?[s,l]:[l,s]},getLabelAutoRotation:function(t,e,i){if(e.autoRotate&&!e.labelRotation){var r,a,s=this.vanchart.isInverted(),l=t.reduce(function(t,e){return n.getTextDimension(t).width>n.getTextDimension(e).width?t:e}),h=this._getTickContent(l,i),u=n.getTextDimensionWithRotation(h,e.labelStyle,e.useHtml,e.labelRotation),c=Math.max.apply(null,this._getPlotRange())/this._domain.length-o();s?(r=u.height,a=u.width):(r=u.width,a=u.height);var d=Math.sqrt(r*r+a*a);if(a>c)return-90;if(r>c){var f=Math.acos(c/d),p=Math.atan(a/r),g=f+p;return-n.toDegree(g)}}},getCategoryCount:function(){return this._dataDomain.length},indexOfLabel:function(t){return n.indexInArray(this._dataDomain,t)},getTickLength:function(){var t=this.scale.domain(),e=this.scale.rangeExtent(),i=Math.abs(e[1]-e[0]);return this.isRangePoints&&t.length<=1?i:this.isRangePoints?i/(t.length-1):this.scale.rangeBand()},_getTickValues:function(){return this._domain},getCategories:function(){return this._dataDomain},axisZoom:function(t,e){var i,r,a=this.vanchart.getPlotBounds();this.isHorizontal()?(i=Math.min(t[0],e[0])-a.x,r=Math.max(t[0],e[0])-a.x):(i=Math.min(t[1],e[1])-a.y,r=Math.max(t[1],e[1])-a.y);var o=this.scale.domain(),s=this._getRange(),l=d3.scale.quantize().domain(s).range(o),h=n.indexInArray(this._dataDomain,l(i)),u=n.indexInArray(this._dataDomain,l(r));this.zoomRefresh(this._dataDomain.slice(Math.min(h,u),Math.max(h,u)+1))},getIndexByPosition:function(t){return this._getIndexByXYCoordinate(t)},_getIndexByXYCoordinate:function(t){var e,i=this.getPlotBounds(),n=this.scale,r=this.isHorizontal(),a=this.isAxisReversed()^!r,o=n(a?n.domain()[n.domain().length-1]:n.domain()[0]);e=r?t[0]-i.x-o:t[1]-i.y-o;var s,l=this.getCategories();if(l.length>1){var h=Math.abs(n(n.domain()[1])-n(n.domain()[0]));s=a?l.length-1-e/h:e/h}else s=0;return s=this.isRangePoints?Math.round(s):a?Math.ceil(s):Math.floor(s)},getPointsInCategory:function(t){var e=this.vanchart.getPlotBounds(),i=this.scale.domain(),n=this._getRange(),r=d3.scale.quantize().domain(n).range(i),a=r(this.isHorizontal()?t[0]-e.x:t[1]-e.y);return this.vanchart.getValidPointsPara(a)},drawHighlightBackground:function(t){var e=t[0].category,i="line";t.map(function(t){var e=t.series;(e.type===r.BAR_CHART||e.type===r.COLUMN_CHART)&&(i="band")});var a=this.getPlotBounds(),o=this.isHorizontal(),s=this.scale,l=s.rangeBand?s.rangeBand():0,h=s(e),u=h+l,c=this.vanchart.renderer,d="x",f="y",p="width",g="height",m=a.height,v="x1",y="x2",_="y1",x="y2";switch(o||(d="y",f="x",p="height",g="width",m=a.width,v="y1",y="y2",_="x1",x="x2"),i){case"band":this.highlightBand||(this.highlightBand=c.rect().style({fill:"rgb(98,179,240)","fill-opacity":.2}).addTo(this.clipAxisGroup)),this.highlightBand.attr("transform",n.makeTranslate(a)).attr(d,h).attr(f,0).attr(p,Math.abs(h-u)).attr(g,m),this.highlightLine&&this.highlightLine.remove(),this.highlightLine=null;break;case"line":default:l&&(h=(h+u)/2),this.highlightLine||(this.highlightLine=c.line().style({stroke:"rgb(140,140,140)","stroke-width":1}).addTo(this.clipAxisGroup)),this.highlightLine.attr("transform",n.makeTranslate(a)).attr(v,h).attr(_,0).attr(y,h).attr(x,m),this.highlightBand&&this.highlightBand.remove(),this.highlightBand=null}},removeHighlightBackground:function(){this.highlightBand&&this.highlightBand.remove(),this.highlightLine&&this.highlightLine.remove(),this.highlightBand=null,this.highlightLine=null}});return a.register(a.CATEGORY_AXIS_COMPONENT,s),s}),i("component/ValueAxis",["require","./Base","./BaseAxis","../utils/BaseUtils","../utils/QueryUtils","../Constants","../ComponentLibrary"],function(t){var e=(t("./Base"),t("./BaseAxis")),i=t("../utils/BaseUtils"),n=(t("../utils/QueryUtils"),t("../Constants"),t("../ComponentLibrary")),r=e.extend({type:n.VALUE_AXIS_COMPONENT,initScale:function(){this.lastScale=this.scale,this.scale=this.options.log?d3.scale.log().base(this.options.log):d3.scale.linear()},getAxisValue:function(t,e){return this.byPercent?e.percentage:+t},_valueInDomain:function(t){var e=this.scale.domain();return t>=Math.min(e[0],e[1])&&t<=Math.max(e[0],e[1])},_getDomainFromData:function(){for(var t=Number.MAX_VALUE,e=-t,i=!0,n=this.series,r={},a=!1,o=0,s=n.length;s>o&&!a;o++)a=n[o].visible;for(var o=0,s=n.length;s>o;o++)(n[o].visible||!a)&&(this._getSeriesValue(r,n[o]),this.getTrendLineForecast(n[o]));var l=0;for(var h in r){var u=r[h];l=u[1]-u[0]||0;for(var c=0,d=u.length;d>c;c++)isNaN(u[c])||this.options.log&&u[c]<=0||(t=Math.min(t,u[c]),e=Math.max(e,u[c]),i=!1)}return this._isBaseAxis()&&l&&this.forecast&&(t+=l*this.forecast[0],e+=l*this.forecast[1]),i&&(t=0,e=100),[t,e]},_getSeriesValue:function(t,e){var r=e.name||"",a=this.componentType==n.X_AXIS_COMPONENT?"x":"y";if(i.hasNotDefined(e.stack)||this._isBaseAxis())t[r]=t[r]||[],e.points.forEach(function(e){!e.isNull&&e.visible&&t[r].push(e[a])});else{var o=e.stack+e.type+"STACK_POSITIVE",s=e.stack+e.type+"STACK_NEGATIVE";t[o]=t[o]||[],t[s]=t[s]||[],e.points.forEach(function(e,i){if(!e.isNull&&e.visible){var n=+e[a];n>0?null!=t[o][i]&&void 0!=t[o][i]?t[o][i]+=n:t[o][i]=n:null!=t[s][i]&&void 0!=t[s][i]?t[s][i]+=n:t[s][i]=n}})}},getValueFromData:function(t){var e=this.componentType==n.X_AXIS_COMPONENT?0:1,r=this.componentType==n.X_AXIS_COMPONENT?"x":"y",a=i.isArray(t)?t[e]:t[r];return a=i.pick(a,t),a=+a,isNaN(a)?"-":a},getStartPos:function(){return this.scale(this.getStartPosValue())},getStartPosValue:function(){var t=this.options;return t.log&&1!==t.log?1:0},_getTickValues:function(){var t=[];if(this.options.log)for(var e,n=0;(e=this._tickStart*Math.pow(this.options.log,n))<=this._domain[1];)t.push(e),n+=this._step;else for(var r=this._tickStart;r<=this._domain[1];r=i.accAdd(r,this._step))t.push(r);return t}});return n.register(n.VALUE_AXIS_COMPONENT,r),r}),i("component/DateAxis",["require","./Base","./BaseAxis","../utils/BaseUtils","../Constants","../utils/Formatter","../ComponentLibrary"],function(t){var e=(t("./Base"),t("./BaseAxis")),i=t("../utils/BaseUtils"),n=(t("../Constants"),t("../utils/Formatter")),r=t("../ComponentLibrary"),a=1e3,o=60*a,s=60*o,l=24*s,h=31*l,u=12*h,c=e.extend({type:r.DATE_AXIS_COMPONENT,getAxisValue:function(t){return i.object2date(t)},fixScaleAndTickData:function(){var t=[i.int2date(this._domain[0]),i.int2date(this._domain[1])];this.scale.domain(t).rangeRound(this._getRange()),this._calculateDateFormat(),this._updateOriginTickData(),this._calculateTickPosAndStep()},_calculateDateFormat:function(){var t=this._step,e="Dyyyy";a>=t?e="Dss":o>=t?e="Dmm:ss":s>=t?e="Dhh:mm":l>=t?e="Ddd-hh":h>=t?e="DMM-dd":u>=t&&(e="Dyyyy-MM"),this.dateFormat=e},_getTickContent:function(t,e){function i(t){return window.FR&&window.FR.contentFormat(t,r)||t}var r=this.dateFormat;return e=e||i,n.format(t,e)},initScale:function(){this.lastScale=this.scale,this.scale=d3.time.scale()},_getStartAndEndTick:function(){return[i.int2date(this._domain[0]),i.int2date(this._domain[1])]},_getTickValues:function(){for(var t=[],e=this._tickStart;e<=this._domain[1];e=i.accAdd(e,this._step))t.push(i.int2date(e));return t},_valueInDomain:function(t){var e=this.scale.domain();return t>=Math.min(e[0],e[1])&&t<=Math.max(e[0],e[1])},_getDomainFromData:function(){for(var t=Math.ceil(Number.MAX_VALUE),e=-t,n=this.series,r=!1,a=0,o=0,s=n.length;s>o;o++){var l=n[o],h=l[this.componentType];if(h==this&&l.visible){this.getTrendLineForecast(n[o]);var u=l.points;u.length>1&&(a=this.getValueFromData(u[1])-this.getValueFromData(u[0])||0);for(var o=0,s=u.length;s>o;o++){var c=this.getValueFromData(u[o]);c.getTime&&(r=!0,c=i.date2int(c),t=Math.min(t,c),e=Math.max(e,c))}}}return this._isBaseAxis()&&a&&this.forecast&&(t+=a*this.forecast[0],e+=a*this.forecast[1]),r||(t=e=(new Date).getTime()),e=t>=e?t+1e3:e,[t,e]},getValueFromData:function(t){var e=this.componentType==r.X_AXIS_COMPONENT?0:1,n=this.componentType==r.X_AXIS_COMPONENT?"x":"y",a=i.isArray(t)?t[e]:t[n];return i.object2date(a)}});return r.register(r.DATE_AXIS_COMPONENT,c),c}),i("component/Axis",["require","./Base","../utils/BaseUtils","../Constants","../ComponentLibrary","./CategoryAxis","./ValueAxis","./DateAxis"],function(t){var e=t("./Base"),i=t("../utils/BaseUtils"),n=t("../Constants"),r=t("../ComponentLibrary"),a=t("./CategoryAxis"),o=t("./ValueAxis"),s=t("./DateAxis"),l=e.extend({_refresh:function(){this._axisList=this._axisList||[];var t=this.options;t=i.isArray(t)?t:[t];for(var e=t.length,n=e;n<this._axisList.length;n++)this._axisList[n].remove(),this._axisList[n]=null;this._axisList.length=e;for(var n=e-1;n>=0;n--)if(t[n].axisIndex=n,this._axisList[n]&&this._axisList[n].type!=t[n].type&&(this._axisList[n].remove(),this._axisList[n]=null),this._axisList[n])this._axisList[n].refresh(t[n]);else{var l,h=t[n].type||r.VALUE_AXIS_COMPONENT;h==r.VALUE_AXIS_COMPONENT?l=o:h==r.CATEGORY_AXIS_COMPONENT?l=a:h==r.DATE_AXIS_COMPONENT&&(l=s),this._axisList[n]=new l(t[n],this.componentType,this.vanchart)}},doLayout:function(){for(var t=this._axisList.length,e=t-1;e>=0;e--)this._axisList[e].calculateDomainFromData(),this._axisList[e]._calculateSize(),this._axisList[e]._recordAxisSize()},reCalculateSize:function(){for(var t=this._axisList.length,e=t-1;e>=0;e--)this._axisList[e]._calculateSize(),this._axisList[e]._recordAxisSize()},updateAxisClip:function(){for(var t={},e=this._axisList.length,i=e-1;i>=0;i--)this._axisList[i].updateClipBounds(t);this._recordForPlotBounds(n.LEFT,t[n.LEFT]||0),this._recordForPlotBounds(n.RIGHT,t[n.RIGHT]||0),this._recordForPlotBounds(n.TOP,t[n.TOP]||0),this._recordForPlotBounds(n.BOTTOM,t[n.BOTTOM]||0)},updateAxisSizeAndBounds:function(){for(var t=this._axisList.length,e=t-1;e>=0;e--)this._axisList[e].updateAxisSizeAndBounds()},adjustDomain4Radius:function(){for(var t=!1,e=this._axisList.length,i=e-1;i>=0;i--)t=this._axisList[i].adjustDomain4Radius()||t;return t},fixBoundsByPlot:function(){for(var t=this.vanchart.getPlotBounds(),e={},r=0,a=this._axisList.length;a>r;r++){var o=this._axisList[r],s=o.getPosition();o.isOnZero()?(h?o.bounds.width=t.width:o.bounds.height=t.height,o.fixScaleAndTickData()):(e[s]=e[s]||[],e[s].push(o))}for(var s in e)for(var l=e[s],h=s==n.TOP||s==n.BOTTOM,r=0,u=l.length;u>r;r++){var o=l[r],c=o.bounds,d=l[r-1]&&l[r-1].bounds||t;if(h){var f=s==n.TOP?d.y-c.height:d.y+d.height;o.bounds=i.makeBounds(d.x,f,d.width,c.height)}else{var p=s==n.LEFT?d.x-c.width:d.x+d.width;o.bounds=i.makeBounds(p,d.y,c.width,d.height)}o.fixScaleAndTickData()}},getAxis:function(t){return t>=this._axisList.length&&(t=0),this._axisList[t]},getAxisCount:function(){return this._axisList.length},axisZoom:function(t,e){this._axisList.forEach(function(i){i.axisZoom(t,e)})},dealOnZero:function(){this._axisList.forEach(function(t){t.dealOnZero()})},render:function(){for(var t=0,e=this._axisList.length;e>t;t++)this._axisList[t].render()},renderSpecial:function(){for(var t=0,e=this._axisList.length;e>t;t++)this._axisList[t].renderSpecial&&this._axisList[t].renderSpecial()}});return r.register(r.X_AXIS_COMPONENT,l),r.register(r.Y_AXIS_COMPONENT,l),l}),i("component/GaugeAxis",["require","../Constants","./Axis","../ComponentLibrary"],function(t){var e=(t("../Constants"),t("./Axis")),i=t("../ComponentLibrary"),n=e.extend({initAttributesWithSeries:function(){for(var t=this._axisList.length,e=t-1;e>=0;e--){var i=this._axisList[e];i.calculateDomainFromData(),i.scale.domain(i._domain),i._updateOriginTickData(),i.options.showLabel||i.tickData.forEach(function(t){t.tickContent=""})}},doLayout:function(){},render:function(){},renderSpecial:function(){}});return i.register(i.GAUGE_AXIS_COMPONENT,n),n}),i("component/LegendItem",["require","../dom/Evented","../Constants","../utils/BaseUtils","./LegendIconFactory","../ComponentLibrary"],function(t){var e,i=t("../dom/Evented"),n=t("../Constants"),r=t("../utils/BaseUtils"),a=t("./LegendIconFactory"),o=t("../ComponentLibrary"),s=function(){return null==e&&(e=r.paddingConvertWithScale("0.5rem")),e},l=i.extend({initialize:function(t,e){this.legendX=0,this.legendY=0,this.legend=t,this.refresh(e)},refresh:function(t){this.options=t,t.renderItem=this},render:function(){var t=this.legend,e=t.vanchart,i=e.renderer,o=t.options.style;this.graphic||(this.graphic=t.legendItemsGroup.append(i.group()),this.options.isTrendLine||this.graphic.style({cursor:"pointer"})),i.registerInteractiveTarget(this,this.graphic);var l=this.graphic,h=this.options,u=h.visible?h.color:h.hiddenColor,c=a.getLegendIconSize(h.legendIconType),d=r.getTextDimension(h.itemName,o,t.options.useHtml),f=Math.max(c.height,d.height);this.graphic.attr({transform:r.makeTranslate([this.legendX,Math.round(this.legendY+f/2)])}),a.hasIcon(h.legendIconType)?(l.image&&l.image.remove(),l.image=null,l.path=l.path||i.path().addTo(l),l.path.attr("d",a.getLegendIconPath(h.legendIconType)).attr("transform",r.makeTranslate([0,-c.height/2])).style({fill:u,"fill-opacity":h.opacity}),h.series.type==n.BUBBLE_CHART&&l.path.style("stroke",u).style("stroke-width",1)):(l.path&&l.path.remove(),l.path=null,l.image=l.image||i.image().addTo(l),l.image.attr({x:0,y:-c.height/2,width:12,height:12,preserveAspectRatio:"none"}).imageContent(h.legendIconType));var p=r.isSupportSVG()?{dy:"0.32em"}:{};l.text=l.text||l.append(i.vtext()),l.text.textContent(h.itemName||"").style("margin-top","-0.7em").attr(p).attr("x",c.width+s()).style({cursor:this.options.isTrendLine?"default":"pointer","white-space":"nowrap"}).style(r.extend(o,{fill:h.visible?o.color:h.hiddenColor}))},getEvents:function(){return this.options.isTrendLine?{}:{mouseover:this.onMouseOver,mouseout:this.onMouseOut,tap:this.onTap}},onMouseOver:function(){this.graphic&&this.graphic.text&&this.graphic.text.style({fill:this.options.hoverColor}),this.legend.options.highlight&&(this.legend.highlighted=!0,this.legend.vanchart.makeLegendHighlight(this.options.itemName))},onMouseOut:function(t){var e=this,i=e.legend,n=e.options,r=n.visible?i.options.style.color:n.hiddenColor;this.graphic&&this.graphic.text&&this.graphic.text.style({fill:r})},onTap:function(){for(var t=this.options.bindName,e=this.legend.vanchart,i=e.series,a={},s=0,l=i.length;l>s;s++){var h=i[s];if(h.isSeriesAccumulated()){var u="name";h.points.map(function(e){e[u]==t&&(e.visible=!e.visible)})}else h.name===t&&(h.visible=!h.visible,h.state=h.visible?n.STATE_TO_SHOW:n.STATE_TO_DROP,h._getAxisTypes().forEach(function(t){var e=h[t];!e||e._isBaseAxis()||a[r.stamp(e)]||(a[r.stamp(e)]=!0,e.calculateDomainFromData(),e.componentType===o.X_AXIS_COMPONENT||e.componentType===o.Y_AXIS_COMPONENT?e.adjustDomain4Radius():e.fixScaleAndTickData())}))}this.options.visible=!this.options.visible,this.options.pairLegendOpt&&(this.options.pairLegendOpt.visible=this.options.visible,this.options.pairLegendOpt.renderItem.render(),this.options.pairLegendOpt.renderItem.onMouseOut()),e.reRenderWholePlot()},remove:function(){this.graphic&&this.graphic.remove(),this.graphic=null}});return l}),i("component/Legend",["require","./Base","../utils/BaseUtils","../Constants","./LegendIconFactory","./LegendItem","../dom/Evented","../utils/BezierEasing","../ComponentLibrary"],function(t){var e,i,n,r,a=t("./Base"),o=t("../utils/BaseUtils"),s=t("../Constants"),l=t("./LegendIconFactory"),h=t("./LegendItem"),u=t("../dom/Evented"),c=t("../utils/BezierEasing"),d=t("../ComponentLibrary"),f=function(){return null==e&&(e=o.paddingConvertWithScale("0.312rem")),e},p=function(){return null==i&&(i=o.paddingConvertWithScale("0.5rem")),i},g=12,m=function(){return null==n&&(n=o.paddingConvertWithScale("0.25rem")),n},v=function(){return null==r&&(r=o.paddingConvertWithScale("1rem")),r},y="rgb(67,67,72)",_="rgb(204,204,204)",x=a.extend({doLayout:function(){return this.invisible()?void this.remove():(this.items=this.items||[],this.yPanEnabled=!1,this.xPanEnabled=!1,this.hasPages=!1,this._updateLegendItems(),void this._layoutLegendItemBounds())},_updateLegendItems:function(){var t,e,i=this.vanchart.series,n={},r={},a=this,o=this.vanchart,l=[];for(t=0,e=i.length;e>t;t++){var u=i[t],c=u.type;if(c!=s.GAUGE_CHART)if(u.isSeriesAccumulated()){var d="name";u.points.map(function(t){if(!n[t[d]]){var e={color:o.getDefaultSeriesColor(t[d]),opacity:t.opacity,bindName:t[d],itemName:t[d],visible:t.visible};a._mergeCommonLegendAttr(u,e),n[t[d]]=!0,l.push(e)}})}else{if(!n[u.name]){var f={color:u.color,opacity:u.opacity,bindName:u.name,itemName:u.name,visible:u.visible};a._mergeCommonLegendAttr(u,f),n[u.name]=f,l.push(f)}if(u.trendLine&&!r[u.name]){var f={isTrendLine:!0,color:u.trendLine.color,opacity:u.opacity,bindName:u.name,itemName:u.trendLine.name,visible:u.visible};a._mergeCommonLegendAttr(u,f),f.legendIconType=void 0,n[u.name].pairLegendOpt=f,f.pairLegendOpt=n[u.name],r[u.name]=f,l.push(f)}}}for(t=l.length,e=this.items.length;e>t;t++)this.items[t].remove(),this.items[t]=null;for(t=0,e=l.length;e>t;t++)this.items[t]?this.items[t].refresh(l[t]):this.items[t]=new h(a,l[t]);this.items.length=l.length},_mergeCommonLegendAttr:function(t,e){var i=this.options,n=i.hiddenColor,r=i.hoverColor||i.style.color;o.extend(e,{series:t,hiddenColor:n,hoverColor:r,legendIconType:this._getLegendType(t),lineIndex:0})},_layoutLegendItemBounds:function(){var t=this.options,e=t.position||s.RIGHT;if(this.items.length)if(e==s.TOP||e==s.BOTTOM){var i=this._layoutHorizontalLegendItemBounds(),n=i.height+2*f(),r=this._maxHeight();this.yPanEnabled=t.maxHeight&&n>r,this.maxYPan=-i.height+20,r=this.yPanEnabled?r:n,this._setComponentBounds(e,r);var a=this.bounds.x+f(),o=this.bounds.y+f(),l=this.bounds.height-2*f()+2*(this.options.borderWidth||0),h=this.bounds.width-2*f(),u=i.width-2*f();a+=(h-u)/2,this.yPanEnabled&&(o=this.bounds.y,l=this.bounds.height),this.bounds={x:a,y:o,width:u,height:l}}else{var c=0;if((e==s.RIGHT||e==s.RIGHT_TOP)&&!this.isFloat){var p=this.vanchart.getComponent(d.TOOLBAR_COMPONENT);p&&(c=37);var v=this.vanchart.getComponent(d.TITLE_COMPONENT);v&&v.bounds&&!v.isFloat&&(c-=v.bounds.height)}var i=this._layoutVerticalLegendItemBounds(),n=i.width+(this.isFloat?0:2*f()),y=this._maxWidth(),l=this.vanchart.getPlotBounds().height-(this.isFloat?0:2*f())-c;if(this.hasPages=i.height-m()>l,this.hasPages){l-=g+f(),this.pageIndex=this.pageIndex||0,this.translateMap=[0];for(var _=0,x=0,b=this.items.length;b>x;x++){var T=this.items[x].legendY;T-_>l&&(_=T-m(),this.translateMap.push(-T))}this.pageCount=this.translateMap.length,n=Math.max(n,this._getPageButtonWidth(this.pageCount))}this.yPanEnabled=this.hasPages,this.xPanEnabled=t.maxWidth&&n>y,this.maxYPan=-i.height+20,this.maxXPan=y-n,n=this.xPanEnabled?y:n,this._setComponentBounds(e,n);var a=this.bounds.x+(this.isFloat?0:f()),o=this.bounds.y+(this.isFloat?0:f()),h=this.bounds.width-(this.isFloat?0:2*f()),l=this.bounds.height-(this.isFloat?0:2*f())-c,A=Math.min(i.height,l);o=Math.max(c,o),this.isFloat||e==s.RIGHT_TOP||(o+=Math.round((l-A)/2)),this.bounds={x:a,y:o,width:h,height:A}}},_getPageButtonWidth:function(t){var e={fontFamily:this.options.style.fontFamily||"Verdana",fontSize:"14px"},i=t+"/"+t,n=(f(),o.getTextDimension(i,e,!1));return 2*g+n.width},_layoutVerticalLegendItemBounds:function(){for(var t=0,e=f(),i=this.options.borderWidth||0,n=0,r=this.items.length;r>n;n++){var a=this.items[n],s=a.options,h=o.getTextDimension(s.itemName,this.options.style,this.options.useHtml),u=l.getLegendIconSize(this.items[n].legendIconType);t=Math.max(h.width+p()+u.width,t),a.legendX=f()+i/2,a.legendY=e,e+=Math.max(h.height,u.height)+m()}return{width:2*f()+t,height:e+f()}},_layoutHorizontalLegendItemBounds:function(){for(var t=this.vanchart.getPlotBounds(),e=t.width-4*f(),i=f(),n=f(),r=i,a=[],s=[],h=0,u=0,c=this.items.length;c>u;u++){var d=this.items[u],g=d.options,m=l.getLegendIconSize(g.legendIconType),y=o.getTextDimension(g.itemName,this.options.style,this.options.useHtml),_=Math.min(m.width+p()+y.width,e-1);e>i+_?(d.legendX=i,d.legendY=n):(a.push({items:s,usedWidth:i}),h=0,i=f(),n+=Math.max(y.height,m.height),d.legendX=i,d.legendY=n,s=[]),s.push(d),h=Math.max(h,y.height),i+=_+v(),r=Math.max(i,r)}return a.push({items:s,usedWidth:i}),a.forEach(function(t){var e=t.usedWidth,i=t.items,n=Math.max((r-e)/2,0);i.forEach(function(t){t.legendX+=n})}),n+=h,{width:Math.round(r)+f(),height:Math.round(n)+f()}},render:function(){if(!this.invisible()&&this.items.length){var t=this.bounds,e=this,i=e.vanchart,n=i.renderer;this.legendGroup||(this.legendGroup=n.group().add(),this.backgroundGroup=n.group().addTo(this.legendGroup),this.clipGroup=n.group().addTo(this.legendGroup),this.legendItemsGroup=n.group().addTo(this.clipGroup),this.vanchart._leaflet&&this.legendGroup.style("pointer-events","all"),n.registerInteractiveTarget(this,this.legendGroup)),this.legendGroup.attr("transform",o.makeTranslate(t)),i._renderRectangleBackground(this.backgroundGroup,this.options,o.makeBounds(0,0,t.width,t.height));for(var r=0,a=this.items.length;a>r;r++)this.items[r].render();var s={x:0,y:0,width:t.width,height:t.height};this.hasPages?(s.height-=g,this.pageButton=this.pageButton||new b(e),this.pageButton.refresh()):this.pageButton&&(this.pageButton.remove(),this.pageButton=null),this.verticalClip?n.updateClip(this.verticalClip,s):(this.verticalClip=n.createClip(s),n.clip(this.clipGroup,this.verticalClip))}},getEvents:function(){return{mouseout:this.mouseOut,panstart:this.onPanStart,panmove:this.onPanMove,panend:this.onPanEnd}},mouseOut:function(){this.highlighted&&(this.highlighted=!1,this.vanchart.cancelLegendHighlight())},onPanStart:function(t){this.initPos=t.containerPoint;var e;if(o.isSupportSVG())e=d3.transform(d3.select(this.legendItemsGroup.node()).attr("transform")).translate;else{var i=this.legendItemsGroup.node().style;e=[parseFloat(i.left),parseFloat(i.top)]}this.initTranslateX=e[0],this.initTranslateY=e[1]},onPanMove:function(t){var e=0,i=0;if(this.xPanEnabled&&(e=t.containerPoint[0]-this.initPos[0]+this.initTranslateX,e=Math.max(this.maxXPan,Math.min(0,e))),this.yPanEnabled&&(i=t.containerPoint[1]-this.initPos[1]+this.initTranslateY,i=Math.max(this.maxYPan,Math.min(0,i))),this.hasPages&&this.pageButton){for(var n=this.translateMap.length-1,r=0,a=this.translateMap.length-1;a>r;r++){var s=this.translateMap[r],l=this.translateMap[r+1];s>=i&&i>l&&(n=r)}this.pageIndex!=n&&(this.pageIndex=n,this.pageButton.updatePage())}this.legendItemsGroup.attr("transform",o.makeTranslate([e,i]))},onPanEnd:function(){this.vanchart.handler.panTarget=null},remove:function(){this.legendGroup&&this.legendGroup.remove(),this.legendGroup=null,this.items&&(this.items.length=0)}}),b=u.extend({initialize:function(t){this.legend=t},refresh:function(){var t=this.legend,e=t.vanchart.renderer,i=t.bounds,n=t._getPageButtonWidth(t.pageCount),r=i.height,a=r-g,s=(i.width-n)/2;this.pageGroup||(this.pageGroup=e.group().addTo(t.legendGroup),e.registerInteractiveTarget(this,this.pageGroup),this.leftButton=e.path().style({cursor:"pointer"}).addTo(this.pageGroup),this.rightButton=e.path().style({cursor:"pointer"}).addTo(this.pageGroup),this.pageText=e.text().style({fontFamily:t.options.style.fontFamily||"Verdana",fontSize:"14px"}).addTo(this.pageGroup));var l=n-g,h=s+(n-l)/2,u=s+(n+l)/2,c=s+n/2;this.pageGroup.attr("transform",o.makeTranslate([0,a])),this.leftButton.attr("d",this._prePageButtonPath(h)),this.rightButton.attr("d",this._nextPageButtonPath(u)),this.pageText.attr({x:c,y:"-.14em",dy:".85em"}).attr("text-anchor","middle"),this.updatePage()},remove:function(){this.pageGroup&&(this.pageGroup.remove(),this.pageGroup=null)},updatePage:function(){var t=this.legend,e=t.pageIndex,i=t.pageCount;this.leftButton.style({fill:0>=e?_:y}),this.rightButton.style({fill:i-1>e?y:_});var n=e+1+"/"+i;this.pageText.textContent(n),this.pageText.vMiddle()},_prePageButtonPath:function(t){var e=12,i=0,n=t-e/2,r=e/2*Math.sqrt(3),a=t+e/2,o=r;return"M"+t+","+i+"L"+n+","+r+"L"+a+","+o+"Z"},_nextPageButtonPath:function(t){var e=12,i=0,n=t-e/2,r=i,a=t+e/2,o=i,s=t,l=e/2*Math.sqrt(3);return"M"+n+","+r+"L"+a+","+o+"L"+s+","+l+"Z"},onTap:function(t){var e=t.srcEvent,i=e.target||e.srcElement,n=this.legend;if(this.leftButton.node()==i){if(n.pageIndex<=0)return;n.pageIndex--}else if(this.rightButton.node()==i){if(n.pageIndex==n.pageCount-1)return;n.pageIndex++}var r=n.pageIndex,a=n.translateMap[r];this.legend.vanchart.isSupportAnimation()?d3.select(n.legendItemsGroup.rawElement).transition().duration(500).ease(c.css.swing).attr("transform","translate(0,"+a+")"):n.legendItemsGroup.attr("transform","translate(0,"+a+")"),this.updatePage()},getEvents:function(){return{tap:this.onTap}}});return d.register(d.LEGEND_COMPONENT,x),x}),i("component/Zoom",["require","./Base","../utils/BaseUtils","../Constants","../ComponentLibrary","../ComponentLibrary"],function(t){var e,i=t("./Base"),n=t("../utils/BaseUtils"),r=t("../Constants"),a=t("../ComponentLibrary"),o=30,s=10,l="none",h="left-to-right",u="right-to-left",c=function(){return null==e&&(e=n.paddingConvertWithScale("0.3125rem")),e},d=i.extend({_refresh:function(){this.rangeLeftTop=this.rangeRightBottom=null},doLayout:function(){if(this.byAxisType=this.vanchart.chartType()==r.BAR_CHART?"yAxis":"xAxis",this.byAxis=this.vanchart[this.byAxisType](),this.zoomToolEnabled()){var t=this.vanchart.getComponent(a.DATA_SHEET_COMPONENT),e=0,i=this.byAxis.getPosition();(t||i==r.TOP||i==r.RIGHT||this.byAxis.isOnZero())&&(e=c()),this._setComponentBounds(this.byAxis.isHorizontal()?r.BOTTOM:r.LEFT,o+e)}},fixBoundsByPlot:function(){if(this.zoomToolEnabled()){for(var t,e=this.vanchart.components[this.byAxisType],i=e.getAxisCount(),o=0;i>o;o++){var s=e.getAxis(o),l=s.getPosition();(l==r.BOTTOM||l==r.LEFT)&&(t=s)}t=t||this.byAxis,l=t.getPosition();var h=this.vanchart.getPlotBounds();if(t.isHorizontal()){var u,d=this.vanchart.getComponent(a.DATA_SHEET_COMPONENT);u=d?d.bounds.y+d.bounds.height+c():t.isOnZero()||l==r.TOP?h.y+h.height+c():t.bounds.y+t.bounds.height,this.bounds=n.makeBounds(h.x,u,h.width,this.bounds.height)}else{var f;f=t.isOnZero()||l==r.RIGHT?h.x-this.bounds.width:t.bounds.x-this.bounds.width,this.bounds=n.makeBounds(f,h.y,this.bounds.width,h.height)}}},getZoomInitDomain:function(t){var e=this.byAxis;if(this.zoomToolEnabled()&&e._isBaseAxis()&&t==e){var i=this.options.zoomTool;return i.from=n.hasDefined(i.from)&&""!==i.from?i.from:null,i.to=n.hasDefined(i.to)&&""!==i.to?i.to:null,
    [i.from,i.to]}},getZoomDomain:function(t){var e=this.byAxis,i=t.isCategory()?e._dataDomain:e._domain;if(this.zoomToolEnabled()&&e._isBaseAxis()&&t==e){var r=this.options.zoomTool;r.from=n.hasDefined(r.from)&&""!==r.from?r.from:null,r.to=n.hasDefined(r.to)&&""!==r.to?r.to:null;var a=n.pick(this.rangeLeftTop,r.from,i[0]),o=n.pick(this.rangeRightBottom,r.to,i[i.length-1]);return this._getValidDomain(a,o,i,e.isCategory())}},getMinAndMaxPos:function(){var t=this.getZoomDomain(this.byAxis),e=this.axisScale,i=e(t[0]),n=e(t[t.length-1]);return[Math.min(i,n),Math.max(i,n)+(e.rangeBand?e.rangeBand():0)]},updateRangeLeftAndRight:function(t,e,i){var r=n.indexInArray(e,this.rangeLeftTop),a=n.indexInArray(e,this.rangeRightBottom),o=i.slice(Math.min(r,a),Math.max(r,a)+1);t.isAxisReversed()^t.isHorizontal()?(this.rangeLeftTop=o[0],this.rangeRightBottom=o[o.length-1]):(this.rangeLeftTop=o[o.length-1],this.rangeRightBottom=o[0])},_getValidDomain:function(t,e,i,r){var a;if(r){var o=i.length-1,s=0;return t=n.indexInArray(i,t),e=n.indexInArray(i,e),t=Math.min(Math.max(t,s),o),e=Math.min(Math.max(e,s),o),t>e&&(a=e,e=t,t=a),i.slice(t,e+1)}return t=parseFloat(t),e=parseFloat(e),t>e&&(a=e,e=t,t=a),[t,e]},zoomToolEnabled:function(){var t=this.options;return this.vanchart.series.length&&t&&t.zoomTool&&t.zoomTool.enabled&&n.isSupportSVG()},_getAxisScale:function(){var t=this.byAxis,e=t.scale.copy();if(t.type==a.CATEGORY_AXIS_COMPONENT)e.rangeBand?e.rangeBands(t._getPlotRange()):e.range(t._getPlotRange());else{var i=t._dataDomain,r=this.getZoomDomain(t),o=Math.min(i[0],r[0]),s=Math.max(i[1],r[1]);t.type==a.DATE_AXIS_COMPONENT&&(o=n.int2date(o),s=n.int2date(s)),e.domain([o,s])}return e},render:function(){if(this.remove(),!this.zoomBarGroup&&this.zoomToolEnabled()){this.axisScale=this._getAxisScale();var t=this,e=t.bounds,i=t.vanchart,r=i.renderer,a=this.getMinAndMaxPos(),o=this.byAxis.isVertical(),s=a[0],l=a[1];this.zoomBarGroup||(this.zoomBarGroup=r.group().attr("transform",n.makeTranslate(e)).style("cursor",o?"ns-resize ":"ew-resize").add(),r.registerInteractiveTarget(this,this.zoomBarGroup)),this._createLines(),this.leftTopRect=this._createSideRect(o,s,!0),this.rightBottomRect=this._createSideRect(o,l,!1),this.centerRect=this._createCenterRect(o,s,l),this.leftTopButton=this._createButton(o,s,!0),this.rightBottomButton=this._createButton(o,l,!1);var h=this.leftTopButton.pos,u=this.rightBottomButton.pos;this.rangeLeftTop=this._getValueByPosition(h),this.rangeRightBottom=this._getValueByPosition(u)}},_createLines:function(){var t=this.axisScale,e=this.byAxisType,i=this.vanchart,n=i.renderer,r=(i.series,t.rangeBand?t.rangeBand()/2:0),a=i.cateMap,s=[],l=Number.MAX_VALUE,h=-Number.MAX_VALUE,u=this.byAxis.isHorizontal();for(var c in a){var d=a[c];if(d[0].series[e]){var f=0;d.forEach(function(t){f+=t.getTargetValue()})}d[0].isNull||s.push({x:t(c)+r,y:f}),l=Math.min(l,f),h=Math.max(h,f)}var p=u?[o,0]:[0,o],g=d3.scale.linear().domain([l,h]).range(p),m=d3.svg.line().interpolate("linear").x(function(t){return u?t.x:g(t.y)}).y(function(t){return u?g(t.y):t.x});s.sort(function(t,e){return t.x-e.x}),this._line=this._line||n.path().style({fill:"none",stroke:"black","stroke-width":1}),this._line.attr("d",m(s)).addTo(this.zoomBarGroup)},_createSideRect:function(t,e,i){var n=this.vanchart.renderer,r="x",a="y",s="width",l="height",h=this.bounds.width;t&&(r="y",a="x",s="height",l="width",h=this.bounds.height);var u,c;return i?(u=0,c=e):(u=e,c=Math.abs(h-u)),n.rect().attr(r,u).attr(a,0).attr(s,c).attr(l,o).style({fill:"rgba(220,221,221,0.4)"}).addTo(this.zoomBarGroup)},_createCenterRect:function(t,e,i){var n=this.vanchart.renderer,r="x",a="y",l="width",h="height";return t&&(r="y",a="x",l="height",h="width"),n.rect().attr(r,e+s).attr(a,0).attr(l,i-e-2*s).attr(h,o).style({fill:"rgba(255,255,255,0)",stroke:"#29ABE2","stroke-width":1}).addTo(this.zoomBarGroup)},_createButton:function(t,e,i){e=i?e:e-s;var n,r=this.vanchart.renderer,a=r.group().attr("transform",this._getButtonTranslate(t,e)),o={fill:"#FFFFFF",stroke:"#7ADAF4","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10};n=i?t?"M30,4v6H0L0,4C0,1.791,1.791,0,4,0h22C28.209,0,30,1.791,30,4z":"M4,30h6V0L4,0C1.791,0,0,1.791,0,4v22C0,28.209,1.791,30,4,30z":t?"M30,6V0H0v6c0,2.209,1.791,4,4,4h22C28.209,10,30,8.209,30,6z":"M6,30H0V0h6c2.209,0,4,1.791,4,4v22C10,28.209,8.209,30,6,30z",r.path().attr("d",n).style({fill:"#29ABE2"}).addTo(a);var l="x1",h="y1",u="x2",c="y2";return t&&(l="y1",h="x1",u="y2",c="x2"),r.line().attr(l,3).attr(h,11).attr(u,3).attr(c,18).style(o).addTo(a),r.line().attr(l,7).attr(h,11).attr(u,7).attr(c,18).style(o).addTo(a),a.pos=e,a.addTo(this.zoomBarGroup),a},_findDraggingTarget:function(t){for(var e,i=t.srcEvent,n=i.target||i.srcElement,r=this.byAxis.isHorizontal()?t.containerPoint[0]-this.bounds.x:t.containerPoint[1]-this.bounds.y,a=this._resizeable();n;){var o=this.leftTopButton.pos-r,l=r-(this.rightBottomButton.pos+s);if(o>0&&10>o&&a&&(e=this.leftTopButton),l>0&&10>l&&a&&(e=this.rightBottomButton),e)break;if(n==this.leftTopButton.node()&&a?e=this.leftTopButton:n==this.rightBottomButton.node()&&a?e=this.rightBottomButton:(n==this.centerRect.node()||n==this.zoomBarGroup.node())&&(e=this.centerRect),e)break;n=n.parentNode}return e},_panStart:function(t,e){this.target=e||this._findDraggingTarget(t),this.target&&(this.downPos=this.byAxis.isHorizontal()?t.containerPoint[0]:t.containerPoint[1],this.initPos=this.target.pos,this.initTranslate=0)},_panContainerMove:function(t){if(this.target){var e=this.byAxis.isHorizontal()?t.containerPoint[0]:t.containerPoint[1],i=e<this.downPos?h:u;this._centerRectMove(this.downPos,this.downPos+this.downPos-e),this._zoomRefresh(i)}},_panMove:function(t){var e=l,i=this.byAxis.isHorizontal()?t.containerPoint[0]:t.containerPoint[1];if(this.target&&this.downPos!=i){switch(this.target){case this.leftTopButton:this._leftButtonMove(this.downPos,this.initPos,i);break;case this.rightBottomButton:this._rightButtonMove(this.downPos,this.initPos,i);break;case this.centerRect:e=this._centerRectMove(this.downPos,i)}this._zoomRefresh(e)}},_leftButtonMove:function(t,e,i){var n=0,r=this.rightBottomButton.pos-s,a=e+i-t,o=this.byAxis.isVertical();a=Math.max(Math.min(a,r),n),this.leftTopButton.pos=a;var l="width",h="x";o&&(l="height",h="y"),this.leftTopButton.attr("transform",this._getButtonTranslate(o,a)),this.leftTopRect.attr(l,a),this.centerRect.attr(h,a+s).attr(l,r-a)},_rightButtonMove:function(t,e,i){var n=this.bounds.width,r="x",a="width",o=this.byAxis.isVertical();o&&(n=this.bounds.height,r="y",a="height");var l=n-s,h=this.leftTopButton.pos+s,u=e+i-t;u=Math.max(Math.min(u,l),h),this.rightBottomButton.pos=u,this.rightBottomButton.attr("transform",this._getButtonTranslate(o,u)),this.rightBottomRect.attr(r,u+s).attr(a,n-(u+s)),this.centerRect.attr(a,u-h)},_centerRectMove:function(t,e){var i=this.bounds.width,n=e-t-this.initTranslate,r="x",a="width",o=this.byAxis.isVertical();if(o&&(i=this.bounds.height,r="y",a="height"),this.initTranslate=e-t,this.leftTopButton.pos+n>=0&&this.rightBottomButton.pos+s+n<=i){var l=this.leftTopButton.pos+n;this.leftTopButton.pos=l,this.leftTopButton.attr("transform",this._getButtonTranslate(o,l)),this.leftTopRect.attr(a,l);var c=this.rightBottomButton.pos+n;this.rightBottomButton.pos=c,this.rightBottomButton.attr("transform",this._getButtonTranslate(o,c)),this.rightBottomRect.attr(r,c+s).attr(a,i-(c+s)),this.centerRect.attr(r,l+s)}return this.initTranslate>0?h:u},_getValueByPosition:function(t){var e=this.byAxis,i=this.axisScale;switch(e.type){case a.CATEGORY_AXIS_COMPONENT:for(var r=i.domain(),o=i.range(),s=0,l=o.length-1;l>s;s++){if(t>=o[s]&&t<o[s+1])return r[s];if(t<o[s]&&t>=o[s+1])return r[s+1]}return o[0]>o[o.length-1]?r[0]:r[r.length-1];case a.DATE_AXIS_COMPONENT:return n.date2int(this.axisScale.invert(t));default:return this.axisScale.invert(t)}},_getButtonTranslate:function(t,e){var i=t?[0,e]:[e,0];return"translate("+i+")"},_zoomRefresh:function(t){var e,i=this.leftTopButton.pos,r=this.rightBottomButton.pos+s,o=this._getValueByPosition(i),c=this._getValueByPosition(r),d=this.vanchart,f=this.byAxis,p=f._dataDomain,g=n.indexInArray,m=d.getComponent(a.DATA_SHEET_COMPONENT);if(f.isCategory()){if(t==l)e=this._getValidDomain(o,c,p,!0);else{var v=g(p,this.rangeLeftTop)-g(p,this.rangeRightBottom);if(v=Math.abs(v)+1,t==h&&c!=this.rangeRightBottom)if(f.isAxisReversed()^f.isHorizontal()){var y=g(p,c),_=y-v+1;o=p[_],c=p[y],e=p.slice(_,y+1)}else{var _=g(p,c),y=_+v-1;o=p[y],c=p[_],e=p.slice(_,y+1)}else if(t==u&&o!=this.rangeLeftTop)if(f.isAxisReversed()^f.isHorizontal()){var _=g(p,o),y=_+v-1;o=p[_],c=p[y],e=p.slice(_,y+1)}else{var y=g(p,o),_=y-v+1;o=p[y],c=p[_],e=p.slice(_,y+1)}else o=this.rangeLeftTop,c=this.rangeRightBottom}(this.rangeLeftTop!=o||this.rangeRightBottom!=c)&&(this.rangeLeftTop=o,this.rangeRightBottom=c,f.zoomRefresh(e),f.fixScaleAndTickData(),f.render(),m&&m.zoomRefresh(),d.reRenderSeries())}else e=this._getValidDomain(o,c,p,!1),this.rangeLeftTop=o,this.rangeRightBottom=c,f.zoomRefresh(e),f.fixScaleAndTickData(),f.render(),d.reRenderSeries()},_panEnd:function(){this.target=null},_resizeable:function(){return this.options&&this.options.zoomTool&&this.options.zoomTool.resize},getEvents:function(){return{panstart:this._panStart,panmove:this._panMove,panend:this._panEnd}},remove:function(){this.zoomBarGroup&&this.zoomBarGroup.remove(),this.zoomBarGroup=null}});return t("../ComponentLibrary").register(a.ZOOM_COMPONENT,d),d}),i("component/ToolbarIcon",["require","./Base","../utils/BaseUtils","../Constants","../dom/Evented"],function(t){function e(){return{fill:"black","fill-opacity":.05}}function i(){return{fill:"black","fill-opacity":.1}}function n(){return{fill:"black","fill-opacity":0}}function r(){return{fill:"black","fill-opacity":.05}}var a=2,o=32,s=(t("./Base"),t("../utils/BaseUtils")),l=t("../Constants"),h=t("../dom/Evented"),u=h.extend({initialize:function(t,e,i,n){this.iconType=t,this.toolbar=e,this.visible=n,this.pos=i,this.currentPos={x:i.x,y:i.y}},render:function(){var t=this.toolbar,i=t.vanchart,r=i.renderer,s=this;this.iconG||(this.iconG=r.group().style({cursor:"pointer"}).addTo(t.toolbarGroup)),r.registerInteractiveTarget(this,this.iconG),this.iconG.attr("transform","translate("+s.pos.x+","+s.pos.y+")").style({display:this.visible?"":"none"}),this.iconG.rect=this.iconG.rect||r.rect().attr("width",o).attr("height",o).attr("rx",a).attr("ry",a).addTo(this.iconG),this.iconG.rect.style(t.hidden?n():e()),this.iconG.path=this.iconG.path||this._getIconPathGraphic(i,r,s)},_getIconPathGraphic:function(t,e,i){switch(this.iconType){case l.REFRESH_ICON:return e.path().attr("d",i.getRefreshIconPath()).style({fill:"#FF9933"}).addTo(this.iconG);case l.SORT:return t.orderType==l.ASCENDING?e.path().attr("d",i.getDecreaseIconPath()).style({fill:"#33CCFF"}).addTo(this.iconG):e.path().attr("d",i.getIncreaseIconPath()).style({fill:"#33CCFF"}).addTo(this.iconG);case l.EXPORT_ICON:return e.path().attr("d",i.getExportIconPath()).style({fill:"#6666CC"}).addTo(this.iconG);case l.FULL_SCREEN_ICON:return t.vancharts.fullScreenFather?e.path().attr("d",i.getMinIconPath()).style({fill:"#33CC66"}).addTo(this.iconG):e.path().attr("d",i.getMaxIconPath()).style({fill:"#33CC66"}).addTo(this.iconG);case l.MENU_ICON:return e.path().attr("d",i.getMenuIconPath()).style({"stroke-width":2,stroke:"#AAAAAA"}).addTo(this.iconG)}},refreshMove:function(t,e){var i=this.pos,n=this.currentPos,r=n.x-t,a=r+e;s.isSupportSVG()?d3.select(this.iconG.node()).transition().ease("circle-out").duration(220).attr("transform","translate("+r+","+i.y+")").transition().ease("circle-in").duration(220).attr("transform","translate("+a+","+i.y+")"):this.iconG.attr("transform","translate("+a+","+i.y+")"),this.currentPos.x=a},refreshMoveWithoutAnimation:function(t,e){var i=this.currentPos.x-t+e;this.iconG.attr("transform","translate("+i+","+this.pos.y+")"),this.currentPos.x=i},showIcon:function(){this.visible=!0,arguments.length?this._iconAnimation(arguments[0],arguments[1]):this.iconG.style({display:""})},hideIcon:function(){this.visible=!1,arguments.length?this._iconAnimation(arguments[0],arguments[1]):(this.iconG.style({display:"none"}),this.iconG.attr("transform","translate("+this.pos.x+","+this.pos.y+")"),this.currentPos.x=this.pos.x)},_iconAnimation:function(t,i){var r=this.iconG,a=this.pos,o=this.visible;s.isSupportSVG()?setTimeout(function(){o&&r.style({display:""});var i=4*t,s=a.x-i;d3.select(r.node()).transition().ease("circle-out").duration(100).attr("transform","translate("+s+","+a.y+")").transition().ease("circle-in").duration(100).attr("transform","translate("+a.x+","+a.y+")").each("end",function(){r.style({display:o?"":"none"})}),d3.select(r.rect.node()).style(o?n():e()).transition().ease("linear").duration(200).style(o?e():n())},i):(r.attr("transform","translate("+a.x+","+a.y+")").style({display:o?"":"none"}),r.rect.style(o?e():n())),this.currentPos.x=this.pos.x},onMouseOver:function(){this.iconG.rect.style(this.toolbar.hidden?r():i())},onMouseOut:function(){this.iconG.rect.style(this.toolbar.hidden?n():e())},onTap:function(){var t=this.toolbar,e=t.vanchart,i=(e.renderer,this),n=e.getDivParentDom();switch(i.iconType){case l.REFRESH_ICON:e.refreshRestore(),i.hideIcon();break;case l.SORT:e.orderType==l.ASCENDING?(e.orderType=l.DESCENDING,i.iconG.path.attr({d:i.getIncreaseIconPath()})):(e.orderType=l.ASCENDING,i.iconG.path.attr({d:i.getDecreaseIconPath()})),t.refreshEnabled()&&t.refreshIcon.showIcon(),e.orderData();break;case l.EXPORT_ICON:var r=this.toolbar.options.toImage;r&&r.imageUrl&&s.toPng(r.imageUrl);break;case l.FULL_SCREEN_ICON:e.vancharts.fullScreenFather?s.hideLightBox(n,e.vancharts.fullScreenFather):s.showLightBox(e);break;case l.MENU_ICON:t.showOrHide()}},getEvents:function(){return{mouseover:this.onMouseOver,mouseout:this.onMouseOut,tap:this.onTap}},getMaxIconPath:function(){return"M24,8v6.5L21.5,12l-3,3L17,13.5l3-3L17.5,8H24z M15,18.5l-3,3l2.5,2.5H8v-6.5l2.5,2.5l3-3L15,18.5z"},getMinIconPath:function(){return"M15,17v6.5L12.5,21l-3,3L8,22.5l3-3L8.5,17H15z M24,9.5l-3,3l2.5,2.5H17V8.5l2.5,2.5l3-3L24,9.5z"},getIncreaseIconPath:function(){return"M8,20h16v2H8V20z M10,16h2v3h-2V16z M13,14h2v5h-2V14z M16,12h2v7h-2V12z M19,9h2v10h-2V9z"},getDecreaseIconPath:function(){return"M8,20h16v2H8V20z M10,9h2v10h-2V9z M13,12h2v7h-2V12z M16,15h2v4h-2V15z M19,16h2v3h-2V16z"},getExportIconPath:function(){return"M22,8H8v16h16V10L22,8z M16,10h2v4h-2V10z M22,22H10V10h1v5h9v-5h1.171L22,10.829V22z"},getRefreshIconPath:function(){return"M21.656,10.344C20.209,8.896,18.209,8,16,8c-3.43,0-6.354,2.158-7.492,5.19l1.873,0.703C11.234,11.619,13.428,10,16,10c1.657,0,3.156,0.672,4.243,1.757L18,14h6V8L21.656,10.344z M16,22c-1.657,0-3.156-0.671-4.243-1.757L14,18H8v6l2.344-2.344C11.791,23.104,13.791,24,16,24c3.43,0,6.354-2.158,7.492-5.19l-1.873-0.703C20.766,20.381,18.572,22,16,22z"},getMenuIconPath:function(){return"M8,10L24,10 M8,15L24,15 M8,20L24,20"}});return u}),i("component/ToolBar",["require","./Base","../utils/BaseUtils","../Constants","./ToolbarIcon","../ComponentLibrary"],function(t){var e=t("./Base"),i=t("../utils/BaseUtils"),n=t("../Constants"),r=t("./ToolbarIcon"),a=t("../ComponentLibrary"),o=32,s=1,l=5,h=e.extend({doLayout:function(){var t=this.options,e=t.hidden,i=this._filterSort()?["sort","toImage","fullScreen"]:["toImage","fullScreen"],a=[n.REFRESH_ICON];i.forEach(function(e){t[e]&&t[e].enabled&&a.push(e)}),e&&a.push(n.MENU_ICON);var h=o+s,u=a.length*h+l;if(this.startX=this.vanchart.width-u,!this.toolbarGroup){this.toolbarIcons=[],this.hidden=e;for(var c=0,d=a.length;d>c;c++){var f={x:c*h,y:l},p=a[c],g=!e;p==n.MENU_ICON?this.menuIcon=new r(p,this,f,!0):p==n.REFRESH_ICON?this.refreshIcon=new r(p,this,f,!1):this.toolbarIcons.push(new r(p,this,f,g))}this.isFloat=!0}},_filterSort:function(){var t=!1,e=this.vanchart.options,i=e.chartType,r=e.series;return i&&i!=n.FORCE_BUBBLE_CHART?!0:(r.forEach(function(e){e.type&&e.type!=n.FORCE_BUBBLE_CHART&&(t=!0)}),t)},render:function(){var t=this.vanchart.renderer;return this.toolbarGroup?void this.toolbarGroup.attr("transform",i.makeTranslate([this.startX,0])):(this.toolbarGroup=t.group().add().attr("transform",i.makeTranslate([this.startX,0])),this.vanchart._leaflet&&this.toolbarGroup.style("pointer-events","all"),this.toolbarIcons.forEach(function(t){t.render()}),this.menuIcon&&this.menuIcon.render(),void(this.refreshIcon&&this.refreshIcon.render()))},showOrHide:function(){this.hidden?this.show():this.hide(),this.hidden=!this.hidden},hide:function(){for(var t=this.toolbarIcons,e=t.length,i=[],n=0;e>n;n++)i.push(100+80*n);for(var n=0;e>n;n++){var r=e-n;t[n].hideIcon(r,i[n])}var a=4*(e+1),o=4*(e+1)+33*e;this.refreshIcon.visible&&this.refreshIcon.refreshMove(a,o)},show:function(){for(var t=[0],e=this.toolbarIcons,i=e.length,n=0;i-1>n;n++)t.push(100+80*n);for(var n=0;i>n;n++){var r=i-n;e[n].showIcon(r,t[n])}var a=4*(i+1)+33*i,o=4*(i+1);this.refreshIcon.visible&&this.refreshIcon.refreshMove(a,o)},showRefreshIconWhenZoom:function(){if(!this.refreshIcon.visible&&this.refreshEnabled())if(this.menuIcon)if(this.hidden){var t=this.toolbarIcons.length,e=4*(t+1),i=4*(t+1)+33*t;this.refreshIcon.refreshMoveWithoutAnimation(e,i),this.refreshIcon.showIcon()}else this.refreshIcon.showIcon();else this.refreshIcon.showIcon()},refreshEnabled:function(){return!(this.options.refresh&&this.options.refresh.enabled===!1)},getToolBarInitWidth:function(){return this.options.enabled?this.options.hidden?o+l:this.toolbarIcons.length*(o+s)-s+l:0},remove:function(){this.toolbarGroup&&this.toolbarGroup.remove(),this.toolbarGroup=null}});return a.register(a.TOOLBAR_COMPONENT,h),h}),i("dom/EventObject",["require","../dom/Evented"],function(t){var e=t("../dom/Evented"),i=e.extend({initialize:function(t){this.events=t},getEvents:function(){return this.events}});return i}),i("component/RangeLegend",["require","./Base","../utils/BaseUtils","../Constants","../utils/ColorUtils","../utils/Formatter","../ComponentLibrary"],function(t){var e,i=t("./Base"),n=t("../utils/BaseUtils"),r=t("../Constants"),a=(t("../utils/ColorUtils"),t("../utils/Formatter"),t("../ComponentLibrary")),o=function(){return null==e&&(e=n.paddingConvertWithScale("0.625rem")),e},s=i.extend({doLayout:function(){if(this.invisible())return void this.remove();var t=this.options,e=t.position||r.RIGHT,i=o()*(this.isFloat?2:4);if(e==r.TOP||e==r.BOTTOM?this._layoutHorizontal(e,i):this._layoutVertical(e,i),!this.isFloat){var n=this.options.borderWidth+2*o();if(this.bounds.x+=n/2,this.bounds.y+=n/2,this.bounds.width-=n,this.bounds.height-=n,e==r.BOTTOM){var s=this.vanchart.getComponent(a.ZOOM_COMPONENT);s&&s.zoomToolEnabled()&&s.bounds&&(this.bounds.y+=s.bounds.height||0)}if(e==r.RIGHT_TOP){var l=this.vanchart.getComponent(a.TOOLBAR_COMPONENT);l&&(this.bounds.y=Math.max(37,this.bounds.y))}}},_layoutHorizontal:function(t,e){var i=this.calculateHorizontalDim(),n=i.height+e;n=this.options.maxHeight?Math.min(n,this._maxHeight()):n,this._setComponentBounds(t,n);var r=i.width+e;this.isFloat||(this.bounds.x+=Math.max((this.bounds.width-r)/2,0)),this.bounds.width=r},_layoutVertical:function(t,e){var i=this.calculateVerticalDim(),n=i.width+e;n=this.options.maxWidth?Math.min(n,this._maxWidth()):n,this._setComponentBounds(t,n);var a=i.height+e;this.isFloat||t==r.RIGHT_TOP||(this.bounds.y+=Math.max((this.bounds.height-a)/2,0)),this.bounds.height=a},render:function(){if(!this.invisible()){var t=this.bounds,e=this,i=e.vanchart,r=i.renderer;this.group||(this.backgroundGroup=r.group().add(),this.group=r.vgroup().add(),this.legendGroup=this.group.append(r.vgroup()),this.vanchart._leaflet&&this.group.style("pointer-events","all"));var a;a=this.useHtmlLabel()?this.legendGroup.divG:this.legendGroup.renderG,r.registerInteractiveTarget(this,a),this._innerClip(this.group),this.group.attr("transform",n.makeTranslate(t)),i._renderRectangleBackground(this.backgroundGroup,this.options,t),this.renderBody(this.legendGroup,t)}},getEvents:function(){return{mouseout:this.mouseOut}},mouseOut:function(){this.highlighted&&(this.highlighted=!1,this.vanchart.cancelLegendHighlight())},remove:function(){this.group&&this.group.remove(),this.group=null}});return s}),i("component/IntervalRangeLegend",["require","../utils/BaseUtils","../Constants","../utils/ColorUtils","../utils/Formatter","../dom/EventObject","./RangeLegend","../ComponentLibrary"],function(t){var e,i,n,r=t("../utils/BaseUtils"),a=t("../Constants"),o=t("../utils/ColorUtils"),s=t("../utils/Formatter"),l=t("../dom/EventObject"),h=t("./RangeLegend"),u=t("../ComponentLibrary"),c=function(){return null==e&&(e=r.paddingConvertWithScale("0.625rem")),e},d=15,f=function(){return null==i&&(i=r.paddingConvertWithScale("0.3125rem")),i},p=25,g=function(){return null==n&&(n=r.paddingConvertWithScale("0.125rem")),n},m=h.extend({type:u.INTERVAL_RANGE_LEGEND,initAttributesWithSeries:function(){var t=this.options,e=t.range||{};if(!r.isArray(e)){var i=e.splitNumber||5,n=e.color||this.vanchart.options.colors[0],a=this.vanchart.isHeatMap()?["rgb(0,0,255)","rgb(0,255,0)","rgb(255,255,0)","rgb(255,0,0)"]:o.createColorsWithHsb(n,i),s=this.vanchart.getMinMaxFromSeries(),h=r.calculateAutoMinMaxAndGap(s[0],s[1],i),u=h[0],c=h[2];if(e=[],this.vanchart.isHeatMap())for(var d=[0,.25,.55,.85,1],f=r.accMul(c,i),p=1;5>p;p++)e.push({from:r.accAdd(u,r.accMul(f,d[p-1])),to:r.accAdd(u,r.accMul(f,d[p])),color:a[p-1]});else for(var p=0;i>p;p++)e.push({from:r.accAdd(u,r.accMul(c,i-p-1)),to:r.accAdd(u,r.accMul(c,i-p)),color:a[p]})}this.items=this.items||[];for(var g=e.length,m=this.items.length,v=g;m>v;v++)this.items[v].graphic&&this.items[v].graphic.remove(),this.items[v]=null;for(var y=t.formatter,_=0;g>_;_++){var x=this.items[_]||new l(this.getItemEvents());this.items[_]=x;var b=e[_];x.from=b.from,x.to=b.to,x.color=b.color,x.label=this._getIntervalLabelContent(b.from,b.to,y),x.visible=!0,x.hiddenColor=t.hiddenColor,x.hoverColor=t.hoverColor,x.points=[],x.legend=this}var T=this,A=this.vanchart.series;this.items.sort(function(t,e){var i=Math.min(t.from,t.to),n=Math.min(e.from,e.to);return T.isHorizontal()?i-n:n-i});for(var p=0,L=A.length;L>p;p++){var C=A[p],P=C.getTargetKey(),M=C.points;M.forEach(function(t){var e=t[P],i=T._getPointItem(e);i&&(i.points.push(t),t._rangeItem=i)})}},_getMin:function(){var t=this.isHorizontal()?0:this.items.length-1;return this.items[t].from},_getMax:function(){var t=this.isHorizontal()?this.items.length-1:0;return this.items[t].to},_getGradient:function(){for(var t={0:"white"},e=this._getMin(),i=this._getMax(),n=i-e,r=this.items.length-1;r>=0;r--){var a=this.items[r];t[(a.to-e)/n]=a.color}return t},_getIntervalLabelContent:function(t,e,i){return i?s.format({from:t,to:e},i):t+"-"+e},_getPointItem:function(t){for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e],r=Math.min(n.from,n.to),a=Math.max(n.from,n.to);if(t>=r&&a>=t)return n}},calculateHorizontalDim:function(){var t=this.items.length,e=0,i=0;if(t>0){var n=r.getTextDimension(this.items[0].label,this.options.style,this.options.useHtml),a=r.getTextDimension(this.items[t-1].label,this.options.style,this.options.useHtml),o=Math.max(0,n.width-p,a.width-p);e=t*p+(t-1)*g()+o,i=d+2*f()+2*n.height}return{width:e,height:i}},calculateVerticalDim:function(){var t=this.items.length,e=0,i=0,n=this.options.style,a=this;return this.items.forEach(function(t){var o=r.getTextDimension(t.label,n,a.options.useHtml);e=Math.max(e,o.width),i=Math.max(0,o.height-p)}),{width:e+d+f(),height:t*p+(t-1)*g()+i}},getColorWithSize:function(t){var e=this._getPointItem(t);return e&&e.color},renderBody:function(t,e){this.isHorizontal()?this._renderHorizontalInterval(t,e):this._renderVerticalInterval(t,e)},_renderHorizontalInterval:function(t,e){var i=this.items,n=(e.width-i.length*p-(i.length-1)*g())/2;t.attr("transform",r.makeTranslate([n,c()])),this._absX=e.x+n,this._absY=e.y+c();var a=this.options.style,o=this.vanchart,s=o.renderer,l=this.useHtmlLabel(),h=0,u=this;i.forEach(function(e,i){e.graphic=e.graphic||t.append(s.vgroup().style({cursor:"pointer"}));var n=e.graphic;s.registerInteractiveTarget(e,l?n.divG:n.renderG);var o=e.label,c=r.getTextDimension(o,a,u.options.useHtml),m=c.height,v=m+f(),y=v+d+f();n.rect=n.rect||n.append(s.rect()),n.rect.style(u._getItemIconStyle(e)).attr("rx",2).attr("ry",2).attr("x",h).attr("y",v).attr("width",p).attr("height",d);var _=h+p/2-c.width/2,x=i%2===0?0:y;u._renderItemLabel(e,n,_,x,c,i),h+=p+g()})},_renderVerticalInterval:function(t,e){var i=this.items,n=(e.height-i.length*p-(i.length-1)*g())/2;t.attr("transform",r.makeTranslate([c(),n])),this._absX=e.x+c(),this._absY=e.y+n;var a=this.options.style,o=this.vanchart.renderer,s=this.useHtmlLabel(),l=0,h=this;i.forEach(function(e,i){e.graphic=e.graphic||t.append(o.vgroup().style({cursor:"pointer"}));var n=e.graphic;o.registerInteractiveTarget(e,s?n.divG:n.renderG);var u=r.getTextDimension(e.label,a,s);n.rect=n.rect||n.append(o.rect()),n.rect.style(h._getItemIconStyle(e)).attr("rx",2).attr("ry",2).attr("x",0).attr("y",l).attr("width",d).attr("height",p);var c=Math.round(d+f()),m=Math.round(l+p/2-u.height/2);h._renderItemLabel(e,n,c,m,u,i),l+=p+g()})},_renderItemLabel:function(t,e,i,n,r,a){var o=this,s=o.vanchart,l=s.renderer,h=o.options,u=t.label,c=h.style,d=this.useHtmlLabel(),f=t.visible?c.color:t.hiddenColor;e.text=e.text||e.append(l.vtext(d)),e.text.textContent(u).attr("dy",".88em").attr("x",i).attr("y",n).style(c),e.text.style({color:f})},_getItemIconStyle:function(t){return{fill:t.visible?t.color:t.hiddenColor,"fill-opacity":1,stroke:"none"}},getItemEvents:function(){return{mouseover:this.onItemMouseOver,mousemove:this.onItemMouseMove,mouseout:this.onItemMouseOut,tap:this.onItemTap}},onItemMouseOver:function(t){var e=this,i=e.legend,n=e.graphic&&e.graphic.text;i.useHtmlLabel()?n.style.color=o.colorToHex(e.hoverColor):n.style({fill:e.hoverColor}),this.legend.options.highlight&&(this.legend.highlighted=!0,this.legend.vanchart.makeLegendHighlight(e))},onItemMouseMove:function(t){},onItemMouseOut:function(t){var e=this,i=e.legend,n=i.options,r=e.graphic&&e.graphic.text,a=n.style.color,s=e.visible?a:e.hiddenColor;i.useHtmlLabel()?r.style.color=o.colorToHex(s):r.style({fill:s})},onItemTap:function(t){var e=this,i=e.legend,n=i.options,r=i.vanchart,s=e.graphic&&e.graphic.text,l=e.graphic&&e.graphic.rect;e.visible=!e.visible;var h=n.style.color,u=e.visible?e.color:e.hiddenColor,c=e.visible?h:e.hiddenColor;if(l.style({fill:u}),i.useHtmlLabel()?s.style.color=o.colorToHex(c):s.style({fill:c}),e.points&&e.points.length>0){var d="vanChartMap"==r.vanChartType;e.points.forEach(function(t){var i=t.series.type===a.LINE_MAP;if((!d||d&&t.points&&t.points[0]==t||i)&&(t.visible=e.visible,d&&!i))for(var n=t.points,r=1,o=n.length;o>r;r++)n[r].visible=t.visible}),r.filterRender()}}});return u.register(u.INTERVAL_RANGE_LEGEND,m),m}),i("component/GradientRangeLegend",["require","../utils/BaseUtils","../Constants","../utils/Formatter","../utils/ColorUtils","./RangeLegend","../ComponentLibrary"],function(t){var e,i,n=t("../utils/BaseUtils"),r=t("../Constants"),a=t("../utils/Formatter"),o=t("../utils/ColorUtils"),s=t("./RangeLegend"),l=t("../ComponentLibrary"),h=function(){return null==e&&(e=n.paddingConvertWithScale("0.625rem")),e},u=15,c=100,d=15,f=10,p=function(){return null==i&&(i=n.paddingConvertWithScale("0.3125rem")),i},g="M7.236,10H13c1.105,0,2-0.895,2-2V2c0-1.105-0.895-2-2-2L2.618,0C1.875,0,1.391,0.782,1.724,1.447l3.724,7.447C5.786,9.572,6.479,10,7.236,10z",m="M7.236,0L13,0c1.105,0,2,0.895,2,2v6c0,1.105-0.895,2-2,2H2.618c-0.743,0-1.227-0.782-0.894-1.447l3.724-7.447C5.786,0.428,6.479,0,7.236,0z",v="M0,7.236V13c0,1.105,0.895,2,2,2h6c1.105,0,2-0.895,2-2V2.618c0-0.743-0.782-1.227-1.447-0.894L1.106,5.447C0.428,5.786,0,6.479,0,7.236z",y="M10,7.236V13c0,1.105-0.895,2-2,2H2c-1.105,0-2-0.895-2-2L0,2.618c0-0.743,0.782-1.227,1.447-0.894l7.447,3.724C9.572,5.786,10,6.479,10,7.236z",_=s.extend({type:l.GradientRangeLegend,initAttributesWithSeries:function(){var t=this.options,e=t.range||{};this.valueAndColors=e.color||this._getDefaultValueAndColors();var i=e.min,r=e.max;if(n.hasNotDefined(i)&&n.hasNotDefined(r)){var a=this.vanchart.getMinMaxFromSeries(),o=n.calculateAutoMinMaxAndGap(a[0],a[1],Math.max(2,this.valueAndColors.length-1));i=o[0],r=o[1]}this.min=n.pick(e.min,i),this.max=n.pick(e.max,r),this.minPos=0,this.maxPos=c,this.valueAndColors.sort(function(t,e){return t[0]-e[0]});for(var s=[],l=[],h=0,u=this.valueAndColors.length;u>h;h++)s[h]=this.valueAndColors[h][0],l[h]=this.valueAndColors[h][1];this.valueScale=d3.scale.linear().domain([this.min,this.max]).range([0,1]),this.colorScale=d3.scale.linear().domain(s).range(l)},_getMin:function(){return this.min},_getMax:function(){return this.max},_getGradient:function(){var t={};return this.valueAndColors.forEach(function(e){t[e[0]]=e[1]}),t},_getDefaultValueAndColors:function(){var t=o.createColorsWithHsb(this.vanchart.options.colors[0],3);return[[0,t[2]],[.5,t[1]],[1,t[0]]]},calculateHorizontalDim:function(){var t=n.getTextDimension(this._getGradientMinLabelContent(),this.options.style,this.options.useHtml),e=n.getTextDimension(this._getGradientMaxLabelContent(),this.options.style,this.options.useHtml),i=Math.max(t.width,e.width,f),r=c+2*i,a=u+d+p()+t.height;return{width:r,height:a}},calculateVerticalDim:function(){var t=n.getTextDimension(this._getGradientMinLabelContent(),this.options.style,this.options.useHtml),e=n.getTextDimension(this._getGradientMaxLabelContent(),this.options.style,this.options.useHtml),i=u+d+p()+Math.max(t.width,e.width),r=2*Math.max(t.height/2,f/2),a=c+2*r;return{width:i,height:a}},getColorWithSize:function(t){return t>=this.min&&t<=this.max?this.colorScale(this.valueScale(t)):null},_getGradientMinLabelContent:function(){return this._getGradientLabelWithFormatter(this.min)},_getGradientMaxLabelContent:function(){return this._getGradientLabelWithFormatter(this.max)},_getGradientLabelWithFormatter:function(t){var e=this.options.formatter;return e?a.format(t,e):t},_getGradientLabelContent:function(t){return this._getGradientLabelWithFormatter(this._gradientScale(t))},_gradientScale:function(t){var e=n.accDiv(n.accAdd(this.max,-this.min),c);return t=n.accMul(e,this.isHorizontal()?t:c-t),t=n.accAdd(t,this.min)},_getBarBackgroundStyle:function(){return{fill:"#eaeaea","stroke-width":0}},_getGradientFillColor:function(t,e){var i={x1:"0%",y1:t?"0%":"100%",x2:t?"100%":"0%",y2:"0%"},r=[];return this.valueAndColors.forEach(function(t){var e=t[0],i=t[1];r.push({offset:e,"stop-color":i})}),this._bar.colorGradient?e.updateColorGradient(this._bar.colorGradient,i,r):this._bar.colorGradient=e.colorGradient(i,r),"url(#"+n.stamp(this._bar.colorGradient)+")"},_updateHorizontalGradientClipRect:function(){var t=this,e=t.vanchart,i=e.renderer,n={x:this.minPos,y:0,width:this.maxPos-this.minPos,height:u};this._bar.clipG?i.updateClip(this._bar.clipG,n):(this._bar.clipG=i.createClip(n),i.clip(this._bar,this._bar.clipG))},_updateVerticalGradientClipRect:function(){var t=this,e=t.vanchart,i=e.renderer,n={x:0,y:this.minPos,width:u,height:this.maxPos-this.minPos};this._bar.clipG?i.updateClip(this._bar.clipG,n):(this._bar.clipG=i.createClip(n),i.clip(this._bar,this._bar.clipG))},renderBody:function(t,e){var i=this,r=i.vanchart,a=r.renderer,o=(r.getPlotBounds(),i.isHorizontal()),s=o?(e.width-c)/2:h(),l=o?h():(e.height-c)/2;t.attr("transform",n.makeTranslate([s,l])),this._absX=e.x+s,this._absY=e.y+l,this._barBackground=this._barBackground||t.append(a.rect()),this._bar=this._bar||t.append(a.rect()),this._minButton=this._minButton||t.append(a.path().style({cursor:"pointer"})),this._maxButton=this._maxButton||t.append(a.path().style({cursor:"pointer"})),this._minLabel=this._minLabel||t.append(a.vtext(this.useHtmlLabel())),this._maxLabel=this._maxLabel||t.append(a.vtext(this.useHtmlLabel()));var d={rx:2,ry:2,x:0,y:0,width:o?c:u,height:o?u:c};this._barBackground.style(this._getBarBackgroundStyle()).attr(d),this._bar.attr(d).style({fill:this._getGradientFillColor(o,a),
    "stroke-width":0}),n.isSupportSVG()||a._updateGradientFill(this._bar,this._bar.colorGradient),this._minButton.attr("d",o?v:g),this._maxButton.attr("d",o?y:m),this._minLabel.attr("dy",".85em").style(this.options.style),this._maxLabel.attr("dy",".85em").style(this.options.style),this._updateMax(),this._updateMin()},_updateMin:function(){this.isHorizontal()?this._updateHorizontalMinBar():this._updateVerticalMinBar()},_updateMax:function(){this.isHorizontal()?this._updateHorizontalMaxBar():this._updateVerticalMaxBar()},_updateVerticalMinBar:function(){this._minButton.attr("transform","translate("+u+","+this.maxPos+")").style({fill:this.colorScale((c-this.maxPos)/c)});var t=this._getGradientLabelContent(this.maxPos),e=n.getTextDimension(t,this.options.style,!0),i=Math.round(u+d+p()),r=Math.round(this.maxPos+f/2-e.height/2);this._minLabel.textContent(t).attr("x",i).attr("y",r),this._updateVerticalGradientClipRect()},_updateHorizontalMinBar:function(){var t=this.minPos-f;this._minButton.attr("transform","translate("+t+","+u+")").style({fill:this.colorScale(this.minPos/c)});var e=this._getGradientLabelContent(this.minPos),i=n.getTextDimension(e,this.options.style,!0),r=Math.round(this.minPos-i.width),a=Math.round(u+d+p());this._minLabel.textContent(e).attr("x",r).attr("y",a),this._updateHorizontalGradientClipRect()},_updateVerticalMaxBar:function(){var t=this.minPos-f;this._maxButton.attr("transform","translate("+u+","+t+")").style({fill:this.colorScale((c-this.minPos)/c)});var e=this._getGradientLabelContent(this.minPos),i=n.getTextDimension(e,this.options.style,!0),r=Math.round(u+d+p()),a=Math.round(this.minPos-f/2-i.height/2);this._maxLabel.textContent(e).attr("x",r).attr("y",a),this._updateVerticalGradientClipRect()},_updateHorizontalMaxBar:function(){this._maxButton.attr("transform","translate("+this.maxPos+","+u+")").style({fill:this.colorScale(this.maxPos/c)});var t=this._getGradientLabelContent(this.maxPos),e=Math.round(this.maxPos),i=Math.round(u+d+p());this._maxLabel.textContent(t).attr("x",e).attr("y",i),this._updateHorizontalGradientClipRect()},getEvents:function(){return{panstart:this._panStart,panmove:this._panMove,panend:this._panEnd}},_panStart:function(t){var e=this.options.position;this.currentX=t.containerPoint[0],this.currentY=t.containerPoint[1],this.eventTarget=e==r.TOP||e==r.BOTTOM?this._findHorizontalTarget():this._findVerticalTarget()},_findHorizontalTarget:function(){var t=(this.maxPos-this.minPos)/2;return this.currentX<this._absX+this.minPos+t?this._minButton:this._maxButton},_findVerticalTarget:function(){var t=(this.minPos-this.maxPos)/2;return this.currentY<this._absY+this.maxPos+t?this._maxButton:this._minButton},_panMove:function(t){this.eventTarget==this._minButton?this._minButtonMove(this.currentX,this.currentY,t.containerPoint[0],t.containerPoint[1]):this.eventTarget==this._maxButton&&this._maxButtonMove(this.currentX,this.currentY,t.containerPoint[0],t.containerPoint[1])},_minButtonMove:function(t,e,i,n){var r=0;if(this.isHorizontal()){var a=this.minPos;this.minPos+=Math.round(i-t),this.minPos=Math.max(this.minPos,0),this.minPos=Math.min(this.minPos,this.maxPos),r=this.minPos-a}else{var a=this.maxPos;this.maxPos+=Math.round(n-e),this.maxPos=Math.min(this.maxPos,c),this.maxPos=Math.max(this.maxPos,this.minPos),r=this.maxPos-a}Math.abs(r)>=1&&(this.currentX=i,this.currentY=n,this._updateMin(),this.refreshPoints())},_maxButtonMove:function(t,e,i,n){var r=0;if(this.isHorizontal()){var a=this.maxPos;this.maxPos+=Math.round(i-t),this.maxPos=Math.min(this.maxPos,c),this.maxPos=Math.max(this.maxPos,this.minPos),r=this.maxPos-a}else{var a=this.minPos;this.minPos+=Math.round(n-e),this.minPos=Math.max(this.minPos,0),this.minPos=Math.min(this.minPos,this.maxPos),r=this.minPos-a}Math.abs(r)>=1&&(this.currentX=i,this.currentY=n,this._updateMax(),this.refreshPoints())},_panEnd:function(t){this.eventTarget=null},refreshPoints:function(){for(var t,e=this._gradientScale(this.minPos),i=this._gradientScale(this.maxPos),n=this.vanchart,a=n.series,o=!1,s="vanChartMap"==n.vanChartType,l=0,h=a.length;h>l;l++){var u=a[l];u.points.forEach(function(n){var a=n.series.type===r.LINE_MAP;if(!s||s&&n.points&&n.points[0]==n||a){var l=n.visible,h=n.getTargetValue();if(n.visible=h>=e&&i>=h||h>=i&&e>=h,o=o||l!=n.visible,s&&!a){t=n.points;for(var u=1,c=t.length;c>u;u++)t[u].visible=n.visible}}})}o&&n.filterRender()}});return l.register(l.GradientRangeLegend,_),_}),i("component/Polar",["require","../Constants","../utils/BaseUtils","./Base","../ComponentLibrary"],function(t){var e=(t("../Constants"),t("../utils/BaseUtils")),i=t("./Base"),n=(t("../ComponentLibrary"),i.extend({_refresh:function(){this.series=[]},_isBaseAxis:function(){return!0},doLayout:function(){var t=this.options,i=t.radius,n=t.center;if(!n||0===n.length){var r=this.vanchart.getPlotBounds();n=[r.width/2+r.x,r.height/2+r.y]}this.setCenter(n),e.hasDefined(i)?this.setRadius(i):this.radius=null;var a=this.vanchart.options.plotOptions,o=a.radar&&a.radar.shape||a.shape;this.shape=o||this.shape},setRadius:function(t){t&&(this.radius=this._getPercentValue(t,Math.min(this.vanchart.width,this.vanchart.height)/2))},setCenter:function(t){t&&(this.center=[],this.center[0]=this._getPercentValue(t[0],this.vanchart.width),this.center[1]=this._getPercentValue(t[1],this.vanchart.height))},render:function(){var t=this.vanchart.renderer,e=this.radiusAxis,i={d:e._getRadiusGridPath(e.scale.domain()[1])};this.clip?t.updateClip(this.clip,i):this.clip=t.createClip(i,"path"),this.radiusAxis.render(),this.angleAxis.render()}}));return n}),i("component/AngleAxis",["require","./Base","./CategoryAxis","../utils/BaseUtils","../Constants","../ComponentLibrary"],function(t){var e,i=(t("./Base"),t("./CategoryAxis")),n=t("../utils/BaseUtils"),r=(t("../Constants"),t("../ComponentLibrary"),function(){return null==e&&(e=n.paddingConvertWithScale("0.625rem")),e}),a="radar-top",o="radar-bottom",s="radar-left",l="radar-right",h=i.extend({_refresh:function(t){this.series=[],this.animation=this.vanchart.isSupportAnimation(),this.piece=null,this.initScale(),this.refreshPolar(t)},refreshPolar:function(t){this.polar=this.vanchart.polar(t.axisIndex),this.polar.angleAxis=this},doLayout:function(){this.calculateDomainFromData(),this.scale.domain(this._dataDomain).rangePoints([0,this._dataDomain.length-1]),this.piece=2*Math.PI/Math.max(this._dataDomain.length,1),this._updateOriginTickData(),this._updatePolarBounds(),this._calculateTickData()},fixScaleAndTickData:function(){this.scale.domain(this._dataDomain).rangePoints([0,this._dataDomain.length-1]),this._updateOriginTickData(),this._calculateTickData()},_calculateTickData:function(){var t,e=this.polar.radius;this.isBreakLabels&&(t=this._getTestBoundsAndRadius().testBounds),this.tickData.map(function(i){this._getCateLabelBounds(e,i,t)},this)},_getTestBoundsAndRadius:function(){var t=this.vanchart.getPlotBounds(),e=this.polar.center,i=[e[1]-t.y,t.x+t.width-e[0],t.y+t.height-e[1],e[0]-t.x],n=Math.min.apply(null,i);n-=r();var a={x:-i[3],y:-i[0],width:t.width,height:t.height};return{testBounds:a,radius:n}},_updatePolarBounds:function(){if(!this.polar.radius){var t=this._getTestBoundsAndRadius(),e=t.radius,i=t.testBounds;this.options.showLabel&&(this._testRadius(e,i)||(e=this._findNiceRadius(i),this._testRadius(e,i))),this.polar.setRadius(e)}},getIndexByPosition:function(t){return this._getIndexByPolarCoordinate(t)},_getIndexByPolarCoordinate:function(t){var e=this.polar.center,i=this.polar.radius,r=this.isAxisReversed(),a=t[0]-e[0],o=e[1]-t[1];if(a*a+o*o>i*i)return-1;var s,l=n.getArcByPoint(a,o),h=this.getCategories();if(h.length>1){var u=2*Math.PI/h.length;s=r?h.length-1-l/u:l/u}else s=0;return s=Math.round(s),s%=h.length},getAngleGridLineData:function(){var t=[],e=this.polar.angleAxis,i=e.scale.domain(),r=this;return i.forEach(function(i){var a=e.scale(i)*e.piece,o=r.polar.radius;t.push(n.getArcPoint(o,a))}),t=t.length?t:[n.getArcPoint(this.polar.radius,0)]},_testRadius:function(t,e){for(var i=0,r=this.tickData.length;r>i;i++){var a=this.tickData[i],o=this._getCateLabelBounds(t,a);if(!n.containsRect(e,o))return!1}return!0},_getCateLabelBounds:function(t,e,i){var h,u=e.tickValue,c=e.tickRectDim,d=this.scale.domain(),f=d.indexOf(u),p=n.getArcPoint(t+r(),f*this.piece),g=this.options,m=this._getPolarPosition(u),v=n.extend({width:"","white-space":"","text-align":""},g.labelStyle);switch(m){case a:h={style:v,x:-c.width/2,y:-t-.65*c.height-r()};break;case l:if(h={style:v,x:p[0],y:p[1]-c.height/2},i&&this.isBreakLabels&&h.x+c.width>i.x+i.width){var y=i.x+i.width-p[0],_=n.extend({width:y+"px","white-space":"normal","text-align":"left"},g.labelStyle);c=n.getTextWrapDimension(e.tickContent,_),h={style:_,x:p[0],y:p[1]-c.height/2}}break;case o:h={style:v,x:-c.width/2,y:t+r()};break;case s:if(h={style:v,x:p[0]-c.width,y:p[1]-c.height/2},i&&this.isBreakLabels&&h.x<i.x){var y=p[0]-i.x,_=n.extend({width:y+"px","white-space":"normal","text-align":"right"},g.labelStyle);c=n.getTextWrapDimension(e.tickContent,_),h={style:_,x:p[0]-c.width,y:p[1]-c.height/2}}}return e.tickPos=h,n.makeBounds(h,c)},_getPolarPosition:function(t){var e=this.scale.domain(),i=e.indexOf(t),n=e.length/2;return 0===i?a:i>0&&n>i?l:i==n?o:i>n?s:void 0},_findNiceRadius:function(t){var e=[-t.y,t.width+t.x,t.height+t.y,-t.x],i=Math.min.apply(null,e),n=i,h=this.scale.domain(),u=this;return this.tickData.forEach(function(t){if(t.tickContent){var i,r=t.tickValue,c=t.tickDim,d=h.indexOf(r),f=u._getPolarPosition(r);switch(f){case a:i=e[0]-c.height;break;case l:i=(e[1]-c.width)/Math.abs(Math.sin(d*u.piece));break;case o:i=e[2]-c.height;break;case s:i=(e[3]-c.width)/Math.abs(Math.sin(d*u.piece))}n=Math.min(n,i)}}),2*i/3>n&&(n=2*i/3,this.options.labelRotation||this.options.useHtml||(this.isBreakLabels=!0)),n-r()},getPointsInCategory:function(t){var e=this.polar.center,i=this.polar.radius,r=t[0]-e[0],a=e[1]-t[1];if(r*r+a*a>i*i)return null;var o=n.getArcByPoint(r,a),s=this.scale.domain(),l=this.scale.rangeExtent(),h=d3.scale.quantize().domain(l).range(s),u=s.length,c=Math.round(o/(2*Math.PI)*u)%u,d=h(c);return this.vanchart.getValidPointsPara(d)},render:function(){var t=this.vanchart,e=t.renderer;this.axisGroup||(this.axisGroup=e.vgroup().add()),this.axisGroup.attr("transform",n.makeTranslate(this.polar.center)),this._drawAxisLine(this.axisGroup),this._drawGridLine(this.axisGroup),this._drawTickLabel(this.axisGroup)},_drawAxisLine:function(t){var e=this.vanchart.renderer,i=this.polar.radiusAxis,n=this,r=n.options.lineWidth,a=n.options.lineColor,o=i.scale.domain()[1];this.axisLine||(this.axisLine=t.append(e.path())),this.axisLine.attr({d:i._getRadiusGridPath(o)}).style({fill:"none",stroke:a,"stroke-width":r})},_drawGridLine:function(t){var e=this.vanchart.renderer,i=this.polar.radiusAxis.options,n=i.lineWidth,r=i.lineColor;this.gridLinesGroup||(this.gridLinesGroup=t.append(e.group()),this.gridLines=[]);var a=this.gridLinesGroup,o=this.getAngleGridLineData(),s=this._bindData(this.gridLines,o);s.exit.map(function(t){t.remove()});var l=s.enter.map(function(t){return a.append(e.line()).datum(t)});this.gridLines=l.concat(s.update).map(function(t){var e=t.datum();return t.style({stroke:r,"stroke-width":n}).attr({x1:0,y1:0,x2:e[0],y2:e[1]})})},_drawTickLabel:function(t){this._drawSvgTickLabel(t)},_drawSvgTickLabel:function(t){var e=this.vanchart.renderer,i=this,n=i.options,r=this.isBreakLabels,a=n.useHtml||r,o=i.tickData;this.tickLabelsGroup||(this.tickLabelsGroup=t.append(e.vgroup()),this.tickLabels=[]),a&&this.tickLabels.length&&"div"!==this.tickLabels[0].type&&(this.tickLabels.map(function(t){t.remove()}),this.tickLabels=[]);var s=this.tickLabelsGroup,l=this._bindData(this.tickLabels,o,function(t){return t.tickValue});if(l.exit.map(function(t){t.remove()}),n.showLabel){var h=l.enter.map(function(t){return s.append(e.vtext(a).datum(t))});this.tickLabels=h.concat(l.update).filter(function(t){return t.datum().tickPos}).map(function(t){var e=t.datum(),i=e.tickPos.x,n=e.tickPos.y,r="div"===t.type?"px":"",a={transform:"translate("+i+r+" "+n+r+")",dy:"0.85em"};return t.textContent(e.tickContent).style(e.tickPos.style).attr(a),t.vRotate(e.labelRotation),t})}},drawHighlightBackground:function(t){var e=t[0].category,i=this.scale,r=this.series[0]&&this.series[0].columnType||!1,a=this.vanchart.renderer,o=i.domain(),s=this.polar.radius,l=i(e)/o.length*2*Math.PI;if(r){var h=1/o.length*2*Math.PI*.5,u=l-h,c=l+h,d=d3.svg.arc().innerRadius(0).outerRadius(s).startAngle(u).endAngle(c);this.highlightBand||(this.highlightBand=this.axisGroup.append(a.path().style({fill:"rgba(98,179,240,0.2)"}))),this.highlightBand.attr("d",d())}else{var f=n.getArcPoint(s,l);this.highlightLine||(this.highlightLine=this.axisGroup.append(a.line({stroke:"rgb(140,140,140)","stroke-width":"1"}))),this.highlightLine.attr("x2",f[0]).attr("y2",f[1])}},remove:function(){this.axisGroup&&this.axisGroup.remove(),this.axisGroup=null}});return h}),i("component/RadiusAxis",["require","./Base","./ValueAxis","../utils/BaseUtils","../Constants","../ComponentLibrary"],function(t){var e,i=(t("./Base"),t("./ValueAxis")),n=t("../utils/BaseUtils"),r=t("../Constants"),a=(t("../ComponentLibrary"),function(){return null==e&&(e=n.paddingConvertWithScale("0.125rem")),e}),o=i.extend({_refresh:function(t){this.series=[],this.animation=this.vanchart.isSupportAnimation(),this.initScale(),this.refreshPolar(t)},refreshPolar:function(t){this.polar=this.vanchart.polar(t.axisIndex),this.polar.radiusAxis=this},doLayout:function(){this.calculateDomainFromData(),this.scale.domain(this._domain).range([0,this.polar.radius]),this._updateOriginTickData()},fixScaleAndTickData:function(){this.scale.domain(this._domain).range([0,this.polar.radius]),this._updateOriginTickData()},getRadiusPlotBands:function(){var t=this._getPlotBands(),e=[],i=this;return t.forEach(function(t){e.push({path:i._getRadiusPlotBandsPath(t.from,t.to),color:t.color})}),e},_getRadiusPlotBandsPath:function(t,e){var i=this.polar.shape;if(i===r.POLYGON_RADAR)return this._getRadiusGridPath(Math.min(t,e))+this._getRadiusGridPath(Math.max(t,e),!0);var n=d3.svg.arc().startAngle(0).endAngle(2*Math.PI);return n.innerRadius(this.scale(Math.min(t,e))).outerRadius(this.scale(Math.max(t,e)))()},getPlotLines:function(){var t=this.options.plotLines||[],e=this,i=[];return t.forEach(function(t){var n,a,o;t.label&&t.label.text&&t.label.style&&(n=t.label.text,a=t.label.style,o=t.label.align),i.push({color:t.color,value:t.value,width:t.width,dataArray:r.DASH_TYPE[t.dashStyle],text:n,baseY:-e.scale(t.value),textAnchor:o==r.LEFT?"end":"start",style:a})}),i},_getRadiusGridPath:function(t,e){var i=this._getRadiusGridData(t,e);return this._getRadiusGridPathByData(i)},_getRadiusGridData:function(t,e,i){var a=i||this.scale,o=this.polar.angleAxis,s=this.polar.shape;if(s===r.POLYGON_RADAR){var l=[],h=o.scale,u=h.domain();return u.forEach(function(e){var i=h(e)*o.piece,r=a(t);l.push(n.getArcPoint(r,i))}),e&&l.reverse(),l}return a(t)},_getRadiusGridPathByData:function(t){if(n.isArray(t)){var e="";if(t.length){for(var i=0,r=t.length;r>i;i++){var a=i?"L":"M";e+=a+n.dealFloatPrecision(t[i][0])+","+n.dealFloatPrecision(t[i][1])}e+="Z"}return e}var o=d3.svg.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(0);return o.outerRadius(t)()},render:function(){var t=this.vanchart,e=t.renderer;this.axisGroup||(this.axisGroup=e.vgroup().add(),e.clip(this.axisGroup.renderG,this.polar.clip)),this.axisGroup.attr("transform",n.makeTranslate(this.polar.center)),this._drawPlotBands(this.axisGroup),this._drawGridLine(this.axisGroup),this._drawPlotLines(this.axisGroup),this._drawTickLabel(this.axisGroup)},_drawGridLine:function(t){var e=this.vanchart.renderer,i=this,n=i.animation,r=i.lastScale||i.scale,a=i.options,o=i.getTickData(),s=a.gridLineColor,l=a.gridLineWidth;this.gridLinesGroup||(this.gridLinesGroup=t.append(e.group()),this.gridLines=[]);var h=this.gridLinesGroup,u=this._bindData(this.gridLines,o);u.exit.map(function(t){if(n){var e=t.datum(),a=i._getRadiusGridData(e.tickValue,!1,r),o=i._getRadiusGridData(e.tickValue);d3.select(t.node()).transition().attrTween("d",function(){var t=d3.interpolate(a,o);return function(e){return i._getRadiusGridPathByData(t(e))}}).remove()}else t.remove()});var c=u.enter.map(function(t){return h.append(e.path()).datum(t)});this.gridLines=c.concat(u.update).map(function(t){var e=t.datum(),a=i._getRadiusGridData(e.tickValue);if(t.style({fill:"none",stroke:s,"stroke-width":l,opacity:1}),n){var o=i._getRadiusGridData(e.tickValue,!1,r);d3.select(t.node()).transition().attrTween("d",function(){var t=d3.interpolate(o,a);return function(e){return i._getRadiusGridPathByData(t(e))}})}else t.attr({d:i._getRadiusGridPathByData(a)});return t})},_drawPlotLines:function(t){var e=this.vanchart.renderer,i=this.animation,n=this.getPlotLines();this.plotLinesGroup||(this.plotLinesGroup=t.append(e.vgroup()),this.plotLines=[]);var r=this.plotLinesGroup,a=this._bindData(this.plotLines,n);a.exit.map(function(t){t.text&&t.text.remove(),t.remove()});var o=a.enter.map(function(t){var i=r.append(e.path().datum(t));return t.text&&(i.text=r.append(e.vtext())),i});this.plotLines=o.concat(a.update).map(function(t){var e=t.datum(),n=this._getRadiusGridPath(e.value);return i?d3.select(t.node()).transition().attr("d",n).style({fill:"none",stroke:e.color,"stroke-width":e.width,"stroke-dasharray":e.dataArray}):t.attr("d",n).style({fill:"none",stroke:e.color,"stroke-width":e.width,"stroke-dasharray":e.dataArray}),t.text&&t.text.textContent(e.text).style(e.style).attr({y:e.baseY}),t},this)},_drawPlotBands:function(t){var e=this.vanchart.renderer,i=this.animation,n=this.getRadiusPlotBands();this.plotBandsGroup||(this.plotBandsGroup=t.append(e.group()),this.plotBands=[]);var r=this.plotBandsGroup,a=this._bindData(this.plotBands,n);a.exit.map(function(t){t.remove()});var o=a.enter.map(function(t){return r.append(e.path()).datum(t)});this.plotBands=o.concat(a.update).map(function(t){var e=t.datum();return t.style("fill",e.color),i?d3.select(t.node()).transition().attr("d",e.path):t.attr("d",e.path),t},this)},_drawTickLabel:function(t){this._drawSvgTickLabel(t)},_drawSvgTickLabel:function(t){var e=this.vanchart.renderer,i=this,n=this.animation,r=i.scale,o=i.lastScale||i.scale,s=i.options,l=i.getTickData().slice(0,-1),h=s.labelStyle,u=s.useHtml;this.tickLabelsGroup||(this.tickLabelsGroup=t.append(e.vgroup()),this.tickLabels=[]);var c=this.tickLabelsGroup,d=this._bindData(this.tickLabels,l,function(t){return t.tickValue});if(d.exit.map(function(t){t.remove()}),s.showLabel){var f=d.enter.map(function(t){return c.append(e.vtext(u).datum(t))});this.tickLabels=f.concat(d.update).map(function(t){var e=t.datum();t.textContent(e.tickContent).style(h);var i=-(e.tickRectDim.width+e.tickDim.width)/2-a(),s=-r(e.tickValue)-(e.tickRectDim.height+e.tickDim.height)/2,l={transform:"translate("+i+" "+s+")",dy:"0.85em"};if(n&&!u){var c=e.labelRotation%360?t.vRotate(e.labelRotation).rotateStr:"";l.transform+=c;var d=-(e.tickRectDim.width+e.tickDim.width)/2-a(),f=-o(e.tickValue)-(e.tickRectDim.height+e.tickDim.height)/2,p={transform:"translate("+d+" "+f+")",dy:"0.85em"};p.transform+=c,d3.select(t.node()).attr(p).transition().attr(l)}else t.attr(l),t.vRotate(e.labelRotation);return t})}}});return o}),i("component/PolarAxis",["require","./Base","../utils/BaseUtils","../Constants","./Axis","./Polar","./AngleAxis","./RadiusAxis","../ComponentLibrary"],function(t){var e=(t("./Base"),t("../utils/BaseUtils")),i=(t("../Constants"),t("./Axis")),n=t("./Polar"),r=t("./AngleAxis"),a=t("./RadiusAxis"),o=t("../ComponentLibrary"),s=i.extend({_refresh:function(){this._axisList=this._axisList||[];var t=this.options;t=e.isArray(t)?t:[t];for(var i=t.length,s=i;s<this._axisList.length;s++)this._axisList[s].remove(),this._axisList[s]=null;this._axisList.length=i;for(var s=i-1;s>=0;s--)if(t[s].axisIndex=s,this._axisList[s]&&this._axisList[s].type!=t[s].type&&(this._axisList[s].remove(),this._axisList[s]=null),this._axisList[s])this._axisList[s].refresh(t[s]);else{var l;if(this.componentType===o.POLAR_COMPONENT)l=n;else{var h=t[s].type||o.VALUE_AXIS_COMPONENT;h==o.VALUE_AXIS_COMPONENT?l=a:h==o.CATEGORY_AXIS_COMPONENT&&(l=r)}this._axisList[s]=new l(t[s],this.componentType,this.vanchart)}},doLayout:function(){for(var t=this._axisList.length,e=t-1;e>=0;e--)this._axisList[e].doLayout()},render:function(){this._axisList.map(function(t){t.componentType===o.POLAR_COMPONENT&&t.render()})},renderSpecial:function(){this._axisList.map(function(t){t.componentType===o.POLAR_COMPONENT&&t.renderSpecial&&t.renderSpecial()})}});return o.register(o.RADIUS_AXIS_COMPONENT,s),o.register(o.ANGLE_AXIS_COMPONENT,s),o.register(o.POLAR_COMPONENT,s),s}),i("component/Title",["require","./Base","../utils/BaseUtils","../Constants","../ComponentLibrary"],function(t){var e,i=t("./Base"),n=t("../utils/BaseUtils"),r=t("../Constants"),a=t("../ComponentLibrary"),o=function(){return null==e&&(e=n.paddingConvertWithScale("0.3125rem")),e},s=i.extend({doLayout:function(){var t=this.options;if(t.text){var e,i=this.vanchart.getPlotBounds(),s=i.width,l=i.height;if(this.isFloat)s-=this._floatX-i.x,l-=this._floatY-i.y;else{var h=this.vanchart.components[a.TOOLBAR_COMPONENT];this.initBarWidth=h&&h.getToolBarInitWidth()||0,s-=this.initBarWidth,"center"===t.align&&(s-=this.initBarWidth)}if(s-=2*o(),l-=2*o(),e=n.getTextDimension(t.text,t.style,t.useHtml),e.width>s){var u=n.clone(t.style);u.width=Math.max(s,0)+"px",e=n.getTextWrapDimension(t.text,u,t.useHtml)}else e.width+=.5;if(e.height=Math.min(this._maxHeight(),l,e.height),this.isFloat)this.bounds={x:this._floatX,y:this._floatY,width:e.width+2*o(),height:e.height+2*o()};else{var c=e.height+2*o();this._setComponentBounds(r.TOP,c)}if(this.isFloat)this.textBounds={x:o(),y:o(),width:e.width,height:e.height};else{var d;switch(t.align){case"right":d=s-e.width;break;case"center":d=this.bounds.width/2-e.width/2;break;case"left":default:d=this.bounds.x+o()}this.textBounds={x:d,y:o(),width:e.width,height:e.height}}if(t.useHtml)this.labels=[],this.labels.push({text:t.text,dim:e,style:t.style});else{var f=n.splitText(t.text,t.style,this.textBounds.width);this.labels=f.map(function(e){return{text:e,dim:n.getTextDimension(e,t.style,t.useHtml),style:t.style}})}}},render:function(){if(!this.textBounds||this.textBounds.width<0||this.textBounds.height<0)return void this.remove();var t=this.vanchart,e=t.renderer;this.titleGroup||(this.titleGroup=e.vgroup().add(),this.titleGroup.divG.style("pointer-events","auto")),this.titleGroup.attr("transform",n.makeTranslate([this.bounds.x,this.bounds.y])),this._innerClip(this.titleGroup),this.drawBackground(this.titleGroup.renderG),this.drawTitle(this.titleGroup)},drawBackground:function(t){var e=this.options,i=this.bounds;e.backgroundColor&&this.vanchart._renderRectangleBackground(t,e,{x:0,y:0,width:i.width,height:i.height})},drawTitle:function(t){this.text&&(this.text.remove(),this.text=null);var e=this.vanchart.renderer,i=this.options,a=this.textBounds,o=i.useHtml,s=i.align,l=e.vtext(o).attr({transform:n.makeTranslate([a.x,a.y]),width:a.width+"px","text-align":s,"white-space":"normal"});this.text=l;var h=o?{}:n.isMS?{dy:"1em"}:{"dominant-baseline":"central",dy:a.height/this.labels.length/2},u=0;this.labels.map(function(t){var i,n=t.dim;switch(s){case r.LEFT:i=0;break;case r.RIGHT:i=a.width-n.width;break;case r.CENTER:default:i=(a.width-n.width)/2}l.append(e.vtspan(o).attr({y:u,x:0,dx:i}).attr(h).textContent(t.text).style(t.style)),u+=n.height}),t.append(l)},remove:function(){this.titleGroup&&this.titleGroup.remove(),this._clip&&this._clip.remove(),this.titleGroup=this._clip=null}});return a.register(a.TITLE_COMPONENT,s),s}),i("component/Geo",["require","./Base","../utils/BaseUtils","../utils/QueryUtils","../Constants","../theme/config","../ComponentLibrary"],function(t){function e(t,e){t&&g.hasOwnProperty(t.type)&&g[t.type](t,e)}function i(t,e){for(var i,n=-1,r=t.length;++n<r;)i=t[n],e.push(i)}function n(t,e){for(var n=-1,r=t.length;++n<r;)i(t[n],e)}function r(t){var e,i;return"string"==typeof t?window.FR&&window.FR.ajax?FR.ajax({type:"GET",url:t,dataType:"json",async:!1,success:function(n){i=t,e=n}}):d3.json(t,function(n){i=t,e=n}):t&&"object"==typeof t&&(e=t),e}var a=t("./Base"),o=t("../utils/BaseUtils"),s=(t("../utils/QueryUtils"),t("../Constants")),l=(t("../theme/config")(),t("../ComponentLibrary")),h={},u="Point",c="LineString",d="MultiLineString",f=function(t,i){t&&p.hasOwnProperty(t.type)?p[t.type](t,i):e(t,i)},p={Feature:function(t,i){e(t.geometry,i)},FeatureCollection:function(t,i){for(var n=t.features,r=-1,a=n.length;++r<a;)e(n[r].geometry,i)}},g={Point:function(t,e){e.push(t.coordinates)},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)t=i[n],e.push(t)},LineString:function(t,e){i(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)i(n[r],e)},Polygon:function(t,e){n(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,r=-1,a=i.length;++r<a;)n(i[r],e)},GeometryCollection:function(t,i){for(var n=t.geometries,r=-1,a=n.length;++r<a;)e(n[r],i)}},m=a.extend({doLayout:function(){},render:function(){},geoName:function(){return this.options.name},loadGeo:function(){if(!this._loaded||this.options.data!=this._dataUrl){this.vanchart.isDataSame=this.options.data==this.vanchart.lastGeoData,this.vanchart.lastGeoData=this.options.data,this._loaded=!0,this._dataUrl=this.options.data,this.scale=1;var t=this.options,e=this,i=this.vanchart._leaflet;this.maps=[],this._validPointName={},this._validAreaName={},this._extendedLineFeature=[];var n=o.stamp(this.vanchart);if(h[n]=h[n]||{},t.data){var a=o.isArray(t.data)?t.data:[t.data];this.maps=a.map(r),this.imageString=this.imageSuffix=this.imageWidth=this.imageHeight=null,this.maps.length&&(this.imageString=this.maps[0].imageString,this.imageSuffix=this.maps[0].imageSuffix,this.imageWidth=this.maps[0].imageWidth,this.imageHeight=this.maps[0].imageHeight),this.maps.forEach(function(t){for(var i=t.features||[],n=0,r=i.length;r>n;n++){var a=i[n],o=a.geometry;o.type==u?(e._validPointName[a.properties.name]=e._validPointName[a.properties.name]||[],e._validPointName[a.properties.name].push(a)):o.type==c||o.type==d?e._extendedLineFeature.push(a):(e._validAreaName[a.properties.name]=e._validAreaName[a.properties.name]||[],e._validAreaName[a.properties.name].push(a))}})}var s=t.tileLayer||this.vanchart.options.geo.tileLayer,l=t.attribution||this.vanchart.options.geo.attribution||"",f=t.wmsUrl||this.vanchart.options.geo.wmsUrl,p=t.wmsLayer||this.vanchart.options.geo.wmsLayer;if(this.imageString){var g=this.vanchart.width,m=this.vanchart.height,v=g/this.imageWidth,y=m/this.imageHeight;this.scale=Math.min(v,y);var _=this.imageWidth,x=this.imageHeight;_*=this.scale,x*=this.scale,this._scaleGeoJson(this.maps,this.scale);var b=[[0,0],[x,_]],s=this.options.imageUrl||"data:image/"+this.imageSuffix+";base64,"+this.imageString;this._imageBackgroundLayer=L.imageOverlay(s,b).addTo(i)}else s?(this._attribution=h[n][l]||L.control.attribution({position:"bottomright"}).addAttribution(l),h[n][l]=this._attribution,this._tileLayer=h[n][s]||L.tileLayer(s),h[n][s]=this._tileLayer):f?(this._wmsLayer=h[n][f]||L.tileLayer.wms(f,{layers:p.join(",")}),h[n][f]=this._wmsLayer,this._attribution&&this._attribution.remove(),this._attribution=null,this._tileLayer&&this._tileLayer.remove(),this._tileLayer=null,this._imageBackgroundLayer&&i.removeLayer(this._imageBackgroundLayer),this._imageBackgroundLayer=null):(this._attribution&&this._attribution.remove(),this._attribution=null,this._tileLayer&&this._tileLayer.remove(),this._tileLayer=null,this._wmsLayer&&this._wmsLayer.remove(),this._wmsLayer=null,this._imageBackgroundLayer&&i.removeLayer(this._imageBackgroundLayer),this._imageBackgroundLayer=null)}},_scaleGeoJson:function(t,e){t&&t.length&&t.forEach(function(t){for(var i=t.features,n=0,r=i.length;r>n;n++){var a=i[n].properties.center;a&&(a[0]*=e,a[1]*=e)}var o=[];f(t,o);for(var n=0,r=o.length;r>n;n++)o[n][0]*=e,o[n][1]*=e})},getDataPointLngLat:function(t,e){if(e){this.loadGeo();var i=t.series&&t.series.type==s.AREA_MAP?e.properties.center:e.geometry.coordinates;if(!i)if(this._isImageMap()){var n=[],r=this.imageWidth,a=0,o=this.imageHeight,l=0;f(e,n),n.forEach(function(t){r=Math.min(r,t[0]),a=Math.max(a,t[0]),o=Math.min(o,t[1]),l=Math.max(l,t[1])}),i=[(a+r)/2,(l+o)/2]}else{var h=d3.geo.bounds(e),u=(h[0][0]+h[1][0])/2,c=(h[0][1]+h[1][1])/2;i=[u,c]}return i}},_mergeValidProperty:function(t,e){var i={},n={fill:"color","fill-opacity":"opacity",stroke:"borderColor","stroke-width":"borderWidth","stroke-opacity":"borderOpacity"};return e.forEach(function(e){o.hasDefined(t[e])&&(i[n[e]]=t[e])}),i},getMapStyleFromProperties:function(t){return t&&t.properties?this._mergeValidProperty(t.properties,["fill","fill-opacity","stroke","stroke-width","stroke-opacity"]):{}},getZoomListener:function(){return this.options.zoomListener||this.options.zoomLevel},getFeaturesByName:function(t,e){return e==s.AREA_MAP?this._validAreaName[t]:this._validPointName[t]},fitMapBounds:function(){this.loadGeo();var t,e=this.vanchart._leaflet,i=this.options;o.hasDefined(i.zoomListener)?t=i.zoomListener:o.hasDefined(i.zoomLevel)&&(t=i.zoomLevel);var n=i.viewCenter?L.latLng(i.viewCenter[1],i.viewCenter[0]):null;if(!isNaN(+t)&&n)e.setView(n,t);else{if(isNaN(+t))e.fitBounds(this._getFitBounds());else{e.fitBounds(this._getFitBounds(),{animate:!1});var n=e.getCenter();e.setView(n,t)}n&&e.panTo(n)}},_isImageMap:function(){return this.imageString},_getFitBounds:function(){function t(t){var s=t.lnglat;if(s)e=!1;else{var l=i.getFeaturesByName(t.name,t.series.type);s=i.getDataPointLngLat(this,l&&l[0])}s&&(n=Math.min(n,s[0]),r=Math.max(r,s[0]),a=Math.min(a,s[1]),o=Math.max(o,s[1]))}var e=!0,i=this,n=180,r=-180,a=90,o=-90;if(this._isImageMap())n=this.imageWidth*this.scale,r=0,a=this.imageHeight*this.scale,o=0;else{for(var l=this.vanchart.series,h=0,u=l.length;u>h;h++)l[h].visible&&l[h].type!=s.AREA_MAP&&(l[h].type===s.LINE_MAP?l[h].points.forEach(function(e){t(e.from),t(e.to)}):l[h].points.forEach(t));if(e&&this.maps&&this.maps.length){for(var c=this.maps.map(d3.geo.bounds),d=c[0][0],f=c[0][1],h=c.length-1;h>0;h--){var p=c[h];d[0]=Math.min(p[0][0],d[0]),d[1]=Math.min(p[0][1],d[1]),f[0]=Math.max(p[1][0],f[0]),f[1]=Math.max(p[1][1],f[1])}return[[d[1],d[0]],[f[1],f[0]]]}}return[[a,n],[o,r]]}});return l.register(l.GEO_COMPONENT,m),m}),i("component/DrillTools",["require","./Base","../utils/BaseUtils","../utils/ColorUtils","../Constants","../ComponentLibrary"],function(t){var e=t("./Base"),i=t("../utils/BaseUtils"),n=t("../utils/ColorUtils"),r=t("../Constants"),a=t("../ComponentLibrary"),o=.417,s=.583,l=.25,h=.333,u=.1665,c=e.extend({_refresh:function(){this.iconData=[]},doLayout:function(){var t=i.getTextDimension("test",this.options.style);this._setComponentBounds(r.TOP,t.height*(2*u+1))},getBookMarkPath:function(t){var e=this.options.style,n=t.layerIndex,r=i.getTextDimension(t.geo.geoName(),e),a=(0===n?o:s)+l;a=r.height*a+r.width;var c=r.height*h,d=(1+2*u)*r.height,f=[0,0],p=[a,0],g=[a+c,d/2],m=[a,d],v=[0,d];return"M"+f+"L"+p+"L"+g+"L"+m+"L"+v+"Z"},isCurrent:function(t){var e=this.iconData[this.iconData.length-1];return e.series==t.series},textColor:function(t){return this.isCurrent(t)?this.options.currentColor:this.options.style.color},mouseOverColor:function(t){var e;if(!(e=this.options.mouseOverColor)){var i=this.textColor(t),r=n.getRGBAColorArray(i),a=n.rgb2hsb(r[0],r[1],r[2]),o=n.hsb2rgb(a[0],a[1]/2,(a[2]+1)/2);e=n.toColor(o,"rgb")}return e},leftPadding:function(t){return 0===t.layerIndex?o:s},calculateExitAnimation:function(t){for(var e=600,i=0,n=t.length;n>i;i++)t[i].time=e,e=Math.max(e-100,0);var r=0;for(i=n-1;i>=0;i--)t[i].time?(t[i].delay=r,r+=200):t[i].delay=0},getMarkPos:function(t){for(var e=0,i=0;i<t.layerIndex;i++)e+=this.getBookMarkLength(this.iconData[i],i);return e},getMarkAnimationStartPos:function(t){var e=t.layerIndex;return 0===e?0:this.getMarkPos(this.iconData[e-1])-this.getBookMarkLength(t,e);
},getBookMarkLength:function(t,e){var n=i.getTextDimension(t.geo.geoName(),this.options.style).height,r=i.getTextDimension(t.geo.geoName(),this.options.style).width,a=(0===e?o:s)+l;return r+a*n},render:function(){var t=this,e=t.vanchart,n=e.renderer,r=e.isSupportAnimation(),a={x:0,y:0,width:this.bounds.width,height:this.bounds.height};this.dToolsGroup||(this.dToolsGroup=n.group().add(),this.clip=n.createClip(a),this.shadow=n.createDropShadowFilter(0,0,.15,1),n.clip(this.dToolsGroup,this.clip),this.drillItems=[],n.registerInteractiveTarget(this,this.dToolsGroup),this.vanchart._leaflet&&this.dToolsGroup.style("pointer-events","all")),this.iconData=this.vanchart.layerMap,this.dToolsGroup.attr("transform",i.makeTranslate([this.bounds.x,this.bounds.y])),n.updateClip(this.clip,a);for(var o=this.iconData.length-1;o>=0;o--){var s=this.iconData[o];if(this.drillItems[o]){var l=this.drillItems[o];l.path.attr({d:t.getBookMarkPath(s)}),l.text.style({fill:this.textColor(s)}).textContent(s.geo.geoName())}else s.aniStart=this.getMarkAnimationStartPos(s),s.aniEnd=this.getMarkPos(s),this.drillItems[o]=this._createItem(s)}var h=this.drillItems.splice(this.iconData.length,this.drillItems.length);this.calculateExitAnimation(h);for(var o=0,u=h.length;u>o;o++){var s=h[o];r?d3.select(s.node()).transition().duration(s.time).delay(s.delay).ease("quad-in").attr("transform",i.makeTranslate([s.datum().aniStart,0])).style("opacity",0).remove():s.remove()}this.drillItems.length=this.iconData.length},_createItem:function(t){var e=this,n=e.vanchart,r=n.renderer,a=n.isSupportAnimation(),o=this.options,s=i.getTextDimension(t.geo.geoName(),o.style).height,l=r.group().style({cursor:"pointer"}).datum(t);return l.path=r.path({d:e.getBookMarkPath(t)}).style({fill:o.backgroundColor,filter:"url(#"+i.stamp(this.shadow)+")"}).addTo(l),l.text=r.text().attr({x:e.leftPadding(t)*s,y:u*s,dy:".85em"}).style(o.style).style({fill:this.textColor(t)}).textContent(t.geo.geoName()).addTo(l),a?(l.attr("transform",i.makeTranslate([t.aniStart,0])).addTo(this.dToolsGroup),d3.select(l.node()).transition().duration(500).ease("cubic-out").attr("transform",i.makeTranslate([t.aniEnd,0]))):l.attr("transform",i.makeTranslate([t.aniEnd,0])).addTo(this.dToolsGroup),i.toBack(l.node()),l},_findDrillTarget:function(t){for(var e,i=t.srcEvent,n=i.target||i.srcElement;n;){for(var r=this.drillItems.length-1;r>=0;r--)this.drillItems[r].node()==n&&(e=this.drillItems[r]);if(e||n==this.dToolsGroup.node())break;n=n.parentNode}return e},onTap:function(t){var e=this._findDrillTarget(t);if(e){var n=e.datum();if(this.options.click&&n.drillUpDataPoint){var r=i.getFormatterFunction(this.options.click);r(n.drillUpDataPoint,t.srcEvent)}this.vanchart.drillUp(n)}},onMouseOver:function(t){var e=this._findDrillTarget(t);e&&e.text.style({fill:this.mouseOverColor(e.datum())})},onMouseOut:function(t){var e=this._findDrillTarget(t);e&&e.text.style({fill:this.textColor(e.datum())})},getEvents:function(){return{tap:this.onTap,mouseover:this.onMouseOver,mouseout:this.onMouseOut}},remove:function(){this.dToolsGroup&&this.dToolsGroup.remove(),this.dToolsGroup=null,this.iconData=this.drillItems=[]}});return a.register(a.DRILL_TOOLS,c),c}),i("component/DataSheet",["require","./Base","../utils/BaseUtils","../utils/Formatter","../Constants","./LegendIconFactory","../ComponentLibrary","../utils/BezierEasing"],function(t){var e,i,n=t("./Base"),r=t("../utils/BaseUtils"),a=(t("../utils/Formatter"),t("../Constants")),o=t("./LegendIconFactory"),s=t("../ComponentLibrary"),l=t("../utils/BezierEasing"),h=400,u=l.css.swing,c=function(){return null==e&&(e=r.paddingConvertWithScale("0.25rem")),e},d=function(){return null==i&&(i=r.paddingConvertWithScale("0.125rem")),i},f=18,p={color:"#666666",fontSize:"0.875rem",fontFamily:"Verdana"},g=n.extend({doLayout:function(){this._recordForPlotBounds(a.LEFT,Math.round(this.getSeriesNameLength()))},reCalculateSize:function(){this.doLayout()},updateAxisSizeAndBounds:function(){this.maxCateLineHeight=this.maxSeriesLineHeight=null,this._setComponentBounds(a.BOTTOM,this._calculateLineHeight())},_calculateLineHeight:function(){this.calculateShowText();var t=this._categoryStyle(),e=0,i=r.getTextHeight(this._seriesStyle()),n=r.getTextHeight(this._valueStyle());this.maxCateLineHeight=2*c()+this.maxCateLine*r.getTextHeight(t)+(this.maxCateLine-1)*c(),this.maxSeriesLineHeight=[];for(var a=0,o=this.seriesNames.length;o>a;a++){var s=this.maxSeriesLine[a],l=2*c()+s*i+(s-1)*c(),h=this.maxValueLine[a],u=2*c()+h*n+(h-1)*c();this.maxSeriesLineHeight[a]=Math.max(l,u),e+=this.maxSeriesLineHeight[a]}return this.sheetHeight=Math.ceil(this.maxCateLineHeight+e),this.sheetHeight},calculateShowText:function(){this.maxCateLine=0,this.maxValueLine=[],this.showTextMap=this.showTextMap||{};var t=this.vanchart.xAxis(),e=t._dataDomain,i=t._domain,n=this._categoryStyle(),a=r.getTextHeight(n)+c(),o=this.vanchart.getPlotBounds().width/i.length,s=this;e.forEach(function(t){var e=r.splitText(t,n,o,c());if(s.maxCateLineHeight){var l=Math.min(parseInt(s.maxCateLineHeight/a,10),e.length);e=e.slice(0,l)}-1!=r.indexInArray(i,t)&&(s.maxCateLine=Math.max(s.maxCateLine,e.length)),s.showTextMap[t]=s.showTextMap[t]||{},s.showTextMap[t].categoryArray=e});var l=this._valueStyle(),h=r.getTextHeight(l)+c(),u=this.options.formatter,d=this.vanchart.series;d.forEach(function(t,e){for(var n=t.points,a=0,d=n.length;d>a;a++){var f=n[a],p=f.getTargetValue(),g=f.category,m=f.isNull?"-":s._getTickContent(p,u),v=r.splitText(m,l,o,c());if(s.maxSeriesLineHeight&&s.maxSeriesLineHeight[e]){var y=Math.min(parseInt(s.maxSeriesLineHeight[e]/h,10),v.length);v=v.slice(0,y)}s.showTextMap[g].value=s.showTextMap[g].value||[],s.showTextMap[g].value[e]=s.showTextMap[g].value[e]||{},s.showTextMap[g].value[e].valueArray=v,-1!=r.indexInArray(i,g)&&(s.maxValueLine[e]=Math.max(s.maxValueLine[e]||0,v.length))}})},fixBoundsByPlot:function(){var t=this.vanchart.getPlotBounds(),e=this.vanchart.getComponent(s.X_AXIS_COMPONENT),i=t.y+t.height;e&&e._axisList.length&&e._axisList.forEach(function(t){t.getPosition()==a.BOTTOM&&(i=Math.max(i,t.bounds.y+t.bounds.height))}),this.bounds={x:t.x-this.maxSeriesWidth,y:i,width:this.maxSeriesWidth+t.width,height:this.sheetHeight}},getSeriesNameLength:function(){this.seriesNames=[],this.maxSeriesLine=[],this.seriesIconType=[];var t=this,e=t.vanchart,i=e.series,n=this._seriesStyle(),a=e.getChartBounds().width/4-(f+2*d()),s=0,l=0;return i.forEach(function(e){var i=r.getTextDimension(e.name,n,!1).width+2*c();if(i>a){var h=r.splitText(e.name,n,a,c());t.maxSeriesLine.push(h.length),t.seriesNames.push(h),s=a}else t.maxSeriesLine.push(1),t.seriesNames.push([e.name]),s=Math.max(i,s);var u=t._getLegendType(e);t.seriesIconType.push(u),l=Math.max(l,o.getLegendIconSize(u).width)}),this.maxSeriesWidth=Math.ceil(s+2*d()+l),this.maxSeriesWidth+c()},_categoryStyle:function(){var t=this.vanchart.xAxis();return t?r.convertToREMUseDefault16PX(t.options.labelStyle):p},_seriesStyle:function(){var t=this.vanchart.getComponent(s.LEGEND_COMPONENT);return t?r.convertToREMUseDefault16PX(t.options.style):p},_valueStyle:function(){return r.convertToREMUseDefault16PX(this.options.style)},getTextPadding:function(){return c()},render:function(){if(this.remove(),this.vanchart.series.length){this.calculateShowText();var t=this.vanchart,e=this.bounds,i=t.renderer,n={x:this.maxSeriesWidth,y:0,width:e.width-this.maxSeriesWidth,height:e.height};this.animationClip=i.createClip(n),this.dataSheetGroup=i.group().attr("transform",r.makeTranslate(this.bounds)).add(),this.animationGroup=i.group().addTo(this.dataSheetGroup),i.clip(this.animationGroup,this.animationClip),this._drawBaseTable(),this._drawTableContent()}},_drawBaseTable:function(){var t=this.options,e=this.maxSeriesWidth,i=this.maxCateLineHeight,n=this.vanchart,r=n.renderer,a=this.dataSheetGroup,o=this.bounds.width,s=this.bounds.height,l={fill:"none",stroke:t.borderColor,"stroke-width":t.borderWidth};r.path().attr("d","M"+e+",0L"+o+",0L"+o+" "+s+"L0,"+s+"L0,"+i).style(l).addTo(a);for(var h=0,u=this.seriesNames.length;u>h;h++)r.line().attr("x1",0).attr("y1",i).attr("x2",o).attr("y2",i).style(l).addTo(a),i+=this.maxSeriesLineHeight[h];this._drawSeries()},_drawTableContent:function(){for(var t=this.vanchart,e=t.xAxis(),i=t.renderer,n=e._domain,a=e._dataDomain,o=this.getPlotBounds().width,s=o/n.length,l=-r.indexInArray(a,n[0])*s+this.maxSeriesWidth,c=t.isSupportAnimation()&&r.isSupportSVG(),d={fill:"none",stroke:this.options.borderColor,"stroke-width":this.options.borderWidth},f=0,p=a.length;p>f;f++){var g=this.showTextMap[a[f]],m=l+s*f;this._drawCategory(g,m,s),this._drawValues(g,m,s);var v={x1:m,y1:0,x2:m,y2:this.bounds.height};g._line=g._line||i.line(v).style(d).addTo(this.animationGroup),c?d3.select(g._line.node()).transition().duration(h).ease(u).attr("x1",m).attr("x2",m):g._line.attr(v)}},zoomRefresh:function(){this.calculateShowText(),this._drawTableContent()},_drawCategory:function(t,e,i){var n=t.categoryArray,a=this.vanchart.renderer;t._category=t._category||[];for(var o,s,l=this._categoryStyle(),c=r.getTextHeight(l),d=this.getTextPadding(),f=this._getStartY(n,l,this.maxCateLineHeight),p=this.vanchart.isSupportAnimation()&&r.isSupportSVG(),g=0;g<n.length;g++)o=e+i/2,s=f+(c+d)*g+c/2,t._category[g]=t._category[g]||a.text().attr({"text-anchor":"middle",dy:".32em",x:o,y:s}).style("margin-top","-0.53em").style(l).addTo(this.animationGroup),t._category[g].textContent(n[g]).vMiddle(),p?d3.select(t._category[g].node()).transition().duration(h).ease(u).attr("x",o).attr("y",s):t._category[g].attr("x",o).attr("y",s).vMiddle();for(var g=n.length;g<t._category.length;g++)t._category[g].remove();t._category.length=n.length},_drawValues:function(t,e,i){var n=this.vanchart.renderer,a=this._valueStyle(),o=r.getTextHeight(a),s=this.getTextPadding(),l=this.maxCateLineHeight,c=this.vanchart.isSupportAnimation()&&r.isSupportSVG();if(!t.value){t.value=[];for(var d=0,f=this.vanchart.series.length;f>d;d++)t.value.push({valueArray:[""]})}for(var p,g,m=0;m<t.value.length;m++){var v=t.value[m],y=this.maxSeriesLineHeight[m],_=v.valueArray;v._value=v._value||[];for(var x=l+this._getStartY(_,a,y),d=0;d<_.length;d++)p=e+i/2,g=x+(o+s)*d+o/2,v._value[d]=v._value[d]||n.text().attr({"text-anchor":"middle",dy:".32em",x:p,y:g}).style("margin-top","-0.53em").style(a).addTo(this.animationGroup),v._value[d].textContent(_[d]).vMiddle(),c?d3.select(v._value[d].node()).transition().duration(h).ease(u).attr("x",p).attr("y",g):v._value[d].attr("x",p).attr("y",g).vMiddle();for(var d=_.length;d<v._value.length;d++)v._value[d].remove();v._value.length=_.length,l+=y}},_drawSeries:function(){for(var t=this.vanchart.renderer,e=t.group().addTo(this.dataSheetGroup),i=this.seriesNames,n=this.maxSeriesWidth,a=this.maxCateLineHeight,s=16,l=a,h=this._seriesStyle(),u=r.getTextHeight(h),c=this.getTextPadding(),d=this.vanchart.series,f=(n+s)/2,p=0,g=i.length;g>p;p++){for(var m=i[p],v=this.maxSeriesLineHeight[p],y=l+this._getStartY(m,h,v)+.85*u,_=0;_<m.length;_++)t.text().attr("x",f).attr("text-anchor","middle").attr("y",y+(u+c)*_).textContent(m[_]).style(h).style("margin-top","-1em").addTo(e).vMiddle();var x=this.seriesIconType[p],b=o.getLegendIconSize(x).height;o.hasIcon(x)?t.path().addTo(e).attr("d",o.getLegendIconPath(x)).attr("transform","translate(2,"+((v-b)/2+l)+")").style({fill:this.vanchart.getDefaultSeriesColor(d[p].name)}):t.image({preserveAspectRatio:"none",x:2,y:(v-b)/2+l,width:12,height:12}).imageContent(x).addTo(e),l+=v}},_getStartY:function(t,e,i){var n=this.getTextPadding(),a=t.length,o=r.getTextHeight(e)*a+(a-1)*n;return(i-o)/2},remove:function(){this.dataSheetGroup&&this.dataSheetGroup.remove(),this.dataSheetGroup=null,this.showTextMap=null}});return s.register(s.DATA_SHEET_COMPONENT,g),g}),i("FullChartTypes",["require","./VanCharts","./VanChart","./Carousel","./chart/Bar","./chart/Pie","./chart/Line","./chart/Radar","./chart/TreeMap","./chart/Bubble","./chart/ForceBubble","./chart/Scatter","./chart/MultiPie","./chart/Gauge","./chart/Map","./chart/Funnel","./chart/WordCloud","./chart/LineMap","./component/Tooltip","./component/Axis","./component/GaugeAxis","./component/Legend","./component/Zoom","./component/ToolBar","./component/IntervalRangeLegend","./component/GradientRangeLegend","./component/Polar","./component/PolarAxis","./component/Title","./component/Geo","./component/DrillTools","./component/DataSheet","./component/TrendLine"],function(t){t("./VanCharts"),t("./VanChart"),t("./Carousel"),t("./chart/Bar"),t("./chart/Pie"),t("./chart/Line"),t("./chart/Radar"),t("./chart/TreeMap"),t("./chart/Bubble"),t("./chart/ForceBubble"),t("./chart/Scatter"),t("./chart/MultiPie"),t("./chart/Gauge"),t("./chart/Map"),t("./chart/Funnel"),t("./chart/WordCloud"),t("./chart/LineMap"),t("./component/Tooltip"),t("./component/Axis"),t("./component/GaugeAxis"),t("./component/Legend"),t("./component/Zoom"),t("./component/ToolBar"),t("./component/IntervalRangeLegend"),t("./component/GradientRangeLegend"),t("./component/Polar"),t("./component/PolarAxis"),t("./component/Title"),t("./component/Geo"),t("./component/DrillTools"),t("./component/DataSheet"),t("./component/TrendLine")});var n=e("VanCharts");return e("./VanChart"),e("./Carousel"),e("./chart/Bar"),e("./chart/Pie"),e("./chart/Line"),e("./chart/Radar"),e("./chart/TreeMap"),e("./chart/Bubble"),e("./chart/ForceBubble"),e("./chart/Scatter"),e("./chart/MultiPie"),e("./chart/Gauge"),e("./chart/Map"),e("./chart/Funnel"),e("./chart/WordCloud"),e("./chart/LineMap"),e("./component/Tooltip"),e("./component/Axis"),e("./component/GaugeAxis"),e("./component/Legend"),e("./component/Zoom"),e("./component/ToolBar"),e("./component/IntervalRangeLegend"),e("./component/GradientRangeLegend"),e("./component/Polar"),e("./component/PolarAxis"),e("./component/Title"),e("./component/Geo"),e("./component/DrillTools"),e("./component/DataSheet"),e("./component/TrendLine"),n});